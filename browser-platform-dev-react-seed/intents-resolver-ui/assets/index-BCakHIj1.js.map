{"version":3,"file":"index-BCakHIj1.js","sources":["../../node_modules/react/cjs/react.production.min.js","../../node_modules/react/index.js","../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/scheduler/cjs/scheduler.production.min.js","../../node_modules/scheduler/index.js","../../node_modules/react-dom/cjs/react-dom.production.min.js","../../node_modules/react-dom/index.js","../../node_modules/react-dom/client.js","../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../node_modules/prop-types/factoryWithThrowingShims.js","../../node_modules/prop-types/index.js","../../node_modules/@interopio/react-hooks/dist/es/index.js","../../node_modules/@interopio/browser/dist/browser.es.js","../../node_modules/@interopio/desktop/dist/desktop.es.js","../../node_modules/@interopio/intents-resolver-api/dist/intents-resolver-api.es.js","../../node_modules/@interopio/intents-resolver-ui-react/dist/esm/index.js","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};function X(){throw Error(\"act(...) is not supported in production builds of React.\");}\nexports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;exports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;\nexports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;exports.act=X;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=X;exports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};\nexports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};exports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};\nexports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};exports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.3.1\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),ca=require(\"scheduler\");function p(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+\"Capture\",b)}\nfunction ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}\nvar ia=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,la=\n{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction qa(a,b,c,d){if(null===b||\"undefined\"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(ra,\nsa);z[b]=new v(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});\nz.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}\nvar ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for(\"react.element\"),wa=Symbol.for(\"react.portal\"),ya=Symbol.for(\"react.fragment\"),za=Symbol.for(\"react.strict_mode\"),Aa=Symbol.for(\"react.profiler\"),Ba=Symbol.for(\"react.provider\"),Ca=Symbol.for(\"react.context\"),Da=Symbol.for(\"react.forward_ref\"),Ea=Symbol.for(\"react.suspense\"),Fa=Symbol.for(\"react.suspense_list\"),Ga=Symbol.for(\"react.memo\"),Ha=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar Ia=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var Ja=Symbol.iterator;function Ka(a){if(null===a||\"object\"!==typeof a)return null;a=Ja&&a[Ja]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);La=b&&b[1]||\"\"}return\"\\n\"+La+a}var Na=!1;\nfunction Oa(a,b){if(!a||Na)return\"\";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Ma(a):\"\"}\nfunction Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma(\"Lazy\");case 13:return Ma(\"Suspense\");case 19:return Ma(\"SuspenseList\");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return\"\"}}\nfunction Qa(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ya:return\"Fragment\";case wa:return\"Portal\";case Aa:return\"Profiler\";case za:return\"StrictMode\";case Ea:return\"Suspense\";case Fa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||\"Context\")+\".Consumer\";case Ba:return(a._context.displayName||\"Context\")+\".Provider\";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||\"Memo\";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}\nfunction Ra(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Qa(b);case 8:return b===za?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"string\":case \"undefined\":return a;case \"object\":return a;default:return\"\"}}\nfunction Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,\"checked\",b,!1)}\nfunction bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?cb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction db(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction cb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var eb=Array.isArray;\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}\nfunction lb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?kb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar mb,nb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(\"http://www.w3.org/2000/svg\"!==a.namespaceURI||\"innerHTML\"in a)a.innerHTML=b;else{mb=mb||document.createElement(\"div\");mb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,\nzoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(\"\"+b).trim():b+\"px\"}\nfunction sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=rb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if(\"object\"!==typeof b.dangerouslySetInnerHTML||!(\"__html\"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(p(62));}}\nfunction vb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}\nfunction Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,\"passive\",{get:function(){Lb=!0}});window.addEventListener(\"test\",Mb,Mb);window.removeEventListener(\"test\",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}\nfunction Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}\nfunction Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}\nvar ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&\"function\"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}\nvar oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;\nfunction tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}\nfunction Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction Sc(a,b){switch(a){case \"focusin\":case \"focusout\":Lc=null;break;case \"dragenter\":case \"dragleave\":Mc=null;break;case \"mouseover\":case \"mouseout\":Nc=null;break;case \"pointerover\":case \"pointerout\":Oc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Pc.delete(b.pointerId)}}\nfunction Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction Uc(a,b,c,d,e){switch(b){case \"focusin\":return Lc=Tc(Lc,a,b,c,d,e),!0;case \"dragenter\":return Mc=Tc(Mc,a,b,c,d,e),!0;case \"mouseover\":return Nc=Tc(Nc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}\nfunction ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}\nfunction bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;\nfunction ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}\nfunction fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;\nfunction Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}\nfunction jd(a){switch(a){case \"cancel\":case \"click\":case \"close\":case \"contextmenu\":case \"copy\":case \"cut\":case \"auxclick\":case \"dblclick\":case \"dragend\":case \"dragstart\":case \"drop\":case \"focusin\":case \"focusout\":case \"input\":case \"invalid\":case \"keydown\":case \"keypress\":case \"keyup\":case \"mousedown\":case \"mouseup\":case \"paste\":case \"pause\":case \"play\":case \"pointercancel\":case \"pointerdown\":case \"pointerup\":case \"ratechange\":case \"reset\":case \"resize\":case \"seeked\":case \"submit\":case \"touchcancel\":case \"touchend\":case \"touchstart\":case \"volumechange\":case \"change\":case \"selectionchange\":case \"textInput\":case \"compositionstart\":case \"compositionend\":case \"compositionupdate\":case \"beforeblur\":case \"afterblur\":case \"beforeinput\":case \"blur\":case \"fullscreenchange\":case \"focus\":case \"hashchange\":case \"popstate\":case \"select\":case \"selectstart\":return 1;case \"drag\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"mousemove\":case \"mouseout\":case \"mouseover\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"scroll\":case \"toggle\":case \"touchmove\":case \"wheel\":case \"mouseenter\":case \"mouseleave\":case \"pointerenter\":case \"pointerleave\":return 4;\ncase \"message\":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}\nfunction od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&\"CompositionEvent\"in window,be=null;ia&&\"documentMode\"in document&&(be=document.documentMode);var ce=ia&&\"TextEvent\"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge;\nfunction Ie(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nfunction Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,\nd);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});\"function\"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}\nvar Pe=ia&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nfunction Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var We={animationend:Ve(\"Animation\",\"AnimationEnd\"),animationiteration:Ve(\"Animation\",\"AnimationIteration\"),animationstart:Ve(\"Animation\",\"AnimationStart\"),transitionend:Ve(\"Transition\",\"TransitionEnd\")},Xe={},Ye={};\nia&&(Ye=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),\"TransitionEvent\"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze(\"animationend\"),af=Ze(\"animationiteration\"),bf=Ze(\"animationstart\"),cf=Ze(\"transitionend\"),df=new Map,ef=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");\nfunction ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,\"on\"+kf)}ff($e,\"onAnimationEnd\");ff(af,\"onAnimationIteration\");ff(bf,\"onAnimationStart\");ff(\"dblclick\",\"onDoubleClick\");ff(\"focusin\",\"onFocus\");ff(\"focusout\",\"onBlur\");ff(cf,\"onTransitionEnd\");ha(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);ha(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ha(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);\nha(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);fa(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));fa(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));fa(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);fa(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));fa(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));\nfa(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var lf=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),mf=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(lf));\nfunction nf(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}\nfunction D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+\"__bubble\";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf=\"_reactListening\"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){\"selectionchange\"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf(\"selectionchange\",!1,b))}}\nfunction pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];\na:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":n=\"focus\";k=Fd;break;case \"focusout\":n=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var t=0!==(b&4),J=!t&&\"scroll\"===a,x=t?null!==h?h+\"Capture\":null:h;t=[];for(var w=d,u;null!==\nw;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==\nn&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F=\"onMouseLeave\";x=\"onMouseEnter\";w=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)t=Td,F=\"onPointerLeave\",x=\"onPointerEnter\",w=\"pointer\";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+\"leave\",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+\"enter\",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=\nvf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);\"focusout\"===a&&(xa=h._wrapperState)&&\nxa.controlled&&\"number\"===h.type&&cb(h,\"number\",h.value)}xa=d?ue(d):window;switch(a){case \"focusin\":if(me(xa)||\"true\"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case \"compositionstart\":var ba=\"onCompositionStart\";break b;case \"compositionend\":ba=\"onCompositionEnd\";\nbreak b;case \"compositionupdate\":ba=\"onCompositionUpdate\";break b}ba=void 0}else ie?ge(a,c)&&(ba=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(ba=\"onCompositionStart\");ba&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==ba?\"onCompositionEnd\"===ba&&ie&&($a=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),\n0<d.length&&(e=new Ld(\"onBeforeInput\",\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\\r\\n?/g,yf=/\\u0000|\\uFFFD/g;function zf(a){return(\"string\"===typeof a?a:\"\"+a).replace(xf,\"\\n\").replace(yf,\"\")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}\nvar Cf=null,Df=null;function Ef(a,b){return\"textarea\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}\nvar Ff=\"function\"===typeof setTimeout?setTimeout:void 0,Gf=\"function\"===typeof clearTimeout?clearTimeout:void 0,Hf=\"function\"===typeof Promise?Promise:void 0,Jf=\"function\"===typeof queueMicrotask?queueMicrotask:\"undefined\"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}\nfunction Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,\"/$\"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else\"$\"!==c&&\"$?\"!==c&&\"$!\"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if(\"$\"===b||\"$!\"===b||\"$?\"===b)break;if(\"/$\"===b)return null}}return a}\nfunction Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of=\"__reactFiber$\"+Nf,Pf=\"__reactProps$\"+Nf,uf=\"__reactContainer$\"+Nf,of=\"__reactEvents$\"+Nf,Qf=\"__reactListeners$\"+Nf,Rf=\"__reactHandles$\"+Nf;\nfunction Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}\nfunction E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||\"Unknown\",e));return A({},c,d)}\nfunction cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}\nfunction jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg=\"\";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}\nfunction ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;\nfunction Ag(a,b){var c=Bg(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=\nnull,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}\nfunction Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b=\"head\"!==b&&\"body\"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}yg=\nnull}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;\nfunction Lg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}\nfunction Mg(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function Ng(a){var b=a._init;return b(a._payload)}\nfunction Og(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Pg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Qg(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===Ha&&Ng(f)===b.type))return d=e(b,c.props),d.ref=Lg(a,b,c),d.return=a,d;d=Rg(c.type,c.key,c.props,null,a.mode,d);d.ref=Lg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=Sg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Tg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=Qg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=Rg(b.type,b.key,b.props,null,a.mode,c),\nc.ref=Lg(a,null,b),c.return=a,c;case wa:return b=Sg(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Tg(b,a.mode,c,null),b.return=a,b;Mg(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,\nb,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);Mg(a,c)}return null}function y(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);Mg(b,d)}return null}\nfunction n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===\nx.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if(\"function\"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,\nm),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=\nf.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===Ha&&Ng(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=Lg(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Tg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Rg(f.type,f.key,f.props,null,a.mode,h),h.ref=Lg(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==\nd;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=Sg(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);Mg(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):\n(c(a,d),d=Qg(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var b=Wg.current;E(Wg);a._currentValue=b}function bh(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}\nfunction ch(a,b){Xg=a;Zg=Yg=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(dh=!0),a.firstContext=null)}function eh(a){var b=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:b,next:null},null===Yg){if(null===Xg)throw Error(p(308));Yg=a;Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return b}var fh=null;function gh(a){null===fh?fh=[a]:fh.push(a)}\nfunction hh(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,gh(b)):(c.next=e.next,e.next=c);b.interleaved=c;return ih(a,d)}function ih(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}\nfunction lh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction nh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return ih(a,c)}e=d.interleaved;null===e?(b.next=b,gh(d)):(b.next=e.next,e.next=b);d.interleaved=b;return ih(a,c)}function oh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nfunction ph(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction qh(a,b,c,d){var e=a.updateQueue;jh=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if(\"function\"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r=\"function\"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:jh=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;\nh=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);rh|=g;a.lanes=g;a.memoizedState=q}}\nfunction sh(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(p(191,e));e.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p(174));return a}\nfunction yh(a,b){G(wh,b);G(vh,a);G(uh,th);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(uh);G(uh,b)}function zh(){E(uh);E(vh);E(wh)}function Ah(a){xh(wh.current);var b=xh(uh.current);var c=lb(b,a.type);b!==c&&(G(vh,a),G(uh,c))}function Bh(a){vh.current===a&&(E(uh),E(vh))}var L=Uf(0);\nfunction Ch(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Dh=[];\nfunction Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321));}function Mh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Nh(a,b,c,d,e,f){Hh=f;M=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Fh.current=null===a||null===a.memoizedState?Oh:Ph;a=c(d,e);if(Jh){f=0;do{Jh=!1;Kh=0;if(25<=f)throw Error(p(301));f+=1;O=N=null;b.updateQueue=null;Fh.current=Qh;a=c(d,e)}while(Jh)}Fh.current=Rh;b=null!==N&&null!==N.next;Hh=0;O=N=M=null;Ih=!1;if(b)throw Error(p(300));return a}function Sh(){var a=0!==Kh;Kh=0;return a}\nfunction Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===O?M.memoizedState=O=a:O=O.next=a;return O}function Uh(){if(null===N){var a=M.alternate;a=null!==a?a.memoizedState:null}else a=N.next;var b=null===O?M.memoizedState:O.next;if(null!==b)O=b,N=a;else{if(null===a)throw Error(p(310));N=a;a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null};null===O?M.memoizedState=O=a:O=O.next=a}return O}\nfunction Vh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Wh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=N,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Hh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;M.lanes|=m;rh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(dh=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,M.lanes|=f,rh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction Xh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(dh=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function Yh(){}\nfunction Zh(a,b){var c=M,d=Uh(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,dh=!0);d=d.queue;$h(ai.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==O&&O.memoizedState.tag&1){c.flags|=2048;bi(9,ci.bind(null,c,d,e,b),void 0,null);if(null===Q)throw Error(p(349));0!==(Hh&30)||di(c,b,e)}return e}function di(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction ci(a,b,c,d){b.value=c;b.getSnapshot=d;ei(b)&&fi(a)}function ai(a,b,c){return c(function(){ei(b)&&fi(a)})}function ei(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function fi(a){var b=ih(a,1);null!==b&&gi(b,a,1,-1)}\nfunction hi(a){var b=Th();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a};b.queue=a;a=a.dispatch=ii.bind(null,M,a);return[b.memoizedState,a]}\nfunction bi(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function ji(){return Uh().memoizedState}function ki(a,b,c,d){var e=Th();M.flags|=a;e.memoizedState=bi(1|b,c,void 0,void 0===d?null:d)}\nfunction li(a,b,c,d){var e=Uh();d=void 0===d?null:d;var f=void 0;if(null!==N){var g=N.memoizedState;f=g.destroy;if(null!==d&&Mh(d,g.deps)){e.memoizedState=bi(b,c,f,d);return}}M.flags|=a;e.memoizedState=bi(1|b,c,f,d)}function mi(a,b){return ki(8390656,8,a,b)}function $h(a,b){return li(2048,8,a,b)}function ni(a,b){return li(4,2,a,b)}function oi(a,b){return li(4,4,a,b)}\nfunction pi(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function qi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return li(4,4,pi.bind(null,b,a),c)}function ri(){}function si(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction ti(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function ui(a,b,c){if(0===(Hh&21))return a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=c;He(c,b)||(c=yc(),M.lanes|=c,rh|=c,a.baseState=!0);return b}function vi(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Gh.transition;Gh.transition={};try{a(!1),b()}finally{C=c,Gh.transition=d}}function wi(){return Uh().memoizedState}\nfunction xi(a,b,c){var d=yi(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,c);else if(c=hh(a,b,c,d),null!==c){var e=R();gi(c,a,d,e);Bi(c,b,d)}}\nfunction ii(a,b,c){var d=yi(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,gh(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=hh(a,b,e,d);null!==c&&(e=R(),gi(c,a,d,e),Bi(c,b,d))}}\nfunction zi(a){var b=a.alternate;return a===M||null!==b&&b===M}function Ai(a,b){Jh=Ih=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Bi(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nvar Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,b){Th().memoizedState=[a,void 0===b?null:b];return a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ki(4194308,\n4,pi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ki(4194308,4,a,b)},useInsertionEffect:function(a,b){return ki(4,2,a,b)},useMemo:function(a,b){var c=Th();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Th();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=xi.bind(null,M,a);return[d.memoizedState,a]},useRef:function(a){var b=\nTh();a={current:a};return b.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),b=a[0];a=vi.bind(null,a[1]);Th().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=M,e=Th();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===Q)throw Error(p(349));0!==(Hh&30)||di(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;mi(ai.bind(null,d,\nf,a),[a]);d.flags|=2048;bi(9,ci.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=Th(),b=Q.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=Kh++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Lh++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},\nuseDebugValue:ri,useDeferredValue:function(a){var b=Uh();return ui(b,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var b=Uh();return null===\nN?b.memoizedState=a:ui(b,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}function Di(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=R(),d=\nyi(a),e=mh(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=nh(a,e,d);null!==b&&(gi(b,a,d,c),oh(b,a,d))}};function Fi(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}\nfunction Gi(a,b,c){var d=!1,e=Vf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=eh(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Ei;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Hi(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Ei.enqueueReplaceState(b,b.state,null)}\nfunction Ii(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs={};kh(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=eh(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Di(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Ei.enqueueReplaceState(e,e.state,null),qh(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}function Ji(a,b){try{var c=\"\",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e,digest:null}}\nfunction Ki(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}function Li(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Mi=\"function\"===typeof WeakMap?WeakMap:Map;function Ni(a,b,c){c=mh(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Oi||(Oi=!0,Pi=d);Li(a,b)};return c}\nfunction Qi(a,b,c){c=mh(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Li(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){Li(a,b);\"function\"!==typeof d&&(null===Ri?Ri=new Set([this]):Ri.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Si(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Mi;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ti.bind(null,a,b,c),b.then(a,a))}function Ui(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction Vi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=mh(-1,1),b.tag=2,nh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,b,c,d){b.child=null===a?Vg(b,null,c,d):Ug(b,a.child,c,d)}\nfunction Yi(a,b,c,d,e){c=c.render;var f=b.ref;ch(b,e);d=Nh(a,b,c,d,f,e);c=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&c&&vg(b);b.flags|=1;Xi(a,b,d,e);return b.child}\nfunction $i(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!aj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,bj(a,b,f,d,e);a=Rg(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return Zi(a,b,e)}b.flags|=1;a=Pg(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction bj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(dh=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(dh=!0);else return b.lanes=a.lanes,Zi(a,b,e)}return cj(a,b,c,d,e)}\nfunction dj(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(ej,fj),fj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(ej,fj);fj|=d}else null!==\nf?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(ej,fj),fj|=d;Xi(a,b,e,c);return b.child}function gj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function cj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);ch(b,e);c=Nh(a,b,c,d,f,e);d=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&d&&vg(b);b.flags|=1;Xi(a,b,c,e);return b.child}\nfunction hj(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;ch(b,e);if(null===b.stateNode)ij(a,b),Gi(b,c,d),Ii(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=eh(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;q||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||\n(h!==d||k!==l)&&Hi(b,g,d,l);jh=!1;var r=b.memoizedState;g.state=r;qh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||jh?(\"function\"===typeof m&&(Di(b,c,m,d),k=b.memoizedState),(h=jh||Fi(b,c,h,d,r,k,l))?(q||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&(b.flags|=4194308)):\n(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;lh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Ci(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=eh(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m=\"function\"===typeof y||\"function\"===typeof g.getSnapshotBeforeUpdate)||\n\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&Hi(b,g,d,k);jh=!1;r=b.memoizedState;g.state=r;qh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||jh?(\"function\"===typeof y&&(Di(b,c,y,d),n=b.memoizedState),(l=jh||Fi(b,c,l,d,r,n,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&\ng.UNSAFE_componentWillUpdate(d,n,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===\na.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return jj(a,b,c,d,f,e)}\nfunction jj(a,b,c,d,e,f){gj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),Zi(a,b,f);d=b.stateNode;Wi.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Ug(b,a.child,null,f),b.child=Ug(b,null,h,f)):Xi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function kj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);yh(a,b.containerInfo)}\nfunction lj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Xi(a,b,c,d);return b.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}\nfunction oj(a,b,c){var d=b.pendingProps,e=L.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(L,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:\"$!\"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:\"hidden\",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=\ng):f=pj(g,d,0,null),a=Tg(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=nj(c),b.memoizedState=mj,a):qj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return rj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:\"hidden\",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=Pg(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=Pg(h,f):(f=Tg(f,g,c,null),f.flags|=2);f.return=\nb;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?nj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=mj;return d}f=a.child;a=f.sibling;d=Pg(f,{mode:\"visible\",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}\nfunction qj(a,b){b=pj({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function sj(a,b,c,d){null!==d&&Jg(d);Ug(b,a.child,null,c);a=qj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction rj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Ki(Error(p(422))),sj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=pj({mode:\"visible\",children:d.children},e,0,null);f=Tg(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Ug(b,a.child,null,g);b.child.memoizedState=nj(g);b.memoizedState=mj;return f}if(0===(b.mode&1))return sj(a,b,g,null);if(\"$!\"===e.data){d=e.nextSibling&&e.nextSibling.dataset;\nif(d)var h=d.dgst;d=h;f=Error(p(419));d=Ki(f,d,void 0);return sj(a,b,g,d)}h=0!==(g&a.childLanes);if(dh||h){d=Q;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;\n0!==e&&e!==f.retryLane&&(f.retryLane=e,ih(a,e),gi(d,a,e,-1))}tj();d=Ki(Error(p(421)));return sj(a,b,g,d)}if(\"$?\"===e.data)return b.flags|=128,b.child=a.child,b=uj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=qj(b,d.children);b.flags|=4096;return b}function vj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);bh(a.return,b,c)}\nfunction wj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction xj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Xi(a,b,d.children,c);d=L.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&vj(a,c,b);else if(19===a.tag)vj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(L,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Ch(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);wj(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Ch(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}wj(b,!0,c,null,f);break;case \"together\":wj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction ij(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function Zi(a,b,c){null!==a&&(b.dependencies=a.dependencies);rh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=Pg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction yj(a,b,c){switch(b.tag){case 3:kj(b);Ig();break;case 5:Ah(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:yh(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Wg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(L,L.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return oj(a,b,c);G(L,L.current&1);a=Zi(a,b,c);return null!==a?a.sibling:null}G(L,L.current&1);break;case 19:d=0!==(c&\nb.childLanes);if(0!==(a.flags&128)){if(d)return xj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(L,L.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,dj(a,b,c)}return Zi(a,b,c)}var zj,Aj,Bj,Cj;\nzj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Aj=function(){};\nBj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;xh(uh.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"select\":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&\n(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,\nc)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ea.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&D(\"scroll\",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Cj=function(a,b,c,d){c!==d&&(b.flags|=4)};\nfunction Dj(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Ej(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;zh();E(Wf);E(H);Eh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Fj(zg),zg=null));Aj(a,b);S(b);return null;case 5:Bh(b);var e=xh(wh.current);\nc=b.type;if(null!==a&&null!=b.stateNode)Bj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case \"dialog\":D(\"cancel\",d);D(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",d);break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],d);break;case \"source\":D(\"error\",d);break;case \"img\":case \"image\":case \"link\":D(\"error\",\nd);D(\"load\",d);break;case \"details\":D(\"toggle\",d);break;case \"input\":Za(d,f);D(\"invalid\",d);break;case \"select\":d._wrapperState={wasMultiple:!!f.multiple};D(\"invalid\",d);break;case \"textarea\":hb(d,f),D(\"invalid\",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,\nh,a),e=[\"children\",\"\"+h]):ea.hasOwnProperty(g)&&null!=h&&\"onScroll\"===g&&D(\"scroll\",d)}switch(c){case \"input\":Va(d);db(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;\"http://www.w3.org/1999/xhtml\"===a&&(a=kb(c));\"http://www.w3.org/1999/xhtml\"===a?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\n\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;zj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case \"dialog\":D(\"cancel\",a);D(\"close\",a);e=d;break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case \"source\":D(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":D(\"error\",\na);D(\"load\",a);e=d;break;case \"details\":D(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);D(\"invalid\",a);break;case \"option\":e=d;break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D(\"invalid\",a);break;case \"textarea\":hb(a,d);e=gb(a,d);D(\"invalid\",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?sb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==\nc||\"\"!==k)&&ob(a,k):\"number\"===typeof k&&ob(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ea.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&D(\"scroll\",a):null!=k&&ta(a,f,k,g))}switch(c){case \"input\":Va(a);db(a,d,!1);break;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,\n!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case \"button\":case \"input\":case \"select\":case \"textarea\":d=!!d.autoFocus;break a;case \"img\":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Cj(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(p(166));c=xh(wh.current);xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=\nxg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(L);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===\na){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Fj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(L.current&1)?0===T&&(T=3):tj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return zh(),\nAj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return ah(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(L);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Dj(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Ch(a);if(null!==g){b.flags|=128;Dj(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,\ng=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(L,L.current&1|2);return b.child}a=\na.sibling}null!==f.tail&&B()>Gj&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304)}else{if(!d)if(a=Ch(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Dj(f,!0),null===f.tail&&\"hidden\"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Gj&&1073741824!==c&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=\nb,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=L.current,G(L,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Hj(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(fj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}\nfunction Ij(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return zh(),E(Wf),E(H),Eh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Bh(b),null;case 13:E(L);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(b.type._context),null;case 22:case 23:return Hj(),\nnull;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=\"function\"===typeof WeakSet?WeakSet:Set,V=null;function Lj(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Mj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Nj=!1;\nfunction Oj(a,b){Cf=dd;a=Me();if(Ne(a)){if(\"selectionStart\"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=\nq.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;\ncase 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Ci(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent=\"\":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Nj;Nj=!1;return n}\nfunction Pj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Mj(b,c,f)}e=e.next}while(e!==d)}}function Qj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Rj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Sj(a){var b=a.alternate;null!==b&&(a.alternate=null,Sj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Tj(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Uj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Tj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Vj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Vj(a,b,c),a=a.sibling;null!==a;)Vj(a,b,c),a=a.sibling}\nfunction Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}var X=null,Xj=!1;function Yj(a,b,c){for(c=c.child;null!==c;)Zj(a,b,c),c=c.sibling}\nfunction Zj(a,b,c){if(lc&&\"function\"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Lj(c,b);case 6:var d=X,e=Xj;X=null;Yj(a,b,c);X=d;Xj=e;null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Xj;X=c.stateNode.containerInfo;Xj=!0;\nYj(a,b,c);X=d;Xj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Mj(c,b,g):0!==(f&4)&&Mj(c,b,g));e=e.next}while(e!==d)}Yj(a,b,c);break;case 1:if(!U&&(Lj(c,b),d=c.stateNode,\"function\"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Yj(a,b,c);break;case 21:Yj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==\nc.memoizedState,Yj(a,b,c),U=d):Yj(a,b,c);break;default:Yj(a,b,c)}}function ak(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Kj);b.forEach(function(b){var d=bk.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction ck(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Xj=!1;break a;case 3:X=h.stateNode.containerInfo;Xj=!0;break a;case 4:X=h.stateNode.containerInfo;Xj=!0;break a}h=h.return}if(null===X)throw Error(p(160));Zj(f,g,e);X=null;Xj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)dk(b,a),b=b.sibling}\nfunction dk(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ck(b,a);ek(a);if(d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(t){W(a,a.return,t)}try{Pj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);break;case 5:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,\"\")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;\na.updateQueue=null;if(null!==k)try{\"input\"===h&&\"radio\"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];\"style\"===m?sb(e,q):\"dangerouslySetInnerHTML\"===m?nb(e,q):\"children\"===m?ob(e,q):ta(e,m,q,l)}switch(h){case \"input\":bb(e,f);break;case \"textarea\":ib(e,f);break;case \"select\":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,\nf.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:\"\",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:ck(b,a);ek(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:ck(b,a);ek(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:ck(b,a);ek(a);break;case 13:ck(b,a);ek(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||\nnull!==e.alternate&&null!==e.alternate.memoizedState||(fk=B()));d&4&&ak(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,ck(b,a),U=l):ck(b,a);ek(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Pj(4,r,r.return);break;case 1:Lj(r,r.return);var n=r.stateNode;if(\"function\"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=\nb.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Lj(r,r.return);break;case 22:if(null!==r.memoizedState){gk(q);continue}}null!==y?(y.return=r,V=y):gk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty(\"display\")?k.display:null,h.style.display=\nrb(\"display\",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?\"\":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:ck(b,a);ek(a);d&4&&ak(a);break;case 21:break;default:ck(b,\na),ek(a)}}function ek(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Tj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,\"\"),d.flags&=-33);var f=Uj(a);Wj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Uj(a);Vj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function hk(a,b,c){V=a;ik(a,b,c)}\nfunction ik(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Jj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Jj;var l=U;Jj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?jk(e):null!==k?(k.return=g,V=k):jk(e);for(;null!==f;)V=f,ik(f,b,c),f=f.sibling;V=e;Jj=h;U=l}kk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):kk(a,b,c)}}\nfunction kk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Qj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Ci(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&sh(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nb.child.stateNode;break;case 1:c=b.child.stateNode}sh(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case \"button\":case \"input\":case \"select\":case \"textarea\":k.autoFocus&&c.focus();break;case \"img\":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;\ndefault:throw Error(p(163));}U||b.flags&512&&Rj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function gk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}\nfunction jk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Qj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Rj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Rj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}\nvar lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=Infinity,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return 0!==(K&6)?B():-1!==Ak?Ak:Ak=B()}\nfunction yi(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Bk&&(Bk=yc()),Bk;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function gi(a,b,c,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==Q)a===Q&&(0===(K&2)&&(qk|=c),4===T&&Ck(a,Z)),Dk(a,d),1===c&&0===K&&0===(b.mode&1)&&(Gj=B()+500,fg&&jg())}\nfunction Dk(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===Q?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Gk(a,b){Ak=-1;Bk=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc(a,a===Q?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Ik(a,d);else{b=d;var e=K;K|=2;var f=Jk();if(Q!==a||Z!==b)uk=null,Gj=B()+500,Kk(a,b);do try{Lk();break}catch(h){Mk(a,h)}while(1);$g();mk.current=f;K=e;null!==Y?b=0:(Q=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Nk(a,e)));if(1===b)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;if(6===b)Ck(a,d);\nelse{e=a.current.alternate;if(0===(d&30)&&!Ok(e)&&(b=Ik(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Nk(a,f))),1===b))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Pk(a,tk,uk);break;case 3:Ck(a,d);if((d&130023424)===d&&(b=fk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){R();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),b);break}Pk(a,tk,uk);break;case 4:Ck(a,d);if((d&4194240)===\nd)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*lk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p(329));}}}Dk(a,B());return a.callbackNode===c?Gk.bind(null,a):null}\nfunction Nk(a,b){var c=sk;a.current.memoizedState.isDehydrated&&(Kk(a,b).flags|=256);a=Ik(a,b);2!==a&&(b=tk,tk=c,null!==b&&Fj(b));return a}function Fj(a){null===tk?tk=a:tk.push.apply(tk,a)}\nfunction Ok(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Ck(a,b){b&=~rk;b&=~qk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Ek(a){if(0!==(K&6))throw Error(p(327));Hk();var b=uc(a,0);if(0===(b&1))return Dk(a,B()),null;var c=Ik(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Nk(a,d))}if(1===c)throw c=pk,Kk(a,0),Ck(a,b),Dk(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Pk(a,tk,uk);Dk(a,B());return null}\nfunction Qk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Gj=B()+500,fg&&jg())}}function Rk(a){null!==wk&&0===wk.tag&&0===(K&6)&&Hk();var b=K;K|=1;var c=ok.transition,d=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=d,ok.transition=c,K=b,0===(K&6)&&jg()}}function Hj(){fj=ej.current;E(ej)}\nfunction Kk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:zh();E(Wf);E(H);Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}Q=a;Y=a=Pg(a.current,null);Z=fj=b;T=0;pk=null;rk=qk=rh=0;tk=sk=null;if(null!==fh){for(b=\n0;b<fh.length;b++)if(c=fh[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}fh=null}return a}\nfunction Mk(a,b){do{var c=Y;try{$g();Fh.current=Rh;if(Ih){for(var d=M.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Ih=!1}Hh=0;O=N=M=null;Jh=!1;Kh=0;nk.current=null;if(null===c||null===c.return){T=1;pk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Ui(g);if(null!==y){y.flags&=-257;Vi(y,g,h,f,b);y.mode&1&&Si(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Si(f,l,b);tj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Ui(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Vi(J,g,h,f,b);Jg(Ji(k,h));break a}}f=k=Ji(k,h);4!==T&&(T=2);null===sk?sk=[f]:sk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;\nb&=-b;f.lanes|=b;var x=Ni(f,k,b);ph(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Ri||!Ri.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Qi(f,h,b);ph(f,F);break a}}f=f.return}while(null!==f)}Sk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Jk(){var a=mk.current;mk.current=Rh;return null===a?Rh:a}\nfunction tj(){if(0===T||3===T||2===T)T=4;null===Q||0===(rh&268435455)&&0===(qk&268435455)||Ck(Q,Z)}function Ik(a,b){var c=K;K|=2;var d=Jk();if(Q!==a||Z!==b)uk=null,Kk(a,b);do try{Tk();break}catch(e){Mk(a,e)}while(1);$g();K=c;mk.current=d;if(null!==Y)throw Error(p(261));Q=null;Z=0;return T}function Tk(){for(;null!==Y;)Uk(Y)}function Lk(){for(;null!==Y&&!cc();)Uk(Y)}function Uk(a){var b=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps;null===b?Sk(a):Y=b;nk.current=null}\nfunction Sk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Ej(c,b,fj),null!==c){Y=c;return}}else{c=Ij(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Pk(a,b,c){var d=C,e=ok.transition;try{ok.transition=null,C=1,Wk(a,b,c,d)}finally{ok.transition=e,C=d}return null}\nfunction Wk(a,b,c,d){do Hk();while(null!==wk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===Q&&(Y=Q=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||vk||(vk=!0,Fk(hc,function(){Hk();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=ok.transition;ok.transition=null;\nvar g=C;C=1;var h=K;K|=4;nk.current=null;Oj(a,c);dk(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;hk(c,a,e);dc();K=h;C=g;ok.transition=f}else a.current=c;vk&&(vk=!1,wk=a,xk=e);f=a.pendingLanes;0===f&&(Ri=null);mc(c.stateNode,d);Dk(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;0!==(xk&1)&&0!==a.tag&&Hk();f=a.pendingLanes;0!==(f&1)?a===zk?yk++:(yk=0,zk=a):yk=0;jg();return null}\nfunction Hk(){if(null!==wk){var a=Dc(xk),b=ok.transition,c=C;try{ok.transition=null;C=16>a?16:a;if(null===wk)var d=!1;else{a=wk;wk=null;xk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Pj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Sj(m);if(m===\nl){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Pj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&\"function\"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,ok.transition=b}}return!1}function Xk(a,b,c){b=Ji(c,b);b=Ni(a,b,1);a=nh(a,b,1);b=R();null!==a&&(Ac(a,1,b),Dk(a,b))}\nfunction W(a,b,c){if(3===a.tag)Xk(a,a,c);else for(;null!==b;){if(3===b.tag){Xk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ri||!Ri.has(d))){a=Ji(c,a);a=Qi(b,a,1);b=nh(b,a,1);a=R();null!==b&&(Ac(b,1,a),Dk(b,a));break}}b=b.return}}\nfunction Ti(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=R();a.pingedLanes|=a.suspendedLanes&c;Q===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-fk?Kk(a,0):rk|=c);Dk(a,b)}function Yk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=R();a=ih(a,b);null!==a&&(Ac(a,b,c),Dk(a,c))}function uj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Yk(a,c)}\nfunction bk(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Yk(a,c)}var Vk;\nVk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)dh=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return dh=!1,yj(a,b,c);dh=0!==(a.flags&131072)?!0:!1}else dh=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;ij(a,b);a=b.pendingProps;var e=Yf(b,H.current);ch(b,c);e=Nh(null,b,d,a,e,c);var f=Sh();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=\nnull,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,kh(b),e.updater=Ei,b.stateNode=e,e._reactInternals=b,Ii(b,d,a,c),b=jj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Xi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{ij(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=Zk(d);a=Ci(d,a);switch(e){case 0:b=cj(null,b,d,a,c);break a;case 1:b=hj(null,b,d,a,c);break a;case 11:b=Yi(null,b,d,a,c);break a;case 14:b=$i(null,b,d,Ci(d.type,a),c);break a}throw Error(p(306,\nd,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),cj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),hj(a,b,d,e,c);case 3:a:{kj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;lh(a,b);qh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=\nf,b.memoizedState=f,b.flags&256){e=Ji(Error(p(423)),b);b=lj(a,b,d,c,e);break a}else if(d!==e){e=Ji(Error(p(424)),b);b=lj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Vg(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=Zi(a,b,c);break a}Xi(a,b,d,c)}b=b.child}return b;case 5:return Ah(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),\ngj(a,b),Xi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return oj(a,b,c);case 4:return yh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Ug(b,null,d,c):Xi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),Yi(a,b,d,e,c);case 7:return Xi(a,b,b.pendingProps,c),b.child;case 8:return Xi(a,b,b.pendingProps.children,c),b.child;case 12:return Xi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;\ng=e.value;G(Wg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=Zi(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=mh(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);bh(f.return,\nc,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);bh(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Xi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,ch(b,c),e=eh(e),d=d(e),b.flags|=1,Xi(a,b,d,c),\nb.child;case 14:return d=b.type,e=Ci(d,b.pendingProps),e=Ci(d.type,e),$i(a,b,d,e,c);case 15:return bj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),ij(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,ch(b,c),Gi(b,d,e),Ii(b,d,e,c),jj(null,b,d,!0,a,c);case 19:return xj(a,b,c);case 22:return dj(a,b,c)}throw Error(p(156,b.tag));};function Fk(a,b){return ac(a,b)}\nfunction $k(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new $k(a,b,c,d)}function aj(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction Zk(a){if(\"function\"===typeof a)return aj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}\nfunction Pg(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Rg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)aj(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ya:return Tg(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return pj(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;\nbreak a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,\"\"));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Tg(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function pj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function Qg(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}\nfunction Sg(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction al(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=\nnull}function bl(a,b,c,d,e,f,g,h,k){a=new al(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};kh(f);return a}function cl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction dl(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}\nfunction el(a,b,c,d,e,f,g,h,k){a=bl(c,d,!0,a,e,f,g,h,k);a.context=dl(null);c=a.current;d=R();e=yi(c);f=mh(d,e);f.callback=void 0!==b&&null!==b?b:null;nh(c,f,e);a.current.lanes=e;Ac(a,e,d);Dk(a,d);return a}function fl(a,b,c,d){var e=b.current,f=R(),g=yi(e);c=dl(c);null===b.context?b.context=c:b.pendingContext=c;b=mh(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=nh(e,b,g);null!==a&&(gi(a,e,g,f),oh(a,e,g));return g}\nfunction gl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function il(a,b){hl(a,b);(a=a.alternate)&&hl(a,b)}function jl(){return null}var kl=\"function\"===typeof reportError?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}\nml.prototype.render=ll.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));fl(a,b,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Rk(function(){fl(null,a,null,null)});b[uf]=null}};function ml(a){this._internalRoot=a}\nml.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function nl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function pl(){}\nfunction ql(a,b,c,d,e){if(e){if(\"function\"===typeof d){var f=d;d=function(){var a=gl(g);f.call(a)}}var g=el(b,d,a,0,null,!1,!1,\"\",pl);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Rk();return g}for(;e=a.lastChild;)a.removeChild(e);if(\"function\"===typeof d){var h=d;d=function(){var a=gl(k);h.call(a)}}var k=bl(a,0,!1,null,null,!1,!1,\"\",pl);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Rk(function(){fl(b,k,c,d)});return k}\nfunction rl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if(\"function\"===typeof e){var h=e;e=function(){var a=gl(g);h.call(a)}}fl(b,g,a,e)}else g=ql(c,b,a,e,d);return gl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Dk(b,B()),0===(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var b=ih(a,1);if(null!==b){var c=R();gi(b,a,1,c)}}),il(a,1)}};\nFc=function(a){if(13===a.tag){var b=ih(a,134217728);if(null!==b){var c=R();gi(b,a,134217728,c)}il(a,134217728)}};Gc=function(a){if(13===a.tag){var b=yi(a),c=ih(a,b);if(null!==c){var d=R();gi(c,a,b,d)}il(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};\nyb=function(a,b,c){switch(b){case \"input\":bb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Qk;Hb=Rk;\nvar sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"};\nvar ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||\njl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;\nexports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(b))throw Error(p(200));return cl(a,b,null,c)};exports.createRoot=function(a,b){if(!nl(a))throw Error(p(299));var c=!1,d=\"\",e=kl;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=bl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ll(b)};\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(\",\");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Rk(a)};exports.hydrate=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!0,c)};\nexports.hydrateRoot=function(a,b,c){if(!nl(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f=\"\",g=kl;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=el(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,\ne);return new ml(b)};exports.render=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Qk;\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!ol(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return rl(a,b,c,!1,d)};exports.version=\"18.3.1-next-f1338f8080-20240426\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import React, { useState, useEffect, createContext, memo, useContext } from 'react';\nimport { node, object } from 'prop-types';\n\nconst extractErrorMsg = (error) => {\n    const errorMessage = error.message ? JSON.stringify(error.message) : JSON.stringify(error);\n    const stringError = typeof error === \"string\" ? error : errorMessage;\n    return stringError;\n};\n\nconst useIOConnectInit = (settings, onInitError) => {\n    const [io, setIOConnect] = useState(null);\n    useEffect(() => {\n        const initialize = async () => {\n            try {\n                if (settings.browser && settings.browserPlatform) {\n                    throw new Error(\"Cannot initialize, because the settings are over-specified: defined are both browser and browserPlatform. Please set one or the other\");\n                }\n                const isDesktop = (typeof window.glue42gd !== \"undefined\") || (typeof window.iodesktop !== \"undefined\");\n                if (isDesktop) {\n                    const factory = settings.desktop?.factory || settings.browser?.factory || settings.browserPlatform?.factory || window.Glue;\n                    const config = settings.desktop?.config || settings.browser?.config || settings.browserPlatform?.config;\n                    const factoryResult = await factory(config);\n                    setIOConnect(factoryResult.io || factoryResult.glue || factoryResult);\n                    return;\n                }\n                const config = settings.browser?.config || settings.browserPlatform?.config;\n                const factory = settings.browser?.factory || settings.browserPlatform?.factory || window.IOBrowser || window.IOBrowserPlatform;\n                const factoryResult = await factory(config);\n                setIOConnect(factoryResult.io || factoryResult.glue || factoryResult);\n            }\n            catch (error) {\n                console.error(error);\n                onInitError?.(error instanceof Error ? error : new Error(extractErrorMsg(error)));\n            }\n        };\n        initialize();\n    }, []);\n    return io;\n};\n\nconst IOConnectContext = createContext(null);\nconst IOConnectProvider = memo(({ children, fallback = null, settings = {}, onInitError }) => {\n    const glue = useIOConnectInit(settings, onInitError);\n    return glue ? (React.createElement(IOConnectContext.Provider, { value: glue }, children)) : (React.createElement(React.Fragment, null, fallback));\n});\nIOConnectProvider.propTypes = {\n    children: node,\n    settings: object,\n    fallback: node,\n};\nIOConnectProvider.displayName = 'IOConnectProvider';\n\nconst useIOConnect = (cb, dependencies = []) => {\n    const [result, setResult] = useState();\n    const io = useContext(IOConnectContext);\n    useEffect(() => {\n        const callback = async () => {\n            try {\n                const result = await cb(io, ...dependencies);\n                typeof result !== \"undefined\" &&\n                    setResult(typeof result === \"function\" ? () => result : result);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        };\n        io && callback();\n    }, [io, ...dependencies]);\n    return result;\n};\n\nexport { IOConnectContext, IOConnectProvider, useIOConnect, useIOConnectInit };\n//# sourceMappingURL=index.js.map\n","const defaultConfig = {\n    logger: \"info\",\n    gateway: { webPlatform: {} },\n    libraries: [],\n    exposeAPI: true\n};\nconst parseConfig = (config) => {\n    const isPlatformInternal = !!config?.gateway?.webPlatform?.port;\n    const combined = Object.assign({}, defaultConfig, config, { isPlatformInternal });\n    if (combined.systemLogger) {\n        combined.logger = combined.systemLogger.level ?? \"info\";\n    }\n    return combined;\n};\n\nconst Glue42CoreMessageTypes = {\n    platformUnload: { name: \"platformUnload\" },\n    transportSwitchRequest: { name: \"transportSwitchRequest\" },\n    transportSwitchResponse: { name: \"transportSwitchResponse\" },\n    getCurrentTransport: { name: \"getCurrentTransport\" },\n    getCurrentTransportResponse: { name: \"getCurrentTransportResponse\" },\n    checkPreferredLogic: { name: \"checkPreferredLogic\" },\n    checkPreferredConnection: { name: \"checkPreferredConnection\" },\n    checkPreferredLogicResponse: { name: \"checkPreferredLogicResponse\" },\n    checkPreferredConnectionResponse: { name: \"checkPreferredConnectionResponse\" }\n};\nconst webPlatformTransportName = \"web-platform\";\nconst latestFDC3Type = \"latest_fdc3_type\";\nconst errorChannel = new MessageChannel();\n\nconst extractErrorMsg = (error) => {\n    if (typeof error === \"string\") {\n        return error;\n    }\n    if (error?.message) {\n        return typeof error.message === \"string\" ? error.message : JSON.stringify(error.message);\n    }\n    return JSON.stringify(error);\n};\nconst runDecoderWithIOError = (decoder, json) => {\n    try {\n        const result = decoder.runWithException(json);\n        return result;\n    }\n    catch (error) {\n        return ioError.raiseError(error, true);\n    }\n};\n\nclass IOError {\n    raiseError(error, shouldThrowOriginalError) {\n        const errorMessage = extractErrorMsg(error);\n        errorChannel.port1.postMessage(errorMessage);\n        if (shouldThrowOriginalError) {\n            throw error;\n        }\n        throw new Error(errorMessage);\n    }\n}\nconst ioError = new IOError();\n\nconst checkSingleton = () => {\n    const ioConnectBrowserNamespace = window.glue42core || window.iobrowser;\n    if (ioConnectBrowserNamespace && ioConnectBrowserNamespace.webStarted) {\n        return ioError.raiseError(\"IoConnect Browser has already been started for this application.\");\n    }\n    if (!ioConnectBrowserNamespace) {\n        window.iobrowser = { webStarted: true };\n        return;\n    }\n    ioConnectBrowserNamespace.webStarted = true;\n};\n\nconst enterprise = (config) => {\n    const enterpriseConfig = {\n        windows: true,\n        layouts: \"full\",\n        appManager: \"full\",\n        channels: true,\n        libraries: config?.libraries ?? [],\n        logger: config?.systemLogger?.level ?? \"warn\"\n    };\n    const injectedFactory = window.IODesktop || window.Glue;\n    return injectedFactory(enterpriseConfig);\n};\n\n/**\r\n * Wraps values in an `Ok` type.\r\n *\r\n * Example: `ok(5) // => {ok: true, result: 5}`\r\n */\r\nvar ok$1 = function (result) { return ({ ok: true, result: result }); };\r\n/**\r\n * Wraps errors in an `Err` type.\r\n *\r\n * Example: `err('on fire') // => {ok: false, error: 'on fire'}`\r\n */\r\nvar err$1 = function (error) { return ({ ok: false, error: error }); };\r\n/**\r\n * Create a `Promise` that either resolves with the result of `Ok` or rejects\r\n * with the error of `Err`.\r\n */\r\nvar asPromise$1 = function (r) {\r\n    return r.ok === true ? Promise.resolve(r.result) : Promise.reject(r.error);\r\n};\r\n/**\r\n * Unwraps a `Result` and returns either the result of an `Ok`, or\r\n * `defaultValue`.\r\n *\r\n * Example:\r\n * ```\r\n * Result.withDefault(5, number().run(json))\r\n * ```\r\n *\r\n * It would be nice if `Decoder` had an instance method that mirrored this\r\n * function. Such a method would look something like this:\r\n * ```\r\n * class Decoder<A> {\r\n *   runWithDefault = (defaultValue: A, json: any): A =>\r\n *     Result.withDefault(defaultValue, this.run(json));\r\n * }\r\n *\r\n * number().runWithDefault(5, json)\r\n * ```\r\n * Unfortunately, the type of `defaultValue: A` on the method causes issues\r\n * with type inference on  the `object` decoder in some situations. While these\r\n * inference issues can be solved by providing the optional type argument for\r\n * `object`s, the extra trouble and confusion doesn't seem worth it.\r\n */\r\nvar withDefault$1 = function (defaultValue, r) {\r\n    return r.ok === true ? r.result : defaultValue;\r\n};\r\n/**\r\n * Return the successful result, or throw an error.\r\n */\r\nvar withException$1 = function (r) {\r\n    if (r.ok === true) {\r\n        return r.result;\r\n    }\r\n    else {\r\n        throw r.error;\r\n    }\r\n};\r\n/**\r\n * Apply `f` to the result of an `Ok`, or pass the error through.\r\n */\r\nvar map$1 = function (f, r) {\r\n    return r.ok === true ? ok$1(f(r.result)) : r;\r\n};\r\n/**\r\n * Apply `f` to the result of two `Ok`s, or pass an error through. If both\r\n * `Result`s are errors then the first one is returned.\r\n */\r\nvar map2$1 = function (f, ar, br) {\r\n    return ar.ok === false ? ar :\r\n        br.ok === false ? br :\r\n            ok$1(f(ar.result, br.result));\r\n};\r\n/**\r\n * Apply `f` to the error of an `Err`, or pass the success through.\r\n */\r\nvar mapError$1 = function (f, r) {\r\n    return r.ok === true ? r : err$1(f(r.error));\r\n};\r\n/**\r\n * Chain together a sequence of computations that may fail, similar to a\r\n * `Promise`. If the first computation fails then the error will propagate\r\n * through. If it succeeds, then `f` will be applied to the value, returning a\r\n * new `Result`.\r\n */\r\nvar andThen$1 = function (f, r) {\r\n    return r.ok === true ? f(r.result) : r;\r\n};\r\n\r\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\n\r\nvar __assign$1 = function() {\r\n    __assign$1 = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign$1.apply(this, arguments);\r\n};\r\n\r\nfunction __rest$1(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction isEqual$1(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    if (a === null && b === null) {\r\n        return true;\r\n    }\r\n    if (typeof (a) !== typeof (b)) {\r\n        return false;\r\n    }\r\n    if (typeof (a) === 'object') {\r\n        // Array\r\n        if (Array.isArray(a)) {\r\n            if (!Array.isArray(b)) {\r\n                return false;\r\n            }\r\n            if (a.length !== b.length) {\r\n                return false;\r\n            }\r\n            for (var i = 0; i < a.length; i++) {\r\n                if (!isEqual$1(a[i], b[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        // Hash table\r\n        var keys = Object.keys(a);\r\n        if (keys.length !== Object.keys(b).length) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < keys.length; i++) {\r\n            if (!b.hasOwnProperty(keys[i])) {\r\n                return false;\r\n            }\r\n            if (!isEqual$1(a[keys[i]], b[keys[i]])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n/*\r\n * Helpers\r\n */\r\nvar isJsonArray$1 = function (json) { return Array.isArray(json); };\r\nvar isJsonObject$1 = function (json) {\r\n    return typeof json === 'object' && json !== null && !isJsonArray$1(json);\r\n};\r\nvar typeString$1 = function (json) {\r\n    switch (typeof json) {\r\n        case 'string':\r\n            return 'a string';\r\n        case 'number':\r\n            return 'a number';\r\n        case 'boolean':\r\n            return 'a boolean';\r\n        case 'undefined':\r\n            return 'undefined';\r\n        case 'object':\r\n            if (json instanceof Array) {\r\n                return 'an array';\r\n            }\r\n            else if (json === null) {\r\n                return 'null';\r\n            }\r\n            else {\r\n                return 'an object';\r\n            }\r\n        default:\r\n            return JSON.stringify(json);\r\n    }\r\n};\r\nvar expectedGot$1 = function (expected, got) {\r\n    return \"expected \" + expected + \", got \" + typeString$1(got);\r\n};\r\nvar printPath$1 = function (paths) {\r\n    return paths.map(function (path) { return (typeof path === 'string' ? \".\" + path : \"[\" + path + \"]\"); }).join('');\r\n};\r\nvar prependAt$1 = function (newAt, _a) {\r\n    var at = _a.at, rest = __rest$1(_a, [\"at\"]);\r\n    return (__assign$1({ at: newAt + (at || '') }, rest));\r\n};\r\n/**\r\n * Decoders transform json objects with unknown structure into known and\r\n * verified forms. You can create objects of type `Decoder<A>` with either the\r\n * primitive decoder functions, such as `boolean()` and `string()`, or by\r\n * applying higher-order decoders to the primitives, such as `array(boolean())`\r\n * or `dict(string())`.\r\n *\r\n * Each of the decoder functions are available both as a static method on\r\n * `Decoder` and as a function alias -- for example the string decoder is\r\n * defined at `Decoder.string()`, but is also aliased to `string()`. Using the\r\n * function aliases exported with the library is recommended.\r\n *\r\n * `Decoder` exposes a number of 'run' methods, which all decode json in the\r\n * same way, but communicate success and failure in different ways. The `map`\r\n * and `andThen` methods modify decoders without having to call a 'run' method.\r\n *\r\n * Alternatively, the main decoder `run()` method returns an object of type\r\n * `Result<A, DecoderError>`. This library provides a number of helper\r\n * functions for dealing with the `Result` type, so you can do all the same\r\n * things with a `Result` as with the decoder methods.\r\n */\r\nvar Decoder$1 = /** @class */ (function () {\r\n    /**\r\n     * The Decoder class constructor is kept private to separate the internal\r\n     * `decode` function from the external `run` function. The distinction\r\n     * between the two functions is that `decode` returns a\r\n     * `Partial<DecoderError>` on failure, which contains an unfinished error\r\n     * report. When `run` is called on a decoder, the relevant series of `decode`\r\n     * calls is made, and then on failure the resulting `Partial<DecoderError>`\r\n     * is turned into a `DecoderError` by filling in the missing information.\r\n     *\r\n     * While hiding the constructor may seem restrictive, leveraging the\r\n     * provided decoder combinators and helper functions such as\r\n     * `andThen` and `map` should be enough to build specialized decoders as\r\n     * needed.\r\n     */\r\n    function Decoder(decode) {\r\n        var _this = this;\r\n        this.decode = decode;\r\n        /**\r\n         * Run the decoder and return a `Result` with either the decoded value or a\r\n         * `DecoderError` containing the json input, the location of the error, and\r\n         * the error message.\r\n         *\r\n         * Examples:\r\n         * ```\r\n         * number().run(12)\r\n         * // => {ok: true, result: 12}\r\n         *\r\n         * string().run(9001)\r\n         * // =>\r\n         * // {\r\n         * //   ok: false,\r\n         * //   error: {\r\n         * //     kind: 'DecoderError',\r\n         * //     input: 9001,\r\n         * //     at: 'input',\r\n         * //     message: 'expected a string, got 9001'\r\n         * //   }\r\n         * // }\r\n         * ```\r\n         */\r\n        this.run = function (json) {\r\n            return mapError$1(function (error) { return ({\r\n                kind: 'DecoderError',\r\n                input: json,\r\n                at: 'input' + (error.at || ''),\r\n                message: error.message || ''\r\n            }); }, _this.decode(json));\r\n        };\r\n        /**\r\n         * Run the decoder as a `Promise`.\r\n         */\r\n        this.runPromise = function (json) { return asPromise$1(_this.run(json)); };\r\n        /**\r\n         * Run the decoder and return the value on success, or throw an exception\r\n         * with a formatted error string.\r\n         */\r\n        this.runWithException = function (json) { return withException$1(_this.run(json)); };\r\n        /**\r\n         * Construct a new decoder that applies a transformation to the decoded\r\n         * result. If the decoder succeeds then `f` will be applied to the value. If\r\n         * it fails the error will propagated through.\r\n         *\r\n         * Example:\r\n         * ```\r\n         * number().map(x => x * 5).run(10)\r\n         * // => {ok: true, result: 50}\r\n         * ```\r\n         */\r\n        this.map = function (f) {\r\n            return new Decoder(function (json) { return map$1(f, _this.decode(json)); });\r\n        };\r\n        /**\r\n         * Chain together a sequence of decoders. The first decoder will run, and\r\n         * then the function will determine what decoder to run second. If the result\r\n         * of the first decoder succeeds then `f` will be applied to the decoded\r\n         * value. If it fails the error will propagate through.\r\n         *\r\n         * This is a very powerful method -- it can act as both the `map` and `where`\r\n         * methods, can improve error messages for edge cases, and can be used to\r\n         * make a decoder for custom types.\r\n         *\r\n         * Example of adding an error message:\r\n         * ```\r\n         * const versionDecoder = valueAt(['version'], number());\r\n         * const infoDecoder3 = object({a: boolean()});\r\n         *\r\n         * const decoder = versionDecoder.andThen(version => {\r\n         *   switch (version) {\r\n         *     case 3:\r\n         *       return infoDecoder3;\r\n         *     default:\r\n         *       return fail(`Unable to decode info, version ${version} is not supported.`);\r\n         *   }\r\n         * });\r\n         *\r\n         * decoder.run({version: 3, a: true})\r\n         * // => {ok: true, result: {a: true}}\r\n         *\r\n         * decoder.run({version: 5, x: 'abc'})\r\n         * // =>\r\n         * // {\r\n         * //   ok: false,\r\n         * //   error: {... message: 'Unable to decode info, version 5 is not supported.'}\r\n         * // }\r\n         * ```\r\n         *\r\n         * Example of decoding a custom type:\r\n         * ```\r\n         * // nominal type for arrays with a length of at least one\r\n         * type NonEmptyArray<T> = T[] & { __nonEmptyArrayBrand__: void };\r\n         *\r\n         * const nonEmptyArrayDecoder = <T>(values: Decoder<T>): Decoder<NonEmptyArray<T>> =>\r\n         *   array(values).andThen(arr =>\r\n         *     arr.length > 0\r\n         *       ? succeed(createNonEmptyArray(arr))\r\n         *       : fail(`expected a non-empty array, got an empty array`)\r\n         *   );\r\n         * ```\r\n         */\r\n        this.andThen = function (f) {\r\n            return new Decoder(function (json) {\r\n                return andThen$1(function (value) { return f(value).decode(json); }, _this.decode(json));\r\n            });\r\n        };\r\n        /**\r\n         * Add constraints to a decoder _without_ changing the resulting type. The\r\n         * `test` argument is a predicate function which returns true for valid\r\n         * inputs. When `test` fails on an input, the decoder fails with the given\r\n         * `errorMessage`.\r\n         *\r\n         * ```\r\n         * const chars = (length: number): Decoder<string> =>\r\n         *   string().where(\r\n         *     (s: string) => s.length === length,\r\n         *     `expected a string of length ${length}`\r\n         *   );\r\n         *\r\n         * chars(5).run('12345')\r\n         * // => {ok: true, result: '12345'}\r\n         *\r\n         * chars(2).run('HELLO')\r\n         * // => {ok: false, error: {... message: 'expected a string of length 2'}}\r\n         *\r\n         * chars(12).run(true)\r\n         * // => {ok: false, error: {... message: 'expected a string, got a boolean'}}\r\n         * ```\r\n         */\r\n        this.where = function (test, errorMessage) {\r\n            return _this.andThen(function (value) { return (test(value) ? Decoder.succeed(value) : Decoder.fail(errorMessage)); });\r\n        };\r\n    }\r\n    /**\r\n     * Decoder primitive that validates strings, and fails on all other input.\r\n     */\r\n    Decoder.string = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'string'\r\n                ? ok$1(json)\r\n                : err$1({ message: expectedGot$1('a string', json) });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder primitive that validates numbers, and fails on all other input.\r\n     */\r\n    Decoder.number = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'number'\r\n                ? ok$1(json)\r\n                : err$1({ message: expectedGot$1('a number', json) });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder primitive that validates booleans, and fails on all other input.\r\n     */\r\n    Decoder.boolean = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'boolean'\r\n                ? ok$1(json)\r\n                : err$1({ message: expectedGot$1('a boolean', json) });\r\n        });\r\n    };\r\n    Decoder.constant = function (value) {\r\n        return new Decoder(function (json) {\r\n            return isEqual$1(json, value)\r\n                ? ok$1(value)\r\n                : err$1({ message: \"expected \" + JSON.stringify(value) + \", got \" + JSON.stringify(json) });\r\n        });\r\n    };\r\n    Decoder.object = function (decoders) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonObject$1(json) && decoders) {\r\n                var obj = {};\r\n                for (var key in decoders) {\r\n                    if (decoders.hasOwnProperty(key)) {\r\n                        var r = decoders[key].decode(json[key]);\r\n                        if (r.ok === true) {\r\n                            // tslint:disable-next-line:strict-type-predicates\r\n                            if (r.result !== undefined) {\r\n                                obj[key] = r.result;\r\n                            }\r\n                        }\r\n                        else if (json[key] === undefined) {\r\n                            return err$1({ message: \"the key '\" + key + \"' is required but was not present\" });\r\n                        }\r\n                        else {\r\n                            return err$1(prependAt$1(\".\" + key, r.error));\r\n                        }\r\n                    }\r\n                }\r\n                return ok$1(obj);\r\n            }\r\n            else if (isJsonObject$1(json)) {\r\n                return ok$1(json);\r\n            }\r\n            else {\r\n                return err$1({ message: expectedGot$1('an object', json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.array = function (decoder) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonArray$1(json) && decoder) {\r\n                var decodeValue_1 = function (v, i) {\r\n                    return mapError$1(function (err$$1) { return prependAt$1(\"[\" + i + \"]\", err$$1); }, decoder.decode(v));\r\n                };\r\n                return json.reduce(function (acc, v, i) {\r\n                    return map2$1(function (arr, result) { return arr.concat([result]); }, acc, decodeValue_1(v, i));\r\n                }, ok$1([]));\r\n            }\r\n            else if (isJsonArray$1(json)) {\r\n                return ok$1(json);\r\n            }\r\n            else {\r\n                return err$1({ message: expectedGot$1('an array', json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.tuple = function (decoders) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonArray$1(json)) {\r\n                if (json.length !== decoders.length) {\r\n                    return err$1({\r\n                        message: \"expected a tuple of length \" + decoders.length + \", got one of length \" + json.length\r\n                    });\r\n                }\r\n                var result = [];\r\n                for (var i = 0; i < decoders.length; i++) {\r\n                    var nth = decoders[i].decode(json[i]);\r\n                    if (nth.ok) {\r\n                        result[i] = nth.result;\r\n                    }\r\n                    else {\r\n                        return err$1(prependAt$1(\"[\" + i + \"]\", nth.error));\r\n                    }\r\n                }\r\n                return ok$1(result);\r\n            }\r\n            else {\r\n                return err$1({ message: expectedGot$1(\"a tuple of length \" + decoders.length, json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.union = function (ad, bd) {\r\n        var decoders = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            decoders[_i - 2] = arguments[_i];\r\n        }\r\n        return Decoder.oneOf.apply(Decoder, [ad, bd].concat(decoders));\r\n    };\r\n    Decoder.intersection = function (ad, bd) {\r\n        var ds = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            ds[_i - 2] = arguments[_i];\r\n        }\r\n        return new Decoder(function (json) {\r\n            return [ad, bd].concat(ds).reduce(function (acc, decoder) { return map2$1(Object.assign, acc, decoder.decode(json)); }, ok$1({}));\r\n        });\r\n    };\r\n    /**\r\n     * Escape hatch to bypass validation. Always succeeds and types the result as\r\n     * `any`. Useful for defining decoders incrementally, particularly for\r\n     * complex objects.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface User {\r\n     *   name: string;\r\n     *   complexUserData: ComplexType;\r\n     * }\r\n     *\r\n     * const userDecoder: Decoder<User> = object({\r\n     *   name: string(),\r\n     *   complexUserData: anyJson()\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.anyJson = function () { return new Decoder(function (json) { return ok$1(json); }); };\r\n    /**\r\n     * Decoder identity function which always succeeds and types the result as\r\n     * `unknown`.\r\n     */\r\n    Decoder.unknownJson = function () {\r\n        return new Decoder(function (json) { return ok$1(json); });\r\n    };\r\n    /**\r\n     * Decoder for json objects where the keys are unknown strings, but the values\r\n     * should all be of the same type.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * dict(number()).run({chocolate: 12, vanilla: 10, mint: 37});\r\n     * // => {ok: true, result: {chocolate: 12, vanilla: 10, mint: 37}}\r\n     * ```\r\n     */\r\n    Decoder.dict = function (decoder) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonObject$1(json)) {\r\n                var obj = {};\r\n                for (var key in json) {\r\n                    if (json.hasOwnProperty(key)) {\r\n                        var r = decoder.decode(json[key]);\r\n                        if (r.ok === true) {\r\n                            obj[key] = r.result;\r\n                        }\r\n                        else {\r\n                            return err$1(prependAt$1(\".\" + key, r.error));\r\n                        }\r\n                    }\r\n                }\r\n                return ok$1(obj);\r\n            }\r\n            else {\r\n                return err$1({ message: expectedGot$1('an object', json) });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Decoder for values that may be `undefined`. This is primarily helpful for\r\n     * decoding interfaces with optional fields.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface User {\r\n     *   id: number;\r\n     *   isOwner?: boolean;\r\n     * }\r\n     *\r\n     * const decoder: Decoder<User> = object({\r\n     *   id: number(),\r\n     *   isOwner: optional(boolean())\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.optional = function (decoder) {\r\n        return new Decoder(function (json) { return (json === undefined || json === null ? ok$1(undefined) : decoder.decode(json)); });\r\n    };\r\n    /**\r\n     * Decoder that attempts to run each decoder in `decoders` and either succeeds\r\n     * with the first successful decoder, or fails after all decoders have failed.\r\n     *\r\n     * Note that `oneOf` expects the decoders to all have the same return type,\r\n     * while `union` creates a decoder for the union type of all the input\r\n     * decoders.\r\n     *\r\n     * Examples:\r\n     * ```\r\n     * oneOf(string(), number().map(String))\r\n     * oneOf(constant('start'), constant('stop'), succeed('unknown'))\r\n     * ```\r\n     */\r\n    Decoder.oneOf = function () {\r\n        var decoders = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            decoders[_i] = arguments[_i];\r\n        }\r\n        return new Decoder(function (json) {\r\n            var errors = [];\r\n            for (var i = 0; i < decoders.length; i++) {\r\n                var r = decoders[i].decode(json);\r\n                if (r.ok === true) {\r\n                    return r;\r\n                }\r\n                else {\r\n                    errors[i] = r.error;\r\n                }\r\n            }\r\n            var errorsList = errors\r\n                .map(function (error) { return \"at error\" + (error.at || '') + \": \" + error.message; })\r\n                .join('\", \"');\r\n            return err$1({\r\n                message: \"expected a value matching one of the decoders, got the errors [\\\"\" + errorsList + \"\\\"]\"\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that always succeeds with either the decoded value, or a fallback\r\n     * default value.\r\n     */\r\n    Decoder.withDefault = function (defaultValue, decoder) {\r\n        return new Decoder(function (json) {\r\n            return ok$1(withDefault$1(defaultValue, decoder.decode(json)));\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that pulls a specific field out of a json structure, instead of\r\n     * decoding and returning the full structure. The `paths` array describes the\r\n     * object keys and array indices to traverse, so that values can be pulled out\r\n     * of a nested structure.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * const decoder = valueAt(['a', 'b', 0], string());\r\n     *\r\n     * decoder.run({a: {b: ['surprise!']}})\r\n     * // => {ok: true, result: 'surprise!'}\r\n     *\r\n     * decoder.run({a: {x: 'cats'}})\r\n     * // => {ok: false, error: {... at: 'input.a.b[0]' message: 'path does not exist'}}\r\n     * ```\r\n     *\r\n     * Note that the `decoder` is ran on the value found at the last key in the\r\n     * path, even if the last key is not found. This allows the `optional`\r\n     * decoder to succeed when appropriate.\r\n     * ```\r\n     * const optionalDecoder = valueAt(['a', 'b', 'c'], optional(string()));\r\n     *\r\n     * optionalDecoder.run({a: {b: {c: 'surprise!'}}})\r\n     * // => {ok: true, result: 'surprise!'}\r\n     *\r\n     * optionalDecoder.run({a: {b: 'cats'}})\r\n     * // => {ok: false, error: {... at: 'input.a.b.c' message: 'expected an object, got \"cats\"'}\r\n     *\r\n     * optionalDecoder.run({a: {b: {z: 1}}})\r\n     * // => {ok: true, result: undefined}\r\n     * ```\r\n     */\r\n    Decoder.valueAt = function (paths, decoder) {\r\n        return new Decoder(function (json) {\r\n            var jsonAtPath = json;\r\n            for (var i = 0; i < paths.length; i++) {\r\n                if (jsonAtPath === undefined) {\r\n                    return err$1({\r\n                        at: printPath$1(paths.slice(0, i + 1)),\r\n                        message: 'path does not exist'\r\n                    });\r\n                }\r\n                else if (typeof paths[i] === 'string' && !isJsonObject$1(jsonAtPath)) {\r\n                    return err$1({\r\n                        at: printPath$1(paths.slice(0, i + 1)),\r\n                        message: expectedGot$1('an object', jsonAtPath)\r\n                    });\r\n                }\r\n                else if (typeof paths[i] === 'number' && !isJsonArray$1(jsonAtPath)) {\r\n                    return err$1({\r\n                        at: printPath$1(paths.slice(0, i + 1)),\r\n                        message: expectedGot$1('an array', jsonAtPath)\r\n                    });\r\n                }\r\n                else {\r\n                    jsonAtPath = jsonAtPath[paths[i]];\r\n                }\r\n            }\r\n            return mapError$1(function (error) {\r\n                return jsonAtPath === undefined\r\n                    ? { at: printPath$1(paths), message: 'path does not exist' }\r\n                    : prependAt$1(printPath$1(paths), error);\r\n            }, decoder.decode(jsonAtPath));\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that ignores the input json and always succeeds with `fixedValue`.\r\n     */\r\n    Decoder.succeed = function (fixedValue) {\r\n        return new Decoder(function (json) { return ok$1(fixedValue); });\r\n    };\r\n    /**\r\n     * Decoder that ignores the input json and always fails with `errorMessage`.\r\n     */\r\n    Decoder.fail = function (errorMessage) {\r\n        return new Decoder(function (json) { return err$1({ message: errorMessage }); });\r\n    };\r\n    /**\r\n     * Decoder that allows for validating recursive data structures. Unlike with\r\n     * functions, decoders assigned to variables can't reference themselves\r\n     * before they are fully defined. We can avoid prematurely referencing the\r\n     * decoder by wrapping it in a function that won't be called until use, at\r\n     * which point the decoder has been defined.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface Comment {\r\n     *   msg: string;\r\n     *   replies: Comment[];\r\n     * }\r\n     *\r\n     * const decoder: Decoder<Comment> = object({\r\n     *   msg: string(),\r\n     *   replies: lazy(() => array(decoder))\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.lazy = function (mkDecoder) {\r\n        return new Decoder(function (json) { return mkDecoder().decode(json); });\r\n    };\r\n    return Decoder;\r\n}());\r\n\r\n/* tslint:disable:variable-name */\r\n/** See `Decoder.string` */\r\nvar string$1 = Decoder$1.string;\r\n/** See `Decoder.number` */\r\nvar number$1 = Decoder$1.number;\r\n/** See `Decoder.boolean` */\r\nvar boolean$1 = Decoder$1.boolean;\r\n/** See `Decoder.anyJson` */\r\nvar anyJson$1 = Decoder$1.anyJson;\r\n/** See `Decoder.unknownJson` */\r\nDecoder$1.unknownJson;\r\n/** See `Decoder.constant` */\r\nvar constant$1 = Decoder$1.constant;\r\n/** See `Decoder.object` */\r\nvar object$1 = Decoder$1.object;\r\n/** See `Decoder.array` */\r\nvar array$1 = Decoder$1.array;\r\n/** See `Decoder.tuple` */\r\nDecoder$1.tuple;\r\n/** See `Decoder.dict` */\r\nDecoder$1.dict;\r\n/** See `Decoder.optional` */\r\nvar optional$1 = Decoder$1.optional;\r\n/** See `Decoder.oneOf` */\r\nvar oneOf$1 = Decoder$1.oneOf;\r\n/** See `Decoder.union` */\r\nDecoder$1.union;\r\n/** See `Decoder.intersection` */\r\nDecoder$1.intersection;\r\n/** See `Decoder.withDefault` */\r\nDecoder$1.withDefault;\r\n/** See `Decoder.valueAt` */\r\nDecoder$1.valueAt;\r\n/** See `Decoder.succeed` */\r\nDecoder$1.succeed;\r\n/** See `Decoder.fail` */\r\nDecoder$1.fail;\r\n/** See `Decoder.lazy` */\r\nvar lazy = Decoder$1.lazy;\n\nconst connectBrowserAppProps = [\"name\", \"title\", \"version\", \"customProperties\", \"icon\", \"caption\", \"type\"];\nconst fdc3v2AppProps = [\"appId\", \"name\", \"type\", \"details\", \"version\", \"title\", \"tooltip\", \"lang\", \"description\", \"categories\", \"icons\", \"screenshots\", \"contactEmail\", \"moreInfo\", \"publisher\", \"customConfig\", \"hostManifests\", \"interop\", \"localizedVersions\"];\n\n/**\r\n * Wraps values in an `Ok` type.\r\n *\r\n * Example: `ok(5) // => {ok: true, result: 5}`\r\n */\r\nvar ok = function (result) { return ({ ok: true, result: result }); };\r\n/**\r\n * Wraps errors in an `Err` type.\r\n *\r\n * Example: `err('on fire') // => {ok: false, error: 'on fire'}`\r\n */\r\nvar err = function (error) { return ({ ok: false, error: error }); };\r\n/**\r\n * Create a `Promise` that either resolves with the result of `Ok` or rejects\r\n * with the error of `Err`.\r\n */\r\nvar asPromise = function (r) {\r\n    return r.ok === true ? Promise.resolve(r.result) : Promise.reject(r.error);\r\n};\r\n/**\r\n * Unwraps a `Result` and returns either the result of an `Ok`, or\r\n * `defaultValue`.\r\n *\r\n * Example:\r\n * ```\r\n * Result.withDefault(5, number().run(json))\r\n * ```\r\n *\r\n * It would be nice if `Decoder` had an instance method that mirrored this\r\n * function. Such a method would look something like this:\r\n * ```\r\n * class Decoder<A> {\r\n *   runWithDefault = (defaultValue: A, json: any): A =>\r\n *     Result.withDefault(defaultValue, this.run(json));\r\n * }\r\n *\r\n * number().runWithDefault(5, json)\r\n * ```\r\n * Unfortunately, the type of `defaultValue: A` on the method causes issues\r\n * with type inference on  the `object` decoder in some situations. While these\r\n * inference issues can be solved by providing the optional type argument for\r\n * `object`s, the extra trouble and confusion doesn't seem worth it.\r\n */\r\nvar withDefault = function (defaultValue, r) {\r\n    return r.ok === true ? r.result : defaultValue;\r\n};\r\n/**\r\n * Return the successful result, or throw an error.\r\n */\r\nvar withException = function (r) {\r\n    if (r.ok === true) {\r\n        return r.result;\r\n    }\r\n    else {\r\n        throw r.error;\r\n    }\r\n};\r\n/**\r\n * Apply `f` to the result of an `Ok`, or pass the error through.\r\n */\r\nvar map = function (f, r) {\r\n    return r.ok === true ? ok(f(r.result)) : r;\r\n};\r\n/**\r\n * Apply `f` to the result of two `Ok`s, or pass an error through. If both\r\n * `Result`s are errors then the first one is returned.\r\n */\r\nvar map2 = function (f, ar, br) {\r\n    return ar.ok === false ? ar :\r\n        br.ok === false ? br :\r\n            ok(f(ar.result, br.result));\r\n};\r\n/**\r\n * Apply `f` to the error of an `Err`, or pass the success through.\r\n */\r\nvar mapError = function (f, r) {\r\n    return r.ok === true ? r : err(f(r.error));\r\n};\r\n/**\r\n * Chain together a sequence of computations that may fail, similar to a\r\n * `Promise`. If the first computation fails then the error will propagate\r\n * through. If it succeeds, then `f` will be applied to the value, returning a\r\n * new `Result`.\r\n */\r\nvar andThen = function (f, r) {\r\n    return r.ok === true ? f(r.result) : r;\r\n};\r\n\r\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction isEqual(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    if (a === null && b === null) {\r\n        return true;\r\n    }\r\n    if (typeof (a) !== typeof (b)) {\r\n        return false;\r\n    }\r\n    if (typeof (a) === 'object') {\r\n        // Array\r\n        if (Array.isArray(a)) {\r\n            if (!Array.isArray(b)) {\r\n                return false;\r\n            }\r\n            if (a.length !== b.length) {\r\n                return false;\r\n            }\r\n            for (var i = 0; i < a.length; i++) {\r\n                if (!isEqual(a[i], b[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        // Hash table\r\n        var keys = Object.keys(a);\r\n        if (keys.length !== Object.keys(b).length) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < keys.length; i++) {\r\n            if (!b.hasOwnProperty(keys[i])) {\r\n                return false;\r\n            }\r\n            if (!isEqual(a[keys[i]], b[keys[i]])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n/*\r\n * Helpers\r\n */\r\nvar isJsonArray = function (json) { return Array.isArray(json); };\r\nvar isJsonObject = function (json) {\r\n    return typeof json === 'object' && json !== null && !isJsonArray(json);\r\n};\r\nvar typeString = function (json) {\r\n    switch (typeof json) {\r\n        case 'string':\r\n            return 'a string';\r\n        case 'number':\r\n            return 'a number';\r\n        case 'boolean':\r\n            return 'a boolean';\r\n        case 'undefined':\r\n            return 'undefined';\r\n        case 'object':\r\n            if (json instanceof Array) {\r\n                return 'an array';\r\n            }\r\n            else if (json === null) {\r\n                return 'null';\r\n            }\r\n            else {\r\n                return 'an object';\r\n            }\r\n        default:\r\n            return JSON.stringify(json);\r\n    }\r\n};\r\nvar expectedGot = function (expected, got) {\r\n    return \"expected \" + expected + \", got \" + typeString(got);\r\n};\r\nvar printPath = function (paths) {\r\n    return paths.map(function (path) { return (typeof path === 'string' ? \".\" + path : \"[\" + path + \"]\"); }).join('');\r\n};\r\nvar prependAt = function (newAt, _a) {\r\n    var at = _a.at, rest = __rest(_a, [\"at\"]);\r\n    return (__assign({ at: newAt + (at || '') }, rest));\r\n};\r\n/**\r\n * Decoders transform json objects with unknown structure into known and\r\n * verified forms. You can create objects of type `Decoder<A>` with either the\r\n * primitive decoder functions, such as `boolean()` and `string()`, or by\r\n * applying higher-order decoders to the primitives, such as `array(boolean())`\r\n * or `dict(string())`.\r\n *\r\n * Each of the decoder functions are available both as a static method on\r\n * `Decoder` and as a function alias -- for example the string decoder is\r\n * defined at `Decoder.string()`, but is also aliased to `string()`. Using the\r\n * function aliases exported with the library is recommended.\r\n *\r\n * `Decoder` exposes a number of 'run' methods, which all decode json in the\r\n * same way, but communicate success and failure in different ways. The `map`\r\n * and `andThen` methods modify decoders without having to call a 'run' method.\r\n *\r\n * Alternatively, the main decoder `run()` method returns an object of type\r\n * `Result<A, DecoderError>`. This library provides a number of helper\r\n * functions for dealing with the `Result` type, so you can do all the same\r\n * things with a `Result` as with the decoder methods.\r\n */\r\nvar Decoder = /** @class */ (function () {\r\n    /**\r\n     * The Decoder class constructor is kept private to separate the internal\r\n     * `decode` function from the external `run` function. The distinction\r\n     * between the two functions is that `decode` returns a\r\n     * `Partial<DecoderError>` on failure, which contains an unfinished error\r\n     * report. When `run` is called on a decoder, the relevant series of `decode`\r\n     * calls is made, and then on failure the resulting `Partial<DecoderError>`\r\n     * is turned into a `DecoderError` by filling in the missing information.\r\n     *\r\n     * While hiding the constructor may seem restrictive, leveraging the\r\n     * provided decoder combinators and helper functions such as\r\n     * `andThen` and `map` should be enough to build specialized decoders as\r\n     * needed.\r\n     */\r\n    function Decoder(decode) {\r\n        var _this = this;\r\n        this.decode = decode;\r\n        /**\r\n         * Run the decoder and return a `Result` with either the decoded value or a\r\n         * `DecoderError` containing the json input, the location of the error, and\r\n         * the error message.\r\n         *\r\n         * Examples:\r\n         * ```\r\n         * number().run(12)\r\n         * // => {ok: true, result: 12}\r\n         *\r\n         * string().run(9001)\r\n         * // =>\r\n         * // {\r\n         * //   ok: false,\r\n         * //   error: {\r\n         * //     kind: 'DecoderError',\r\n         * //     input: 9001,\r\n         * //     at: 'input',\r\n         * //     message: 'expected a string, got 9001'\r\n         * //   }\r\n         * // }\r\n         * ```\r\n         */\r\n        this.run = function (json) {\r\n            return mapError(function (error) { return ({\r\n                kind: 'DecoderError',\r\n                input: json,\r\n                at: 'input' + (error.at || ''),\r\n                message: error.message || ''\r\n            }); }, _this.decode(json));\r\n        };\r\n        /**\r\n         * Run the decoder as a `Promise`.\r\n         */\r\n        this.runPromise = function (json) { return asPromise(_this.run(json)); };\r\n        /**\r\n         * Run the decoder and return the value on success, or throw an exception\r\n         * with a formatted error string.\r\n         */\r\n        this.runWithException = function (json) { return withException(_this.run(json)); };\r\n        /**\r\n         * Construct a new decoder that applies a transformation to the decoded\r\n         * result. If the decoder succeeds then `f` will be applied to the value. If\r\n         * it fails the error will propagated through.\r\n         *\r\n         * Example:\r\n         * ```\r\n         * number().map(x => x * 5).run(10)\r\n         * // => {ok: true, result: 50}\r\n         * ```\r\n         */\r\n        this.map = function (f) {\r\n            return new Decoder(function (json) { return map(f, _this.decode(json)); });\r\n        };\r\n        /**\r\n         * Chain together a sequence of decoders. The first decoder will run, and\r\n         * then the function will determine what decoder to run second. If the result\r\n         * of the first decoder succeeds then `f` will be applied to the decoded\r\n         * value. If it fails the error will propagate through.\r\n         *\r\n         * This is a very powerful method -- it can act as both the `map` and `where`\r\n         * methods, can improve error messages for edge cases, and can be used to\r\n         * make a decoder for custom types.\r\n         *\r\n         * Example of adding an error message:\r\n         * ```\r\n         * const versionDecoder = valueAt(['version'], number());\r\n         * const infoDecoder3 = object({a: boolean()});\r\n         *\r\n         * const decoder = versionDecoder.andThen(version => {\r\n         *   switch (version) {\r\n         *     case 3:\r\n         *       return infoDecoder3;\r\n         *     default:\r\n         *       return fail(`Unable to decode info, version ${version} is not supported.`);\r\n         *   }\r\n         * });\r\n         *\r\n         * decoder.run({version: 3, a: true})\r\n         * // => {ok: true, result: {a: true}}\r\n         *\r\n         * decoder.run({version: 5, x: 'abc'})\r\n         * // =>\r\n         * // {\r\n         * //   ok: false,\r\n         * //   error: {... message: 'Unable to decode info, version 5 is not supported.'}\r\n         * // }\r\n         * ```\r\n         *\r\n         * Example of decoding a custom type:\r\n         * ```\r\n         * // nominal type for arrays with a length of at least one\r\n         * type NonEmptyArray<T> = T[] & { __nonEmptyArrayBrand__: void };\r\n         *\r\n         * const nonEmptyArrayDecoder = <T>(values: Decoder<T>): Decoder<NonEmptyArray<T>> =>\r\n         *   array(values).andThen(arr =>\r\n         *     arr.length > 0\r\n         *       ? succeed(createNonEmptyArray(arr))\r\n         *       : fail(`expected a non-empty array, got an empty array`)\r\n         *   );\r\n         * ```\r\n         */\r\n        this.andThen = function (f) {\r\n            return new Decoder(function (json) {\r\n                return andThen(function (value) { return f(value).decode(json); }, _this.decode(json));\r\n            });\r\n        };\r\n        /**\r\n         * Add constraints to a decoder _without_ changing the resulting type. The\r\n         * `test` argument is a predicate function which returns true for valid\r\n         * inputs. When `test` fails on an input, the decoder fails with the given\r\n         * `errorMessage`.\r\n         *\r\n         * ```\r\n         * const chars = (length: number): Decoder<string> =>\r\n         *   string().where(\r\n         *     (s: string) => s.length === length,\r\n         *     `expected a string of length ${length}`\r\n         *   );\r\n         *\r\n         * chars(5).run('12345')\r\n         * // => {ok: true, result: '12345'}\r\n         *\r\n         * chars(2).run('HELLO')\r\n         * // => {ok: false, error: {... message: 'expected a string of length 2'}}\r\n         *\r\n         * chars(12).run(true)\r\n         * // => {ok: false, error: {... message: 'expected a string, got a boolean'}}\r\n         * ```\r\n         */\r\n        this.where = function (test, errorMessage) {\r\n            return _this.andThen(function (value) { return (test(value) ? Decoder.succeed(value) : Decoder.fail(errorMessage)); });\r\n        };\r\n    }\r\n    /**\r\n     * Decoder primitive that validates strings, and fails on all other input.\r\n     */\r\n    Decoder.string = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'string'\r\n                ? ok(json)\r\n                : err({ message: expectedGot('a string', json) });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder primitive that validates numbers, and fails on all other input.\r\n     */\r\n    Decoder.number = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'number'\r\n                ? ok(json)\r\n                : err({ message: expectedGot('a number', json) });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder primitive that validates booleans, and fails on all other input.\r\n     */\r\n    Decoder.boolean = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'boolean'\r\n                ? ok(json)\r\n                : err({ message: expectedGot('a boolean', json) });\r\n        });\r\n    };\r\n    Decoder.constant = function (value) {\r\n        return new Decoder(function (json) {\r\n            return isEqual(json, value)\r\n                ? ok(value)\r\n                : err({ message: \"expected \" + JSON.stringify(value) + \", got \" + JSON.stringify(json) });\r\n        });\r\n    };\r\n    Decoder.object = function (decoders) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonObject(json) && decoders) {\r\n                var obj = {};\r\n                for (var key in decoders) {\r\n                    if (decoders.hasOwnProperty(key)) {\r\n                        var r = decoders[key].decode(json[key]);\r\n                        if (r.ok === true) {\r\n                            // tslint:disable-next-line:strict-type-predicates\r\n                            if (r.result !== undefined) {\r\n                                obj[key] = r.result;\r\n                            }\r\n                        }\r\n                        else if (json[key] === undefined) {\r\n                            return err({ message: \"the key '\" + key + \"' is required but was not present\" });\r\n                        }\r\n                        else {\r\n                            return err(prependAt(\".\" + key, r.error));\r\n                        }\r\n                    }\r\n                }\r\n                return ok(obj);\r\n            }\r\n            else if (isJsonObject(json)) {\r\n                return ok(json);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot('an object', json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.array = function (decoder) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonArray(json) && decoder) {\r\n                var decodeValue_1 = function (v, i) {\r\n                    return mapError(function (err$$1) { return prependAt(\"[\" + i + \"]\", err$$1); }, decoder.decode(v));\r\n                };\r\n                return json.reduce(function (acc, v, i) {\r\n                    return map2(function (arr, result) { return arr.concat([result]); }, acc, decodeValue_1(v, i));\r\n                }, ok([]));\r\n            }\r\n            else if (isJsonArray(json)) {\r\n                return ok(json);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot('an array', json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.tuple = function (decoders) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonArray(json)) {\r\n                if (json.length !== decoders.length) {\r\n                    return err({\r\n                        message: \"expected a tuple of length \" + decoders.length + \", got one of length \" + json.length\r\n                    });\r\n                }\r\n                var result = [];\r\n                for (var i = 0; i < decoders.length; i++) {\r\n                    var nth = decoders[i].decode(json[i]);\r\n                    if (nth.ok) {\r\n                        result[i] = nth.result;\r\n                    }\r\n                    else {\r\n                        return err(prependAt(\"[\" + i + \"]\", nth.error));\r\n                    }\r\n                }\r\n                return ok(result);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot(\"a tuple of length \" + decoders.length, json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.union = function (ad, bd) {\r\n        var decoders = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            decoders[_i - 2] = arguments[_i];\r\n        }\r\n        return Decoder.oneOf.apply(Decoder, [ad, bd].concat(decoders));\r\n    };\r\n    Decoder.intersection = function (ad, bd) {\r\n        var ds = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            ds[_i - 2] = arguments[_i];\r\n        }\r\n        return new Decoder(function (json) {\r\n            return [ad, bd].concat(ds).reduce(function (acc, decoder) { return map2(Object.assign, acc, decoder.decode(json)); }, ok({}));\r\n        });\r\n    };\r\n    /**\r\n     * Escape hatch to bypass validation. Always succeeds and types the result as\r\n     * `any`. Useful for defining decoders incrementally, particularly for\r\n     * complex objects.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface User {\r\n     *   name: string;\r\n     *   complexUserData: ComplexType;\r\n     * }\r\n     *\r\n     * const userDecoder: Decoder<User> = object({\r\n     *   name: string(),\r\n     *   complexUserData: anyJson()\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.anyJson = function () { return new Decoder(function (json) { return ok(json); }); };\r\n    /**\r\n     * Decoder identity function which always succeeds and types the result as\r\n     * `unknown`.\r\n     */\r\n    Decoder.unknownJson = function () {\r\n        return new Decoder(function (json) { return ok(json); });\r\n    };\r\n    /**\r\n     * Decoder for json objects where the keys are unknown strings, but the values\r\n     * should all be of the same type.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * dict(number()).run({chocolate: 12, vanilla: 10, mint: 37});\r\n     * // => {ok: true, result: {chocolate: 12, vanilla: 10, mint: 37}}\r\n     * ```\r\n     */\r\n    Decoder.dict = function (decoder) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonObject(json)) {\r\n                var obj = {};\r\n                for (var key in json) {\r\n                    if (json.hasOwnProperty(key)) {\r\n                        var r = decoder.decode(json[key]);\r\n                        if (r.ok === true) {\r\n                            obj[key] = r.result;\r\n                        }\r\n                        else {\r\n                            return err(prependAt(\".\" + key, r.error));\r\n                        }\r\n                    }\r\n                }\r\n                return ok(obj);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot('an object', json) });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Decoder for values that may be `undefined`. This is primarily helpful for\r\n     * decoding interfaces with optional fields.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface User {\r\n     *   id: number;\r\n     *   isOwner?: boolean;\r\n     * }\r\n     *\r\n     * const decoder: Decoder<User> = object({\r\n     *   id: number(),\r\n     *   isOwner: optional(boolean())\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.optional = function (decoder) {\r\n        return new Decoder(function (json) { return (json === undefined || json === null ? ok(undefined) : decoder.decode(json)); });\r\n    };\r\n    /**\r\n     * Decoder that attempts to run each decoder in `decoders` and either succeeds\r\n     * with the first successful decoder, or fails after all decoders have failed.\r\n     *\r\n     * Note that `oneOf` expects the decoders to all have the same return type,\r\n     * while `union` creates a decoder for the union type of all the input\r\n     * decoders.\r\n     *\r\n     * Examples:\r\n     * ```\r\n     * oneOf(string(), number().map(String))\r\n     * oneOf(constant('start'), constant('stop'), succeed('unknown'))\r\n     * ```\r\n     */\r\n    Decoder.oneOf = function () {\r\n        var decoders = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            decoders[_i] = arguments[_i];\r\n        }\r\n        return new Decoder(function (json) {\r\n            var errors = [];\r\n            for (var i = 0; i < decoders.length; i++) {\r\n                var r = decoders[i].decode(json);\r\n                if (r.ok === true) {\r\n                    return r;\r\n                }\r\n                else {\r\n                    errors[i] = r.error;\r\n                }\r\n            }\r\n            var errorsList = errors\r\n                .map(function (error) { return \"at error\" + (error.at || '') + \": \" + error.message; })\r\n                .join('\", \"');\r\n            return err({\r\n                message: \"expected a value matching one of the decoders, got the errors [\\\"\" + errorsList + \"\\\"]\"\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that always succeeds with either the decoded value, or a fallback\r\n     * default value.\r\n     */\r\n    Decoder.withDefault = function (defaultValue, decoder) {\r\n        return new Decoder(function (json) {\r\n            return ok(withDefault(defaultValue, decoder.decode(json)));\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that pulls a specific field out of a json structure, instead of\r\n     * decoding and returning the full structure. The `paths` array describes the\r\n     * object keys and array indices to traverse, so that values can be pulled out\r\n     * of a nested structure.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * const decoder = valueAt(['a', 'b', 0], string());\r\n     *\r\n     * decoder.run({a: {b: ['surprise!']}})\r\n     * // => {ok: true, result: 'surprise!'}\r\n     *\r\n     * decoder.run({a: {x: 'cats'}})\r\n     * // => {ok: false, error: {... at: 'input.a.b[0]' message: 'path does not exist'}}\r\n     * ```\r\n     *\r\n     * Note that the `decoder` is ran on the value found at the last key in the\r\n     * path, even if the last key is not found. This allows the `optional`\r\n     * decoder to succeed when appropriate.\r\n     * ```\r\n     * const optionalDecoder = valueAt(['a', 'b', 'c'], optional(string()));\r\n     *\r\n     * optionalDecoder.run({a: {b: {c: 'surprise!'}}})\r\n     * // => {ok: true, result: 'surprise!'}\r\n     *\r\n     * optionalDecoder.run({a: {b: 'cats'}})\r\n     * // => {ok: false, error: {... at: 'input.a.b.c' message: 'expected an object, got \"cats\"'}\r\n     *\r\n     * optionalDecoder.run({a: {b: {z: 1}}})\r\n     * // => {ok: true, result: undefined}\r\n     * ```\r\n     */\r\n    Decoder.valueAt = function (paths, decoder) {\r\n        return new Decoder(function (json) {\r\n            var jsonAtPath = json;\r\n            for (var i = 0; i < paths.length; i++) {\r\n                if (jsonAtPath === undefined) {\r\n                    return err({\r\n                        at: printPath(paths.slice(0, i + 1)),\r\n                        message: 'path does not exist'\r\n                    });\r\n                }\r\n                else if (typeof paths[i] === 'string' && !isJsonObject(jsonAtPath)) {\r\n                    return err({\r\n                        at: printPath(paths.slice(0, i + 1)),\r\n                        message: expectedGot('an object', jsonAtPath)\r\n                    });\r\n                }\r\n                else if (typeof paths[i] === 'number' && !isJsonArray(jsonAtPath)) {\r\n                    return err({\r\n                        at: printPath(paths.slice(0, i + 1)),\r\n                        message: expectedGot('an array', jsonAtPath)\r\n                    });\r\n                }\r\n                else {\r\n                    jsonAtPath = jsonAtPath[paths[i]];\r\n                }\r\n            }\r\n            return mapError(function (error) {\r\n                return jsonAtPath === undefined\r\n                    ? { at: printPath(paths), message: 'path does not exist' }\r\n                    : prependAt(printPath(paths), error);\r\n            }, decoder.decode(jsonAtPath));\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that ignores the input json and always succeeds with `fixedValue`.\r\n     */\r\n    Decoder.succeed = function (fixedValue) {\r\n        return new Decoder(function (json) { return ok(fixedValue); });\r\n    };\r\n    /**\r\n     * Decoder that ignores the input json and always fails with `errorMessage`.\r\n     */\r\n    Decoder.fail = function (errorMessage) {\r\n        return new Decoder(function (json) { return err({ message: errorMessage }); });\r\n    };\r\n    /**\r\n     * Decoder that allows for validating recursive data structures. Unlike with\r\n     * functions, decoders assigned to variables can't reference themselves\r\n     * before they are fully defined. We can avoid prematurely referencing the\r\n     * decoder by wrapping it in a function that won't be called until use, at\r\n     * which point the decoder has been defined.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface Comment {\r\n     *   msg: string;\r\n     *   replies: Comment[];\r\n     * }\r\n     *\r\n     * const decoder: Decoder<Comment> = object({\r\n     *   msg: string(),\r\n     *   replies: lazy(() => array(decoder))\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.lazy = function (mkDecoder) {\r\n        return new Decoder(function (json) { return mkDecoder().decode(json); });\r\n    };\r\n    return Decoder;\r\n}());\r\n\r\n/* tslint:disable:variable-name */\r\n/** See `Decoder.string` */\r\nvar string = Decoder.string;\r\n/** See `Decoder.number` */\r\nvar number = Decoder.number;\r\n/** See `Decoder.boolean` */\r\nvar boolean = Decoder.boolean;\r\n/** See `Decoder.anyJson` */\r\nvar anyJson = Decoder.anyJson;\r\n/** See `Decoder.unknownJson` */\r\nDecoder.unknownJson;\r\n/** See `Decoder.constant` */\r\nvar constant = Decoder.constant;\r\n/** See `Decoder.object` */\r\nvar object = Decoder.object;\r\n/** See `Decoder.array` */\r\nvar array = Decoder.array;\r\n/** See `Decoder.tuple` */\r\nDecoder.tuple;\r\n/** See `Decoder.dict` */\r\nvar dict = Decoder.dict;\r\n/** See `Decoder.optional` */\r\nvar optional = Decoder.optional;\r\n/** See `Decoder.oneOf` */\r\nvar oneOf = Decoder.oneOf;\r\n/** See `Decoder.union` */\r\nDecoder.union;\r\n/** See `Decoder.intersection` */\r\nDecoder.intersection;\r\n/** See `Decoder.withDefault` */\r\nDecoder.withDefault;\r\n/** See `Decoder.valueAt` */\r\nDecoder.valueAt;\r\n/** See `Decoder.succeed` */\r\nDecoder.succeed;\r\n/** See `Decoder.fail` */\r\nDecoder.fail;\r\n/** See `Decoder.lazy` */\r\nDecoder.lazy;\n\nconst nonEmptyStringDecoder$1 = string().where((s) => s.length > 0, \"Expected a non-empty string\");\nconst nonNegativeNumberDecoder$1 = number().where((num) => num >= 0, \"Expected a non-negative number\");\n\nconst intentDefinitionDecoder$1 = object({\n    name: nonEmptyStringDecoder$1,\n    displayName: optional(string()),\n    contexts: optional(array(string())),\n    customConfig: optional(object())\n});\nconst v2TypeDecoder = oneOf(constant(\"web\"), constant(\"native\"), constant(\"citrix\"), constant(\"onlineNative\"), constant(\"other\"));\nconst v2DetailsDecoder = object({\n    url: nonEmptyStringDecoder$1\n});\nconst v2IconDecoder = object({\n    src: nonEmptyStringDecoder$1,\n    size: optional(nonEmptyStringDecoder$1),\n    type: optional(nonEmptyStringDecoder$1)\n});\nconst v2ScreenshotDecoder = object({\n    src: nonEmptyStringDecoder$1,\n    size: optional(nonEmptyStringDecoder$1),\n    type: optional(nonEmptyStringDecoder$1),\n    label: optional(nonEmptyStringDecoder$1)\n});\nconst v2ListensForIntentDecoder = object({\n    contexts: array(nonEmptyStringDecoder$1),\n    displayName: optional(nonEmptyStringDecoder$1),\n    resultType: optional(nonEmptyStringDecoder$1),\n    customConfig: optional(anyJson())\n});\nconst v2IntentsDecoder = object({\n    listensFor: optional(dict(v2ListensForIntentDecoder)),\n    raises: optional(dict(array(nonEmptyStringDecoder$1)))\n});\nconst v2UserChannelDecoder = object({\n    broadcasts: optional(array(nonEmptyStringDecoder$1)),\n    listensFor: optional(array(nonEmptyStringDecoder$1))\n});\nconst v2AppChannelDecoder = object({\n    name: nonEmptyStringDecoder$1,\n    description: optional(nonEmptyStringDecoder$1),\n    broadcasts: optional(array(nonEmptyStringDecoder$1)),\n    listensFor: optional(array(nonEmptyStringDecoder$1))\n});\nconst v2InteropDecoder = object({\n    intents: optional(v2IntentsDecoder),\n    userChannels: optional(v2UserChannelDecoder),\n    appChannels: optional(array(v2AppChannelDecoder))\n});\nconst glue42ApplicationDetailsDecoder = object({\n    url: nonEmptyStringDecoder$1,\n    top: optional(number()),\n    left: optional(number()),\n    width: optional(nonNegativeNumberDecoder$1),\n    height: optional(nonNegativeNumberDecoder$1)\n});\nconst glue42HostManifestsBrowserDecoder = object({\n    name: optional(nonEmptyStringDecoder$1),\n    type: optional(nonEmptyStringDecoder$1.where((s) => s === \"window\", \"Expected a value of window\")),\n    title: optional(nonEmptyStringDecoder$1),\n    version: optional(nonEmptyStringDecoder$1),\n    customProperties: optional(anyJson()),\n    icon: optional(string()),\n    caption: optional(string()),\n    details: optional(glue42ApplicationDetailsDecoder),\n    intents: optional(array(intentDefinitionDecoder$1)),\n    hidden: optional(boolean())\n});\nconst hostManifestsBrowserDecoder = oneOf(object({\n    \"ioConnect\": optional(oneOf(glue42HostManifestsBrowserDecoder, anyJson())),\n    \"Glue42\": optional(oneOf(glue42HostManifestsBrowserDecoder, anyJson()))\n}), anyJson());\nconst v1DefinitionDecoder = object({\n    name: nonEmptyStringDecoder$1,\n    appId: nonEmptyStringDecoder$1,\n    title: optional(nonEmptyStringDecoder$1),\n    version: optional(nonEmptyStringDecoder$1),\n    manifest: nonEmptyStringDecoder$1,\n    manifestType: nonEmptyStringDecoder$1,\n    tooltip: optional(nonEmptyStringDecoder$1),\n    description: optional(nonEmptyStringDecoder$1),\n    contactEmail: optional(nonEmptyStringDecoder$1),\n    supportEmail: optional(nonEmptyStringDecoder$1),\n    publisher: optional(nonEmptyStringDecoder$1),\n    images: optional(array(object({ url: optional(nonEmptyStringDecoder$1) }))),\n    icons: optional(array(object({ icon: optional(nonEmptyStringDecoder$1) }))),\n    customConfig: anyJson(),\n    intents: optional(array(intentDefinitionDecoder$1))\n});\nconst v2LocalizedDefinitionDecoder = object({\n    appId: optional(nonEmptyStringDecoder$1),\n    name: optional(nonEmptyStringDecoder$1),\n    details: optional(v2DetailsDecoder),\n    version: optional(nonEmptyStringDecoder$1),\n    title: optional(nonEmptyStringDecoder$1),\n    tooltip: optional(nonEmptyStringDecoder$1),\n    lang: optional(nonEmptyStringDecoder$1),\n    description: optional(nonEmptyStringDecoder$1),\n    categories: optional(array(nonEmptyStringDecoder$1)),\n    icons: optional(array(v2IconDecoder)),\n    screenshots: optional(array(v2ScreenshotDecoder)),\n    contactEmail: optional(nonEmptyStringDecoder$1),\n    supportEmail: optional(nonEmptyStringDecoder$1),\n    moreInfo: optional(nonEmptyStringDecoder$1),\n    publisher: optional(nonEmptyStringDecoder$1),\n    customConfig: optional(array(anyJson())),\n    hostManifests: optional(hostManifestsBrowserDecoder),\n    interop: optional(v2InteropDecoder)\n});\nconst v2DefinitionDecoder = object({\n    appId: nonEmptyStringDecoder$1,\n    name: nonEmptyStringDecoder$1,\n    type: v2TypeDecoder,\n    details: v2DetailsDecoder,\n    version: optional(nonEmptyStringDecoder$1),\n    title: optional(nonEmptyStringDecoder$1),\n    tooltip: optional(nonEmptyStringDecoder$1),\n    lang: optional(nonEmptyStringDecoder$1),\n    description: optional(nonEmptyStringDecoder$1),\n    categories: optional(array(nonEmptyStringDecoder$1)),\n    icons: optional(array(v2IconDecoder)),\n    screenshots: optional(array(v2ScreenshotDecoder)),\n    contactEmail: optional(nonEmptyStringDecoder$1),\n    supportEmail: optional(nonEmptyStringDecoder$1),\n    moreInfo: optional(nonEmptyStringDecoder$1),\n    publisher: optional(nonEmptyStringDecoder$1),\n    customConfig: optional(array(anyJson())),\n    hostManifests: optional(hostManifestsBrowserDecoder),\n    interop: optional(v2InteropDecoder),\n    localizedVersions: optional(dict(v2LocalizedDefinitionDecoder))\n});\nconst allDefinitionsDecoder = oneOf(v1DefinitionDecoder, v2DefinitionDecoder);\n\nconst parseDecoderErrorToStringMessage = (error) => {\n    return `${error.kind} at ${error.at}: ${JSON.stringify(error.input)}. Reason - ${error.message}`;\n};\n\nclass FDC3Service {\n    fdc3ToDesktopDefinitionType = {\n        web: \"window\",\n        native: \"exe\",\n        citrix: \"citrix\",\n        onlineNative: \"clickonce\",\n        other: \"window\"\n    };\n    toApi() {\n        return {\n            isFdc3Definition: this.isFdc3Definition.bind(this),\n            parseToBrowserBaseAppData: this.parseToBrowserBaseAppData.bind(this),\n            parseToDesktopAppConfig: this.parseToDesktopAppConfig.bind(this)\n        };\n    }\n    isFdc3Definition(definition) {\n        const decodeRes = allDefinitionsDecoder.run(definition);\n        if (!decodeRes.ok) {\n            return { isFdc3: false, reason: parseDecoderErrorToStringMessage(decodeRes.error) };\n        }\n        if (definition.appId && definition.details) {\n            return { isFdc3: true, version: \"2.0\" };\n        }\n        if (definition.manifest) {\n            return { isFdc3: true, version: \"1.2\" };\n        }\n        return { isFdc3: false, reason: \"The passed definition is not FDC3\" };\n    }\n    parseToBrowserBaseAppData(definition) {\n        const { isFdc3, version } = this.isFdc3Definition(definition);\n        if (!isFdc3) {\n            throw new Error(\"The passed definition is not FDC3\");\n        }\n        const decodeRes = allDefinitionsDecoder.run(definition);\n        if (!decodeRes.ok) {\n            throw new Error(`Invalid FDC3 ${version} definition. Error: ${parseDecoderErrorToStringMessage(decodeRes.error)}`);\n        }\n        const userProperties = this.getUserPropertiesFromDefinition(definition, version);\n        const createOptions = { url: this.getUrl(definition, version) };\n        const baseApplicationData = {\n            name: definition.appId,\n            type: \"window\",\n            createOptions,\n            userProperties: {\n                ...userProperties,\n                intents: version === \"1.2\"\n                    ? userProperties.intents\n                    : this.getIntentsFromV2AppDefinition(definition),\n                details: createOptions\n            },\n            title: definition.title,\n            version: definition.version,\n            icon: this.getIconFromDefinition(definition, version),\n            caption: definition.description,\n            fdc3: version === \"2.0\" ? { ...definition, definitionVersion: \"2.0\" } : undefined,\n        };\n        const ioConnectDefinition = definition.hostManifests?.ioConnect || definition.hostManifests?.[\"Glue42\"];\n        if (!ioConnectDefinition) {\n            return baseApplicationData;\n        }\n        const ioDefinitionDecodeRes = glue42HostManifestsBrowserDecoder.run(ioConnectDefinition);\n        if (!ioDefinitionDecodeRes.ok) {\n            throw new Error(`Invalid FDC3 ${version} definition. Error: ${parseDecoderErrorToStringMessage(ioDefinitionDecodeRes.error)}`);\n        }\n        if (!Object.keys(ioDefinitionDecodeRes.result).length) {\n            return baseApplicationData;\n        }\n        return this.mergeBaseAppDataWithGlueManifest(baseApplicationData, ioDefinitionDecodeRes.result);\n    }\n    parseToDesktopAppConfig(definition) {\n        const { isFdc3, version } = this.isFdc3Definition(definition);\n        if (!isFdc3) {\n            throw new Error(\"The passed definition is not FDC3\");\n        }\n        const decodeRes = allDefinitionsDecoder.run(definition);\n        if (!decodeRes.ok) {\n            throw new Error(`Invalid FDC3 ${version} definition. Error: ${parseDecoderErrorToStringMessage(decodeRes.error)}`);\n        }\n        if (version === \"1.2\") {\n            const fdc3v1Definition = definition;\n            return {\n                name: fdc3v1Definition.appId,\n                type: \"window\",\n                details: {\n                    url: this.getUrl(definition, version)\n                },\n                version: fdc3v1Definition.version,\n                title: fdc3v1Definition.title,\n                tooltip: fdc3v1Definition.tooltip,\n                caption: fdc3v1Definition.description,\n                icon: fdc3v1Definition.icons?.[0].icon,\n                intents: fdc3v1Definition.intents,\n                customProperties: {\n                    manifestType: fdc3v1Definition.manifestType,\n                    images: fdc3v1Definition.images,\n                    contactEmail: fdc3v1Definition.contactEmail,\n                    supportEmail: fdc3v1Definition.supportEmail,\n                    publisher: fdc3v1Definition.publisher,\n                    icons: fdc3v1Definition.icons,\n                    customConfig: fdc3v1Definition.customConfig\n                }\n            };\n        }\n        const fdc3v2Definition = definition;\n        const desktopDefinition = {\n            name: fdc3v2Definition.appId,\n            type: this.fdc3ToDesktopDefinitionType[fdc3v2Definition.type],\n            details: fdc3v2Definition.details,\n            version: fdc3v2Definition.version,\n            title: fdc3v2Definition.title,\n            tooltip: fdc3v2Definition.tooltip,\n            caption: fdc3v2Definition.description,\n            icon: this.getIconFromDefinition(fdc3v2Definition, \"2.0\"),\n            intents: this.getIntentsFromV2AppDefinition(fdc3v2Definition),\n            fdc3: { ...fdc3v2Definition, definitionVersion: \"2.0\" }\n        };\n        const ioConnectDefinition = definition.hostManifests?.ioConnect || definition.hostManifests?.[\"Glue42\"];\n        if (!ioConnectDefinition) {\n            return desktopDefinition;\n        }\n        if (typeof ioConnectDefinition !== \"object\" || Array.isArray(ioConnectDefinition)) {\n            throw new Error(`Invalid '${definition.hostManifests.ioConnect ? \"hostManifests.ioConnect\" : \"hostManifests['Glue42']\"}' key`);\n        }\n        return this.mergeDesktopConfigWithGlueManifest(desktopDefinition, ioConnectDefinition);\n    }\n    getUserPropertiesFromDefinition(definition, version) {\n        if (version === \"1.2\") {\n            return Object.fromEntries(Object.entries(definition).filter(([key]) => !connectBrowserAppProps.includes(key)));\n        }\n        return Object.fromEntries(Object.entries(definition).filter(([key]) => !connectBrowserAppProps.includes(key) && !fdc3v2AppProps.includes(key)));\n    }\n    getUrl(definition, version) {\n        let url;\n        if (version === \"1.2\") {\n            const parsedManifest = JSON.parse(definition.manifest);\n            url = parsedManifest.details?.url || parsedManifest.url;\n        }\n        else {\n            url = definition.details?.url;\n        }\n        if (!url || typeof url !== \"string\") {\n            throw new Error(`Invalid FDC3 ${version} definition. Provide valid 'url' under '${version === \"1.2\" ? \"manifest\" : \"details\"}' key`);\n        }\n        return url;\n    }\n    getIntentsFromV2AppDefinition(definition) {\n        const fdc3Intents = definition.interop?.intents?.listensFor;\n        if (!fdc3Intents) {\n            return;\n        }\n        const intents = Object.entries(fdc3Intents).map((fdc3Intent) => {\n            const [intentName, intentData] = fdc3Intent;\n            return {\n                name: intentName,\n                ...intentData\n            };\n        });\n        return intents;\n    }\n    getIconFromDefinition(definition, version) {\n        if (version === \"1.2\") {\n            return definition.icons?.find((iconDef) => iconDef.icon)?.icon || undefined;\n        }\n        return definition.icons?.find((iconDef) => iconDef.src)?.src || undefined;\n    }\n    mergeBaseAppDataWithGlueManifest(baseAppData, hostManifestDefinition) {\n        let baseApplicationDefinition = baseAppData;\n        if (hostManifestDefinition.details) {\n            const details = { ...baseAppData.createOptions, ...hostManifestDefinition.details };\n            baseApplicationDefinition.createOptions = details;\n            baseApplicationDefinition.userProperties.details = details;\n        }\n        if (Array.isArray(hostManifestDefinition.intents)) {\n            baseApplicationDefinition.userProperties.intents = (baseApplicationDefinition.userProperties.intents || []).concat(hostManifestDefinition.intents);\n        }\n        baseApplicationDefinition = { ...baseApplicationDefinition, ...hostManifestDefinition };\n        delete baseApplicationDefinition.details;\n        delete baseApplicationDefinition.intents;\n        return baseApplicationDefinition;\n    }\n    mergeDesktopConfigWithGlueManifest(config, desktopDefinition) {\n        const appConfig = Object.assign({}, config, desktopDefinition, { details: { ...config.details, ...desktopDefinition.details } });\n        if (Array.isArray(desktopDefinition.intents)) {\n            appConfig.intents = (config.intents || []).concat(desktopDefinition.intents);\n        }\n        return appConfig;\n    }\n}\n\nconst decoders$1 = {\n    common: {\n        nonEmptyStringDecoder: nonEmptyStringDecoder$1,\n        nonNegativeNumberDecoder: nonNegativeNumberDecoder$1\n    },\n    fdc3: {\n        allDefinitionsDecoder,\n        v1DefinitionDecoder,\n        v2DefinitionDecoder\n    }\n};\n\nvar INTENTS_ERRORS;\n(function (INTENTS_ERRORS) {\n    INTENTS_ERRORS[\"USER_CANCELLED\"] = \"User Closed Intents Resolver UI without choosing a handler\";\n    INTENTS_ERRORS[\"CALLER_NOT_DEFINED\"] = \"Caller Id is not defined\";\n    INTENTS_ERRORS[\"TIMEOUT_HIT\"] = \"Timeout hit\";\n    INTENTS_ERRORS[\"INTENT_NOT_FOUND\"] = \"Cannot find Intent\";\n    INTENTS_ERRORS[\"HANDLER_NOT_FOUND\"] = \"Cannot find Intent Handler\";\n    INTENTS_ERRORS[\"TARGET_INSTANCE_UNAVAILABLE\"] = \"Cannot start Target Instance\";\n    INTENTS_ERRORS[\"INTENT_DELIVERY_FAILED\"] = \"Target Instance did not add a listener\";\n    INTENTS_ERRORS[\"RESOLVER_UNAVAILABLE\"] = \"Intents Resolver UI unavailable\";\n    INTENTS_ERRORS[\"RESOLVER_TIMEOUT\"] = \"User did not choose a handler\";\n    INTENTS_ERRORS[\"INVALID_RESOLVER_RESPONSE\"] = \"Intents Resolver UI returned invalid response\";\n    INTENTS_ERRORS[\"INTENT_HANDLER_REJECTION\"] = \"Intent Handler function processing the raised intent threw an error or rejected the promise it returned\";\n})(INTENTS_ERRORS || (INTENTS_ERRORS = {}));\n\nlet IoC$1 = class IoC {\n    _fdc3;\n    _decoders = decoders$1;\n    _errors = {\n        intents: INTENTS_ERRORS\n    };\n    get fdc3() {\n        if (!this._fdc3) {\n            this._fdc3 = new FDC3Service().toApi();\n        }\n        return this._fdc3;\n    }\n    get decoders() {\n        return this._decoders;\n    }\n    get errors() {\n        return this._errors;\n    }\n};\n\nconst ioc = new IoC$1();\nioc.fdc3;\nconst decoders = ioc.decoders;\nioc.errors;\n\nconst nonEmptyStringDecoder = string$1().where((s) => s.length > 0, \"Expected a non-empty string\");\nconst nonNegativeNumberDecoder = number$1().where((num) => num >= 0, \"Expected a non-negative number\");\nconst optionalNonEmptyStringDecoder = optional$1(nonEmptyStringDecoder);\nconst libDomainDecoder = oneOf$1(constant$1(\"system\"), constant$1(\"windows\"), constant$1(\"appManager\"), constant$1(\"layouts\"), constant$1(\"intents\"), constant$1(\"notifications\"), constant$1(\"channels\"), constant$1(\"extension\"), constant$1(\"themes\"), constant$1(\"prefs\"));\nconst windowOperationTypesDecoder = oneOf$1(constant$1(\"openWindow\"), constant$1(\"windowHello\"), constant$1(\"windowAdded\"), constant$1(\"windowRemoved\"), constant$1(\"getBounds\"), constant$1(\"getFrameBounds\"), constant$1(\"getUrl\"), constant$1(\"moveResize\"), constant$1(\"focus\"), constant$1(\"close\"), constant$1(\"getTitle\"), constant$1(\"setTitle\"), constant$1(\"focusChange\"), constant$1(\"getChannel\"));\nconst appManagerOperationTypesDecoder = oneOf$1(constant$1(\"appHello\"), constant$1(\"appDirectoryStateChange\"), constant$1(\"instanceStarted\"), constant$1(\"instanceStopped\"), constant$1(\"applicationStart\"), constant$1(\"instanceStop\"), constant$1(\"clear\"));\nconst layoutsOperationTypesDecoder = oneOf$1(constant$1(\"layoutAdded\"), constant$1(\"layoutChanged\"), constant$1(\"layoutRemoved\"), constant$1(\"layoutRenamed\"), constant$1(\"get\"), constant$1(\"getAll\"), constant$1(\"export\"), constant$1(\"import\"), constant$1(\"remove\"), constant$1(\"rename\"), constant$1(\"clientSaveRequest\"), constant$1(\"getGlobalPermissionState\"), constant$1(\"checkGlobalActivated\"), constant$1(\"requestGlobalPermission\"), constant$1(\"getDefaultGlobal\"), constant$1(\"setDefaultGlobal\"), constant$1(\"clearDefaultGlobal\"), constant$1(\"updateMetadata\"));\nconst notificationsOperationTypesDecoder = oneOf$1(constant$1(\"raiseNotification\"), constant$1(\"requestPermission\"), constant$1(\"notificationShow\"), constant$1(\"notificationClick\"), constant$1(\"getPermission\"), constant$1(\"list\"), constant$1(\"notificationRaised\"), constant$1(\"notificationClosed\"), constant$1(\"click\"), constant$1(\"clear\"), constant$1(\"clearAll\"), constant$1(\"configure\"), constant$1(\"getConfiguration\"), constant$1(\"configurationChanged\"), constant$1(\"setState\"), constant$1(\"clearOld\"), constant$1(\"activeCountChange\"), constant$1(\"stateChange\"));\nconst systemOperationTypesDecoder = oneOf$1(constant$1(\"getEnvironment\"), constant$1(\"getBase\"), constant$1(\"platformShutdown\"), constant$1(\"isFdc3DataWrappingSupported\"), constant$1(\"clientError\"));\nconst windowRelativeDirectionDecoder = oneOf$1(constant$1(\"top\"), constant$1(\"left\"), constant$1(\"right\"), constant$1(\"bottom\"));\nconst windowBoundsDecoder = object$1({\n    top: number$1(),\n    left: number$1(),\n    width: nonNegativeNumberDecoder,\n    height: nonNegativeNumberDecoder\n});\nconst windowOpenSettingsDecoder = optional$1(object$1({\n    top: optional$1(number$1()),\n    left: optional$1(number$1()),\n    width: optional$1(nonNegativeNumberDecoder),\n    height: optional$1(nonNegativeNumberDecoder),\n    context: optional$1(anyJson$1()),\n    relativeTo: optional$1(nonEmptyStringDecoder),\n    relativeDirection: optional$1(windowRelativeDirectionDecoder),\n    windowId: optional$1(nonEmptyStringDecoder),\n    layoutComponentId: optional$1(nonEmptyStringDecoder)\n}));\nconst openWindowConfigDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    url: nonEmptyStringDecoder,\n    options: windowOpenSettingsDecoder\n});\nconst windowHelloDecoder = object$1({\n    windowId: optional$1(nonEmptyStringDecoder)\n});\nconst coreWindowDataDecoder = object$1({\n    windowId: nonEmptyStringDecoder,\n    name: nonEmptyStringDecoder\n});\nconst simpleWindowDecoder = object$1({\n    windowId: nonEmptyStringDecoder\n});\nconst helloSuccessDecoder = object$1({\n    windows: array$1(coreWindowDataDecoder),\n    isWorkspaceFrame: boolean$1()\n});\nconst windowTitleConfigDecoder = object$1({\n    windowId: nonEmptyStringDecoder,\n    title: string$1()\n});\nconst focusEventDataDecoder = object$1({\n    windowId: nonEmptyStringDecoder,\n    hasFocus: boolean$1()\n});\nconst windowMoveResizeConfigDecoder = object$1({\n    windowId: nonEmptyStringDecoder,\n    top: optional$1(number$1()),\n    left: optional$1(number$1()),\n    width: optional$1(nonNegativeNumberDecoder),\n    height: optional$1(nonNegativeNumberDecoder),\n    relative: optional$1(boolean$1())\n});\nconst windowBoundsResultDecoder = object$1({\n    windowId: nonEmptyStringDecoder,\n    bounds: object$1({\n        top: number$1(),\n        left: number$1(),\n        width: nonNegativeNumberDecoder,\n        height: nonNegativeNumberDecoder\n    })\n});\nconst frameWindowBoundsResultDecoder = object$1({\n    bounds: object$1({\n        top: number$1(),\n        left: number$1(),\n        width: nonNegativeNumberDecoder,\n        height: nonNegativeNumberDecoder\n    })\n});\nconst windowUrlResultDecoder = object$1({\n    windowId: nonEmptyStringDecoder,\n    url: nonEmptyStringDecoder\n});\nconst anyDecoder = anyJson$1();\nconst boundsDecoder = object$1({\n    top: optional$1(number$1()),\n    left: optional$1(number$1()),\n    width: optional$1(nonNegativeNumberDecoder),\n    height: optional$1(nonNegativeNumberDecoder)\n});\nconst instanceDataDecoder = object$1({\n    id: nonEmptyStringDecoder,\n    applicationName: nonEmptyStringDecoder\n});\nconst applicationDetailsDecoder = object$1({\n    url: nonEmptyStringDecoder,\n    top: optional$1(number$1()),\n    left: optional$1(number$1()),\n    width: optional$1(nonNegativeNumberDecoder),\n    height: optional$1(nonNegativeNumberDecoder)\n});\nconst intentDefinitionDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    displayName: optional$1(string$1()),\n    contexts: optional$1(array$1(string$1())),\n    customConfig: optional$1(object$1())\n});\nobject$1({\n    name: nonEmptyStringDecoder,\n    title: optional$1(nonEmptyStringDecoder),\n    version: optional$1(nonEmptyStringDecoder),\n    appId: optional$1(nonEmptyStringDecoder),\n    manifest: nonEmptyStringDecoder,\n    manifestType: nonEmptyStringDecoder,\n    tooltip: optional$1(nonEmptyStringDecoder),\n    description: optional$1(nonEmptyStringDecoder),\n    contactEmail: optional$1(nonEmptyStringDecoder),\n    supportEmail: optional$1(nonEmptyStringDecoder),\n    publisher: optional$1(nonEmptyStringDecoder),\n    images: optional$1(array$1(object$1({ url: optional$1(nonEmptyStringDecoder) }))),\n    icons: optional$1(array$1(object$1({ icon: optional$1(nonEmptyStringDecoder) }))),\n    customConfig: anyJson$1(),\n    intents: optional$1(array$1(intentDefinitionDecoder))\n});\nconst applicationDefinitionDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    type: nonEmptyStringDecoder.where((s) => s === \"window\", \"Expected a value of window\"),\n    title: optional$1(nonEmptyStringDecoder),\n    version: optional$1(nonEmptyStringDecoder),\n    customProperties: optional$1(anyJson$1()),\n    icon: optional$1(string$1()),\n    caption: optional$1(string$1()),\n    details: applicationDetailsDecoder,\n    intents: optional$1(array$1(intentDefinitionDecoder)),\n    hidden: optional$1(boolean$1()),\n    fdc3: optional$1(decoders.fdc3.v2DefinitionDecoder)\n});\nconst allApplicationDefinitionsDecoder = oneOf$1(applicationDefinitionDecoder, decoders.fdc3.v2DefinitionDecoder, decoders.fdc3.v1DefinitionDecoder);\nobject$1({\n    definitions: array$1(allApplicationDefinitionsDecoder),\n    mode: oneOf$1(constant$1(\"replace\"), constant$1(\"merge\"))\n});\nconst appRemoveConfigDecoder = object$1({\n    name: nonEmptyStringDecoder\n});\nconst appsExportOperationDecoder = object$1({\n    definitions: array$1(applicationDefinitionDecoder)\n});\nconst applicationDataDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    type: nonEmptyStringDecoder.where((s) => s === \"window\", \"Expected a value of window\"),\n    instances: array$1(instanceDataDecoder),\n    userProperties: optional$1(anyJson$1()),\n    title: optional$1(nonEmptyStringDecoder),\n    version: optional$1(nonEmptyStringDecoder),\n    icon: optional$1(nonEmptyStringDecoder),\n    caption: optional$1(nonEmptyStringDecoder)\n});\nconst baseApplicationDataDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    type: nonEmptyStringDecoder.where((s) => s === \"window\", \"Expected a value of window\"),\n    userProperties: anyJson$1(),\n    title: optional$1(nonEmptyStringDecoder),\n    version: optional$1(nonEmptyStringDecoder),\n    icon: optional$1(nonEmptyStringDecoder),\n    caption: optional$1(nonEmptyStringDecoder)\n});\nconst appDirectoryStateChangeDecoder = object$1({\n    appsAdded: array$1(baseApplicationDataDecoder),\n    appsChanged: array$1(baseApplicationDataDecoder),\n    appsRemoved: array$1(baseApplicationDataDecoder)\n});\nconst appHelloSuccessDecoder = object$1({\n    apps: array$1(applicationDataDecoder),\n    initialChannelId: optional$1(nonEmptyStringDecoder)\n});\nconst basicInstanceDataDecoder = object$1({\n    id: nonEmptyStringDecoder\n});\nconst applicationStartConfigDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    waitForAGMReady: boolean$1(),\n    id: optional$1(nonEmptyStringDecoder),\n    context: optional$1(anyJson$1()),\n    top: optional$1(number$1()),\n    left: optional$1(number$1()),\n    width: optional$1(nonNegativeNumberDecoder),\n    height: optional$1(nonNegativeNumberDecoder),\n    relativeTo: optional$1(nonEmptyStringDecoder),\n    relativeDirection: optional$1(windowRelativeDirectionDecoder),\n    forceChromeTab: optional$1(boolean$1()),\n    layoutComponentId: optional$1(nonEmptyStringDecoder),\n    channelId: optional$1(nonEmptyStringDecoder)\n});\nconst layoutTypeDecoder = oneOf$1(constant$1(\"Global\"), constant$1(\"Activity\"), constant$1(\"ApplicationDefault\"), constant$1(\"Swimlane\"), constant$1(\"Workspace\"));\nconst componentTypeDecoder = oneOf$1(constant$1(\"application\"), constant$1(\"activity\"));\nconst windowComponentStateDecoder = object$1({\n    context: optional$1(anyJson$1()),\n    bounds: windowBoundsDecoder,\n    createArgs: object$1({\n        name: optional$1(nonEmptyStringDecoder),\n        url: optional$1(nonEmptyStringDecoder),\n        context: optional$1(anyJson$1())\n    }),\n    windowState: optional$1(nonEmptyStringDecoder),\n    restoreState: optional$1(nonEmptyStringDecoder),\n    instanceId: nonEmptyStringDecoder,\n    isCollapsed: optional$1(boolean$1()),\n    isSticky: optional$1(boolean$1()),\n    restoreSettings: object$1({\n        groupId: optional$1(nonEmptyStringDecoder),\n        groupZOrder: optional$1(number$1())\n    })\n});\nconst windowLayoutComponentDecoder = object$1({\n    type: constant$1(\"window\"),\n    componentType: optional$1(componentTypeDecoder),\n    application: nonEmptyStringDecoder,\n    state: windowComponentStateDecoder\n});\nconst windowLayoutItemDecoder = object$1({\n    type: constant$1(\"window\"),\n    config: object$1({\n        appName: nonEmptyStringDecoder,\n        url: optional$1(nonEmptyStringDecoder),\n        title: optional$1(string$1()),\n        allowExtract: optional$1(boolean$1()),\n        allowReorder: optional$1(boolean$1()),\n        showCloseButton: optional$1(boolean$1()),\n        isMaximized: optional$1(boolean$1())\n    })\n});\nconst groupLayoutItemDecoder = object$1({\n    type: constant$1(\"group\"),\n    config: anyJson$1(),\n    children: array$1(oneOf$1(windowLayoutItemDecoder))\n});\nconst columnLayoutItemDecoder = object$1({\n    type: constant$1(\"column\"),\n    config: anyJson$1(),\n    children: array$1(oneOf$1(groupLayoutItemDecoder, windowLayoutItemDecoder, lazy(() => columnLayoutItemDecoder), lazy(() => rowLayoutItemDecoder)))\n});\nconst rowLayoutItemDecoder = object$1({\n    type: constant$1(\"row\"),\n    config: anyJson$1(),\n    children: array$1(oneOf$1(columnLayoutItemDecoder, groupLayoutItemDecoder, windowLayoutItemDecoder, lazy(() => rowLayoutItemDecoder)))\n});\nconst workspaceLayoutComponentStateDecoder = object$1({\n    config: anyJson$1(),\n    context: anyJson$1(),\n    children: array$1(oneOf$1(rowLayoutItemDecoder, columnLayoutItemDecoder, groupLayoutItemDecoder, windowLayoutItemDecoder))\n});\nconst workspaceLayoutComponentDecoder = object$1({\n    type: constant$1(\"Workspace\"),\n    application: optional$1(nonEmptyStringDecoder),\n    state: workspaceLayoutComponentStateDecoder\n});\nconst workspaceFrameComponentStateDecoder = object$1({\n    bounds: windowBoundsDecoder,\n    instanceId: nonEmptyStringDecoder,\n    selectedWorkspace: nonNegativeNumberDecoder,\n    workspaces: array$1(workspaceLayoutComponentStateDecoder),\n    windowState: optional$1(nonEmptyStringDecoder),\n    restoreState: optional$1(nonEmptyStringDecoder),\n    context: optional$1(anyJson$1())\n});\nconst workspaceFrameComponentDecoder = object$1({\n    type: constant$1(\"workspaceFrame\"),\n    application: nonEmptyStringDecoder,\n    componentType: optional$1(componentTypeDecoder),\n    state: workspaceFrameComponentStateDecoder\n});\nconst glueLayoutDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    type: layoutTypeDecoder,\n    components: array$1(oneOf$1(windowLayoutComponentDecoder, workspaceLayoutComponentDecoder, workspaceFrameComponentDecoder)),\n    context: optional$1(anyJson$1()),\n    metadata: optional$1(anyJson$1()),\n    version: optional$1(number$1())\n});\nconst newLayoutOptionsDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    context: optional$1(anyJson$1()),\n    metadata: optional$1(anyJson$1()),\n    instances: optional$1(array$1(nonEmptyStringDecoder)),\n    ignoreInstances: optional$1(array$1(nonEmptyStringDecoder))\n});\nconst restoreOptionsDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    context: optional$1(anyJson$1()),\n    closeRunningInstance: optional$1(boolean$1()),\n    closeMe: optional$1(boolean$1()),\n    timeout: optional$1(nonNegativeNumberDecoder)\n});\nconst layoutSummaryDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    type: layoutTypeDecoder,\n    context: optional$1(anyJson$1()),\n    metadata: optional$1(anyJson$1())\n});\nconst simpleLayoutConfigDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    type: layoutTypeDecoder\n});\nconst saveLayoutConfigDecoder = object$1({\n    layout: newLayoutOptionsDecoder\n});\nconst renameLayoutConfigDecoder = object$1({\n    layout: glueLayoutDecoder,\n    newName: nonEmptyStringDecoder\n});\nconst layoutResultDecoder = object$1({\n    status: nonEmptyStringDecoder\n});\nconst updateLayoutMetadataConfigDecoder = object$1({\n    layout: glueLayoutDecoder,\n});\nconst restoreLayoutConfigDecoder = object$1({\n    layout: restoreOptionsDecoder\n});\nconst getAllLayoutsConfigDecoder = object$1({\n    type: layoutTypeDecoder\n});\nconst allLayoutsFullConfigDecoder = object$1({\n    layouts: array$1(glueLayoutDecoder)\n});\nconst importModeDecoder = oneOf$1(constant$1(\"replace\"), constant$1(\"merge\"));\nconst layoutsImportConfigDecoder = object$1({\n    layouts: array$1(glueLayoutDecoder),\n    mode: importModeDecoder,\n    skipManagerRequest: optional$1(boolean$1())\n});\nconst allLayoutsSummariesResultDecoder = object$1({\n    summaries: array$1(layoutSummaryDecoder)\n});\nconst simpleLayoutResultDecoder = object$1({\n    layout: glueLayoutDecoder\n});\nconst optionalSimpleLayoutResult = object$1({\n    layout: optional$1(glueLayoutDecoder)\n});\nconst setDefaultGlobalConfigDecoder = object$1({\n    name: nonEmptyStringDecoder\n});\nconst intentsOperationTypesDecoder = oneOf$1(constant$1(\"findIntent\"), constant$1(\"getIntents\"), constant$1(\"raiseIntent\"), constant$1(\"raise\"), constant$1(\"filterHandlers\"));\nconst intentHandlerDecoder = object$1({\n    applicationName: nonEmptyStringDecoder,\n    applicationTitle: optional$1(string$1()),\n    applicationDescription: optional$1(string$1()),\n    applicationIcon: optional$1(string$1()),\n    type: oneOf$1(constant$1(\"app\"), constant$1(\"instance\")),\n    displayName: optional$1(string$1()),\n    contextTypes: optional$1(array$1(nonEmptyStringDecoder)),\n    instanceId: optional$1(string$1()),\n    instanceTitle: optional$1(string$1()),\n    resultType: optional$1(string$1())\n});\nobject$1({\n    applicationName: string$1(),\n    applicationIcon: optional$1(string$1()),\n    instanceId: optional$1(string$1()),\n});\nconst intentResolverResponseDecoder = object$1({\n    intent: nonEmptyStringDecoder,\n    handler: intentHandlerDecoder\n});\nconst intentDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    handlers: array$1(intentHandlerDecoder)\n});\nconst intentTargetDecoder = oneOf$1(constant$1(\"startNew\"), constant$1(\"reuse\"), object$1({\n    app: optional$1(nonEmptyStringDecoder),\n    instance: optional$1(nonEmptyStringDecoder)\n}));\nconst intentContextDecoder = object$1({\n    type: optional$1(nonEmptyStringDecoder),\n    data: optional$1(anyJson$1())\n});\nconst intentsDecoder = array$1(intentDecoder);\nconst wrappedIntentsDecoder = object$1({\n    intents: intentsDecoder\n});\nconst intentFilterDecoder = object$1({\n    name: optional$1(nonEmptyStringDecoder),\n    contextType: optional$1(nonEmptyStringDecoder),\n    resultType: optional$1(nonEmptyStringDecoder)\n});\nconst findFilterDecoder = oneOf$1(nonEmptyStringDecoder, intentFilterDecoder);\nconst wrappedIntentFilterDecoder = object$1({\n    filter: optional$1(intentFilterDecoder)\n});\nconst intentRequestDecoder = object$1({\n    intent: nonEmptyStringDecoder,\n    target: optional$1(intentTargetDecoder),\n    context: optional$1(intentContextDecoder),\n    options: optional$1(windowOpenSettingsDecoder),\n    handlers: optional$1(array$1(intentHandlerDecoder)),\n    timeout: optional$1(nonNegativeNumberDecoder),\n    waitUserResponseIndefinitely: optional$1(boolean$1()),\n    clearSavedHandler: optional$1(boolean$1())\n});\nconst raiseRequestDecoder = oneOf$1(nonEmptyStringDecoder, intentRequestDecoder);\nconst resolverConfigDecoder = object$1({\n    enabled: boolean$1(),\n    appName: nonEmptyStringDecoder,\n    waitResponseTimeout: number$1()\n});\nconst raiseIntentRequestDecoder = object$1({\n    intentRequest: intentRequestDecoder,\n    resolverConfig: resolverConfigDecoder\n});\nconst intentResultDecoder = object$1({\n    request: intentRequestDecoder,\n    handler: intentHandlerDecoder,\n    result: anyJson$1()\n});\nconst handlersFilterDecoder = object$1({\n    title: optional$1(nonEmptyStringDecoder),\n    openResolver: optional$1(boolean$1()),\n    timeout: optional$1(nonNegativeNumberDecoder),\n    intent: optional$1(nonEmptyStringDecoder),\n    contextTypes: optional$1(array$1(nonEmptyStringDecoder)),\n    resultType: optional$1(nonEmptyStringDecoder),\n    applicationNames: optional$1(array$1(nonEmptyStringDecoder))\n});\nconst filterHandlersResultDecoder = object$1({\n    handlers: array$1(intentHandlerDecoder)\n});\nconst filterHandlersWithResolverConfigDecoder = object$1({\n    filterHandlersRequest: handlersFilterDecoder,\n    resolverConfig: resolverConfigDecoder\n});\nconst AddIntentListenerRequestDecoder = object$1({\n    intent: nonEmptyStringDecoder,\n    contextTypes: optional$1(array$1(nonEmptyStringDecoder)),\n    displayName: optional$1(string$1()),\n    icon: optional$1(string$1()),\n    description: optional$1(string$1()),\n    resultType: optional$1(string$1())\n});\nconst AddIntentListenerDecoder = oneOf$1(nonEmptyStringDecoder, AddIntentListenerRequestDecoder);\nconst intentInfoDecoder = object$1({\n    intent: nonEmptyStringDecoder,\n    contextTypes: optional$1(array$1(nonEmptyStringDecoder)),\n    description: optional$1(nonEmptyStringDecoder),\n    displayName: optional$1(nonEmptyStringDecoder),\n    icon: optional$1(nonEmptyStringDecoder),\n    resultType: optional$1(nonEmptyStringDecoder)\n});\nconst getIntentsResultDecoder = object$1({\n    intents: array$1(intentInfoDecoder)\n});\nconst channelNameDecoder = (channelNames) => {\n    return nonEmptyStringDecoder.where(s => channelNames.includes(s), \"Expected a valid channel name\");\n};\nconst publishOptionsDecoder = optional$1(oneOf$1(nonEmptyStringDecoder, object$1({\n    name: optional$1(nonEmptyStringDecoder),\n    fdc3: optional$1(boolean$1())\n})));\nconst fdc3ContextDecoder = anyJson$1().where((value) => typeof value.type === \"string\", \"Expected a valid FDC3 Context with compulsory 'type' field\");\nconst interopActionSettingsDecoder = object$1({\n    method: nonEmptyStringDecoder,\n    arguments: optional$1(anyJson$1()),\n    target: optional$1(oneOf$1(constant$1(\"all\"), constant$1(\"best\")))\n});\nconst glue42NotificationActionDecoder = object$1({\n    action: string$1(),\n    title: nonEmptyStringDecoder,\n    icon: optional$1(string$1()),\n    interop: optional$1(interopActionSettingsDecoder)\n});\nconst notificationStateDecoder = oneOf$1(constant$1(\"Active\"), constant$1(\"Acknowledged\"), constant$1(\"Seen\"), constant$1(\"Closed\"), constant$1(\"Stale\"), constant$1(\"Snoozed\"), constant$1(\"Processing\"));\nconst activeNotificationsCountChangeDecoder = object$1({\n    count: number$1()\n});\nconst notificationDefinitionDecoder = object$1({\n    badge: optional$1(string$1()),\n    body: optional$1(string$1()),\n    data: optional$1(anyJson$1()),\n    dir: optional$1(oneOf$1(constant$1(\"auto\"), constant$1(\"ltr\"), constant$1(\"rtl\"))),\n    icon: optional$1(string$1()),\n    image: optional$1(string$1()),\n    lang: optional$1(string$1()),\n    renotify: optional$1(boolean$1()),\n    requireInteraction: optional$1(boolean$1()),\n    silent: optional$1(boolean$1()),\n    tag: optional$1(string$1()),\n    timestamp: optional$1(nonNegativeNumberDecoder),\n    vibrate: optional$1(array$1(number$1()))\n});\nconst glue42NotificationOptionsDecoder = object$1({\n    title: nonEmptyStringDecoder,\n    clickInterop: optional$1(interopActionSettingsDecoder),\n    actions: optional$1(array$1(glue42NotificationActionDecoder)),\n    focusPlatformOnDefaultClick: optional$1(boolean$1()),\n    badge: optional$1(string$1()),\n    body: optional$1(string$1()),\n    data: optional$1(anyJson$1()),\n    dir: optional$1(oneOf$1(constant$1(\"auto\"), constant$1(\"ltr\"), constant$1(\"rtl\"))),\n    icon: optional$1(string$1()),\n    image: optional$1(string$1()),\n    lang: optional$1(string$1()),\n    renotify: optional$1(boolean$1()),\n    requireInteraction: optional$1(boolean$1()),\n    silent: optional$1(boolean$1()),\n    tag: optional$1(string$1()),\n    timestamp: optional$1(nonNegativeNumberDecoder),\n    vibrate: optional$1(array$1(number$1())),\n    severity: optional$1(oneOf$1(constant$1(\"Low\"), constant$1(\"None\"), constant$1(\"Medium\"), constant$1(\"High\"), constant$1(\"Critical\"))),\n    showToast: optional$1(boolean$1()),\n    showInPanel: optional$1(boolean$1()),\n    state: optional$1(notificationStateDecoder)\n});\nconst notificationSetStateRequestDecoder = object$1({\n    id: nonEmptyStringDecoder,\n    state: notificationStateDecoder\n});\nconst channelContextDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    meta: object$1({\n        color: nonEmptyStringDecoder\n    }),\n    data: optional$1(object$1()),\n});\nconst removeChannelDataDecoder = object$1({\n    name: nonEmptyStringDecoder\n});\nconst channelRestrictionsDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    read: boolean$1(),\n    write: boolean$1(),\n    windowId: optional$1(nonEmptyStringDecoder)\n});\nconst channelRestrictionConfigWithWindowIdDecoder = object$1({\n    name: nonEmptyStringDecoder,\n    read: boolean$1(),\n    write: boolean$1(),\n    windowId: nonEmptyStringDecoder\n});\nconst restrictionConfigDataDecoder = object$1({\n    config: channelRestrictionConfigWithWindowIdDecoder\n});\nconst restrictionsDecoder = object$1({\n    channels: array$1(channelRestrictionsDecoder)\n});\nconst getRestrictionsDataDecoder = object$1({\n    windowId: nonEmptyStringDecoder\n});\nconst restrictionsConfigDecoder = object$1({\n    read: boolean$1(),\n    write: boolean$1(),\n    windowId: optional$1(nonEmptyStringDecoder)\n});\nconst restrictAllDataDecoder = object$1({\n    restrictions: restrictionsConfigDecoder\n});\nconst raiseNotificationDecoder = object$1({\n    settings: glue42NotificationOptionsDecoder,\n    id: nonEmptyStringDecoder\n});\nconst raiseNotificationResultDecoder = object$1({\n    settings: glue42NotificationOptionsDecoder\n});\nconst permissionRequestResultDecoder = object$1({\n    permissionGranted: boolean$1()\n});\nconst permissionQueryResultDecoder = object$1({\n    permission: oneOf$1(constant$1(\"default\"), constant$1(\"granted\"), constant$1(\"denied\"))\n});\nconst notificationEventPayloadDecoder = object$1({\n    definition: notificationDefinitionDecoder,\n    action: optional$1(string$1()),\n    id: optional$1(nonEmptyStringDecoder)\n});\nconst notificationFilterDecoder = object$1({\n    allowed: optional$1(array$1(nonEmptyStringDecoder)),\n    blocked: optional$1(array$1(nonEmptyStringDecoder))\n});\nconst notificationsConfigurationDecoder = object$1({\n    enable: optional$1(boolean$1()),\n    enableToasts: optional$1(boolean$1()),\n    sourceFilter: optional$1(notificationFilterDecoder),\n});\nconst notificationsConfigurationProtocolDecoder = object$1({\n    configuration: notificationsConfigurationDecoder\n});\nconst strictNotificationsConfigurationProtocolDecoder = object$1({\n    configuration: object$1({\n        enable: boolean$1(),\n        enableToasts: boolean$1(),\n        sourceFilter: object$1({\n            allowed: array$1(nonEmptyStringDecoder),\n            blocked: array$1(nonEmptyStringDecoder)\n        })\n    })\n});\nconst platformSaveRequestConfigDecoder = object$1({\n    layoutType: oneOf$1(constant$1(\"Global\"), constant$1(\"Workspace\")),\n    layoutName: nonEmptyStringDecoder,\n    context: optional$1(anyJson$1())\n});\nconst saveRequestClientResponseDecoder = object$1({\n    windowContext: optional$1(anyJson$1()),\n});\nconst permissionStateResultDecoder = object$1({\n    state: oneOf$1(constant$1(\"prompt\"), constant$1(\"denied\"), constant$1(\"granted\"))\n});\nconst simpleAvailabilityResultDecoder = object$1({\n    isAvailable: boolean$1()\n});\nconst simpleItemIdDecoder = object$1({\n    itemId: nonEmptyStringDecoder\n});\nconst operationCheckResultDecoder = object$1({\n    isSupported: boolean$1()\n});\nconst operationCheckConfigDecoder = object$1({\n    operation: nonEmptyStringDecoder\n});\nconst workspaceFrameBoundsResultDecoder = object$1({\n    bounds: windowBoundsDecoder\n});\nconst themeDecoder = object$1({\n    displayName: nonEmptyStringDecoder,\n    name: nonEmptyStringDecoder\n});\nconst simpleThemeResponseDecoder = object$1({\n    theme: themeDecoder\n});\nconst allThemesResponseDecoder = object$1({\n    themes: array$1(themeDecoder)\n});\nconst selectThemeConfigDecoder = object$1({\n    name: nonEmptyStringDecoder\n});\nconst notificationsDataDecoder = object$1({\n    id: nonEmptyStringDecoder,\n    title: nonEmptyStringDecoder,\n    clickInterop: optional$1(interopActionSettingsDecoder),\n    actions: optional$1(array$1(glue42NotificationActionDecoder)),\n    focusPlatformOnDefaultClick: optional$1(boolean$1()),\n    badge: optional$1(string$1()),\n    body: optional$1(string$1()),\n    data: optional$1(anyJson$1()),\n    dir: optional$1(oneOf$1(constant$1(\"auto\"), constant$1(\"ltr\"), constant$1(\"rtl\"))),\n    icon: optional$1(string$1()),\n    image: optional$1(string$1()),\n    lang: optional$1(string$1()),\n    renotify: optional$1(boolean$1()),\n    requireInteraction: optional$1(boolean$1()),\n    silent: optional$1(boolean$1()),\n    tag: optional$1(string$1()),\n    timestamp: optional$1(nonNegativeNumberDecoder),\n    vibrate: optional$1(array$1(number$1())),\n    severity: optional$1(oneOf$1(constant$1(\"Low\"), constant$1(\"None\"), constant$1(\"Medium\"), constant$1(\"High\"), constant$1(\"Critical\"))),\n    showToast: optional$1(boolean$1()),\n    showInPanel: optional$1(boolean$1()),\n    state: optional$1(notificationStateDecoder)\n});\nconst simpleNotificationDataDecoder = object$1({\n    notification: notificationsDataDecoder\n});\nconst allNotificationsDataDecoder = object$1({\n    notifications: array$1(notificationsDataDecoder)\n});\nconst simpleNotificationSelectDecoder = object$1({\n    id: nonEmptyStringDecoder\n});\nconst getWindowIdsOnChannelDataDecoder = object$1({\n    channel: nonEmptyStringDecoder\n});\nconst getWindowIdsOnChannelResultDecoder = object$1({\n    windowIds: array$1(nonEmptyStringDecoder)\n});\nconst channelsOperationTypesDecoder = oneOf$1(constant$1(\"addChannel\"), constant$1(\"getMyChannel\"), constant$1(\"getWindowIdsOnChannel\"), constant$1(\"getWindowIdsWithChannels\"), constant$1(\"joinChannel\"), constant$1(\"restrict\"), constant$1(\"getRestrictions\"), constant$1(\"restrictAll\"));\nconst getMyChanelResultDecoder = object$1({\n    channel: optional$1(nonEmptyStringDecoder)\n});\nconst windowWithChannelFilterDecoder = object$1({\n    application: optional$1(nonEmptyStringDecoder),\n    channels: optional$1(array$1(nonEmptyStringDecoder)),\n    windowIds: optional$1(array$1(nonEmptyStringDecoder))\n});\nconst wrappedWindowWithChannelFilterDecoder = object$1({\n    filter: optional$1(windowWithChannelFilterDecoder)\n});\nconst getWindowIdsWithChannelsResultDecoder = object$1({\n    windowIdsWithChannels: array$1(object$1({\n        application: nonEmptyStringDecoder,\n        channel: optional$1(nonEmptyStringDecoder),\n        windowId: nonEmptyStringDecoder\n    }))\n});\nconst startApplicationContextDecoder = optional$1(anyJson$1());\nconst startApplicationOptionsDecoder = optional$1(object$1({\n    top: optional$1(number$1()),\n    left: optional$1(number$1()),\n    width: optional$1(nonNegativeNumberDecoder),\n    height: optional$1(nonNegativeNumberDecoder),\n    relativeTo: optional$1(nonEmptyStringDecoder),\n    relativeDirection: optional$1(windowRelativeDirectionDecoder),\n    waitForAGMReady: optional$1(boolean$1()),\n    channelId: optional$1(nonEmptyStringDecoder),\n    reuseId: optional$1(nonEmptyStringDecoder),\n}));\nconst joinChannelDataDecoder = object$1({\n    channel: nonEmptyStringDecoder,\n    windowId: nonEmptyStringDecoder\n});\nconst windowChannelResultDecoder = object$1({\n    channel: optional$1(nonEmptyStringDecoder),\n});\nconst prefsOperationTypesDecoder = oneOf$1(constant$1(\"clear\"), constant$1(\"clearAll\"), constant$1(\"get\"), constant$1(\"getAll\"), constant$1(\"set\"), constant$1(\"update\"), constant$1(\"prefsChanged\"), constant$1(\"prefsHello\"));\nconst appPreferencesDecoder = object$1({\n    app: nonEmptyStringDecoder,\n    data: object$1(),\n    lastUpdate: optional$1(nonEmptyStringDecoder),\n});\nconst basePrefsConfigDecoder = object$1({\n    app: nonEmptyStringDecoder,\n});\nconst getPrefsResultDecoder = object$1({\n    prefs: appPreferencesDecoder,\n});\nconst getAllPrefsResultDecoder = object$1({\n    all: array$1(appPreferencesDecoder),\n});\nconst changePrefsDataDecoder = object$1({\n    app: nonEmptyStringDecoder,\n    data: object$1(),\n});\nconst prefsHelloSuccessDecoder = object$1({\n    platform: object$1({\n        app: nonEmptyStringDecoder,\n    }),\n});\nconst clientErrorDataDecoder = object$1({\n    message: nonEmptyStringDecoder\n});\n\nconst operations$9 = {\n    openWindow: { name: \"openWindow\", dataDecoder: openWindowConfigDecoder, resultDecoder: coreWindowDataDecoder },\n    windowHello: { name: \"windowHello\", dataDecoder: windowHelloDecoder, resultDecoder: helloSuccessDecoder },\n    windowAdded: { name: \"windowAdded\", dataDecoder: coreWindowDataDecoder },\n    windowRemoved: { name: \"windowRemoved\", dataDecoder: simpleWindowDecoder },\n    getBounds: { name: \"getBounds\", dataDecoder: simpleWindowDecoder, resultDecoder: windowBoundsResultDecoder },\n    getFrameBounds: { name: \"getFrameBounds\", dataDecoder: simpleWindowDecoder, resultDecoder: frameWindowBoundsResultDecoder },\n    getUrl: { name: \"getUrl\", dataDecoder: simpleWindowDecoder, resultDecoder: windowUrlResultDecoder },\n    moveResize: { name: \"moveResize\", dataDecoder: windowMoveResizeConfigDecoder },\n    focus: { name: \"focus\", dataDecoder: simpleWindowDecoder },\n    close: { name: \"close\", dataDecoder: simpleWindowDecoder },\n    getTitle: { name: \"getTitle\", dataDecoder: simpleWindowDecoder, resultDecoder: windowTitleConfigDecoder },\n    setTitle: { name: \"setTitle\", dataDecoder: windowTitleConfigDecoder },\n    focusChange: { name: \"focusChange\", dataDecoder: focusEventDataDecoder },\n    getChannel: { name: \"getChannel\", dataDecoder: simpleWindowDecoder, resultDecoder: windowChannelResultDecoder },\n};\n\nfunction getDefaultExportFromCjs$1 (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createRegistry$1(options) {\n    if (options && options.errorHandling\n        && typeof options.errorHandling !== \"function\"\n        && options.errorHandling !== \"log\"\n        && options.errorHandling !== \"silent\"\n        && options.errorHandling !== \"throw\") {\n        throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\n    }\n    var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\n    var callbacks = {};\n    function add(key, callback, replayArgumentsArr) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            callbacksForKey = [];\n            callbacks[key] = callbacksForKey;\n        }\n        callbacksForKey.push(callback);\n        if (replayArgumentsArr) {\n            setTimeout(function () {\n                replayArgumentsArr.forEach(function (replayArgument) {\n                    var _a;\n                    if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\n                        try {\n                            if (Array.isArray(replayArgument)) {\n                                callback.apply(undefined, replayArgument);\n                            }\n                            else {\n                                callback.apply(undefined, [replayArgument]);\n                            }\n                        }\n                        catch (err) {\n                            _handleError(err, key);\n                        }\n                    }\n                });\n            }, 0);\n        }\n        return function () {\n            var allForKey = callbacks[key];\n            if (!allForKey) {\n                return;\n            }\n            allForKey = allForKey.reduce(function (acc, element, index) {\n                if (!(element === callback && acc.length === index)) {\n                    acc.push(element);\n                }\n                return acc;\n            }, []);\n            if (allForKey.length === 0) {\n                delete callbacks[key];\n            }\n            else {\n                callbacks[key] = allForKey;\n            }\n        };\n    }\n    function execute(key) {\n        var argumentsArr = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            argumentsArr[_i - 1] = arguments[_i];\n        }\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey || callbacksForKey.length === 0) {\n            return [];\n        }\n        var results = [];\n        callbacksForKey.forEach(function (callback) {\n            try {\n                var result = callback.apply(undefined, argumentsArr);\n                results.push(result);\n            }\n            catch (err) {\n                results.push(undefined);\n                _handleError(err, key);\n            }\n        });\n        return results;\n    }\n    function _handleError(exceptionArtifact, key) {\n        var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\n        if (_userErrorHandler) {\n            _userErrorHandler(errParam);\n            return;\n        }\n        var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\n        if (options) {\n            switch (options.errorHandling) {\n                case \"log\":\n                    return console.error(msg);\n                case \"silent\":\n                    return;\n                case \"throw\":\n                    throw new Error(msg);\n            }\n        }\n        console.error(msg);\n    }\n    function clear() {\n        callbacks = {};\n    }\n    function clearKey(key) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            return;\n        }\n        delete callbacks[key];\n    }\n    return {\n        add: add,\n        execute: execute,\n        clear: clear,\n        clearKey: clearKey\n    };\n}\ncreateRegistry$1.default = createRegistry$1;\nvar lib$1 = createRegistry$1;\n\n\nvar CallbackRegistryFactory$1 = /*@__PURE__*/getDefaultExportFromCjs$1(lib$1);\n\nclass WebWindowModel {\n    _id;\n    _name;\n    _bridge;\n    registry = CallbackRegistryFactory$1();\n    myCtxKey;\n    ctxUnsubscribe;\n    me;\n    constructor(_id, _name, _bridge) {\n        this._id = _id;\n        this._name = _name;\n        this._bridge = _bridge;\n        this.myCtxKey = `___window___${this.id}`;\n    }\n    get id() {\n        return this._id.slice();\n    }\n    get name() {\n        return this._name.slice();\n    }\n    clean() {\n        if (this.ctxUnsubscribe) {\n            this.ctxUnsubscribe();\n        }\n    }\n    processSelfFocusEvent(hasFocus) {\n        this.me.isFocused = hasFocus;\n        this.registry.execute(\"focus-change\", this.me);\n    }\n    async toApi() {\n        this.ctxUnsubscribe = await this._bridge.contextLib.subscribe(this.myCtxKey, (data) => this.registry.execute(\"context-updated\", data));\n        this.me = {\n            id: this.id,\n            name: this.name,\n            isFocused: false,\n            getURL: this.getURL.bind(this),\n            moveResize: this.moveResize.bind(this),\n            resizeTo: this.resizeTo.bind(this),\n            moveTo: this.moveTo.bind(this),\n            focus: this.focus.bind(this),\n            close: this.close.bind(this),\n            getTitle: this.getTitle.bind(this),\n            setTitle: this.setTitle.bind(this),\n            getBounds: this.getBounds.bind(this),\n            getContext: this.getContext.bind(this),\n            updateContext: this.updateContext.bind(this),\n            setContext: this.setContext.bind(this),\n            onContextUpdated: this.onContextUpdated.bind(this),\n            onFocusChanged: this.onFocusChanged.bind(this),\n            getChannel: this.getChannel.bind(this),\n        };\n        return this.me;\n    }\n    async getURL() {\n        const result = await this._bridge.send(\"windows\", operations$9.getUrl, { windowId: this.id });\n        return result.url;\n    }\n    onFocusChanged(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to context changes, because the provided callback is not a function!\");\n        }\n        return this.registry.add(\"focus-change\", callback);\n    }\n    async moveResize(dimension) {\n        const targetBounds = runDecoderWithIOError(boundsDecoder, dimension);\n        const commandArgs = Object.assign({}, targetBounds, { windowId: this.id, relative: false });\n        await this._bridge.send(\"windows\", operations$9.moveResize, commandArgs);\n        return this.me;\n    }\n    async resizeTo(width, height) {\n        if (typeof width === \"undefined\" && typeof height === \"undefined\") {\n            return this.me;\n        }\n        if (typeof width !== \"undefined\") {\n            runDecoderWithIOError(nonNegativeNumberDecoder, width);\n        }\n        if (typeof height !== \"undefined\") {\n            runDecoderWithIOError(nonNegativeNumberDecoder, height);\n        }\n        const commandArgs = Object.assign({}, { width, height }, { windowId: this.id, relative: true });\n        await this._bridge.send(\"windows\", operations$9.moveResize, commandArgs);\n        return this.me;\n    }\n    async moveTo(top, left) {\n        if (typeof top === \"undefined\" && typeof left === \"undefined\") {\n            return this.me;\n        }\n        if (typeof top !== \"undefined\") {\n            runDecoderWithIOError(number$1(), top);\n        }\n        if (typeof left !== \"undefined\") {\n            runDecoderWithIOError(number$1(), left);\n        }\n        const commandArgs = Object.assign({}, { top, left }, { windowId: this.id, relative: true });\n        await this._bridge.send(\"windows\", operations$9.moveResize, commandArgs);\n        return this.me;\n    }\n    async focus() {\n        if (this.name === \"Platform\") {\n            window.open(undefined, this.id);\n        }\n        else {\n            await this._bridge.send(\"windows\", operations$9.focus, { windowId: this.id });\n        }\n        return this.me;\n    }\n    async close() {\n        await this._bridge.send(\"windows\", operations$9.close, { windowId: this.id });\n        return this.me;\n    }\n    async getTitle() {\n        const result = await this._bridge.send(\"windows\", operations$9.getTitle, { windowId: this.id });\n        return result.title;\n    }\n    async setTitle(title) {\n        const ttl = runDecoderWithIOError(nonEmptyStringDecoder, title);\n        await this._bridge.send(\"windows\", operations$9.setTitle, { windowId: this.id, title: ttl });\n        return this.me;\n    }\n    async getBounds() {\n        const result = await this._bridge.send(\"windows\", operations$9.getBounds, { windowId: this.id });\n        return result.bounds;\n    }\n    async getContext() {\n        const ctx = await this._bridge.contextLib.get(this.myCtxKey);\n        const { ___io___, ...rest } = ctx;\n        return rest;\n    }\n    async updateContext(context) {\n        const ctx = runDecoderWithIOError(anyDecoder, context);\n        await this._bridge.contextLib.update(this.myCtxKey, ctx);\n        return this.me;\n    }\n    async setContext(context) {\n        const ctx = runDecoderWithIOError(anyDecoder, context);\n        const current = await this._bridge.contextLib.get(this.myCtxKey);\n        const newCtx = current.___io___ ? { ...ctx, ___io___: current.___io___ } : ctx;\n        await this._bridge.contextLib.set(this.myCtxKey, newCtx);\n        return this.me;\n    }\n    onContextUpdated(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to context changes, because the provided callback is not a function!\");\n        }\n        const wrappedCallback = (data) => {\n            const { ___io___, ...rest } = data;\n            callback(rest, this.me);\n        };\n        return this.registry.add(\"context-updated\", wrappedCallback);\n    }\n    async getChannel() {\n        const result = await this._bridge.send(\"windows\", operations$9.getChannel, { windowId: this.id }, undefined, { includeOperationCheck: true });\n        return result.channel;\n    }\n}\n\nconst systemOperations = {\n    operationCheck: { name: \"operationCheck\", dataDecoder: operationCheckConfigDecoder, resultDecoder: operationCheckResultDecoder },\n    getWorkspaceWindowFrameBounds: { name: \"getWorkspaceWindowFrameBounds\", resultDecoder: workspaceFrameBoundsResultDecoder, dataDecoder: simpleItemIdDecoder }\n};\n\nconst PromiseWrap = (promise, timeoutMilliseconds, timeoutMessage) => {\n    return new Promise((resolve, reject) => {\n        let promiseActive = true;\n        const timeout = setTimeout(() => {\n            if (!promiseActive) {\n                return;\n            }\n            promiseActive = false;\n            const message = timeoutMessage || `Promise timeout hit: ${timeoutMilliseconds}`;\n            reject(message);\n        }, timeoutMilliseconds);\n        promise()\n            .then((result) => {\n            if (!promiseActive) {\n                return;\n            }\n            promiseActive = false;\n            clearTimeout(timeout);\n            resolve(result);\n        })\n            .catch((error) => {\n            if (!promiseActive) {\n                return;\n            }\n            promiseActive = false;\n            clearTimeout(timeout);\n            reject(error);\n        });\n    });\n};\nconst PromisePlus$1 = (executor, timeoutMilliseconds, timeoutMessage) => {\n    return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => {\n            const message = timeoutMessage || `Promise timeout hit: ${timeoutMilliseconds}`;\n            reject(message);\n        }, timeoutMilliseconds);\n        const providedPromise = new Promise(executor);\n        providedPromise\n            .then((result) => {\n            clearTimeout(timeout);\n            resolve(result);\n        })\n            .catch((error) => {\n            clearTimeout(timeout);\n            reject(error);\n        });\n    });\n};\n\nclass WindowsController {\n    focusEventHandler;\n    registry = CallbackRegistryFactory$1();\n    platformRegistration;\n    ioc;\n    bridge;\n    publicWindowId;\n    allWindowProjections = [];\n    me;\n    logger;\n    isWorkspaceFrame;\n    instanceId;\n    channelsController;\n    async start(coreGlue, ioc) {\n        this.logger = coreGlue.logger.subLogger(\"windows.controller.web\");\n        this.logger.trace(\"starting the web windows controller\");\n        this.publicWindowId = ioc.publicWindowId;\n        this.addWindowOperationExecutors();\n        this.ioc = ioc;\n        this.bridge = ioc.bridge;\n        this.instanceId = coreGlue.interop.instance.instance;\n        this.channelsController = ioc.channelsController;\n        this.logger.trace(`set the public window id: ${this.publicWindowId}, set the bridge operations and ioc, registering with the platform now`);\n        this.platformRegistration = this.registerWithPlatform();\n        await this.platformRegistration;\n        await this.initializeFocusTracking();\n        this.logger.trace(\"registration with the platform successful, attaching the windows property to glue and returning\");\n        const api = this.toApi();\n        coreGlue.windows = api;\n    }\n    handlePlatformShutdown() {\n        this.registry.clear();\n        this.allWindowProjections = [];\n        if (!this.focusEventHandler) {\n            return;\n        }\n        document.removeEventListener(\"visibilityChange\", this.focusEventHandler);\n        window.removeEventListener(\"focus\", this.focusEventHandler);\n        window.removeEventListener(\"blur\", this.focusEventHandler);\n    }\n    async handleBridgeMessage(args) {\n        await this.platformRegistration;\n        const operationName = runDecoderWithIOError(windowOperationTypesDecoder, args.operation);\n        const operation = operations$9[operationName];\n        if (!operation.execute) {\n            return;\n        }\n        let operationData = args.data;\n        if (operation.dataDecoder) {\n            operationData = runDecoderWithIOError(operation.dataDecoder, args.data);\n        }\n        return await operation.execute(operationData);\n    }\n    async open(name, url, options) {\n        runDecoderWithIOError(nonEmptyStringDecoder, name);\n        runDecoderWithIOError(nonEmptyStringDecoder, url);\n        const settings = runDecoderWithIOError(windowOpenSettingsDecoder, options);\n        const windowSuccess = await this.bridge.send(\"windows\", operations$9.openWindow, { name, url, options: settings });\n        return this.waitForWindowAdded(windowSuccess.windowId);\n    }\n    list() {\n        return this.allWindowProjections.map((projection) => projection.api);\n    }\n    findById(id) {\n        runDecoderWithIOError(nonEmptyStringDecoder, id);\n        return this.allWindowProjections.find((projection) => projection.id === id)?.api;\n    }\n    toApi() {\n        return {\n            open: this.open.bind(this),\n            my: this.my.bind(this),\n            list: this.list.bind(this),\n            findById: this.findById.bind(this),\n            onWindowAdded: this.onWindowAdded.bind(this),\n            onWindowRemoved: this.onWindowRemoved.bind(this),\n            onWindowGotFocus: this.onWindowGotFocus.bind(this),\n            onWindowLostFocus: this.onWindowLostFocus.bind(this)\n        };\n    }\n    addWindowOperationExecutors() {\n        operations$9.focusChange.execute = this.handleFocusChangeEvent.bind(this);\n        operations$9.windowAdded.execute = this.handleWindowAdded.bind(this);\n        operations$9.windowRemoved.execute = this.handleWindowRemoved.bind(this);\n        operations$9.getBounds.execute = this.handleGetBounds.bind(this);\n        operations$9.getFrameBounds.execute = this.handleGetBounds.bind(this);\n        operations$9.getTitle.execute = this.handleGetTitle.bind(this);\n        operations$9.getUrl.execute = this.handleGetUrl.bind(this);\n        operations$9.moveResize.execute = this.handleMoveResize.bind(this);\n        operations$9.setTitle.execute = this.handleSetTitle.bind(this);\n        operations$9.getChannel.execute = this.handleGetChannel.bind(this);\n    }\n    my() {\n        return Object.assign({}, this.me);\n    }\n    onWindowAdded(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to window added, because the provided callback is not a function!\");\n        }\n        return this.registry.add(\"window-added\", callback);\n    }\n    onWindowRemoved(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to window removed, because the provided callback is not a function!\");\n        }\n        return this.registry.add(\"window-removed\", callback);\n    }\n    onWindowGotFocus(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to onWindowGotFocus, because the provided callback is not a function!\");\n        }\n        return this.registry.add(\"window-got-focus\", callback);\n    }\n    onWindowLostFocus(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to onWindowLostFocus, because the provided callback is not a function!\");\n        }\n        return this.registry.add(\"window-lost-focus\", callback);\n    }\n    async sayHello() {\n        const helloSuccess = await this.bridge.send(\"windows\", operations$9.windowHello, { windowId: this.publicWindowId });\n        return helloSuccess;\n    }\n    async registerWithPlatform() {\n        const { windows, isWorkspaceFrame } = await this.sayHello();\n        this.isWorkspaceFrame = isWorkspaceFrame;\n        this.logger.trace(\"the platform responded to the hello message\");\n        if (!this.isWorkspaceFrame && this.publicWindowId) {\n            this.logger.trace(\"i am not treated as a workspace frame, setting my window\");\n            const myWindow = windows.find((w) => w.windowId === this.publicWindowId);\n            if (!myWindow) {\n                return ioError.raiseError(\"Cannot initialize the window library, because I received no information about me from the platform\");\n            }\n            const myProjection = await this.ioc.buildWebWindow(this.publicWindowId, myWindow.name);\n            this.me = myProjection.api;\n            this.allWindowProjections.push(myProjection);\n        }\n        const currentWindows = await Promise.all(windows\n            .filter((w) => w.windowId !== this.publicWindowId)\n            .map((w) => this.ioc.buildWebWindow(w.windowId, w.name)));\n        this.logger.trace(\"all windows projections are completed, building the list collection\");\n        this.allWindowProjections.push(...currentWindows);\n    }\n    async handleFocusChangeEvent(focusData) {\n        const foundProjection = this.allWindowProjections.find((projection) => projection.id === focusData.windowId);\n        if (!foundProjection) {\n            return;\n        }\n        foundProjection.model.processSelfFocusEvent(focusData.hasFocus);\n        const keyToExecute = focusData.hasFocus ? \"window-got-focus\" : \"window-lost-focus\";\n        this.registry.execute(keyToExecute, foundProjection.api);\n    }\n    async handleWindowAdded(data) {\n        if (this.allWindowProjections.some((projection) => projection.id === data.windowId)) {\n            return;\n        }\n        const webWindowProjection = await this.ioc.buildWebWindow(data.windowId, data.name);\n        this.allWindowProjections.push(webWindowProjection);\n        this.registry.execute(\"window-added\", webWindowProjection.api);\n    }\n    async handleWindowRemoved(data) {\n        const removed = this.allWindowProjections.find((w) => w.id === data.windowId);\n        if (!removed) {\n            return;\n        }\n        this.allWindowProjections = this.allWindowProjections.filter((w) => w.id !== data.windowId);\n        removed.model.clean();\n        this.registry.execute(\"window-removed\", removed.api);\n    }\n    async handleGetBounds() {\n        if (!this.me && !this.isWorkspaceFrame) {\n            return ioError.raiseError(\"This window cannot report it's bounds, because it is not a Glue Window, most likely because it is an iframe\");\n        }\n        return {\n            windowId: this.isWorkspaceFrame ? \"noop\" : this.me.id,\n            bounds: {\n                top: window.screenTop,\n                left: window.screenLeft,\n                width: window.innerWidth,\n                height: window.innerHeight\n            }\n        };\n    }\n    async handleGetTitle() {\n        if (!this.me) {\n            return ioError.raiseError(\"This window cannot report it's title, because it is not a Glue Window, most likely because it is an iframe\");\n        }\n        return {\n            windowId: this.me.id,\n            title: document.title\n        };\n    }\n    async handleGetUrl() {\n        if (!this.me) {\n            return ioError.raiseError(\"This window cannot report it's url, because it is not a Glue Window, most likely because it is an iframe\");\n        }\n        return {\n            windowId: this.me.id,\n            url: window.location.href\n        };\n    }\n    async handleMoveResize(config) {\n        const targetTop = typeof config.top === \"number\" ? config.top :\n            config.relative ? 0 : window.screenTop;\n        const targetLeft = typeof config.left === \"number\" ? config.left :\n            config.relative ? 0 : window.screenLeft;\n        const targetHeight = typeof config.height === \"number\" ? config.height :\n            config.relative ? 0 : window.innerHeight;\n        const targetWidth = typeof config.width === \"number\" ? config.width :\n            config.relative ? 0 : window.innerWidth;\n        const moveMethod = config.relative ? window.moveBy : window.moveTo;\n        const resizeMethod = config.relative ? window.resizeBy : window.resizeTo;\n        moveMethod(targetLeft, targetTop);\n        resizeMethod(targetWidth, targetHeight);\n    }\n    async handleSetTitle(config) {\n        document.title = config.title;\n    }\n    async initializeFocusTracking() {\n        if (this.isWorkspaceFrame) {\n            this.logger.trace(\"Ignoring the focus tracking, because this client is a workspace frame\");\n            return;\n        }\n        try {\n            await this.bridge.send(\"windows\", systemOperations.operationCheck, { operation: \"focusChange\" });\n        }\n        catch (error) {\n            this.logger.warn(\"The platform of this client is outdated and does not support focus tracking, disabling focus events for this client.\");\n            return;\n        }\n        const hasFocus = document.hasFocus();\n        await this.transmitFocusChange(true);\n        if (!hasFocus) {\n            await this.transmitFocusChange(false);\n        }\n        this.defineEventListeners();\n    }\n    processFocusEvent() {\n        const hasFocus = document.hasFocus();\n        this.transmitFocusChange(hasFocus);\n    }\n    waitForWindowAdded(windowId) {\n        const foundWindow = this.allWindowProjections.find((projection) => projection.id === windowId);\n        if (foundWindow) {\n            return Promise.resolve(foundWindow.api);\n        }\n        return PromisePlus$1((resolve) => {\n            const unsubscribe = this.onWindowAdded((addedWindow) => {\n                if (addedWindow.id === windowId) {\n                    unsubscribe();\n                    resolve(addedWindow);\n                }\n            });\n        }, 30000, `Timed out waiting for ${windowId} to be announced`);\n    }\n    async transmitFocusChange(hasFocus) {\n        const eventData = {\n            windowId: this.me?.id || `iframe-${this.instanceId}`,\n            hasFocus\n        };\n        if (this.me) {\n            this.me.isFocused = hasFocus;\n        }\n        await this.bridge.send(\"windows\", operations$9.focusChange, eventData);\n    }\n    defineEventListeners() {\n        this.focusEventHandler = this.processFocusEvent.bind(this);\n        document.addEventListener(\"visibilityChange\", this.focusEventHandler);\n        window.addEventListener(\"focus\", this.focusEventHandler);\n        window.addEventListener(\"blur\", this.focusEventHandler);\n    }\n    async handleGetChannel() {\n        if (!this.me) {\n            return ioError.raiseError(\"This window cannot report it's channel, because it is not a Glue Window, most likely because it is an iframe\");\n        }\n        const channel = this.channelsController.my();\n        return {\n            ...(channel ? { channel } : {}),\n        };\n    }\n}\n\nconst GlueWebPlatformControlName = \"T42.Web.Platform.Control\";\nconst GlueWebPlatformStreamName = \"T42.Web.Platform.Stream\";\nconst GlueClientControlName = \"T42.Web.Client.Control\";\nconst GlueCorePlusThemesStream = \"T42.Core.Plus.Themes.Stream\";\n\nclass GlueBridge {\n    coreGlue;\n    communicationId;\n    platformMethodTimeoutMs = 10000;\n    controllers;\n    sub;\n    running;\n    constructor(coreGlue, communicationId) {\n        this.coreGlue = coreGlue;\n        this.communicationId = communicationId;\n    }\n    get contextLib() {\n        return this.coreGlue.contexts;\n    }\n    get interopInstance() {\n        return this.coreGlue.interop.instance.instance;\n    }\n    async stop() {\n        this.running = false;\n        this.sub.close();\n        await this.coreGlue.interop.unregister(GlueClientControlName);\n    }\n    async start(controllers) {\n        this.running = true;\n        this.controllers = controllers;\n        await Promise.all([\n            this.checkWaitMethod(GlueWebPlatformControlName),\n            this.checkWaitMethod(GlueWebPlatformStreamName)\n        ]);\n        const systemId = this.communicationId;\n        const [sub] = await Promise.all([\n            this.coreGlue.interop.subscribe(GlueWebPlatformStreamName, systemId ? { target: { instance: this.communicationId } } : undefined),\n            this.coreGlue.interop.registerAsync(GlueClientControlName, (args, _, success, error) => this.passMessageController(args, success, error))\n        ]);\n        this.sub = sub;\n        this.sub.onData((pkg) => this.passMessageController(pkg.data));\n    }\n    getInteropInstance(windowId) {\n        const result = this.coreGlue.interop.servers().find((s) => s.windowId && s.windowId === windowId);\n        return {\n            application: result?.application,\n            applicationName: result?.applicationName,\n            peerId: result?.peerId,\n            instance: result?.instance,\n            windowId: result?.windowId\n        };\n    }\n    async send(domain, operation, operationData, options, webOptions) {\n        if (operation.dataDecoder) {\n            try {\n                operation.dataDecoder.runWithException(operationData);\n            }\n            catch (error) {\n                return ioError.raiseError(`Unexpected Web->Platform outgoing validation error: ${error.message}, for operation: ${operation.name} and input: ${JSON.stringify(error.input)}`);\n            }\n        }\n        const operationSupported = webOptions?.includeOperationCheck ?\n            (await this.checkOperationSupported(domain, operation)).isSupported :\n            true;\n        if (!operationSupported) {\n            return ioError.raiseError(`Cannot complete operation: ${operation.name} for domain: ${domain} because this client is connected to a platform which does not support it`);\n        }\n        try {\n            const operationResult = await this.transmitMessage(domain, operation, operationData, options);\n            if (operation.resultDecoder) {\n                operation.resultDecoder.runWithException(operationResult);\n            }\n            return operationResult;\n        }\n        catch (error) {\n            if (error?.kind) {\n                return ioError.raiseError(`Unexpected Web<-Platform incoming validation error: ${error.message}, for operation: ${operation.name} and input: ${JSON.stringify(error.input)}`);\n            }\n            return ioError.raiseError(error);\n        }\n    }\n    async createNotificationsSteam() {\n        const streamExists = this.coreGlue.interop.methods().some((method) => method.name === GlueCorePlusThemesStream);\n        if (!streamExists) {\n            return ioError.raiseError(\"Cannot subscribe to theme changes, because the underlying interop stream does not exist. Most likely this is the case when this client is not connected to Core Plus.\");\n        }\n        return this.coreGlue.interop.subscribe(GlueCorePlusThemesStream, this.communicationId ? { target: { instance: this.communicationId } } : undefined);\n    }\n    async checkOperationSupported(domain, operation) {\n        try {\n            const result = await this.send(domain, systemOperations.operationCheck, { operation: operation.name });\n            return result;\n        }\n        catch (error) {\n            return { isSupported: false };\n        }\n    }\n    checkWaitMethod(name) {\n        return PromisePlus$1((resolve) => {\n            const hasMethod = this.coreGlue.interop.methods().some((method) => {\n                const nameMatch = method.name === name;\n                const serverMatch = this.communicationId ?\n                    method.getServers().some((server) => server.instance === this.communicationId) :\n                    true;\n                return nameMatch && serverMatch;\n            });\n            if (hasMethod) {\n                return resolve();\n            }\n            const unSub = this.coreGlue.interop.serverMethodAdded((data) => {\n                const method = data.method;\n                const server = data.server;\n                const serverMatch = this.communicationId ?\n                    server.instance === this.communicationId :\n                    true;\n                if (method.name === name && serverMatch) {\n                    unSub();\n                    resolve();\n                }\n            });\n        }, this.platformMethodTimeoutMs, `Cannot initiate Glue Web, because a system method's discovery timed out: ${name}`);\n    }\n    passMessageController(args, success, error) {\n        const decodeResult = libDomainDecoder.run(args.domain);\n        if (!decodeResult.ok) {\n            if (error) {\n                error(`Cannot execute this client control, because of domain validation error: ${JSON.stringify(decodeResult.error)}`);\n            }\n            return;\n        }\n        const domain = decodeResult.result;\n        this.controllers[domain]\n            .handleBridgeMessage(args)\n            .then((resolutionData) => {\n            if (success) {\n                success(resolutionData);\n            }\n        })\n            .catch((err) => {\n            if (error) {\n                error(err);\n            }\n            console.warn(err);\n        });\n    }\n    async transmitMessage(domain, operation, data, options) {\n        const messageData = { domain, data, operation: operation.name };\n        let invocationResult;\n        const baseErrorMessage = `Internal Platform Communication Error. Attempted operation: ${JSON.stringify(operation.name)} with data: ${JSON.stringify(data)}. `;\n        const systemId = this.communicationId;\n        try {\n            if (!this.running) {\n                throw new Error(\"Cannot send a control message, because the platform shut down\");\n            }\n            invocationResult = await this.coreGlue.interop.invoke(GlueWebPlatformControlName, messageData, systemId ? { instance: this.communicationId } : undefined, options);\n            if (!invocationResult) {\n                throw new Error(\"Received unsupported result from the platform - empty result\");\n            }\n            if (!Array.isArray(invocationResult.all_return_values) || invocationResult.all_return_values.length === 0) {\n                throw new Error(\"Received unsupported result from the platform - empty values collection\");\n            }\n        }\n        catch (error) {\n            if (error && error.all_errors && error.all_errors.length) {\n                const invocationErrorMessage = error.all_errors[0].message;\n                throw new Error(`${baseErrorMessage} -> Inner message: ${invocationErrorMessage}`);\n            }\n            throw new Error(`${baseErrorMessage} -> Inner message: ${error.message}`);\n        }\n        return invocationResult.all_return_values[0].returned;\n    }\n}\n\nconst operations$8 = {\n    appHello: { name: \"appHello\", dataDecoder: windowHelloDecoder, resultDecoder: appHelloSuccessDecoder },\n    appDirectoryStateChange: { name: \"appDirectoryStateChange\", dataDecoder: appDirectoryStateChangeDecoder },\n    instanceStarted: { name: \"instanceStarted\", dataDecoder: instanceDataDecoder },\n    instanceStopped: { name: \"instanceStopped\", dataDecoder: instanceDataDecoder },\n    applicationStart: { name: \"applicationStart\", dataDecoder: applicationStartConfigDecoder, resultDecoder: instanceDataDecoder },\n    instanceStop: { name: \"instanceStop\", dataDecoder: basicInstanceDataDecoder },\n    import: { name: \"import\" },\n    remove: { name: \"remove\", dataDecoder: appRemoveConfigDecoder },\n    export: { name: \"export\", resultDecoder: appsExportOperationDecoder },\n    clear: { name: \"clear\" }\n};\n\nclass AppManagerController {\n    me;\n    baseApplicationsTimeoutMS = 60000;\n    appImportTimeoutMS = 20;\n    registry = CallbackRegistryFactory$1();\n    ioc;\n    bridge;\n    publicWindowId;\n    applications = [];\n    instances = [];\n    platformRegistration;\n    logger;\n    channelsController;\n    sessionController;\n    handlePlatformShutdown() {\n        this.registry.clear();\n        this.applications = [];\n        this.instances = [];\n        delete this.me;\n    }\n    async start(coreGlue, ioc) {\n        this.logger = coreGlue.logger.subLogger(\"appManger.controller.web\");\n        this.logger.trace(\"starting the web appManager controller\");\n        this.publicWindowId = ioc.publicWindowId;\n        this.addOperationsExecutors();\n        this.ioc = ioc;\n        this.bridge = ioc.bridge;\n        this.channelsController = ioc.channelsController;\n        this.sessionController = ioc.sessionController;\n        this.platformRegistration = this.registerWithPlatform();\n        await this.platformRegistration;\n        this.logger.trace(\"registration with the platform successful, attaching the appManager property to glue and returning\");\n        const api = this.toApi();\n        coreGlue.appManager = api;\n    }\n    async handleBridgeMessage(args) {\n        await this.platformRegistration;\n        const operationName = runDecoderWithIOError(appManagerOperationTypesDecoder, args.operation);\n        const operation = operations$8[operationName];\n        if (!operation.execute) {\n            return;\n        }\n        let operationData = args.data;\n        if (operation.dataDecoder) {\n            operationData = runDecoderWithIOError(operation.dataDecoder, args.data);\n        }\n        return await operation.execute(operationData);\n    }\n    onInstanceStarted(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"onInstanceStarted requires a single argument of type function\");\n        }\n        return this.registry.add(\"instance-started\", callback, this.instances);\n    }\n    onInstanceStopped(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"onInstanceStopped requires a single argument of type function\");\n        }\n        return this.registry.add(\"instance-stopped\", callback);\n    }\n    async startApplication(appName, context, options) {\n        const channels = await this.channelsController.all();\n        if (options?.channelId && !channels.includes(options.channelId)) {\n            return ioError.raiseError(`The channel with name \"${options.channelId}\" doesn't exist!`);\n        }\n        const startOptions = {\n            name: appName,\n            waitForAGMReady: options?.waitForAGMReady ?? true,\n            context,\n            top: options?.top,\n            left: options?.left,\n            width: options?.width,\n            height: options?.height,\n            relativeTo: options?.relativeTo,\n            relativeDirection: options?.relativeDirection,\n            id: options?.reuseId,\n            forceChromeTab: options?.forceTab,\n            layoutComponentId: options?.layoutComponentId,\n            channelId: options?.channelId\n        };\n        const openResult = await this.bridge.send(\"appManager\", operations$8.applicationStart, startOptions);\n        const app = this.applications.find((a) => a.name === openResult.applicationName);\n        return this.ioc.buildInstance(openResult, app);\n    }\n    getApplication(name) {\n        const verifiedName = runDecoderWithIOError(nonEmptyStringDecoder, name);\n        return this.applications.find((app) => app.name === verifiedName);\n    }\n    getInstances() {\n        return this.instances.slice();\n    }\n    toApi() {\n        const api = {\n            myInstance: this.me,\n            inMemory: {\n                import: this.import.bind(this),\n                remove: this.remove.bind(this),\n                export: this.export.bind(this),\n                clear: this.clear.bind(this)\n            },\n            application: this.getApplication.bind(this),\n            applications: this.getApplications.bind(this),\n            instances: this.getInstances.bind(this),\n            onAppAdded: this.onAppAdded.bind(this),\n            onAppChanged: this.onAppChanged.bind(this),\n            onAppRemoved: this.onAppRemoved.bind(this),\n            onInstanceStarted: this.onInstanceStarted.bind(this),\n            onInstanceStopped: this.onInstanceStopped.bind(this)\n        };\n        return api;\n    }\n    addOperationsExecutors() {\n        operations$8.appDirectoryStateChange.execute = this.handleAppDirectoryStateChange.bind(this);\n        operations$8.instanceStarted.execute = this.handleInstanceStartedMessage.bind(this);\n        operations$8.instanceStopped.execute = this.handleInstanceStoppedMessage.bind(this);\n    }\n    async handleAppDirectoryStateChange(data) {\n        data.appsAdded.forEach(this.handleApplicationAddedMessage.bind(this));\n        data.appsChanged.forEach(this.handleApplicationChangedMessage.bind(this));\n        data.appsRemoved.forEach(this.handleApplicationRemovedMessage.bind(this));\n    }\n    onAppAdded(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"onAppAdded requires a single argument of type function\");\n        }\n        return this.registry.add(\"application-added\", callback, this.applications);\n    }\n    onAppRemoved(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"onAppRemoved requires a single argument of type function\");\n        }\n        return this.registry.add(\"application-removed\", callback);\n    }\n    onAppChanged(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"onAppChanged requires a single argument of type function\");\n        }\n        return this.registry.add(\"application-changed\", callback);\n    }\n    async handleApplicationAddedMessage(appData) {\n        if (this.applications.some((app) => app.name === appData.name)) {\n            return;\n        }\n        const app = await this.ioc.buildApplication(appData, []);\n        const instances = this.instances.filter((instance) => instance.application.name === app.name);\n        app.instances.push(...instances);\n        this.applications.push(app);\n        this.registry.execute(\"application-added\", app);\n    }\n    async handleApplicationRemovedMessage(appData) {\n        const appIndex = this.applications.findIndex((app) => app.name === appData.name);\n        if (appIndex < 0) {\n            return;\n        }\n        const app = this.applications[appIndex];\n        this.applications.splice(appIndex, 1);\n        this.registry.execute(\"application-removed\", app);\n    }\n    async handleApplicationChangedMessage(appData) {\n        const app = this.applications.find((app) => app.name === appData.name);\n        if (!app) {\n            return this.handleApplicationAddedMessage(appData);\n        }\n        app.title = appData.title;\n        app.version = appData.version;\n        app.icon = appData.icon;\n        app.caption = appData.caption;\n        app.userProperties = appData.userProperties;\n        this.registry.execute(\"application-changed\", app);\n    }\n    async handleInstanceStartedMessage(instanceData) {\n        if (this.instances.some((instance) => instance.id === instanceData.id)) {\n            return;\n        }\n        const application = this.applications.find((app) => app.name === instanceData.applicationName);\n        if (!application) {\n            return ioError.raiseError(`Cannot add instance: ${instanceData.id}, because there is no application definition associated with it`);\n        }\n        const instance = this.ioc.buildInstance(instanceData, application);\n        this.instances.push(instance);\n        application.instances.push(instance);\n        this.registry.execute(\"instance-started\", instance);\n    }\n    async handleInstanceStoppedMessage(instanceData) {\n        const instance = this.instances.find((i) => i.id === instanceData.id);\n        if (instance) {\n            const instIdx = this.instances.findIndex((inst) => inst.id === instanceData.id);\n            this.instances.splice(instIdx, 1);\n        }\n        const application = this.applications.find((app) => app.instances.some((inst) => inst.id === instanceData.id));\n        if (application) {\n            const instIdxApps = application.instances.findIndex((inst) => inst.id === instanceData.id);\n            application.instances.splice(instIdxApps, 1);\n        }\n        if (!instance) {\n            return;\n        }\n        this.registry.execute(\"instance-stopped\", instance);\n    }\n    async import(definitions, mode = \"replace\") {\n        runDecoderWithIOError(importModeDecoder, mode);\n        if (!Array.isArray(definitions)) {\n            return ioError.raiseError(\"Import must be called with an array of definitions\");\n        }\n        if (definitions.length > 10000) {\n            return ioError.raiseError(\"Cannot import more than 10000 app definitions in Glue42 Core.\");\n        }\n        const parseResult = definitions.reduce((soFar, definition) => {\n            const decodeResult = allApplicationDefinitionsDecoder.run(definition);\n            if (!decodeResult.ok) {\n                soFar.invalid.push({ app: definition?.name, error: JSON.stringify(decodeResult.error) });\n            }\n            else {\n                soFar.valid.push(definition);\n            }\n            return soFar;\n        }, { valid: [], invalid: [] });\n        const responseTimeout = this.baseApplicationsTimeoutMS + this.appImportTimeoutMS * parseResult.valid.length;\n        await this.bridge.send(\"appManager\", operations$8.import, { definitions: parseResult.valid, mode }, { methodResponseTimeoutMs: responseTimeout });\n        return {\n            imported: parseResult.valid.map((valid) => valid.name),\n            errors: parseResult.invalid\n        };\n    }\n    async remove(name) {\n        runDecoderWithIOError(nonEmptyStringDecoder, name);\n        await this.bridge.send(\"appManager\", operations$8.remove, { name }, { methodResponseTimeoutMs: this.baseApplicationsTimeoutMS });\n    }\n    async clear() {\n        await this.bridge.send(\"appManager\", operations$8.clear, undefined, { methodResponseTimeoutMs: this.baseApplicationsTimeoutMS });\n    }\n    async export() {\n        const response = await this.bridge.send(\"appManager\", operations$8.export, undefined, { methodResponseTimeoutMs: this.baseApplicationsTimeoutMS });\n        return response.definitions;\n    }\n    getApplications() {\n        return this.applications.slice();\n    }\n    async joinInitialChannel(initialChannelId) {\n        try {\n            await this.channelsController.join(initialChannelId);\n        }\n        catch (error) {\n            this.logger.warn(`Application instance ${this.me} was unable to join the ${initialChannelId} channel. Reason: ${JSON.stringify(error)}`);\n        }\n    }\n    async registerWithPlatform() {\n        const result = await this.bridge.send(\"appManager\", operations$8.appHello, { windowId: this.publicWindowId }, { methodResponseTimeoutMs: this.baseApplicationsTimeoutMS });\n        this.logger.trace(\"the platform responded to the hello message with a full list of apps\");\n        this.applications = await Promise.all(result.apps.map((app) => this.ioc.buildApplication(app, app.instances)));\n        this.instances = this.applications.reduce((instancesSoFar, app) => {\n            instancesSoFar.push(...app.instances);\n            return instancesSoFar;\n        }, []);\n        this.me = this.findMyInstance();\n        this.logger.trace(`all applications were parsed and saved. I am ${this.me ? \"NOT a\" : \"a\"} valid instance`);\n        const { channels: channelsStorageData } = this.sessionController.getWindowData();\n        const channel = channelsStorageData ? channelsStorageData.currentName : result.initialChannelId;\n        if (channel) {\n            await this.joinInitialChannel(channel);\n        }\n    }\n    findMyInstance() {\n        for (const app of this.applications) {\n            const foundInstance = app.instances.find((instance) => instance.id === this.publicWindowId);\n            if (foundInstance) {\n                return foundInstance;\n            }\n        }\n        return undefined;\n    }\n}\n\nclass InstanceModel {\n    data;\n    bridge;\n    application;\n    me;\n    myCtxKey;\n    constructor(data, bridge, application) {\n        this.data = data;\n        this.bridge = bridge;\n        this.application = application;\n        this.myCtxKey = `___instance___${this.data.id}`;\n    }\n    toApi() {\n        const agm = this.bridge.getInteropInstance(this.data.id);\n        const api = {\n            id: this.data.id,\n            agm,\n            application: this.application,\n            stop: this.stop.bind(this),\n            getContext: this.getContext.bind(this)\n        };\n        this.me = Object.freeze(api);\n        return this.me;\n    }\n    async getContext() {\n        return this.bridge.contextLib.get(this.myCtxKey);\n    }\n    async stop() {\n        await this.bridge.send(\"appManager\", operations$8.instanceStop, { id: this.data.id });\n    }\n}\n\nclass ApplicationModel {\n    data;\n    instances;\n    controller;\n    me;\n    constructor(data, instances, controller) {\n        this.data = data;\n        this.instances = instances;\n        this.controller = controller;\n    }\n    toApi() {\n        const api = {\n            name: this.data.name,\n            title: this.data.title,\n            version: this.data.version,\n            icon: this.data.icon,\n            caption: this.data.caption,\n            userProperties: this.data.userProperties,\n            instances: this.instances,\n            start: this.start.bind(this),\n            onInstanceStarted: this.onInstanceStarted.bind(this),\n            onInstanceStopped: this.onInstanceStopped.bind(this)\n        };\n        this.me = api;\n        return this.me;\n    }\n    onInstanceStarted(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"OnInstanceStarted requires a single argument of type function\");\n        }\n        return this.controller.onInstanceStarted((instance) => {\n            if (instance.application.name === this.data.name) {\n                callback(instance);\n            }\n        });\n    }\n    onInstanceStopped(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"OnInstanceStarted requires a single argument of type function\");\n        }\n        return this.controller.onInstanceStopped((instance) => {\n            if (instance.application.name === this.data.name) {\n                callback(instance);\n            }\n        });\n    }\n    async start(context, options) {\n        const verifiedContext = runDecoderWithIOError(startApplicationContextDecoder, context);\n        const verifiedOptions = runDecoderWithIOError(startApplicationOptionsDecoder, options);\n        return this.controller.startApplication(this.data.name, verifiedContext, verifiedOptions);\n    }\n}\n\nconst operations$7 = {\n    layoutAdded: { name: \"layoutAdded\", dataDecoder: glueLayoutDecoder },\n    layoutChanged: { name: \"layoutChanged\", dataDecoder: glueLayoutDecoder },\n    layoutRemoved: { name: \"layoutRemoved\", dataDecoder: glueLayoutDecoder },\n    layoutRenamed: { name: \"layoutRenamed\", dataDecoder: glueLayoutDecoder },\n    get: { name: \"get\", dataDecoder: simpleLayoutConfigDecoder, resultDecoder: optionalSimpleLayoutResult },\n    getAll: { name: \"getAll\", dataDecoder: getAllLayoutsConfigDecoder, resultDecoder: allLayoutsSummariesResultDecoder },\n    export: { name: \"export\", dataDecoder: getAllLayoutsConfigDecoder, resultDecoder: allLayoutsFullConfigDecoder },\n    import: { name: \"import\", dataDecoder: layoutsImportConfigDecoder },\n    remove: { name: \"remove\", dataDecoder: simpleLayoutConfigDecoder },\n    rename: { name: \"rename\", dataDecoder: renameLayoutConfigDecoder, resultDecoder: layoutResultDecoder },\n    save: { name: \"save\", dataDecoder: saveLayoutConfigDecoder, resultDecoder: simpleLayoutResultDecoder },\n    restore: { name: \"restore\", dataDecoder: restoreLayoutConfigDecoder },\n    clientSaveRequest: { name: \"clientSaveRequest\", dataDecoder: platformSaveRequestConfigDecoder, resultDecoder: saveRequestClientResponseDecoder },\n    getGlobalPermissionState: { name: \"getGlobalPermissionState\", resultDecoder: permissionStateResultDecoder },\n    requestGlobalPermission: { name: \"requestGlobalPermission\", resultDecoder: simpleAvailabilityResultDecoder },\n    checkGlobalActivated: { name: \"checkGlobalActivated\", resultDecoder: simpleAvailabilityResultDecoder },\n    getDefaultGlobal: { name: \"getDefaultGlobal\", resultDecoder: optionalSimpleLayoutResult },\n    setDefaultGlobal: { name: \"setDefaultGlobal\", dataDecoder: setDefaultGlobalConfigDecoder },\n    clearDefaultGlobal: { name: \"clearDefaultGlobal\" },\n    updateMetadata: { name: \"updateMetadata\", dataDecoder: updateLayoutMetadataConfigDecoder }\n};\n\nclass LayoutsController {\n    defaultLayoutRestoreTimeoutMS = 120000;\n    registry = CallbackRegistryFactory$1();\n    bridge;\n    logger;\n    windowsController;\n    saveRequestSubscription;\n    handlePlatformShutdown() {\n        this.registry.clear();\n    }\n    async start(coreGlue, ioc) {\n        this.logger = coreGlue.logger.subLogger(\"layouts.controller.web\");\n        this.logger.trace(\"starting the web layouts controller\");\n        this.bridge = ioc.bridge;\n        this.windowsController = ioc.windowsController;\n        this.addOperationsExecutors();\n        const api = this.toApi();\n        this.logger.trace(\"no need for platform registration, attaching the layouts property to glue and returning\");\n        coreGlue.layouts = api;\n    }\n    async handleBridgeMessage(args) {\n        const operationName = runDecoderWithIOError(layoutsOperationTypesDecoder, args.operation);\n        const operation = operations$7[operationName];\n        if (!operation.execute) {\n            return;\n        }\n        let operationData = args.data;\n        if (operation.dataDecoder) {\n            operationData = runDecoderWithIOError(operation.dataDecoder, args.data);\n        }\n        return await operation.execute(operationData);\n    }\n    toApi() {\n        const api = {\n            get: this.get.bind(this),\n            getAll: this.getAll.bind(this),\n            export: this.export.bind(this),\n            import: this.import.bind(this),\n            save: this.save.bind(this),\n            restore: this.restore.bind(this),\n            remove: this.remove.bind(this),\n            onAdded: this.onAdded.bind(this),\n            onChanged: this.onChanged.bind(this),\n            onRemoved: this.onRemoved.bind(this),\n            onSaveRequested: this.subscribeOnSaveRequested.bind(this),\n            getMultiScreenPermissionState: this.getGlobalPermissionState.bind(this),\n            requestMultiScreenPermission: this.requestGlobalPermission.bind(this),\n            getGlobalTypeState: this.checkGlobalActivated.bind(this),\n            getDefaultGlobal: this.getDefaultGlobal.bind(this),\n            setDefaultGlobal: this.setDefaultGlobal.bind(this),\n            clearDefaultGlobal: this.clearDefaultGlobal.bind(this),\n            rename: this.rename.bind(this),\n            onRenamed: this.onRenamed.bind(this),\n            updateMetadata: this.updateMetadata.bind(this)\n        };\n        return Object.freeze(api);\n    }\n    addOperationsExecutors() {\n        operations$7.layoutAdded.execute = this.handleOnAdded.bind(this);\n        operations$7.layoutChanged.execute = this.handleOnChanged.bind(this);\n        operations$7.layoutRemoved.execute = this.handleOnRemoved.bind(this);\n        operations$7.layoutRenamed.execute = this.handleOnRenamed.bind(this);\n        operations$7.clientSaveRequest.execute = this.handleSaveRequest.bind(this);\n    }\n    async get(name, type) {\n        runDecoderWithIOError(nonEmptyStringDecoder, name);\n        runDecoderWithIOError(layoutTypeDecoder, type);\n        const result = await this.bridge.send(\"layouts\", operations$7.get, { name, type });\n        return result.layout;\n    }\n    async getAll(type) {\n        runDecoderWithIOError(layoutTypeDecoder, type);\n        const result = await this.bridge.send(\"layouts\", operations$7.getAll, { type });\n        return result.summaries;\n    }\n    async export(type) {\n        runDecoderWithIOError(layoutTypeDecoder, type);\n        const result = await this.bridge.send(\"layouts\", operations$7.export, { type });\n        return result.layouts;\n    }\n    async import(layouts, mode = \"replace\") {\n        runDecoderWithIOError(importModeDecoder, mode);\n        if (!Array.isArray(layouts)) {\n            return ioError.raiseError(\"Import must be called with an array of layouts\");\n        }\n        if (layouts.length > 1000) {\n            return ioError.raiseError(\"Cannot import more than 1000 layouts at once in Glue42 Core.\");\n        }\n        const parseResult = layouts.reduce((soFar, layout) => {\n            const decodeResult = glueLayoutDecoder.run(layout);\n            if (decodeResult.ok) {\n                soFar.valid.push(layout);\n            }\n            else {\n                this.logger.warn(`A layout with name: ${layout.name} was not imported, because of error: ${JSON.stringify(decodeResult.error)}`);\n            }\n            return soFar;\n        }, { valid: [] });\n        const layoutsToImport = layouts.filter((layout) => parseResult.valid.some((validLayout) => validLayout.name === layout.name));\n        await this.bridge.send(\"layouts\", operations$7.import, { layouts: layoutsToImport, mode });\n    }\n    async save(layout) {\n        runDecoderWithIOError(newLayoutOptionsDecoder, layout);\n        const saveResult = await this.bridge.send(\"layouts\", operations$7.save, { layout });\n        return saveResult.layout;\n    }\n    async restore(options) {\n        runDecoderWithIOError(restoreOptionsDecoder, options);\n        const invocationTimeout = options.timeout ? options.timeout * 2 : this.defaultLayoutRestoreTimeoutMS;\n        await this.bridge.send(\"layouts\", operations$7.restore, { layout: options }, { methodResponseTimeoutMs: invocationTimeout });\n    }\n    async remove(type, name) {\n        runDecoderWithIOError(layoutTypeDecoder, type);\n        runDecoderWithIOError(nonEmptyStringDecoder, name);\n        await this.bridge.send(\"layouts\", operations$7.remove, { type, name });\n    }\n    async handleSaveRequest(config) {\n        const response = {};\n        if (this.saveRequestSubscription) {\n            try {\n                const onSaveRequestResponse = this.saveRequestSubscription(config);\n                response.windowContext = onSaveRequestResponse?.windowContext;\n            }\n            catch (error) {\n                this.logger.warn(`An error was thrown by the onSaveRequested callback, ignoring the callback: ${JSON.stringify(error)}`);\n            }\n        }\n        return response;\n    }\n    async getGlobalPermissionState() {\n        const requestResult = await this.bridge.send(\"layouts\", operations$7.getGlobalPermissionState, undefined);\n        return requestResult;\n    }\n    async requestGlobalPermission() {\n        const currentState = (await this.getGlobalPermissionState()).state;\n        if (currentState === \"denied\") {\n            return { permissionGranted: false };\n        }\n        if (currentState === \"granted\") {\n            return { permissionGranted: true };\n        }\n        const myWindow = this.windowsController.my();\n        const globalNamespace = window.glue42core || window.iobrowser;\n        const amIWorkspaceFrame = globalNamespace.isPlatformFrame;\n        if (myWindow.name !== \"Platform\" && !amIWorkspaceFrame) {\n            return ioError.raiseError(\"Cannot request permission for multi-window placement from any app other than the Platform.\");\n        }\n        const requestResult = await this.bridge.send(\"layouts\", operations$7.requestGlobalPermission, undefined, { methodResponseTimeoutMs: 180000 });\n        return { permissionGranted: requestResult.isAvailable };\n    }\n    async checkGlobalActivated() {\n        const requestResult = await this.bridge.send(\"layouts\", operations$7.checkGlobalActivated, undefined);\n        return { activated: requestResult.isAvailable };\n    }\n    async getDefaultGlobal() {\n        const requestResult = await this.bridge.send(\"layouts\", operations$7.getDefaultGlobal, undefined, undefined, { includeOperationCheck: true });\n        return requestResult.layout;\n    }\n    async setDefaultGlobal(name) {\n        runDecoderWithIOError(nonEmptyStringDecoder, name);\n        await this.bridge.send(\"layouts\", operations$7.setDefaultGlobal, { name }, undefined, { includeOperationCheck: true });\n    }\n    async clearDefaultGlobal() {\n        await this.bridge.send(\"layouts\", operations$7.clearDefaultGlobal, undefined, undefined, { includeOperationCheck: true });\n    }\n    async rename(layout, newName) {\n        runDecoderWithIOError(glueLayoutDecoder, layout);\n        runDecoderWithIOError(nonEmptyStringDecoder, newName);\n        const result = await this.bridge.send(\"layouts\", operations$7.rename, { layout, newName }, undefined, { includeOperationCheck: true });\n        return result;\n    }\n    async updateMetadata(layout) {\n        runDecoderWithIOError(glueLayoutDecoder, layout);\n        await this.bridge.send(\"layouts\", operations$7.updateMetadata, { layout }, undefined, { includeOperationCheck: true });\n    }\n    onAdded(callback) {\n        this.export(\"Global\").then((layouts) => layouts.forEach((layout) => callback(layout))).catch(() => { });\n        this.export(\"Workspace\").then((layouts) => layouts.forEach((layout) => callback(layout))).catch(() => { });\n        return this.registry.add(operations$7.layoutAdded.name, callback);\n    }\n    onChanged(callback) {\n        return this.registry.add(operations$7.layoutChanged.name, callback);\n    }\n    onRemoved(callback) {\n        return this.registry.add(operations$7.layoutRemoved.name, callback);\n    }\n    onRenamed(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to onRenamed, because the provided callback is not a function!\");\n        }\n        return this.registry.add(operations$7.layoutRenamed.name, callback);\n    }\n    subscribeOnSaveRequested(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to onSaveRequested, because the provided argument is not a valid callback function.\");\n        }\n        if (this.saveRequestSubscription) {\n            return ioError.raiseError(\"Cannot subscribe to onSaveRequested, because this client has already subscribed and only one subscription is supported. Consider unsubscribing from the initial one.\");\n        }\n        this.saveRequestSubscription = callback;\n        return () => {\n            delete this.saveRequestSubscription;\n        };\n    }\n    async handleOnAdded(layout) {\n        this.registry.execute(operations$7.layoutAdded.name, layout);\n    }\n    async handleOnChanged(layout) {\n        this.registry.execute(operations$7.layoutChanged.name, layout);\n    }\n    async handleOnRemoved(layout) {\n        this.registry.execute(operations$7.layoutRemoved.name, layout);\n    }\n    async handleOnRenamed(layout) {\n        this.registry.execute(operations$7.layoutRenamed.name, layout);\n    }\n}\n\nconst operations$6 = {\n    raiseNotification: { name: \"raiseNotification\", dataDecoder: raiseNotificationDecoder, resultDecoder: raiseNotificationResultDecoder },\n    requestPermission: { name: \"requestPermission\", resultDecoder: permissionRequestResultDecoder },\n    notificationShow: { name: \"notificationShow\", dataDecoder: notificationEventPayloadDecoder },\n    notificationClick: { name: \"notificationClick\", dataDecoder: notificationEventPayloadDecoder },\n    getPermission: { name: \"getPermission\", resultDecoder: permissionQueryResultDecoder },\n    list: { name: \"list\", resultDecoder: allNotificationsDataDecoder },\n    notificationRaised: { name: \"notificationRaised\", dataDecoder: simpleNotificationDataDecoder },\n    notificationClosed: { name: \"notificationClosed\", dataDecoder: simpleNotificationSelectDecoder },\n    click: { name: \"click\" },\n    clear: { name: \"clear\" },\n    clearAll: { name: \"clearAll\" },\n    clearOld: { name: \"clearOld\" },\n    configure: { name: \"configure\", dataDecoder: notificationsConfigurationProtocolDecoder },\n    getConfiguration: { name: \"getConfiguration\", resultDecoder: strictNotificationsConfigurationProtocolDecoder },\n    configurationChanged: { name: \"configurationChanged\", resultDecoder: strictNotificationsConfigurationProtocolDecoder },\n    setState: { name: \"setState\", dataDecoder: notificationSetStateRequestDecoder },\n    activeCountChange: { name: \"activeCountChange\", resultDecoder: activeNotificationsCountChangeDecoder },\n    stateChange: { name: \"stateChange\", resultDecoder: notificationSetStateRequestDecoder }\n};\n\nlet urlAlphabet$1 =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict';\nlet nanoid$1 = (size = 21) => {\n  let id = '';\n  let i = size;\n  while (i--) {\n    id += urlAlphabet$1[(Math.random() * 64) | 0];\n  }\n  return id\n};\n\nclass NotificationsController {\n    registry = CallbackRegistryFactory$1();\n    logger;\n    bridge;\n    notificationsSettings;\n    notifications = {};\n    coreGlue;\n    buildNotificationFunc;\n    handlePlatformShutdown() {\n        this.notifications = {};\n        this.registry.clear();\n    }\n    async start(coreGlue, ioc) {\n        this.logger = coreGlue.logger.subLogger(\"notifications.controller.web\");\n        this.logger.trace(\"starting the web notifications controller\");\n        this.bridge = ioc.bridge;\n        this.coreGlue = coreGlue;\n        this.notificationsSettings = ioc.config.notifications;\n        this.buildNotificationFunc = ioc.buildNotification;\n        const api = this.toApi();\n        this.addOperationExecutors();\n        coreGlue.notifications = api;\n        this.logger.trace(\"notifications are ready\");\n    }\n    async handleBridgeMessage(args) {\n        const operationName = runDecoderWithIOError(notificationsOperationTypesDecoder, args.operation);\n        const operation = operations$6[operationName];\n        if (!operation.execute) {\n            return;\n        }\n        let operationData = args.data;\n        if (operation.dataDecoder) {\n            operationData = runDecoderWithIOError(operation.dataDecoder, args.data);\n        }\n        return await operation.execute(operationData);\n    }\n    toApi() {\n        const api = {\n            raise: this.raise.bind(this),\n            requestPermission: this.requestPermission.bind(this),\n            getPermission: this.getPermission.bind(this),\n            list: this.list.bind(this),\n            onRaised: this.onRaised.bind(this),\n            onClosed: this.onClosed.bind(this),\n            click: this.click.bind(this),\n            clear: this.clear.bind(this),\n            clearAll: this.clearAll.bind(this),\n            clearOld: this.clearOld.bind(this),\n            configure: this.configure.bind(this),\n            getConfiguration: this.getConfiguration.bind(this),\n            getFilter: this.getFilter.bind(this),\n            setFilter: this.setFilter.bind(this),\n            setState: this.setState.bind(this),\n            onConfigurationChanged: this.onConfigurationChanged.bind(this),\n            onActiveCountChanged: this.onActiveCountChanged.bind(this),\n            onStateChanged: this.onStateChanged.bind(this)\n        };\n        return Object.freeze(api);\n    }\n    async getPermission() {\n        const queryResult = await this.bridge.send(\"notifications\", operations$6.getPermission, undefined);\n        return queryResult.permission;\n    }\n    async requestPermission() {\n        const permissionResult = await this.bridge.send(\"notifications\", operations$6.requestPermission, undefined);\n        return permissionResult.permissionGranted;\n    }\n    async raise(options) {\n        const settings = runDecoderWithIOError(glue42NotificationOptionsDecoder, options);\n        settings.showToast = typeof settings.showToast === \"boolean\" ? settings.showToast : true;\n        settings.showInPanel = typeof settings.showInPanel === \"boolean\" ? settings.showInPanel : true;\n        const permissionGranted = await this.requestPermission();\n        if (!permissionGranted) {\n            return ioError.raiseError(\"Cannot raise the notification, because the user has declined the permission request\");\n        }\n        const id = nanoid$1(10);\n        const raiseResult = await this.bridge.send(\"notifications\", operations$6.raiseNotification, { settings, id });\n        const notification = this.buildNotificationFunc(raiseResult.settings, id);\n        this.notifications[id] = notification;\n        return notification;\n    }\n    async list() {\n        const bridgeResponse = await this.bridge.send(\"notifications\", operations$6.list, undefined, undefined, { includeOperationCheck: true });\n        return bridgeResponse.notifications;\n    }\n    onRaised(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"onRaised expects a callback of type function\");\n        }\n        return this.registry.add(\"notification-raised\", callback);\n    }\n    onClosed(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"onClosed expects a callback of type function\");\n        }\n        return this.registry.add(\"notification-closed\", callback);\n    }\n    async click(id, action) {\n        runDecoderWithIOError(nonEmptyStringDecoder, id);\n        if (action) {\n            runDecoderWithIOError(nonEmptyStringDecoder, action);\n        }\n        await this.bridge.send(\"notifications\", operations$6.click, { id, action }, undefined, { includeOperationCheck: true });\n    }\n    async clear(id) {\n        runDecoderWithIOError(nonEmptyStringDecoder, id);\n        await this.bridge.send(\"notifications\", operations$6.clear, { id }, undefined, { includeOperationCheck: true });\n    }\n    async clearAll() {\n        await this.bridge.send(\"notifications\", operations$6.clearAll, undefined, undefined, { includeOperationCheck: true });\n    }\n    async clearOld() {\n        await this.bridge.send(\"notifications\", operations$6.clearOld, undefined, undefined, { includeOperationCheck: true });\n    }\n    async configure(config) {\n        const verifiedConfig = runDecoderWithIOError(notificationsConfigurationDecoder, config);\n        await this.bridge.send(\"notifications\", operations$6.configure, { configuration: verifiedConfig }, undefined, { includeOperationCheck: true });\n    }\n    async getConfiguration() {\n        const response = await this.bridge.send(\"notifications\", operations$6.getConfiguration, undefined, undefined, { includeOperationCheck: true });\n        return response.configuration;\n    }\n    async getFilter() {\n        const response = await this.bridge.send(\"notifications\", operations$6.getConfiguration, undefined, undefined, { includeOperationCheck: true });\n        return response.configuration.sourceFilter;\n    }\n    async setFilter(filter) {\n        const verifiedFilter = runDecoderWithIOError(notificationFilterDecoder, filter);\n        await this.bridge.send(\"notifications\", operations$6.configure, { configuration: { sourceFilter: verifiedFilter } }, undefined, { includeOperationCheck: true });\n        return verifiedFilter;\n    }\n    async setState(id, state) {\n        runDecoderWithIOError(nonEmptyStringDecoder, id);\n        runDecoderWithIOError(notificationStateDecoder, state);\n        await this.bridge.send(\"notifications\", operations$6.setState, { id, state }, undefined, { includeOperationCheck: true });\n    }\n    onConfigurationChanged(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to configuration changed, because the provided callback is not a function!\");\n        }\n        return this.registry.add(\"notifications-config-changed\", callback);\n    }\n    onActiveCountChanged(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to onActiveCountChanged changed, because the provided callback is not a function!\");\n        }\n        return this.registry.add(\"notifications-active-count-changed\", callback);\n    }\n    onStateChanged(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to onStateChanged changed, because the provided callback is not a function!\");\n        }\n        return this.registry.add(\"notification-state-changed\", callback);\n    }\n    addOperationExecutors() {\n        operations$6.notificationShow.execute = this.handleNotificationShow.bind(this);\n        operations$6.notificationClick.execute = this.handleNotificationClick.bind(this);\n        operations$6.notificationRaised.execute = this.handleNotificationRaised.bind(this);\n        operations$6.notificationClosed.execute = this.handleNotificationClosed.bind(this);\n        operations$6.configurationChanged.execute = this.handleConfigurationChanged.bind(this);\n        operations$6.activeCountChange.execute = this.handleActiveCountChanged.bind(this);\n        operations$6.stateChange.execute = this.handleNotificationStateChanged.bind(this);\n    }\n    async handleConfigurationChanged(data) {\n        this.registry.execute(\"notifications-config-changed\", data.configuration);\n    }\n    async handleActiveCountChanged(data) {\n        this.registry.execute(\"notifications-active-count-changed\", data);\n    }\n    async handleNotificationStateChanged(data) {\n        this.registry.execute(\"notification-state-changed\", { id: data.id }, data.state);\n    }\n    async handleNotificationShow(data) {\n        if (!data.id) {\n            return;\n        }\n        const notification = this.notifications[data.id];\n        if (notification && notification.onshow) {\n            notification.onshow();\n        }\n    }\n    async handleNotificationClick(data) {\n        if (!data.action && this.notificationsSettings?.defaultClick) {\n            this.notificationsSettings.defaultClick(this.coreGlue, data.definition);\n        }\n        if (data.action && this.notificationsSettings?.actionClicks?.some((actionDef) => actionDef.action === data.action)) {\n            const foundHandler = this.notificationsSettings?.actionClicks?.find((actionDef) => actionDef.action === data.action);\n            foundHandler.handler(this.coreGlue, data.definition);\n        }\n        if (!data.id) {\n            return;\n        }\n        const notification = this.notifications[data.id];\n        if (notification && notification.onclick) {\n            notification.onclick();\n            delete this.notifications[data.id];\n        }\n    }\n    async handleNotificationRaised(data) {\n        this.registry.execute(\"notification-raised\", data.notification);\n    }\n    async handleNotificationClosed(data) {\n        this.registry.execute(\"notification-closed\", data);\n    }\n}\n\nconst operations$5 = {\n    getIntents: { name: \"getIntents\", resultDecoder: wrappedIntentsDecoder },\n    findIntent: { name: \"findIntent\", dataDecoder: wrappedIntentFilterDecoder, resultDecoder: wrappedIntentsDecoder },\n    raiseIntent: { name: \"raiseIntent\", dataDecoder: intentRequestDecoder, resultDecoder: intentResultDecoder },\n    raise: { name: \"raise\", dataDecoder: raiseIntentRequestDecoder, resultDecoder: intentResultDecoder },\n    filterHandlers: { name: \"filterHandlers\", dataDecoder: filterHandlersWithResolverConfigDecoder, resultDecoder: filterHandlersResultDecoder },\n    getIntentsByHandler: { name: \"getIntentsByHandler\", dataDecoder: intentHandlerDecoder, resultDecoder: getIntentsResultDecoder }\n};\n\nconst GLUE42_FDC3_INTENTS_METHOD_PREFIX = \"Tick42.FDC3.Intents.\";\nconst INTENTS_RESOLVER_INTEROP_PREFIX = \"T42.Intents.Resolver.Control.\";\nconst INTENTS_RESOLVER_APP_NAME = \"intentsResolver\";\nconst DEFAULT_RESOLVER_RESPONSE_TIMEOUT = 60 * 1000;\nconst ADDITIONAL_BRIDGE_OPERATION_TIMEOUT = 30 * 1000;\nconst INTENTS_RESOLVER_WIDTH = 400;\nconst INTENTS_RESOLVER_HEIGHT = 440;\nconst MAX_SET_TIMEOUT_DELAY = 2147483647;\nconst DEFAULT_PICK_HANDLER_BY_TIMEOUT = 90 * 1000;\n\nclass IntentsController {\n    bridge;\n    logger;\n    interop;\n    legacyIntentsController;\n    myIntents = new Set();\n    prefsController;\n    useIntentsResolverUI = true;\n    intentsResolverAppName;\n    intentResolverResponseTimeout;\n    unregisterIntentPromises = [];\n    async start(coreGlue, ioc) {\n        this.logger = coreGlue.logger.subLogger(\"intents.controller.web\");\n        this.logger.trace(\"starting the web intents controller\");\n        this.bridge = ioc.bridge;\n        this.interop = coreGlue.interop;\n        this.legacyIntentsController = ioc.legacyIntentsHelper;\n        this.prefsController = ioc.prefsController;\n        this.checkIfIntentsResolverIsEnabled(ioc.config);\n        const api = this.toApi();\n        this.logger.trace(\"no need for platform registration, attaching the intents property to glue and returning\");\n        coreGlue.intents = api;\n    }\n    handlePlatformShutdown() {\n        this.myIntents = new Set();\n        this.unregisterIntentPromises = [];\n    }\n    async handleBridgeMessage(args) {\n        const operationName = runDecoderWithIOError(intentsOperationTypesDecoder, args.operation);\n        const operation = operations$5[operationName];\n        if (!operation.execute) {\n            return;\n        }\n        let operationData = args.data;\n        if (operation.dataDecoder) {\n            operationData = runDecoderWithIOError(operation.dataDecoder, args.data);\n        }\n        return await operation.execute(operationData);\n    }\n    toApi() {\n        const api = {\n            raise: this.raise.bind(this),\n            all: this.all.bind(this),\n            addIntentListener: this.addIntentListener.bind(this),\n            register: this.register.bind(this),\n            find: this.find.bind(this),\n            filterHandlers: this.filterHandlers.bind(this),\n            getIntents: this.getIntentsByHandler.bind(this),\n            clearSavedHandlers: this.clearSavedHandlers.bind(this)\n        };\n        return api;\n    }\n    async raise(request) {\n        const validatedIntentRequest = runDecoderWithIOError(raiseRequestDecoder, request);\n        const intentRequest = typeof validatedIntentRequest === \"string\"\n            ? { intent: validatedIntentRequest }\n            : validatedIntentRequest;\n        await Promise.all(this.unregisterIntentPromises);\n        if (intentRequest.clearSavedHandler) {\n            this.logger.trace(`User removes saved handler for intent ${intentRequest.intent}`);\n            await this.removeRememberedHandler(intentRequest.intent);\n        }\n        const resultFromRememberedHandler = await this.checkHandleRaiseWithRememberedHandler(intentRequest);\n        if (resultFromRememberedHandler) {\n            return resultFromRememberedHandler;\n        }\n        const requestWithResolverInfo = { intentRequest, resolverConfig: this.getResolverConfigByRequest({ intentRequest }) };\n        const isRaiseOperationSupported = await this.isRaiseOperationSupported();\n        if (!isRaiseOperationSupported.supported) {\n            this.logger.warn(`${isRaiseOperationSupported.reason}. Invoking legacy raise method`);\n            return this.legacyIntentsController.raise(requestWithResolverInfo, this.find.bind(this));\n        }\n        this.logger.trace(`Sending raise request to the platform: ${JSON.stringify(request)} and method response timeout of ${this.intentResolverResponseTimeout}ms`);\n        const methodResponseTimeoutMs = intentRequest.waitUserResponseIndefinitely\n            ? MAX_SET_TIMEOUT_DELAY\n            : (intentRequest.timeout || this.intentResolverResponseTimeout) + ADDITIONAL_BRIDGE_OPERATION_TIMEOUT;\n        const response = await this.bridge.send(\"intents\", operations$5.raise, requestWithResolverInfo, { methodResponseTimeoutMs, waitTimeoutMs: methodResponseTimeoutMs });\n        return response;\n    }\n    getResolverConfigByRequest(filter) {\n        if (filter.handlerFilter) {\n            return {\n                enabled: typeof filter.handlerFilter?.openResolver === \"boolean\" ? filter.handlerFilter?.openResolver : this.useIntentsResolverUI,\n                appName: this.intentsResolverAppName,\n                waitResponseTimeout: filter.handlerFilter?.timeout || DEFAULT_PICK_HANDLER_BY_TIMEOUT\n            };\n        }\n        const waitResponseTimeout = filter.intentRequest?.waitUserResponseIndefinitely ? MAX_SET_TIMEOUT_DELAY : this.intentResolverResponseTimeout;\n        return {\n            enabled: this.useIntentsResolverUI,\n            appName: this.intentsResolverAppName,\n            waitResponseTimeout\n        };\n    }\n    async isRaiseOperationSupported() {\n        try {\n            const { isSupported } = await this.bridge.send(\"intents\", systemOperations.operationCheck, { operation: \"raise\" });\n            return {\n                supported: isSupported,\n                reason: isSupported ? \"\" : \"The platform of this client is outdated and does not support \\\"raise\\\" operation\"\n            };\n        }\n        catch (error) {\n            return {\n                supported: false,\n                reason: \"The platform of this client is outdated and does not support \\\"operationCheck\\\" command\"\n            };\n        }\n    }\n    async all() {\n        await Promise.all(this.unregisterIntentPromises);\n        const result = await this.bridge.send(\"intents\", operations$5.getIntents, undefined);\n        return result.intents;\n    }\n    addIntentListener(intent, handler) {\n        runDecoderWithIOError(AddIntentListenerDecoder, intent);\n        if (typeof handler !== \"function\") {\n            return ioError.raiseError(\"Cannot add intent listener, because the provided handler is not a function!\");\n        }\n        let registerPromise;\n        const intentName = typeof intent === \"string\" ? intent : intent.intent;\n        const methodName = this.buildInteropMethodName(intentName);\n        const alreadyRegistered = this.myIntents.has(intentName);\n        if (alreadyRegistered) {\n            return ioError.raiseError(`Intent listener for intent ${intentName} already registered!`);\n        }\n        this.myIntents.add(intentName);\n        const result = {\n            unsubscribe: () => {\n                this.myIntents.delete(intentName);\n                registerPromise\n                    .then(() => this.interop.unregister(methodName))\n                    .catch((err) => this.logger.trace(`Unregistration of a method with name ${methodName} failed with reason: ${err}`));\n            }\n        };\n        let intentFlag = {};\n        if (typeof intent === \"object\") {\n            const { intent: removed, ...rest } = intent;\n            intentFlag = rest;\n        }\n        registerPromise = this.interop.register({ name: methodName, flags: { intent: intentFlag } }, (args) => {\n            if (this.myIntents.has(intentName)) {\n                const { _initialCallerId, ...rest } = args;\n                return handler(rest);\n            }\n        });\n        registerPromise.catch(err => {\n            this.myIntents.delete(intentName);\n            this.logger.warn(`Registration of a method with name ${methodName} failed with reason: ${err}`);\n        });\n        return result;\n    }\n    async register(intent, handler) {\n        runDecoderWithIOError(AddIntentListenerDecoder, intent);\n        if (typeof handler !== \"function\") {\n            return ioError.raiseError(\"Cannot add intent listener, because the provided handler is not a function!\");\n        }\n        await Promise.all(this.unregisterIntentPromises);\n        const intentName = typeof intent === \"string\" ? intent : intent.intent;\n        const methodName = this.buildInteropMethodName(intentName);\n        const alreadyRegistered = this.myIntents.has(intentName);\n        if (alreadyRegistered) {\n            return ioError.raiseError(`Intent listener for intent ${intentName} already registered!`);\n        }\n        this.myIntents.add(intentName);\n        let intentFlag = {};\n        if (typeof intent === \"object\") {\n            const { intent: removed, ...rest } = intent;\n            intentFlag = rest;\n        }\n        try {\n            await this.interop.register({ name: methodName, flags: { intent: intentFlag } }, (args) => {\n                if (this.myIntents.has(intentName)) {\n                    const { _initialCallerId, ...rest } = args;\n                    const caller = this.interop.servers().find((server) => server.instance === _initialCallerId);\n                    return handler(rest, caller);\n                }\n            });\n        }\n        catch (err) {\n            this.myIntents.delete(intentName);\n            return ioError.raiseError(`Registration of a method with name ${methodName} failed with reason: ${JSON.stringify(err)}`);\n        }\n        return {\n            unsubscribe: () => this.unsubscribeIntent(intentName)\n        };\n    }\n    async find(intentFilter) {\n        let data = undefined;\n        if (typeof intentFilter !== \"undefined\") {\n            const intentFilterObj = runDecoderWithIOError(findFilterDecoder, intentFilter);\n            if (typeof intentFilterObj === \"string\") {\n                data = {\n                    filter: {\n                        name: intentFilterObj\n                    }\n                };\n            }\n            else if (typeof intentFilterObj === \"object\") {\n                data = {\n                    filter: intentFilterObj\n                };\n            }\n        }\n        await Promise.all(this.unregisterIntentPromises);\n        const result = await this.bridge.send(\"intents\", operations$5.findIntent, data);\n        return result.intents;\n    }\n    async clearSavedHandlers() {\n        this.logger.trace(\"Removing all saved handlers from prefs storage for current app\");\n        await this.prefsController.update({ intents: undefined });\n    }\n    checkIfIntentsResolverIsEnabled(options) {\n        this.useIntentsResolverUI = typeof options.intents?.enableIntentsResolverUI === \"boolean\"\n            ? options.intents.enableIntentsResolverUI\n            : true;\n        this.intentsResolverAppName = options.intents?.intentsResolverAppName ?? INTENTS_RESOLVER_APP_NAME;\n        this.intentResolverResponseTimeout = options.intents?.methodResponseTimeoutMs ?? DEFAULT_RESOLVER_RESPONSE_TIMEOUT;\n    }\n    clearUnregistrationPromise(promiseToRemove) {\n        this.unregisterIntentPromises = this.unregisterIntentPromises.filter(promise => promise !== promiseToRemove);\n    }\n    buildInteropMethodName(intentName) {\n        return `${GLUE42_FDC3_INTENTS_METHOD_PREFIX}${intentName}`;\n    }\n    unsubscribeIntent(intentName) {\n        this.myIntents.delete(intentName);\n        const methodName = this.buildInteropMethodName(intentName);\n        const unregisterPromise = this.interop.unregister(methodName);\n        this.unregisterIntentPromises.push(unregisterPromise);\n        unregisterPromise\n            .then(() => {\n            this.clearUnregistrationPromise(unregisterPromise);\n        })\n            .catch((err) => {\n            this.logger.error(`Unregistration of a method with name ${methodName} failed with reason: ${err}`);\n            this.clearUnregistrationPromise(unregisterPromise);\n        });\n    }\n    async filterHandlers(handlerFilter) {\n        runDecoderWithIOError(handlersFilterDecoder, handlerFilter);\n        this.checkIfAtLeastOneFilterIsPresent(handlerFilter);\n        if (handlerFilter.openResolver && !this.useIntentsResolverUI) {\n            return ioError.raiseError(\"Cannot resolve 'filterHandlers' request using Intents Resolver UI because it's globally disabled\");\n        }\n        const methodResponseTimeoutMs = (handlerFilter.timeout || DEFAULT_PICK_HANDLER_BY_TIMEOUT) + ADDITIONAL_BRIDGE_OPERATION_TIMEOUT;\n        const filterHandlersRequestWithResolverConfig = { filterHandlersRequest: handlerFilter, resolverConfig: this.getResolverConfigByRequest({ handlerFilter }) };\n        const result = await this.bridge.send(\"intents\", operations$5.filterHandlers, filterHandlersRequestWithResolverConfig, { methodResponseTimeoutMs, waitTimeoutMs: methodResponseTimeoutMs }, { includeOperationCheck: true });\n        return result;\n    }\n    checkIfAtLeastOneFilterIsPresent(filter) {\n        const errorMsg = \"Provide at least one filter criteria of the following: 'intent' | 'contextTypes' | 'resultType' | 'applicationNames'\";\n        if (!Object.keys(filter).length) {\n            return ioError.raiseError(errorMsg);\n        }\n        const { intent, resultType, contextTypes, applicationNames } = filter;\n        const existingValidContextTypes = contextTypes?.length;\n        const existingValidApplicationNames = applicationNames?.length;\n        if (!intent && !resultType && !existingValidContextTypes && !existingValidApplicationNames) {\n            return ioError.raiseError(errorMsg);\n        }\n    }\n    async getIntentsByHandler(handler) {\n        runDecoderWithIOError(intentHandlerDecoder, handler);\n        const result = await this.bridge.send(\"intents\", operations$5.getIntentsByHandler, handler, undefined, { includeOperationCheck: true });\n        return result;\n    }\n    async removeRememberedHandler(intentName) {\n        this.logger.trace(`Removing saved handler from prefs storage for intent ${intentName}`);\n        const prefs = await this.prefsController.get();\n        const intentPrefs = prefs.data?.intents;\n        if (!intentPrefs) {\n            this.logger.trace(\"No app prefs found for current app\");\n            return;\n        }\n        delete intentPrefs[intentName];\n        const updatedPrefs = {\n            ...prefs.data,\n            intents: intentPrefs\n        };\n        await this.prefsController.update(updatedPrefs);\n        this.logger.trace(`Handler saved choice for intent ${intentName} removed successfully`);\n    }\n    async checkForRememberedHandler(intentRequest) {\n        const prefs = await this.prefsController.get();\n        const prefsForIntent = prefs.data?.intents?.[intentRequest.intent];\n        return prefsForIntent?.handler;\n    }\n    async checkHandleRaiseWithRememberedHandler(intentRequest) {\n        const rememberedHandler = await this.checkForRememberedHandler(intentRequest);\n        if (!rememberedHandler) {\n            return;\n        }\n        const operationData = {\n            intentRequest: {\n                ...intentRequest,\n                target: {\n                    app: rememberedHandler.applicationName,\n                    instance: rememberedHandler.instanceId\n                }\n            },\n            resolverConfig: {\n                enabled: false,\n                appName: this.intentsResolverAppName,\n                waitResponseTimeout: intentRequest.timeout || DEFAULT_PICK_HANDLER_BY_TIMEOUT\n            }\n        };\n        try {\n            const response = await this.bridge.send(\"intents\", operations$5.raise, operationData);\n            return response;\n        }\n        catch (error) {\n            this.logger.trace(\"Could not raise intent to remembered handler. Removing it from Prefs store\");\n            await this.removeRememberedHandler(intentRequest.intent);\n        }\n    }\n}\n\nconst operations$4 = {\n    addChannel: { name: \"addChannel\", dataDecoder: channelContextDecoder },\n    removeChannel: { name: \"removeChannel\", dataDecoder: removeChannelDataDecoder },\n    getMyChannel: { name: \"getMyChannel\", resultDecoder: getMyChanelResultDecoder },\n    getWindowIdsOnChannel: { name: \"getWindowIdsOnChannel\", dataDecoder: getWindowIdsOnChannelDataDecoder, resultDecoder: getWindowIdsOnChannelResultDecoder },\n    getWindowIdsWithChannels: { name: \"getWindowIdsWithChannels\", dataDecoder: wrappedWindowWithChannelFilterDecoder, resultDecoder: getWindowIdsWithChannelsResultDecoder },\n    joinChannel: { name: \"joinChannel\", dataDecoder: joinChannelDataDecoder },\n    restrict: { name: \"restrict\", dataDecoder: restrictionConfigDataDecoder },\n    getRestrictions: { name: \"getRestrictions\", dataDecoder: getRestrictionsDataDecoder, resultDecoder: restrictionsDecoder },\n    restrictAll: { name: \"restrictAll\", dataDecoder: restrictAllDataDecoder }\n};\n\nclass ChannelsController {\n    registry = CallbackRegistryFactory$1();\n    logger;\n    contexts;\n    bridge;\n    currentChannelName;\n    windowsController;\n    sessionController;\n    unsubscribeFunc;\n    GlueWebChannelsPrefix = \"___channel___\";\n    SubsKey = \"subs\";\n    ChangedKey = \"changed\";\n    handlePlatformShutdown() {\n        this.registry.clear();\n    }\n    addOperationsExecutors() {\n        operations$4.getMyChannel.execute = this.handleGetMyChannel.bind(this);\n        operations$4.joinChannel.execute = this.handleJoinChannel.bind(this);\n        operations$4.restrict.execute = ({ config }) => this.restrict(config);\n        operations$4.getRestrictions.execute = ({ windowId }) => this.getRestrictions(windowId);\n        operations$4.restrictAll.execute = ({ restrictions }) => this.restrictAll(restrictions);\n    }\n    async start(coreGlue, ioc) {\n        this.logger = coreGlue.logger.subLogger(\"channels.controller.web\");\n        this.logger.trace(\"starting the web channels controller\");\n        this.contexts = coreGlue.contexts;\n        this.addOperationsExecutors();\n        this.bridge = ioc.bridge;\n        this.windowsController = ioc.windowsController;\n        this.sessionController = ioc.sessionController;\n        this.logger.trace(\"no need for platform registration, attaching the channels property to glue and returning\");\n        const api = this.toApi();\n        coreGlue.channels = api;\n    }\n    async handleBridgeMessage(args) {\n        const operationName = runDecoderWithIOError(channelsOperationTypesDecoder, args.operation);\n        const operation = operations$4[operationName];\n        if (!operation.execute) {\n            return;\n        }\n        let operationData = args.data;\n        if (operation.dataDecoder) {\n            operationData = runDecoderWithIOError(operation.dataDecoder, args.data);\n        }\n        return await operation.execute(operationData);\n    }\n    async list() {\n        const channelNames = this.getAllChannelNames();\n        const channelContexts = await Promise.all(channelNames.map((channelName) => this.get(channelName)));\n        return channelContexts;\n    }\n    my() {\n        return this.current();\n    }\n    async handleGetMyChannel() {\n        const channel = this.my();\n        return channel ? { channel } : {};\n    }\n    async join(name, windowId) {\n        const channelNames = this.getAllChannelNames();\n        runDecoderWithIOError(channelNameDecoder(channelNames), name);\n        runDecoderWithIOError(optionalNonEmptyStringDecoder, windowId);\n        if (!windowId || windowId === this.windowsController.my().id) {\n            await this.switchToChannel(name);\n        }\n        else {\n            await this.bridge.send(\"channels\", operations$4.joinChannel, { channel: name, windowId }, undefined, { includeOperationCheck: true });\n        }\n    }\n    handleJoinChannel({ channel, windowId }) {\n        return this.join(channel, windowId);\n    }\n    onChanged(callback) {\n        return this.changed(callback);\n    }\n    async leave() {\n        await this.switchToChannel();\n    }\n    toApi() {\n        const api = {\n            subscribe: this.subscribe.bind(this),\n            subscribeFor: this.subscribeFor.bind(this),\n            publish: this.publish.bind(this),\n            all: this.all.bind(this),\n            list: this.list.bind(this),\n            get: this.get.bind(this),\n            join: this.join.bind(this),\n            leave: this.leave.bind(this),\n            current: this.current.bind(this),\n            my: this.my.bind(this),\n            changed: this.changed.bind(this),\n            onChanged: this.onChanged.bind(this),\n            add: this.add.bind(this),\n            remove: this.remove.bind(this),\n            getMy: this.getMy.bind(this),\n            getWindowsOnChannel: this.getWindowsOnChannel.bind(this),\n            getWindowsWithChannels: this.getWindowsWithChannels.bind(this),\n            restrict: this.restrict.bind(this),\n            getRestrictions: this.getRestrictions.bind(this),\n            restrictAll: this.restrictAll.bind(this)\n        };\n        return Object.freeze(api);\n    }\n    createContextName(channelName) {\n        return `${this.GlueWebChannelsPrefix}${channelName}`;\n    }\n    getAllChannelNames() {\n        const contextNames = this.contexts.all();\n        const channelContextNames = contextNames.filter((contextName) => contextName.startsWith(this.GlueWebChannelsPrefix));\n        const channelNames = channelContextNames.map((channelContextName) => channelContextName.replace(this.GlueWebChannelsPrefix, \"\"));\n        return channelNames;\n    }\n    unsubscribe() {\n        if (this.unsubscribeFunc) {\n            this.unsubscribeFunc();\n            this.unsubscribeFunc = undefined;\n        }\n    }\n    async switchToChannel(name) {\n        this.unsubscribe();\n        this.currentChannelName = name;\n        if (typeof name !== \"undefined\") {\n            const contextName = this.createContextName(name);\n            this.unsubscribeFunc = await this.contexts.subscribe(contextName, (context, _, __, ___, extraData) => {\n                this.registry.execute(this.SubsKey, context.data, context, extraData?.updaterId);\n            });\n        }\n        this.registry.execute(this.ChangedKey, name);\n        this.sessionController.setWindowData({ currentName: name }, \"channels\");\n    }\n    async updateData(name, data) {\n        const contextName = this.createContextName(name);\n        const fdc3Type = this.getFDC3Type(data);\n        if (this.contexts.setPathSupported) {\n            const pathValues = Object.keys(data).map((key) => {\n                return {\n                    path: `data.${key}`,\n                    value: data[key]\n                };\n            });\n            if (fdc3Type) {\n                pathValues.push({ path: latestFDC3Type, value: fdc3Type });\n            }\n            await this.contexts.setPaths(contextName, pathValues);\n        }\n        else {\n            if (fdc3Type) {\n                data[latestFDC3Type] = fdc3Type;\n            }\n            await this.contexts.update(contextName, { data });\n        }\n    }\n    getFDC3Type(data) {\n        const fdc3PropsArr = Object.keys(data).filter((key) => key.indexOf(\"fdc3_\") === 0);\n        if (fdc3PropsArr.length === 0) {\n            return;\n        }\n        if (fdc3PropsArr.length > 1) {\n            return ioError.raiseError(\"FDC3 does not support updating of multiple context keys\");\n        }\n        return fdc3PropsArr[0].split(\"_\").slice(1).join(\"_\");\n    }\n    subscribe(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to channels, because the provided callback is not a function!\");\n        }\n        const currentChannel = this.current();\n        const wrappedCallback = this.getWrappedSubscribeCallback(callback);\n        if (currentChannel) {\n            this.replaySubscribe(wrappedCallback, currentChannel);\n        }\n        return this.registry.add(this.SubsKey, wrappedCallback);\n    }\n    async subscribeFor(name, callback) {\n        const channelNames = this.getAllChannelNames();\n        runDecoderWithIOError(channelNameDecoder(channelNames), name);\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(`Cannot subscribe to channel ${name}, because the provided callback is not a function!`);\n        }\n        const contextName = this.createContextName(name);\n        const wrappedCallback = this.getWrappedSubscribeCallback(callback);\n        return this.contexts.subscribe(contextName, (context, _, __, ___, extraData) => {\n            wrappedCallback(context.data, context, extraData?.updaterId);\n        });\n    }\n    async publish(data, options) {\n        if (typeof data !== \"object\") {\n            return ioError.raiseError(\"Cannot publish to channel, because the provided data is not an object!\");\n        }\n        runDecoderWithIOError(publishOptionsDecoder, options);\n        if (typeof options === \"object\") {\n            return this.publishWithOptions(data, options);\n        }\n        if (typeof options === \"string\") {\n            const channelNames = this.getAllChannelNames();\n            runDecoderWithIOError(channelNameDecoder(channelNames), options);\n        }\n        const channelName = typeof options === \"string\" ? options : this.currentChannelName;\n        if (!channelName) {\n            return ioError.raiseError(\"Cannot publish to channel, because not joined to a channel!\");\n        }\n        const canPublish = this.isAllowedByRestrictions(channelName, \"write\");\n        if (!canPublish) {\n            return ioError.raiseError(`Cannot publish on channel ${channelName} due to restrictions`);\n        }\n        return this.updateData(channelName, data);\n    }\n    async all() {\n        const channelNames = this.getAllChannelNames();\n        return channelNames;\n    }\n    async get(name) {\n        const channelNames = this.getAllChannelNames();\n        runDecoderWithIOError(channelNameDecoder(channelNames), name);\n        const contextName = this.createContextName(name);\n        const channelContext = await this.contexts.get(contextName);\n        if (channelContext.latest_fdc3_type) {\n            return this.getContextWithFdc3Data(channelContext);\n        }\n        return channelContext;\n    }\n    getContextWithFdc3Data(channelContext) {\n        const { latest_fdc3_type, ...rest } = channelContext;\n        const parsedType = latest_fdc3_type.split(\"&\").join(\".\");\n        const fdc3Context = { type: parsedType, ...rest.data[`fdc3_${latest_fdc3_type}`] };\n        delete rest.data[`fdc3_${latest_fdc3_type}`];\n        const context = {\n            name: channelContext.name,\n            meta: channelContext.meta,\n            data: {\n                ...rest.data,\n                fdc3: fdc3Context\n            }\n        };\n        return context;\n    }\n    current() {\n        return this.currentChannelName;\n    }\n    changed(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to channel changed, because the provided callback is not a function!\");\n        }\n        return this.registry.add(this.ChangedKey, callback);\n    }\n    async add(info) {\n        const channelContext = runDecoderWithIOError(channelContextDecoder, info);\n        const channelWithSuchNameExists = this.getAllChannelNames().includes(channelContext.name);\n        if (channelWithSuchNameExists) {\n            return ioError.raiseError(\"There's an already existing channel with such name\");\n        }\n        await this.bridge.send(\"channels\", operations$4.addChannel, channelContext);\n        return channelContext;\n    }\n    async remove(name) {\n        runDecoderWithIOError(nonEmptyStringDecoder, name);\n        const channelWithSuchNameExists = this.getAllChannelNames().includes(name);\n        if (!channelWithSuchNameExists) {\n            return ioError.raiseError(\"There's no channel with such name\");\n        }\n        await this.bridge.send(\"channels\", operations$4.removeChannel, { name }, undefined, { includeOperationCheck: true });\n    }\n    replaySubscribe = (callback, channelId) => {\n        this.get(channelId)\n            .then((channelContext) => {\n            if (typeof channelContext.data === \"object\" && Object.keys(channelContext.data).length) {\n                const contextName = this.createContextName(channelContext.name);\n                return this.contexts.subscribe(contextName, (context, _, __, ___, extraData) => {\n                    callback(context.data, context, extraData?.updaterId);\n                });\n            }\n            return undefined;\n        })\n            .then((un) => {\n            if (un && typeof un === \"function\") {\n                un();\n            }\n        })\n            .catch(err => this.logger.trace(err));\n    };\n    async getMy() {\n        if (!this.currentChannelName) {\n            return;\n        }\n        return this.get(this.currentChannelName);\n    }\n    async getWindowsOnChannel(channel) {\n        const channelNames = this.getAllChannelNames();\n        runDecoderWithIOError(channelNameDecoder(channelNames), channel);\n        const { windowIds } = await this.bridge.send(\"channels\", operations$4.getWindowIdsOnChannel, { channel }, undefined, { includeOperationCheck: true });\n        const result = windowIds.reduce((windows, windowId) => {\n            const window = this.windowsController.findById(windowId);\n            return window ? [...windows, window] : windows;\n        }, []);\n        return result;\n    }\n    async getWindowsWithChannels(filter) {\n        const operationData = filter !== undefined\n            ? { filter: runDecoderWithIOError(windowWithChannelFilterDecoder, filter) }\n            : {};\n        const { windowIdsWithChannels } = await this.bridge.send(\"channels\", operations$4.getWindowIdsWithChannels, operationData, undefined, { includeOperationCheck: true });\n        const result = windowIdsWithChannels.reduce((windowsWithChannels, { application, channel, windowId }) => {\n            const window = this.windowsController.findById(windowId);\n            return window ? [...windowsWithChannels, { application, channel, window }] : windowsWithChannels;\n        }, []);\n        return result;\n    }\n    async restrict(config) {\n        runDecoderWithIOError(channelRestrictionsDecoder, config);\n        const channelNames = this.getAllChannelNames();\n        runDecoderWithIOError(channelNameDecoder(channelNames), config.name);\n        const forAnotherClient = config.windowId && config.windowId !== this.windowsController.my().id;\n        if (forAnotherClient) {\n            return this.bridge.send(\"channels\", operations$4.restrict, { config }, undefined, { includeOperationCheck: true });\n        }\n        const sessionStorageData = this.sessionController.getWindowData();\n        const restrictions = sessionStorageData?.restrictions ? { ...sessionStorageData.restrictions, [config.name]: config } : { [config.name]: config };\n        const currentChannel = await this.getMy();\n        const prevReadAllowed = this.checkPreviousReadAllowed(currentChannel?.name);\n        this.sessionController.setWindowData(restrictions, \"restrictions\");\n        if (!currentChannel || prevReadAllowed || !config.read || currentChannel.name !== config.name) {\n            return;\n        }\n        this.replaySubscribeCallback(config.name);\n    }\n    async getRestrictions(windowId) {\n        runDecoderWithIOError(optionalNonEmptyStringDecoder, windowId);\n        if (!windowId || windowId === this.windowsController.my().id) {\n            return this.getMyRestrictions();\n        }\n        return this.bridge.send(\"channels\", operations$4.getRestrictions, { windowId }, undefined, { includeOperationCheck: true });\n    }\n    async restrictAll(restrictions) {\n        runDecoderWithIOError(restrictionsConfigDecoder, restrictions);\n        const allChannelNames = this.getAllChannelNames();\n        const forAnotherClient = restrictions.windowId && restrictions.windowId !== this.windowsController.my().id;\n        if (forAnotherClient) {\n            return this.bridge.send(\"channels\", operations$4.restrictAll, { restrictions }, undefined, { includeOperationCheck: true });\n        }\n        const allRestrictions = {};\n        allChannelNames.forEach((name) => {\n            allRestrictions[name] = { ...restrictions, name };\n        });\n        const currentChannel = await this.getMy();\n        const prevReadAllowed = this.checkPreviousReadAllowed(currentChannel?.name);\n        this.sessionController.setWindowData(allRestrictions, \"restrictions\");\n        if (!currentChannel || prevReadAllowed || !restrictions.read) {\n            return;\n        }\n        this.replaySubscribeCallback(currentChannel.name);\n    }\n    isAllowedByRestrictions(channelName, action) {\n        const { channels } = this.getMyRestrictions();\n        if (!channels?.length) {\n            return true;\n        }\n        const restriction = channels.find((restriction) => restriction.name === channelName);\n        return restriction ? restriction[action] : true;\n    }\n    getMyRestrictions() {\n        const sessionStorageData = this.sessionController.getWindowData();\n        const restrictions = Object.values(sessionStorageData?.restrictions || {});\n        return { channels: restrictions };\n    }\n    replaySubscribeCallback(channelName) {\n        const contextName = this.createContextName(channelName);\n        this.contexts.subscribe(contextName, (context, _, __, ___, extraData) => {\n            this.registry.execute(this.SubsKey, context.data, context, extraData?.updaterId);\n        }).then((unsub) => {\n            if (unsub && typeof unsub === \"function\") {\n                unsub();\n            }\n        }).catch(err => this.logger.error(err));\n    }\n    checkPreviousReadAllowed(channelName) {\n        if (!channelName) {\n            return true;\n        }\n        const prevRestrictions = this.sessionController.getWindowData().restrictions;\n        if (!prevRestrictions?.[channelName]) {\n            return true;\n        }\n        return prevRestrictions[channelName].read;\n    }\n    async publishWithOptions(data, options) {\n        if (options.name) {\n            const channelNames = this.getAllChannelNames();\n            runDecoderWithIOError(channelNameDecoder(channelNames), options.name);\n        }\n        const channelName = options.name || this.currentChannelName;\n        if (!channelName) {\n            return ioError.raiseError(\"Cannot publish to channel, because not joined to a channel!\");\n        }\n        const canPublish = this.isAllowedByRestrictions(channelName, \"write\");\n        if (!canPublish) {\n            return ioError.raiseError(`Cannot publish on channel ${channelName} due to restrictions`);\n        }\n        if (!options.fdc3) {\n            return this.updateData(channelName, data);\n        }\n        return this.publishFdc3Data(channelName, data);\n    }\n    async publishFdc3Data(channelName, data) {\n        runDecoderWithIOError(fdc3ContextDecoder, data);\n        const { type, ...rest } = data;\n        const parsedType = type.split(\".\").join(\"&\");\n        const fdc3DataToPublish = { [`fdc3_${parsedType}`]: rest };\n        return this.updateData(channelName, fdc3DataToPublish);\n    }\n    getWrappedSubscribeCallback(callback) {\n        const wrappedCallback = (channelData, context, updaterId) => {\n            const canRead = this.isAllowedByRestrictions(context.name, \"read\");\n            if (!canRead) {\n                return;\n            }\n            const { data, latest_fdc3_type } = context;\n            if (!latest_fdc3_type) {\n                callback(channelData, context, updaterId);\n                return;\n            }\n            const parsedType = latest_fdc3_type.split(\"&\").join(\".\");\n            const latestTypePropName = `fdc3_${latest_fdc3_type}`;\n            const fdc3Data = { type: parsedType, ...data[latestTypePropName] };\n            const { [latestTypePropName]: latestFDC3Type, ...rest } = channelData;\n            callback({ ...rest, fdc3: fdc3Data }, context, updaterId);\n        };\n        return wrappedCallback;\n    }\n}\n\nconst operations$3 = {\n    getEnvironment: { name: \"getEnvironment\", resultDecoder: anyDecoder },\n    getBase: { name: \"getBase\", resultDecoder: anyDecoder },\n    platformShutdown: { name: \"platformShutdown\" },\n    isFdc3DataWrappingSupported: { name: \"isFdc3DataWrappingSupported\" },\n    clientError: { name: \"clientError\", dataDecoder: clientErrorDataDecoder },\n};\n\nclass SystemController {\n    bridge;\n    ioc;\n    errorPort = errorChannel.port2;\n    async start(coreGlue, ioc) {\n        this.bridge = ioc.bridge;\n        this.ioc = ioc;\n        this.addOperationsExecutors();\n        this.errorPort.onmessage = async (event) => {\n            await this.bridge.send(\"system\", operations$3.clientError, { message: event.data }, undefined, { includeOperationCheck: true });\n        };\n        await this.setEnvironment();\n    }\n    async handleBridgeMessage(args) {\n        const operationName = runDecoderWithIOError(systemOperationTypesDecoder, args.operation);\n        const operation = operations$3[operationName];\n        if (!operation.execute) {\n            return;\n        }\n        let operationData = args.data;\n        if (operation.dataDecoder) {\n            operationData = runDecoderWithIOError(operation.dataDecoder, args.data);\n        }\n        return await operation.execute(operationData);\n    }\n    async processPlatformShutdown() {\n        Object.values(this.ioc.controllers).forEach((controller) => controller.handlePlatformShutdown ? controller.handlePlatformShutdown() : null);\n        this.ioc.preferredConnectionController.stop();\n        this.ioc.eventsDispatcher.stop();\n        await this.bridge.stop();\n    }\n    async setEnvironment() {\n        const environment = await this.bridge.send(\"system\", operations$3.getEnvironment, undefined);\n        const base = await this.bridge.send(\"system\", operations$3.getBase, undefined);\n        const globalNamespace = window.glue42core || window.iobrowser;\n        const globalNamespaceName = window.glue42core ? \"glue42core\" : \"iobrowser\";\n        const globalObj = Object.assign({}, globalNamespace, base, { environment });\n        window[globalNamespaceName] = Object.freeze(globalObj);\n    }\n    addOperationsExecutors() {\n        operations$3.platformShutdown.execute = this.processPlatformShutdown.bind(this);\n        operations$3.isFdc3DataWrappingSupported.execute = this.handleIsFdc3DataWrappingSupported.bind(this);\n    }\n    async handleIsFdc3DataWrappingSupported() {\n        return { isSupported: true };\n    }\n}\n\nclass Notification {\n    onclick = () => { };\n    onshow = () => { };\n    id;\n    title;\n    badge;\n    body;\n    data;\n    dir;\n    icon;\n    image;\n    lang;\n    renotify;\n    requireInteraction;\n    silent;\n    tag;\n    timestamp;\n    vibrate;\n    clickInterop;\n    actions;\n    focusPlatformOnDefaultClick;\n    severity;\n    showToast;\n    showInPanel;\n    state;\n    constructor(config, id) {\n        this.id = id;\n        this.badge = config.badge;\n        this.body = config.body;\n        this.data = config.data;\n        this.dir = config.dir;\n        this.icon = config.icon;\n        this.image = config.image;\n        this.lang = config.lang;\n        this.renotify = config.renotify;\n        this.requireInteraction = config.requireInteraction;\n        this.silent = config.silent;\n        this.tag = config.tag;\n        this.timestamp = config.timestamp;\n        this.vibrate = config.vibrate;\n        this.title = config.title;\n        this.clickInterop = config.clickInterop;\n        this.actions = config.actions;\n        this.focusPlatformOnDefaultClick = config.focusPlatformOnDefaultClick;\n        this.severity = config.severity;\n        this.showToast = config.showToast;\n        this.showInPanel = config.showInPanel;\n        this.state = config.state;\n    }\n}\n\noneOf$1(constant$1(\"clientHello\"));\nconst extensionConfigDecoder = object$1({\n    widget: object$1({\n        inject: boolean$1()\n    })\n});\n\nconst operations$2 = {\n    clientHello: { name: \"clientHello\", resultDecoder: extensionConfigDecoder }\n};\n\nclass ExtController {\n    windowId;\n    logger;\n    bridge;\n    eventsDispatcher;\n    channelsController;\n    config;\n    channels = [];\n    unsubFuncs = [];\n    contentCommands = {\n        widgetVisualizationPermission: { name: \"widgetVisualizationPermission\", handle: this.handleWidgetVisualizationPermission.bind(this) },\n        changeChannel: { name: \"changeChannel\", handle: this.handleChangeChannel.bind(this) }\n    };\n    handlePlatformShutdown() {\n        this.unsubFuncs.forEach((unsub) => unsub());\n        this.channels = [];\n        this.unsubFuncs = [];\n    }\n    async start(coreGlue, ioc) {\n        this.logger = coreGlue.logger.subLogger(\"extension.controller.web\");\n        this.windowId = ioc.publicWindowId;\n        this.logger.trace(\"starting the extension web controller\");\n        this.bridge = ioc.bridge;\n        this.channelsController = ioc.channelsController;\n        this.eventsDispatcher = ioc.eventsDispatcher;\n        try {\n            await this.registerWithPlatform();\n        }\n        catch (error) {\n            return;\n        }\n        this.channels = await this.channelsController.list();\n        const unsubDispatcher = this.eventsDispatcher.onContentMessage(this.handleContentMessage.bind(this));\n        const unsubChannels = this.channelsController.onChanged((channel) => {\n            this.eventsDispatcher.sendContentMessage({ command: \"channelChange\", newChannel: channel });\n        });\n        this.unsubFuncs.push(unsubDispatcher);\n        this.unsubFuncs.push(unsubChannels);\n    }\n    async handleBridgeMessage(_) {\n    }\n    handleContentMessage(message) {\n        if (!message || typeof message.command !== \"string\") {\n            return;\n        }\n        const foundHandler = this.contentCommands[message.command];\n        if (!foundHandler) {\n            return;\n        }\n        foundHandler.handle(message);\n    }\n    async registerWithPlatform() {\n        this.logger.trace(\"registering with the platform\");\n        this.config = await this.bridge.send(\"extension\", operations$2.clientHello, { windowId: this.windowId });\n        this.logger.trace(\"the platform responded to the hello message with a valid extension config\");\n    }\n    async handleWidgetVisualizationPermission() {\n        if (!this.config?.widget.inject) {\n            return this.eventsDispatcher.sendContentMessage({ command: \"permissionResponse\", allowed: false });\n        }\n        const currentChannel = this.channels.find((channel) => channel.name === this.channelsController.my());\n        this.eventsDispatcher.sendContentMessage({ command: \"permissionResponse\", allowed: true, channels: this.channels, currentChannel });\n    }\n    async handleChangeChannel(message) {\n        if (message.name === \"no-channel\") {\n            await this.channelsController.leave();\n            return;\n        }\n        await this.channelsController.join(message.name);\n    }\n}\n\nclass EventsDispatcher {\n    config;\n    glue;\n    registry = CallbackRegistryFactory$1();\n    glue42EventName = \"Glue42\";\n    _handleMessage;\n    constructor(config) {\n        this.config = config;\n    }\n    events = {\n        notifyStarted: { name: \"notifyStarted\", handle: this.handleNotifyStarted.bind(this) },\n        contentInc: { name: \"contentInc\", handle: this.handleContentInc.bind(this) },\n        requestGlue: { name: \"requestGlue\", handle: this.handleRequestGlue.bind(this) }\n    };\n    stop() {\n        window.removeEventListener(this.glue42EventName, this._handleMessage);\n    }\n    start(glue) {\n        this.glue = glue;\n        this.wireCustomEventListener();\n        this.announceStarted();\n    }\n    sendContentMessage(message) {\n        this.send(\"contentOut\", \"glue42core\", message);\n    }\n    onContentMessage(callback) {\n        return this.registry.add(\"content-inc\", callback);\n    }\n    wireCustomEventListener() {\n        this._handleMessage = this.handleMessage.bind(this);\n        window.addEventListener(this.glue42EventName, this._handleMessage);\n    }\n    handleMessage(event) {\n        const data = event.detail;\n        const namespace = data?.glue42 ?? data?.glue42core;\n        if (!namespace) {\n            return;\n        }\n        const glue42Event = namespace.event;\n        const foundHandler = this.events[glue42Event];\n        if (!foundHandler) {\n            return;\n        }\n        foundHandler.handle(namespace.message);\n    }\n    announceStarted() {\n        this.send(\"start\", \"glue42\");\n    }\n    handleRequestGlue() {\n        if (!this.config.exposeAPI) {\n            this.send(\"requestGlueResponse\", \"glue42\", { error: \"Will not give access to the underlying Glue API, because it was explicitly denied upon initialization.\" });\n            return;\n        }\n        this.send(\"requestGlueResponse\", \"glue42\", { glue: this.glue });\n    }\n    handleNotifyStarted() {\n        this.announceStarted();\n    }\n    handleContentInc(message) {\n        this.registry.execute(\"content-inc\", message);\n    }\n    send(eventName, namespace, message) {\n        const payload = {};\n        payload[namespace] = { event: eventName, message };\n        const event = new CustomEvent(this.glue42EventName, { detail: payload });\n        window.dispatchEvent(event);\n    }\n}\n\nclass PreferredConnectionController {\n    coreGlue;\n    transactionTimeout = 15000;\n    transactionLocks = {};\n    webPlatformTransport;\n    webPlatformMessagesUnsubscribe;\n    reconnectCounter = 0;\n    logger;\n    constructor(coreGlue) {\n        this.coreGlue = coreGlue;\n        this.logger = this.coreGlue.logger.subLogger(\"web.preferred.connection.controller\");\n    }\n    stop() {\n        if (!this.webPlatformMessagesUnsubscribe) {\n            return;\n        }\n        this.webPlatformMessagesUnsubscribe();\n    }\n    async start(coreConfig) {\n        if (coreConfig.isPlatformInternal) {\n            this.logger.trace(\"This is an internal client to the platform, skipping all client preferred communication logic.\");\n            return;\n        }\n        const isConnectedToPlatform = this.coreGlue.connection.transport.name() === webPlatformTransportName;\n        if (!isConnectedToPlatform) {\n            return ioError.raiseError(\"Cannot initiate the Glue Web Bridge, because the initial connection was not handled by a Web Platform transport.\");\n        }\n        if (!this.coreGlue.connection.transport.isPreferredActivated) {\n            this.logger.trace(\"The platform of this client was configured without a preferred connection, skipping the rest of the initialization.\");\n            return;\n        }\n        this.webPlatformTransport = this.coreGlue.connection.transport;\n        this.webPlatformMessagesUnsubscribe = this.webPlatformTransport.onMessage(this.handleWebPlatformMessage.bind(this));\n        const transportState = await this.getCurrentPlatformTransportState();\n        await this.checkSwitchTransport(transportState);\n    }\n    handleWebPlatformMessage(msg) {\n        if (typeof msg === \"string\") {\n            return;\n        }\n        const isConnectedToPlatform = this.coreGlue.connection.transport.name() === webPlatformTransportName;\n        const type = msg.type;\n        const args = msg.args;\n        const transactionId = msg.transactionId;\n        if (type === Glue42CoreMessageTypes.transportSwitchRequest.name) {\n            return this.handleTransportSwitchRequest(args, transactionId);\n        }\n        if (type === Glue42CoreMessageTypes.platformUnload.name && !isConnectedToPlatform) {\n            return this.handlePlatformUnload();\n        }\n        if (type === Glue42CoreMessageTypes.getCurrentTransportResponse.name) {\n            return this.handleGetCurrentTransportResponse(args, transactionId);\n        }\n        if (type === Glue42CoreMessageTypes.checkPreferredLogic.name) {\n            return this.handleCheckPreferredLogic(transactionId);\n        }\n        if (type === Glue42CoreMessageTypes.checkPreferredConnection.name) {\n            return this.handleCheckPreferredConnection(args, transactionId);\n        }\n    }\n    async reEstablishPlatformPort() {\n        try {\n            await this.webPlatformTransport.connect();\n        }\n        catch (error) {\n            this.logger.trace(`Error when re-establishing port connection to the platform: ${JSON.stringify(error)}`);\n            --this.reconnectCounter;\n            if (this.reconnectCounter > 0) {\n                return this.reEstablishPlatformPort();\n            }\n            this.logger.warn(\"This client lost connection to the platform while connected to a preferred GW and was not able to re-connect to the platform.\");\n        }\n        this.logger.trace(\"The connection to the platform was re-established, closing the connection to the web gateway.\");\n        this.reconnectCounter = 0;\n        this.webPlatformTransport.close();\n        const transportState = await this.getCurrentPlatformTransportState();\n        await this.checkSwitchTransport(transportState);\n    }\n    async checkSwitchTransport(config) {\n        const myCurrentTransportName = this.coreGlue.connection.transport.name();\n        if (myCurrentTransportName === config.transportName) {\n            this.logger.trace(\"A check switch was requested, but the platform transport and my transport are identical, no switch is necessary\");\n            return;\n        }\n        this.logger.trace(`A check switch was requested and a transport switch is necessary, because this client is now on ${myCurrentTransportName}, but it should reconnect to ${JSON.stringify(config)}`);\n        const result = await this.coreGlue.connection.switchTransport(config);\n        this.setConnected();\n        this.logger.trace(`The transport switch was completed with result: ${JSON.stringify(result)}`);\n    }\n    async getCurrentPlatformTransportState() {\n        this.logger.trace(\"Requesting the current transport state of the platform.\");\n        const transaction = this.setTransaction(Glue42CoreMessageTypes.getCurrentTransport.name);\n        this.sendPlatformMessage(Glue42CoreMessageTypes.getCurrentTransport.name, transaction.id);\n        const transportState = await transaction.lock;\n        this.logger.trace(`The platform responded with transport state: ${JSON.stringify(transportState)}`);\n        return transportState;\n    }\n    setTransaction(operation) {\n        const transaction = {};\n        const transactionId = nanoid$1(10);\n        const transactionLock = new Promise((resolve, reject) => {\n            let transactionLive = true;\n            transaction.lift = (args) => {\n                transactionLive = false;\n                delete this.transactionLocks[transactionId];\n                resolve(args);\n            };\n            transaction.fail = (reason) => {\n                transactionLive = false;\n                delete this.transactionLocks[transactionId];\n                reject(reason);\n            };\n            setTimeout(() => {\n                if (!transactionLive) {\n                    return;\n                }\n                transactionLive = false;\n                this.logger.warn(`Transaction for operation: ${operation} timed out.`);\n                delete this.transactionLocks[transactionId];\n                reject(`Transaction for operation: ${operation} timed out.`);\n            }, this.transactionTimeout);\n        });\n        transaction.lock = transactionLock;\n        transaction.id = transactionId;\n        this.transactionLocks[transactionId] = transaction;\n        return transaction;\n    }\n    sendPlatformMessage(type, transactionId, args) {\n        this.logger.trace(`Sending a platform message of type: ${type}, id: ${transactionId} and args: ${JSON.stringify(args)}`);\n        this.webPlatformTransport.sendObject({\n            glue42core: { type, args, transactionId }\n        });\n    }\n    handleTransportSwitchRequest(args, transactionId) {\n        this.logger.trace(`Received a transport switch request with id: ${transactionId} and data: ${JSON.stringify(args)}`);\n        this.coreGlue.connection.switchTransport(args.switchSettings)\n            .then((result) => {\n            this.logger.trace(`The transport switch was completed with result: ${JSON.stringify(result)}`);\n            this.setConnected();\n            this.sendPlatformMessage(Glue42CoreMessageTypes.transportSwitchResponse.name, transactionId, { success: result.success });\n        })\n            .catch((error) => {\n            this.logger.error(error);\n            this.sendPlatformMessage(Glue42CoreMessageTypes.transportSwitchResponse.name, transactionId, { success: false });\n        });\n    }\n    handlePlatformUnload() {\n        this.reconnectCounter = 5;\n        this.logger.trace(\"The platform was unloaded while I am connected to a preferred connection, re-establishing the port connection.\");\n        this.reEstablishPlatformPort();\n    }\n    handleGetCurrentTransportResponse(args, transactionId) {\n        this.logger.trace(`Got a current transport response from the platform with id: ${transactionId} and data: ${JSON.stringify(args)}`);\n        const transportState = args.transportState;\n        const transaction = this.transactionLocks[transactionId];\n        transaction?.lift(transportState);\n    }\n    handleCheckPreferredLogic(transactionId) {\n        setTimeout(() => this.sendPlatformMessage(Glue42CoreMessageTypes.checkPreferredLogicResponse.name, transactionId), 0);\n    }\n    handleCheckPreferredConnection(args, transactionId) {\n        const url = args.url;\n        this.logger.trace(`Testing the possible connection to: ${url}`);\n        this.checkPreferredConnection(url)\n            .then((result) => {\n            this.logger.trace(`The connection to ${url} is possible`);\n            this.sendPlatformMessage(Glue42CoreMessageTypes.checkPreferredConnectionResponse.name, transactionId, result);\n        })\n            .catch((error) => {\n            this.logger.trace(`The connection to ${url} is not possible`);\n            this.sendPlatformMessage(Glue42CoreMessageTypes.checkPreferredConnectionResponse.name, transactionId, { error });\n        });\n    }\n    checkPreferredConnection(url) {\n        return new Promise((resolve) => {\n            const ws = new WebSocket(url);\n            ws.onerror = () => resolve({ live: false });\n            ws.onopen = () => {\n                ws.close();\n                resolve({ live: true });\n            };\n        });\n    }\n    setConnected() {\n        this.webPlatformTransport.manualSetReadyState();\n    }\n}\n\nclass LegacyIntentsHelper {\n    bridge;\n    interop;\n    appManagerController;\n    windowsController;\n    logger;\n    intentsResolverResponsePromises = {};\n    constructor(logger, bridge, interop, appManagerController, windowsController) {\n        this.bridge = bridge;\n        this.interop = interop;\n        this.appManagerController = appManagerController;\n        this.windowsController = windowsController;\n        this.logger = this.configureLogger(logger);\n    }\n    async raise(requestWithResolverInfo, findIntentFn) {\n        const { intentRequest, resolverConfig } = requestWithResolverInfo;\n        const intent = (await findIntentFn(intentRequest.intent)).find(intent => intent.name === intentRequest.intent);\n        if (!intent) {\n            return ioError.raiseError(`Intent with name ${intentRequest.intent} not found`);\n        }\n        const { open, reason } = this.checkIfResolverShouldBeOpened(intent, intentRequest, resolverConfig);\n        if (!open) {\n            this.logger?.trace(`Intent Resolver UI won't be used. Reason: ${reason}`);\n            return this.invokeRaiseIntent(intentRequest);\n        }\n        const intentResult = await this.raiseIntentWithResolverApp(requestWithResolverInfo);\n        return intentResult;\n    }\n    configureLogger(loggerInst) {\n        return loggerInst.subLogger(\"intents.legacy.helper.web\");\n    }\n    async raiseIntentWithResolverApp(requestWithResolverInfo) {\n        const { intentRequest, resolverConfig } = requestWithResolverInfo;\n        this.logger.trace(`Intents Resolver UI with app name ${resolverConfig.appName} will be used`);\n        const responseMethodName = await this.registerResponseMethod();\n        this.logger.trace(`Registered interop method ${responseMethodName}`);\n        const resolverInstance = await this.openIntentResolverApplication(requestWithResolverInfo, responseMethodName);\n        this.logger.trace(`Intents Resolver Instance with id ${resolverInstance.id} opened`);\n        const handler = await this.handleInstanceResponse(resolverInstance.id);\n        const target = handler.type === \"app\"\n            ? { app: handler.applicationName }\n            : { instance: handler.instanceId };\n        this.logger.trace(`Intent handler chosen by the user: ${JSON.stringify(target)}`);\n        const intentResult = await this.invokeRaiseIntent({ ...intentRequest, target });\n        return intentResult;\n    }\n    async handleInstanceResponse(instanceId) {\n        try {\n            const { handler, intent } = await this.intentsResolverResponsePromises[instanceId].promise;\n            this.logger?.trace(`Intent handler chosen for intent ${intent}: ${JSON.stringify(handler)}`);\n            this.stopResolverInstance(instanceId);\n            return handler;\n        }\n        catch (error) {\n            this.stopResolverInstance(instanceId);\n            return ioError.raiseError(error);\n        }\n    }\n    invokeRaiseIntent(requestObj) {\n        return this.bridge.send(\"intents\", operations$5.raiseIntent, requestObj);\n    }\n    async registerResponseMethod() {\n        const methodName = INTENTS_RESOLVER_INTEROP_PREFIX + nanoid$1(10);\n        await this.interop.register(methodName, this.resolverResponseHandler.bind(this));\n        return methodName;\n    }\n    async openIntentResolverApplication(requestWithResolverInfo, methodName) {\n        const { intentRequest, resolverConfig } = requestWithResolverInfo;\n        const startContext = this.buildStartContext(intentRequest, methodName);\n        const startOptions = await this.buildStartOptions();\n        this.logger.trace(`Starting Intents Resolver UI with context: ${JSON.stringify(startContext)} and options: ${startOptions}`);\n        const instance = await this.appManagerController.getApplication(resolverConfig.appName).start(startContext, startOptions);\n        this.logger.trace(`Intents Resolver instance with id ${instance.id} opened`);\n        this.subscribeOnInstanceStopped(instance);\n        this.createResponsePromise(intentRequest.intent, instance.id, methodName, resolverConfig.waitResponseTimeout);\n        return instance;\n    }\n    async cleanUpIntentResolverPromise(instanceId) {\n        const intentPromise = this.intentsResolverResponsePromises[instanceId];\n        if (!intentPromise) {\n            return;\n        }\n        const unregisterPromise = this.interop.unregister(intentPromise.methodName);\n        unregisterPromise.catch((error) => this.logger.warn(error));\n        delete this.intentsResolverResponsePromises[instanceId];\n    }\n    buildStartContext(requestObj, methodName) {\n        return {\n            intent: requestObj,\n            callerId: this.interop.instance.instance,\n            methodName\n        };\n    }\n    async buildStartOptions() {\n        const bounds = await this.getTargetBounds();\n        return {\n            top: (bounds.height - INTENTS_RESOLVER_HEIGHT) / 2 + bounds.top,\n            left: (bounds.width - INTENTS_RESOLVER_WIDTH) / 2 + bounds.left,\n            width: INTENTS_RESOLVER_WIDTH,\n            height: INTENTS_RESOLVER_HEIGHT\n        };\n    }\n    async getTargetBounds() {\n        const bounds = await this.tryGetWindowBasedBounds() || await this.tryGetWorkspaceBasedBounds();\n        if (bounds) {\n            this.logger.trace(`Opening Intents Resolver UI with bounds: ${JSON.stringify(bounds)}`);\n            return bounds;\n        }\n        const defaultBounds = {\n            top: window.screen.availTop || 0,\n            left: window.screen.availLeft || 0,\n            width: window.screen.width,\n            height: window.screen.height\n        };\n        this.logger.trace(`Opening Intents Resolver UI relative to my screen bounds: ${JSON.stringify(defaultBounds)}`);\n        return defaultBounds;\n    }\n    async tryGetWindowBasedBounds() {\n        try {\n            const myWindowBounds = await this.windowsController.my().getBounds();\n            this.logger.trace(`Opening the resolver UI relative to my window bounds: ${JSON.stringify(myWindowBounds)}`);\n            return myWindowBounds;\n        }\n        catch (error) {\n            this.logger.trace(`Failure to get my window bounds: ${JSON.stringify(error)}`);\n        }\n        return undefined;\n    }\n    async tryGetWorkspaceBasedBounds() {\n        try {\n            await this.bridge.send(\"workspaces\", systemOperations.operationCheck, { operation: \"getWorkspaceWindowFrameBounds\" });\n            const bridgeResponse = await this.bridge.send(\"workspaces\", systemOperations.getWorkspaceWindowFrameBounds, { itemId: this.windowsController.my().id });\n            const myWorkspaceBounds = bridgeResponse.bounds;\n            this.logger.trace(`Opening the resolver UI relative to my workspace frame window bounds: ${JSON.stringify(myWorkspaceBounds)}`);\n            return myWorkspaceBounds;\n        }\n        catch (error) {\n            this.logger.trace(`Failure to get my workspace frame window bounds: ${JSON.stringify(error)}`);\n        }\n        return undefined;\n    }\n    subscribeOnInstanceStopped(instance) {\n        const { application } = instance;\n        const unsub = application.onInstanceStopped((inst) => {\n            if (inst.id !== instance.id) {\n                return;\n            }\n            const intentPromise = this.intentsResolverResponsePromises[inst.id];\n            if (!intentPromise) {\n                return unsub();\n            }\n            intentPromise.reject(`Cannot resolve raised intent \"${intentPromise.intent}\" - User closed ${application.name} app without choosing an intent handler`);\n            this.cleanUpIntentResolverPromise(inst.id);\n            unsub();\n        });\n    }\n    createResponsePromise(intent, instanceId, methodName, timeout) {\n        let resolve = () => { };\n        let reject = () => { };\n        const promise = PromisePlus$1((res, rej) => {\n            resolve = res;\n            reject = rej;\n        }, timeout, `Timeout of ${timeout}ms hit waiting for the user to choose a handler for intent ${intent}`);\n        this.intentsResolverResponsePromises[instanceId] = { intent, resolve, reject, promise, methodName };\n    }\n    resolverResponseHandler(args, callerId) {\n        const response = intentResolverResponseDecoder.run(args);\n        const instanceId = callerId.instance;\n        if (response.ok) {\n            this.logger.trace(`Intent Resolver instance with id ${instanceId} send a valid response: ${JSON.stringify(response.result)}`);\n            return this.intentsResolverResponsePromises[instanceId].resolve(response.result);\n        }\n        this.logger.trace(`Intent Resolver instance with id ${instanceId} sent an invalid response. Error: ${JSON.stringify(response.error)}`);\n        this.intentsResolverResponsePromises[instanceId].reject(response.error.message);\n        this.stopResolverInstance(instanceId);\n    }\n    stopResolverInstance(instanceId) {\n        const searchedInstance = this.appManagerController.getInstances().find((inst) => inst.id === instanceId);\n        if (!searchedInstance) {\n            return;\n        }\n        searchedInstance.stop().catch(err => this.logger.error(err));\n    }\n    checkIfIntentHasMoreThanOneHandler(intent, request) {\n        if (typeof request.target === \"object\") {\n            return false;\n        }\n        return request.handlers ? request.handlers.length > 1 : intent.handlers.length > 1;\n    }\n    checkIfResolverShouldBeOpened(intent, intentRequest, resolverConfig) {\n        if (!resolverConfig.enabled) {\n            return { open: false, reason: \"Intent Resolver is disabled. Raising intent to first found handler\" };\n        }\n        const intentsResolverApp = this.appManagerController.getApplication(resolverConfig.appName);\n        if (!intentsResolverApp) {\n            return { open: false, reason: `Application with name ${resolverConfig.appName} not found` };\n        }\n        const hasMoreThanOneHandler = this.checkIfIntentHasMoreThanOneHandler(intent, intentRequest);\n        if (!hasMoreThanOneHandler) {\n            return { open: false, reason: \"Raised intent has only one handler\" };\n        }\n        return { open: true };\n    }\n}\n\nconst operations$1 = {\n    getCurrent: { name: \"getCurrent\", resultDecoder: simpleThemeResponseDecoder },\n    list: { name: \"list\", resultDecoder: allThemesResponseDecoder },\n    select: { name: \"select\", dataDecoder: selectThemeConfigDecoder }\n};\n\nclass ThemesController {\n    logger;\n    bridge;\n    registry = CallbackRegistryFactory$1();\n    themesSubscription;\n    activeThemeSubs = 0;\n    async start(coreGlue, ioc) {\n        this.logger = coreGlue.logger.subLogger(\"themes.controller.web\");\n        this.logger.trace(\"starting the web themes controller\");\n        this.bridge = ioc.bridge;\n        const api = this.toApi();\n        coreGlue.themes = api;\n        this.logger.trace(\"themes are ready\");\n    }\n    handlePlatformShutdown() {\n        this.registry.clear();\n        this.activeThemeSubs = 0;\n        this.themesSubscription?.close();\n        delete this.themesSubscription;\n    }\n    async handleBridgeMessage() {\n    }\n    toApi() {\n        const api = {\n            getCurrent: this.getCurrent.bind(this),\n            list: this.list.bind(this),\n            select: this.select.bind(this),\n            onChanged: this.onChanged.bind(this)\n        };\n        return Object.freeze(api);\n    }\n    async getCurrent() {\n        const bridgeResponse = await this.bridge.send(\"themes\", operations$1.getCurrent, undefined, undefined, { includeOperationCheck: true });\n        return bridgeResponse.theme;\n    }\n    async list() {\n        const bridgeResponse = await this.bridge.send(\"themes\", operations$1.list, undefined, undefined, { includeOperationCheck: true });\n        return bridgeResponse.themes;\n    }\n    async select(name) {\n        runDecoderWithIOError(nonEmptyStringDecoder, name);\n        await this.bridge.send(\"themes\", operations$1.select, { name }, undefined, { includeOperationCheck: true });\n    }\n    async onChanged(callback) {\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"onChanged requires a callback of type function\");\n        }\n        const subReady = this.themesSubscription ?\n            Promise.resolve() :\n            this.configureThemeSubscription();\n        await subReady;\n        ++this.activeThemeSubs;\n        const unsubFunc = this.registry.add(\"on-theme-change\", callback);\n        return () => this.themeUnsub(unsubFunc);\n    }\n    async configureThemeSubscription() {\n        if (this.themesSubscription) {\n            return;\n        }\n        this.themesSubscription = await this.bridge.createNotificationsSteam();\n        this.themesSubscription.onData((data) => {\n            const eventData = data.data;\n            const validation = simpleThemeResponseDecoder.run(eventData);\n            if (!validation.ok) {\n                this.logger.warn(`Received invalid theme data on the theme event stream: ${JSON.stringify(validation.error)}`);\n                return;\n            }\n            const themeChanged = validation.result;\n            this.registry.execute(\"on-theme-change\", themeChanged.theme);\n        });\n        this.themesSubscription.onClosed(() => {\n            this.logger.warn(\"The Themes interop stream was closed, no theme changes notifications will be received\");\n            this.registry.clear();\n            this.activeThemeSubs = 0;\n            delete this.themesSubscription;\n        });\n    }\n    themeUnsub(registryUnsub) {\n        registryUnsub();\n        --this.activeThemeSubs;\n        if (this.activeThemeSubs) {\n            return;\n        }\n        this.themesSubscription?.close();\n        delete this.themesSubscription;\n    }\n}\n\nclass SessionStorageController {\n    sessionStorage = window.sessionStorage;\n    windowId;\n    get allNamespaces() {\n        return [{ namespace: this.windowNamespace, defaultValue: {} }];\n    }\n    configure(config) {\n        this.windowId = config.windowId;\n        this.allNamespaces.forEach(({ namespace, defaultValue }) => {\n            const data = this.sessionStorage.getItem(namespace);\n            if (!data) {\n                this.sessionStorage.setItem(namespace, JSON.stringify(defaultValue));\n            }\n        });\n    }\n    get windowNamespace() {\n        return `io_connect_window_${this.windowId}`;\n    }\n    getWindowData() {\n        return JSON.parse(this.sessionStorage.getItem(this.windowNamespace));\n    }\n    setWindowData(data, key) {\n        const allData = this.getWindowData();\n        allData[key] = data;\n        this.sessionStorage.setItem(this.windowNamespace, JSON.stringify(allData));\n    }\n}\n\nconst operations = {\n    clear: { name: \"clear\", dataDecoder: basePrefsConfigDecoder },\n    clearAll: { name: \"clearAll\" },\n    get: { name: \"get\", dataDecoder: basePrefsConfigDecoder, resultDecoder: getPrefsResultDecoder },\n    getAll: { name: \"getAll\", resultDecoder: getAllPrefsResultDecoder },\n    set: { name: \"set\", dataDecoder: changePrefsDataDecoder },\n    update: { name: \"update\", dataDecoder: changePrefsDataDecoder },\n    prefsChanged: { name: \"prefsChanged\", dataDecoder: getPrefsResultDecoder },\n    prefsHello: { name: \"prefsHello\", resultDecoder: prefsHelloSuccessDecoder },\n};\n\nclass PrefsController {\n    bridge;\n    config;\n    logger;\n    appManagerController;\n    platformAppName;\n    registry = CallbackRegistryFactory$1();\n    handlePlatformShutdown() {\n        this.registry.clear();\n    }\n    async start(coreGlue, ioc) {\n        this.logger = coreGlue.logger.subLogger(\"prefs.controller.web\");\n        this.logger.trace(\"starting the web prefs controller\");\n        this.addOperationsExecutors();\n        this.bridge = ioc.bridge;\n        this.config = ioc.config;\n        this.appManagerController = ioc.appManagerController;\n        try {\n            const prefsHelloSuccess = await this.bridge.send(\"prefs\", operations.prefsHello, undefined, undefined, { includeOperationCheck: true });\n            this.platformAppName = prefsHelloSuccess.platform.app;\n        }\n        catch (error) {\n            this.logger.warn(\"The platform of this client is outdated and does not support Prefs API.\");\n            return;\n        }\n        this.logger.trace(\"no need for platform registration, attaching the prefs property to glue and returning\");\n        const api = this.toApi();\n        coreGlue.prefs = api;\n    }\n    async handleBridgeMessage(args) {\n        const operationName = runDecoderWithIOError(prefsOperationTypesDecoder, args.operation);\n        const operation = operations[operationName];\n        if (!operation.execute) {\n            return;\n        }\n        let operationData = args.data;\n        if (operation.dataDecoder) {\n            operationData = runDecoderWithIOError(operation.dataDecoder, args.data);\n        }\n        return await operation.execute(operationData);\n    }\n    async get(app) {\n        const verifiedApp = app === undefined || app === null ? this.getMyAppName() : nonEmptyStringDecoder.runWithException(app);\n        const { prefs } = await this.bridge.send(\"prefs\", operations.get, { app: verifiedApp }, undefined, { includeOperationCheck: true });\n        return prefs;\n    }\n    async update(data, options) {\n        const verifiedOptions = optional$1(basePrefsConfigDecoder).runWithException(options);\n        const app = verifiedOptions?.app ?? this.getMyAppName();\n        await this.updateFor(app, data);\n    }\n    addOperationsExecutors() {\n        operations.prefsChanged.execute = this.handleOnChanged.bind(this);\n    }\n    toApi() {\n        const api = {\n            clear: this.clear.bind(this),\n            clearAll: this.clearAll.bind(this),\n            clearFor: this.clearFor.bind(this),\n            get: this.get.bind(this),\n            getAll: this.getAll.bind(this),\n            set: this.set.bind(this),\n            setFor: this.setFor.bind(this),\n            subscribe: this.subscribe.bind(this),\n            subscribeFor: this.subscribeFor.bind(this),\n            update: this.update.bind(this),\n            updateFor: this.updateFor.bind(this),\n        };\n        return api;\n    }\n    async clear() {\n        const app = this.getMyAppName();\n        await this.clearFor(app);\n    }\n    async clearAll() {\n        await this.bridge.send(\"prefs\", operations.clearAll, undefined, undefined, { includeOperationCheck: true });\n    }\n    async clearFor(app) {\n        const verifiedApp = runDecoderWithIOError(nonEmptyStringDecoder, app);\n        await this.bridge.send(\"prefs\", operations.clear, { app: verifiedApp }, undefined, { includeOperationCheck: true });\n    }\n    async getAll() {\n        const result = await this.bridge.send(\"prefs\", operations.getAll, undefined, undefined, { includeOperationCheck: true });\n        return result;\n    }\n    async set(data, options) {\n        const verifiedOptions = runDecoderWithIOError(optional$1(basePrefsConfigDecoder), options);\n        const app = verifiedOptions?.app ?? this.getMyAppName();\n        await this.setFor(app, data);\n    }\n    async setFor(app, data) {\n        const verifiedApp = runDecoderWithIOError(nonEmptyStringDecoder, app);\n        const verifiedData = runDecoderWithIOError(object$1(), data);\n        await this.bridge.send(\"prefs\", operations.set, { app: verifiedApp, data: verifiedData }, undefined, { includeOperationCheck: true });\n    }\n    subscribe(callback) {\n        const app = this.getMyAppName();\n        return this.subscribeFor(app, callback);\n    }\n    subscribeFor(app, callback) {\n        const verifiedApp = runDecoderWithIOError(nonEmptyStringDecoder, app);\n        const applications = this.appManagerController.getApplications();\n        const isValidApp = verifiedApp === this.platformAppName || applications.some((application) => application.name === verifiedApp);\n        if (!isValidApp) {\n            return ioError.raiseError(`The provided app name \"${app}\" is not valid.`);\n        }\n        if (typeof callback !== \"function\") {\n            return ioError.raiseError(\"Cannot subscribe to prefs, because the provided callback is not a function!\");\n        }\n        const subscriptionKey = this.getSubscriptionKey(verifiedApp);\n        this.get(verifiedApp).then(callback);\n        return this.registry.add(subscriptionKey, callback);\n    }\n    async updateFor(app, data) {\n        const verifiedApp = runDecoderWithIOError(nonEmptyStringDecoder, app);\n        const verifiedData = runDecoderWithIOError(object$1(), data);\n        await this.bridge.send(\"prefs\", operations.update, { app: verifiedApp, data: verifiedData }, undefined, { includeOperationCheck: true });\n    }\n    getMyAppName() {\n        const myAppName = this.config.isPlatformInternal ? this.platformAppName : this.appManagerController.me?.application.name;\n        if (!myAppName) {\n            return ioError.raiseError(\"App Preferences operations can not be executed for windows that do not have app!\");\n        }\n        return myAppName;\n    }\n    getSubscriptionKey(app) {\n        return `prefs-changed-${app}`;\n    }\n    async handleOnChanged({ prefs }) {\n        const subscriptionKey = this.getSubscriptionKey(prefs.app);\n        this.registry.execute(subscriptionKey, prefs);\n    }\n}\n\nclass IoC {\n    _coreGlue;\n    _communicationId;\n    _publicWindowId;\n    _webConfig;\n    _windowsControllerInstance;\n    _appManagerControllerInstance;\n    _layoutsControllerInstance;\n    _notificationsControllerInstance;\n    _intentsControllerInstance;\n    _legacyIntentsHelperInstance;\n    _channelsControllerInstance;\n    _themesControllerInstance;\n    _extensionController;\n    _systemControllerInstance;\n    _bridgeInstance;\n    _eventsDispatcher;\n    _preferredConnectionController;\n    _sessionController;\n    _prefsControllerInstance;\n    controllers = {\n        windows: this.windowsController,\n        appManager: this.appManagerController,\n        layouts: this.layoutsController,\n        notifications: this.notificationsController,\n        intents: this.intentsController,\n        channels: this.channelsController,\n        system: this.systemController,\n        extension: this.extensionController,\n        themes: this.themesController,\n        prefs: this.prefsController\n    };\n    get communicationId() {\n        return this._communicationId;\n    }\n    get publicWindowId() {\n        return this._publicWindowId;\n    }\n    get windowsController() {\n        if (!this._windowsControllerInstance) {\n            this._windowsControllerInstance = new WindowsController();\n        }\n        return this._windowsControllerInstance;\n    }\n    get appManagerController() {\n        if (!this._appManagerControllerInstance) {\n            this._appManagerControllerInstance = new AppManagerController();\n        }\n        return this._appManagerControllerInstance;\n    }\n    get layoutsController() {\n        if (!this._layoutsControllerInstance) {\n            this._layoutsControllerInstance = new LayoutsController();\n        }\n        return this._layoutsControllerInstance;\n    }\n    get themesController() {\n        if (!this._themesControllerInstance) {\n            this._themesControllerInstance = new ThemesController();\n        }\n        return this._themesControllerInstance;\n    }\n    get notificationsController() {\n        if (!this._notificationsControllerInstance) {\n            this._notificationsControllerInstance = new NotificationsController();\n        }\n        return this._notificationsControllerInstance;\n    }\n    get intentsController() {\n        if (!this._intentsControllerInstance) {\n            this._intentsControllerInstance = new IntentsController();\n        }\n        return this._intentsControllerInstance;\n    }\n    get legacyIntentsHelper() {\n        if (!this._legacyIntentsHelperInstance) {\n            this._legacyIntentsHelperInstance = new LegacyIntentsHelper(this._coreGlue.logger, this.bridge, this._coreGlue.interop, this.appManagerController, this.windowsController);\n        }\n        return this._legacyIntentsHelperInstance;\n    }\n    get systemController() {\n        if (!this._systemControllerInstance) {\n            this._systemControllerInstance = new SystemController();\n        }\n        return this._systemControllerInstance;\n    }\n    get channelsController() {\n        if (!this._channelsControllerInstance) {\n            this._channelsControllerInstance = new ChannelsController();\n        }\n        return this._channelsControllerInstance;\n    }\n    get prefsController() {\n        if (!this._prefsControllerInstance) {\n            this._prefsControllerInstance = new PrefsController();\n        }\n        return this._prefsControllerInstance;\n    }\n    get extensionController() {\n        if (!this._extensionController) {\n            this._extensionController = new ExtController();\n        }\n        return this._extensionController;\n    }\n    get eventsDispatcher() {\n        if (!this._eventsDispatcher) {\n            this._eventsDispatcher = new EventsDispatcher(this.config);\n        }\n        return this._eventsDispatcher;\n    }\n    get bridge() {\n        if (!this._bridgeInstance) {\n            this._bridgeInstance = new GlueBridge(this._coreGlue, this.communicationId);\n        }\n        return this._bridgeInstance;\n    }\n    get preferredConnectionController() {\n        if (!this._preferredConnectionController) {\n            this._preferredConnectionController = new PreferredConnectionController(this._coreGlue);\n        }\n        return this._preferredConnectionController;\n    }\n    get sessionController() {\n        if (!this._sessionController) {\n            this._sessionController = new SessionStorageController();\n        }\n        return this._sessionController;\n    }\n    get config() {\n        return this._webConfig;\n    }\n    defineGlue(coreGlue) {\n        this._coreGlue = coreGlue;\n        this._publicWindowId = coreGlue.connection.transport.publicWindowId;\n        const globalNamespace = window.glue42core || window.iobrowser;\n        this._communicationId = coreGlue.connection.transport.communicationId || globalNamespace.communicationId;\n    }\n    defineConfig(config) {\n        this._webConfig = config;\n    }\n    async buildWebWindow(id, name) {\n        const model = new WebWindowModel(id, name, this.bridge);\n        const api = await model.toApi();\n        return { id, model, api };\n    }\n    buildNotification(config, id) {\n        return new Notification(config, id);\n    }\n    async buildApplication(app, applicationInstances) {\n        const application = (new ApplicationModel(app, [], this.appManagerController)).toApi();\n        const instances = applicationInstances.map((instanceData) => this.buildInstance(instanceData, application));\n        application.instances.push(...instances);\n        return application;\n    }\n    buildInstance(instanceData, app) {\n        return (new InstanceModel(instanceData, this.bridge, app)).toApi();\n    }\n}\n\nvar version$1 = \"3.4.0\";\n\nconst createFactoryFunction = (coreFactoryFunction) => {\n    return async (userConfig) => {\n        if (window.glue42gd || window.iodesktop) {\n            return enterprise(userConfig);\n        }\n        const ioc = new IoC();\n        const config = parseConfig(userConfig);\n        checkSingleton();\n        const glue = await PromiseWrap(() => coreFactoryFunction(config, { version: version$1 }), 30000, \"Glue Web initialization timed out, because core didn't resolve\");\n        const logger = glue.logger.subLogger(\"web.main.controller\");\n        ioc.defineGlue(glue);\n        ioc.sessionController.configure({ windowId: glue.interop.instance.instance });\n        await ioc.preferredConnectionController.start(config);\n        await ioc.bridge.start(ioc.controllers);\n        ioc.defineConfig(config);\n        logger.trace(\"the bridge has been started, initializing all controllers\");\n        await Promise.all(Object.values(ioc.controllers).map((controller) => controller.start(glue, ioc)));\n        logger.trace(\"all controllers reported started, starting all additional libraries\");\n        try {\n            await Promise.all(config.libraries.map((lib) => lib(glue, config)));\n            logger.trace(\"all libraries were started\");\n            ioc.eventsDispatcher.start(glue);\n            logger.trace(\"start event dispatched, glue is ready, returning it\");\n            return glue;\n        }\n        catch (error) {\n            return ioError.raiseError(error, true);\n        }\n    };\n};\n\nvar MetricTypes = {\n    STRING: 1,\n    NUMBER: 2,\n    TIMESTAMP: 3,\n    OBJECT: 4\n};\n\nfunction getMetricTypeByValue(metric) {\n    if (metric.type === MetricTypes.TIMESTAMP) {\n        return \"timestamp\";\n    }\n    else if (metric.type === MetricTypes.NUMBER) {\n        return \"number\";\n    }\n    else if (metric.type === MetricTypes.STRING) {\n        return \"string\";\n    }\n    else if (metric.type === MetricTypes.OBJECT) {\n        return \"object\";\n    }\n    return \"unknown\";\n}\nfunction getTypeByValue(value) {\n    if (value.constructor === Date) {\n        return \"timestamp\";\n    }\n    else if (typeof value === \"number\") {\n        return \"number\";\n    }\n    else if (typeof value === \"string\") {\n        return \"string\";\n    }\n    else if (typeof value === \"object\") {\n        return \"object\";\n    }\n    else {\n        return \"string\";\n    }\n}\nfunction serializeMetric(metric) {\n    const serializedMetrics = {};\n    const type = getMetricTypeByValue(metric);\n    if (type === \"object\") {\n        const values = Object.keys(metric.value).reduce((memo, key) => {\n            const innerType = getTypeByValue(metric.value[key]);\n            if (innerType === \"object\") {\n                const composite = defineNestedComposite(metric.value[key]);\n                memo[key] = {\n                    type: \"object\",\n                    description: \"\",\n                    context: {},\n                    composite,\n                };\n            }\n            else {\n                memo[key] = {\n                    type: innerType,\n                    description: \"\",\n                    context: {},\n                };\n            }\n            return memo;\n        }, {});\n        serializedMetrics.composite = values;\n    }\n    serializedMetrics.name = normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name);\n    serializedMetrics.type = type;\n    serializedMetrics.description = metric.description;\n    serializedMetrics.context = {};\n    return serializedMetrics;\n}\nfunction defineNestedComposite(values) {\n    return Object.keys(values).reduce((memo, key) => {\n        const type = getTypeByValue(values[key]);\n        if (type === \"object\") {\n            memo[key] = {\n                type: \"object\",\n                description: \"\",\n                context: {},\n                composite: defineNestedComposite(values[key]),\n            };\n        }\n        else {\n            memo[key] = {\n                type,\n                description: \"\",\n                context: {},\n            };\n        }\n        return memo;\n    }, {});\n}\nfunction normalizeMetricName(name) {\n    if (typeof name !== \"undefined\" && name.length > 0 && name[0] !== \"/\") {\n        return \"/\" + name;\n    }\n    else {\n        return name;\n    }\n}\nfunction getMetricValueByType(metric) {\n    const type = getMetricTypeByValue(metric);\n    if (type === \"timestamp\") {\n        return Date.now();\n    }\n    else {\n        return publishNestedComposite(metric.value);\n    }\n}\nfunction publishNestedComposite(values) {\n    if (typeof values !== \"object\") {\n        return values;\n    }\n    return Object.keys(values).reduce((memo, key) => {\n        const value = values[key];\n        if (typeof value === \"object\" && value.constructor !== Date) {\n            memo[key] = publishNestedComposite(value);\n        }\n        else if (value.constructor === Date) {\n            memo[key] = new Date(value).getTime();\n        }\n        else if (value.constructor === Boolean) {\n            memo[key] = value.toString();\n        }\n        else {\n            memo[key] = value;\n        }\n        return memo;\n    }, {});\n}\nfunction flatten(arr) {\n    return arr.reduce((flat, toFlatten) => {\n        return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n    }, []);\n}\nfunction getHighestState(arr) {\n    return arr.sort((a, b) => {\n        if (!a.state) {\n            return 1;\n        }\n        if (!b.state) {\n            return -1;\n        }\n        return b.state - a.state;\n    })[0];\n}\nfunction aggregateDescription(arr) {\n    let msg = \"\";\n    arr.forEach((m, idx, a) => {\n        const path = m.path.join(\".\");\n        if (idx === a.length - 1) {\n            msg += path + \".\" + m.name + \": \" + m.description;\n        }\n        else {\n            msg += path + \".\" + m.name + \": \" + m.description + \",\";\n        }\n    });\n    if (msg.length > 100) {\n        return msg.slice(0, 100) + \"...\";\n    }\n    else {\n        return msg;\n    }\n}\nfunction composeMsgForRootStateMetric(system) {\n    const aggregatedState = system.root.getAggregateState();\n    const merged = flatten(aggregatedState);\n    const highestState = getHighestState(merged);\n    const aggregateDesc = aggregateDescription(merged);\n    return {\n        description: aggregateDesc,\n        value: highestState.state,\n    };\n}\n\nfunction gw3 (connection, config) {\n    if (!connection || typeof connection !== \"object\") {\n        throw new Error(\"Connection is required parameter\");\n    }\n    let joinPromise;\n    let session;\n    const init = (repo) => {\n        let resolveReadyPromise;\n        joinPromise = new Promise((resolve) => {\n            resolveReadyPromise = resolve;\n        });\n        session = connection.domain(\"metrics\");\n        session.onJoined((reconnect) => {\n            if (!reconnect && resolveReadyPromise) {\n                resolveReadyPromise();\n                resolveReadyPromise = undefined;\n            }\n            const rootStateMetric = {\n                name: \"/State\",\n                type: \"object\",\n                composite: {\n                    Description: {\n                        type: \"string\",\n                        description: \"\",\n                    },\n                    Value: {\n                        type: \"number\",\n                        description: \"\",\n                    },\n                },\n                description: \"System state\",\n                context: {},\n            };\n            const defineRootMetricsMsg = {\n                type: \"define\",\n                metrics: [rootStateMetric],\n            };\n            session.send(defineRootMetricsMsg);\n            if (reconnect) {\n                replayRepo(repo);\n            }\n        });\n        session.join({\n            system: config.system,\n            service: config.service,\n            instance: config.instance\n        });\n    };\n    const replayRepo = (repo) => {\n        replaySystem(repo.root);\n    };\n    const replaySystem = (system) => {\n        createSystem(system);\n        system.metrics.forEach((m) => {\n            createMetric(m);\n        });\n        system.subSystems.forEach((ss) => {\n            replaySystem(ss);\n        });\n    };\n    const createSystem = async (system) => {\n        if (system.parent === undefined) {\n            return;\n        }\n        await joinPromise;\n        const metric = {\n            name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\n            type: \"object\",\n            composite: {\n                Description: {\n                    type: \"string\",\n                    description: \"\",\n                },\n                Value: {\n                    type: \"number\",\n                    description: \"\",\n                },\n            },\n            description: \"System state\",\n            context: {},\n        };\n        const createMetricsMsg = {\n            type: \"define\",\n            metrics: [metric],\n        };\n        session.send(createMetricsMsg);\n    };\n    const updateSystem = async (system, state) => {\n        await joinPromise;\n        const shadowedUpdateMetric = {\n            type: \"publish\",\n            values: [{\n                    name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\n                    value: {\n                        Description: state.description,\n                        Value: state.state,\n                    },\n                    timestamp: Date.now(),\n                }],\n        };\n        session.send(shadowedUpdateMetric);\n        const stateObj = composeMsgForRootStateMetric(system);\n        const rootMetric = {\n            type: \"publish\",\n            peer_id: connection.peerId,\n            values: [{\n                    name: \"/State\",\n                    value: {\n                        Description: stateObj.description,\n                        Value: stateObj.value,\n                    },\n                    timestamp: Date.now(),\n                }],\n        };\n        session.send(rootMetric);\n    };\n    const createMetric = async (metric) => {\n        const metricClone = cloneMetric(metric);\n        await joinPromise;\n        const m = serializeMetric(metricClone);\n        const createMetricsMsg = {\n            type: \"define\",\n            metrics: [m],\n        };\n        session.send(createMetricsMsg);\n        if (typeof metricClone.value !== \"undefined\") {\n            updateMetricCore(metricClone);\n        }\n    };\n    const updateMetric = async (metric) => {\n        const metricClone = cloneMetric(metric);\n        await joinPromise;\n        updateMetricCore(metricClone);\n    };\n    const updateMetricCore = (metric) => {\n        if (canUpdate()) {\n            const value = getMetricValueByType(metric);\n            const publishMetricsMsg = {\n                type: \"publish\",\n                values: [{\n                        name: normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name),\n                        value,\n                        timestamp: Date.now(),\n                    }],\n            };\n            return session.sendFireAndForget(publishMetricsMsg);\n        }\n        return Promise.resolve();\n    };\n    const cloneMetric = (metric) => {\n        const metricClone = { ...metric };\n        if (typeof metric.value === \"object\" && metric.value !== null) {\n            metricClone.value = { ...metric.value };\n        }\n        return metricClone;\n    };\n    const canUpdate = () => {\n        try {\n            const func = config.canUpdateMetric ?? (() => true);\n            return func();\n        }\n        catch {\n            return true;\n        }\n    };\n    return {\n        init,\n        createSystem,\n        updateSystem,\n        createMetric,\n        updateMetric,\n    };\n}\n\nvar Helpers = {\n    validate: (definition, parent, transport) => {\n        if (definition === null || typeof definition !== \"object\") {\n            throw new Error(\"Missing definition\");\n        }\n        if (parent === null || typeof parent !== \"object\") {\n            throw new Error(\"Missing parent\");\n        }\n        if (transport === null || typeof transport !== \"object\") {\n            throw new Error(\"Missing transport\");\n        }\n    },\n};\n\nclass BaseMetric {\n    definition;\n    system;\n    transport;\n    value;\n    type;\n    path = [];\n    name;\n    description;\n    get repo() {\n        return this.system?.repo;\n    }\n    get id() { return `${this.system.path}/${name}`; }\n    constructor(definition, system, transport, value, type) {\n        this.definition = definition;\n        this.system = system;\n        this.transport = transport;\n        this.value = value;\n        this.type = type;\n        Helpers.validate(definition, system, transport);\n        this.path = system.path.slice(0);\n        this.path.push(system.name);\n        this.name = definition.name;\n        this.description = definition.description;\n        transport.createMetric(this);\n    }\n    update(newValue) {\n        this.value = newValue;\n        return this.transport.updateMetric(this);\n    }\n}\n\nclass NumberMetric extends BaseMetric {\n    constructor(definition, system, transport, value) {\n        super(definition, system, transport, value, MetricTypes.NUMBER);\n    }\n    incrementBy(num) {\n        this.update(this.value + num);\n    }\n    increment() {\n        this.incrementBy(1);\n    }\n    decrement() {\n        this.incrementBy(-1);\n    }\n    decrementBy(num) {\n        this.incrementBy(num * -1);\n    }\n}\n\nclass ObjectMetric extends BaseMetric {\n    constructor(definition, system, transport, value) {\n        super(definition, system, transport, value, MetricTypes.OBJECT);\n    }\n    update(newValue) {\n        this.mergeValues(newValue);\n        return this.transport.updateMetric(this);\n    }\n    mergeValues(values) {\n        return Object.keys(this.value).forEach((k) => {\n            if (typeof values[k] !== \"undefined\") {\n                this.value[k] = values[k];\n            }\n        });\n    }\n}\n\nclass StringMetric extends BaseMetric {\n    constructor(definition, system, transport, value) {\n        super(definition, system, transport, value, MetricTypes.STRING);\n    }\n}\n\nclass TimestampMetric extends BaseMetric {\n    constructor(definition, system, transport, value) {\n        super(definition, system, transport, value, MetricTypes.TIMESTAMP);\n    }\n    now() {\n        this.update(new Date());\n    }\n}\n\nfunction system(name, repo, protocol, parent, description) {\n    if (!repo) {\n        throw new Error(\"Repository is required\");\n    }\n    if (!protocol) {\n        throw new Error(\"Transport is required\");\n    }\n    const _transport = protocol;\n    const _name = name;\n    const _description = description || \"\";\n    const _repo = repo;\n    const _parent = parent;\n    const _path = _buildPath(parent);\n    let _state = {};\n    const id = _arrayToString(_path, \"/\") + name;\n    const root = repo.root;\n    const _subSystems = [];\n    const _metrics = [];\n    function subSystem(nameSystem, descriptionSystem) {\n        if (!nameSystem || nameSystem.length === 0) {\n            throw new Error(\"name is required\");\n        }\n        const match = _subSystems.filter((s) => s.name === nameSystem);\n        if (match.length > 0) {\n            return match[0];\n        }\n        const _system = system(nameSystem, _repo, _transport, me, descriptionSystem);\n        _subSystems.push(_system);\n        return _system;\n    }\n    function setState(state, stateDescription) {\n        _state = { state, description: stateDescription };\n        _transport.updateSystem(me, _state);\n    }\n    function stringMetric(definition, value) {\n        return _getOrCreateMetric(definition, MetricTypes.STRING, value, (metricDef) => new StringMetric(metricDef, me, _transport, value));\n    }\n    function numberMetric(definition, value) {\n        return _getOrCreateMetric(definition, MetricTypes.NUMBER, value, (metricDef) => new NumberMetric(metricDef, me, _transport, value));\n    }\n    function objectMetric(definition, value) {\n        return _getOrCreateMetric(definition, MetricTypes.OBJECT, value, (metricDef) => new ObjectMetric(metricDef, me, _transport, value));\n    }\n    function timestampMetric(definition, value) {\n        return _getOrCreateMetric(definition, MetricTypes.TIMESTAMP, value, (metricDef) => new TimestampMetric(metricDef, me, _transport, value));\n    }\n    function _getOrCreateMetric(metricObject, expectedType, value, createMetric) {\n        let metricDef = { name: \"\" };\n        if (typeof metricObject === \"string\") {\n            metricDef = { name: metricObject };\n        }\n        else {\n            metricDef = metricObject;\n        }\n        const matching = _metrics.filter((shadowedMetric) => shadowedMetric.name === metricDef.name);\n        if (matching.length > 0) {\n            const existing = matching[0];\n            if (existing.type !== expectedType) {\n                throw new Error(`A metric named ${metricDef.name} is already defined with different type.`);\n            }\n            if (typeof value !== \"undefined\") {\n                existing\n                    .update(value)\n                    .catch(() => { });\n            }\n            return existing;\n        }\n        const metric = createMetric(metricDef);\n        _metrics.push(metric);\n        return metric;\n    }\n    function _buildPath(shadowedSystem) {\n        if (!shadowedSystem || !shadowedSystem.parent) {\n            return [];\n        }\n        const path = _buildPath(shadowedSystem.parent);\n        path.push(shadowedSystem.name);\n        return path;\n    }\n    function _arrayToString(path, separator) {\n        return ((path && path.length > 0) ? path.join(separator) : \"\");\n    }\n    function getAggregateState() {\n        const aggState = [];\n        if (Object.keys(_state).length > 0) {\n            aggState.push({\n                name: _name,\n                path: _path,\n                state: _state.state,\n                description: _state.description,\n            });\n        }\n        _subSystems.forEach((shadowedSubSystem) => {\n            const result = shadowedSubSystem.getAggregateState();\n            if (result.length > 0) {\n                aggState.push(...result);\n            }\n        });\n        return aggState;\n    }\n    const me = {\n        get name() {\n            return _name;\n        },\n        get description() {\n            return _description;\n        },\n        get repo() {\n            return _repo;\n        },\n        get parent() {\n            return _parent;\n        },\n        path: _path,\n        id,\n        root,\n        get subSystems() {\n            return _subSystems;\n        },\n        get metrics() {\n            return _metrics;\n        },\n        subSystem,\n        getState: () => {\n            return _state;\n        },\n        setState,\n        stringMetric,\n        timestampMetric,\n        objectMetric,\n        numberMetric,\n        getAggregateState,\n    };\n    _transport.createSystem(me);\n    return me;\n}\n\nclass Repository {\n    root;\n    constructor(options, protocol) {\n        protocol.init(this);\n        this.root = system(\"\", this, protocol);\n        this.addSystemMetrics(this.root, options.clickStream || options.clickStream === undefined);\n    }\n    addSystemMetrics(rootSystem, useClickStream) {\n        if (typeof navigator !== \"undefined\") {\n            rootSystem.stringMetric(\"UserAgent\", navigator.userAgent);\n        }\n        if (useClickStream && typeof document !== \"undefined\") {\n            const clickStream = rootSystem.subSystem(\"ClickStream\");\n            const documentClickHandler = (e) => {\n                if (!e.target) {\n                    return;\n                }\n                const target = e.target;\n                const className = target ? target.getAttribute(\"class\") ?? \"\" : \"\";\n                clickStream.objectMetric(\"LastBrowserEvent\", {\n                    type: \"click\",\n                    timestamp: new Date(),\n                    target: {\n                        className,\n                        id: target.id,\n                        type: \"<\" + target.tagName.toLowerCase() + \">\",\n                        href: target.href || \"\",\n                    },\n                });\n            };\n            clickStream.objectMetric(\"Page\", {\n                title: document.title,\n                page: window.location.href,\n            });\n            if (document.addEventListener) {\n                document.addEventListener(\"click\", documentClickHandler);\n            }\n            else {\n                document.attachEvent(\"onclick\", documentClickHandler);\n            }\n        }\n        rootSystem.stringMetric(\"StartTime\", (new Date()).toString());\n        const urlMetric = rootSystem.stringMetric(\"StartURL\", \"\");\n        const appNameMetric = rootSystem.stringMetric(\"AppName\", \"\");\n        if (typeof window !== \"undefined\") {\n            if (typeof window.location !== \"undefined\") {\n                const startUrl = window.location.href;\n                urlMetric.update(startUrl);\n            }\n            if (typeof window.glue42gd !== \"undefined\") {\n                appNameMetric.update(window.glue42gd.appName);\n            }\n        }\n    }\n}\n\nclass NullProtocol {\n    init(repo) {\n    }\n    createSystem(system) {\n        return Promise.resolve();\n    }\n    updateSystem(metric, state) {\n        return Promise.resolve();\n    }\n    createMetric(metric) {\n        return Promise.resolve();\n    }\n    updateMetric(metric) {\n        return Promise.resolve();\n    }\n}\n\nclass PerfTracker {\n    api;\n    lastCount = 0;\n    initialPublishTimeout = 10 * 1000;\n    publishInterval = 60 * 1000;\n    system;\n    constructor(api, initialPublishTimeout, publishInterval) {\n        this.api = api;\n        this.initialPublishTimeout = initialPublishTimeout ?? this.initialPublishTimeout;\n        this.publishInterval = publishInterval ?? this.publishInterval;\n        this.scheduleCollection();\n        this.system = this.api.subSystem(\"performance\", \"Performance data published by the web application\");\n    }\n    scheduleCollection() {\n        setTimeout(() => {\n            this.collect();\n            setInterval(() => {\n                this.collect();\n            }, this.publishInterval);\n        }, this.initialPublishTimeout);\n    }\n    collect() {\n        try {\n            this.collectMemory();\n            this.collectEntries();\n        }\n        catch {\n        }\n    }\n    collectMemory() {\n        const memory = window.performance.memory;\n        this.system.stringMetric(\"memory\", JSON.stringify({\n            totalJSHeapSize: memory.totalJSHeapSize,\n            usedJSHeapSize: memory.usedJSHeapSize\n        }));\n    }\n    collectEntries() {\n        const allEntries = window.performance.getEntries();\n        if (allEntries.length <= this.lastCount) {\n            return;\n        }\n        this.lastCount = allEntries.length;\n        const jsonfiedEntries = allEntries.map((i) => i.toJSON());\n        this.system.stringMetric(\"entries\", JSON.stringify(jsonfiedEntries));\n    }\n}\n\nvar metrics = (options) => {\n    let protocol;\n    if (!options.connection || typeof options.connection !== \"object\") {\n        protocol = new NullProtocol();\n    }\n    else {\n        protocol = gw3(options.connection, options);\n    }\n    const repo = new Repository(options, protocol);\n    let rootSystem = repo.root;\n    if (!options.disableAutoAppSystem) {\n        rootSystem = rootSystem.subSystem(\"App\");\n    }\n    const api = addFAVSupport(rootSystem);\n    initPerf(api, options.pagePerformanceMetrics);\n    return api;\n};\nfunction initPerf(api, config) {\n    if (typeof window === \"undefined\") {\n        return;\n    }\n    const perfConfig = window?.glue42gd?.metrics?.pagePerformanceMetrics;\n    if (perfConfig) {\n        config = perfConfig;\n    }\n    if (config?.enabled) {\n        new PerfTracker(api, config.initialPublishTimeout, config.publishInterval);\n    }\n}\nfunction addFAVSupport(system) {\n    const reportingSystem = system.subSystem(\"reporting\");\n    const def = {\n        name: \"features\"\n    };\n    let featureMetric;\n    const featureMetricFunc = (name, action, payload) => {\n        if (typeof name === \"undefined\" || name === \"\") {\n            throw new Error(\"name is mandatory\");\n        }\n        else if (typeof action === \"undefined\" || action === \"\") {\n            throw new Error(\"action is mandatory\");\n        }\n        else if (typeof payload === \"undefined\" || payload === \"\") {\n            throw new Error(\"payload is mandatory\");\n        }\n        if (!featureMetric) {\n            featureMetric = reportingSystem.objectMetric(def, { name, action, payload });\n        }\n        else {\n            featureMetric.update({\n                name,\n                action,\n                payload\n            });\n        }\n    };\n    system.featureMetric = featureMetricFunc;\n    return system;\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createRegistry(options) {\n    if (options && options.errorHandling\n        && typeof options.errorHandling !== \"function\"\n        && options.errorHandling !== \"log\"\n        && options.errorHandling !== \"silent\"\n        && options.errorHandling !== \"throw\") {\n        throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\n    }\n    var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\n    var callbacks = {};\n    function add(key, callback, replayArgumentsArr) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            callbacksForKey = [];\n            callbacks[key] = callbacksForKey;\n        }\n        callbacksForKey.push(callback);\n        if (replayArgumentsArr) {\n            setTimeout(function () {\n                replayArgumentsArr.forEach(function (replayArgument) {\n                    var _a;\n                    if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\n                        try {\n                            if (Array.isArray(replayArgument)) {\n                                callback.apply(undefined, replayArgument);\n                            }\n                            else {\n                                callback.apply(undefined, [replayArgument]);\n                            }\n                        }\n                        catch (err) {\n                            _handleError(err, key);\n                        }\n                    }\n                });\n            }, 0);\n        }\n        return function () {\n            var allForKey = callbacks[key];\n            if (!allForKey) {\n                return;\n            }\n            allForKey = allForKey.reduce(function (acc, element, index) {\n                if (!(element === callback && acc.length === index)) {\n                    acc.push(element);\n                }\n                return acc;\n            }, []);\n            if (allForKey.length === 0) {\n                delete callbacks[key];\n            }\n            else {\n                callbacks[key] = allForKey;\n            }\n        };\n    }\n    function execute(key) {\n        var argumentsArr = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            argumentsArr[_i - 1] = arguments[_i];\n        }\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey || callbacksForKey.length === 0) {\n            return [];\n        }\n        var results = [];\n        callbacksForKey.forEach(function (callback) {\n            try {\n                var result = callback.apply(undefined, argumentsArr);\n                results.push(result);\n            }\n            catch (err) {\n                results.push(undefined);\n                _handleError(err, key);\n            }\n        });\n        return results;\n    }\n    function _handleError(exceptionArtifact, key) {\n        var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\n        if (_userErrorHandler) {\n            _userErrorHandler(errParam);\n            return;\n        }\n        var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\n        if (options) {\n            switch (options.errorHandling) {\n                case \"log\":\n                    return console.error(msg);\n                case \"silent\":\n                    return;\n                case \"throw\":\n                    throw new Error(msg);\n            }\n        }\n        console.error(msg);\n    }\n    function clear() {\n        callbacks = {};\n    }\n    function clearKey(key) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            return;\n        }\n        delete callbacks[key];\n    }\n    return {\n        add: add,\n        execute: execute,\n        clear: clear,\n        clearKey: clearKey\n    };\n}\ncreateRegistry.default = createRegistry;\nvar lib = createRegistry;\n\n\nvar CallbackRegistryFactory = /*@__PURE__*/getDefaultExportFromCjs(lib);\n\nclass InProcTransport {\n    gw;\n    registry = CallbackRegistryFactory();\n    client;\n    constructor(settings, logger) {\n        this.gw = settings.facade;\n        this.gw.connect((_client, message) => {\n            this.messageHandler(message);\n        }).then((client) => {\n            this.client = client;\n        });\n    }\n    get isObjectBasedTransport() {\n        return true;\n    }\n    sendObject(msg) {\n        if (this.client) {\n            this.client.send(msg);\n            return Promise.resolve(undefined);\n        }\n        else {\n            return Promise.reject(`not connected`);\n        }\n    }\n    send(_msg) {\n        return Promise.reject(\"not supported\");\n    }\n    onMessage(callback) {\n        return this.registry.add(\"onMessage\", callback);\n    }\n    onConnectedChanged(callback) {\n        callback(true);\n        return () => { };\n    }\n    close() {\n        return Promise.resolve();\n    }\n    open() {\n        return Promise.resolve();\n    }\n    name() {\n        return \"in-memory\";\n    }\n    reconnect() {\n        return Promise.resolve();\n    }\n    messageHandler(msg) {\n        this.registry.execute(\"onMessage\", msg);\n    }\n}\n\nclass SharedWorkerTransport {\n    logger;\n    worker;\n    registry = CallbackRegistryFactory();\n    constructor(workerFile, logger) {\n        this.logger = logger;\n        this.worker = new SharedWorker(workerFile);\n        this.worker.port.onmessage = (e) => {\n            this.messageHandler(e.data);\n        };\n    }\n    get isObjectBasedTransport() {\n        return true;\n    }\n    sendObject(msg) {\n        this.worker.port.postMessage(msg);\n        return Promise.resolve();\n    }\n    send(_msg) {\n        return Promise.reject(\"not supported\");\n    }\n    onMessage(callback) {\n        return this.registry.add(\"onMessage\", callback);\n    }\n    onConnectedChanged(callback) {\n        callback(true);\n        return () => { };\n    }\n    close() {\n        return Promise.resolve();\n    }\n    open() {\n        return Promise.resolve();\n    }\n    name() {\n        return \"shared-worker\";\n    }\n    reconnect() {\n        return Promise.resolve();\n    }\n    messageHandler(msg) {\n        this.registry.execute(\"onMessage\", msg);\n    }\n}\n\nclass Utils {\n    static isNode() {\n        if (typeof Utils._isNode !== \"undefined\") {\n            return Utils._isNode;\n        }\n        if (typeof window !== \"undefined\") {\n            Utils._isNode = false;\n            return false;\n        }\n        try {\n            Utils._isNode = Object.prototype.toString.call(global.process) === \"[object process]\";\n        }\n        catch (e) {\n            Utils._isNode = false;\n        }\n        return Utils._isNode;\n    }\n    static _isNode;\n}\n\nclass PromiseWrapper {\n    static delay(time) {\n        return new Promise((resolve) => setTimeout(resolve, time));\n    }\n    resolve;\n    reject;\n    promise;\n    rejected = false;\n    resolved = false;\n    get ended() {\n        return this.rejected || this.resolved;\n    }\n    constructor() {\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = (t) => {\n                this.resolved = true;\n                resolve(t);\n            };\n            this.reject = (err) => {\n                this.rejected = true;\n                reject(err);\n            };\n        });\n    }\n}\n\nconst timers = {};\nfunction getAllTimers() {\n    return timers;\n}\nfunction timer (timerName) {\n    const existing = timers[timerName];\n    if (existing) {\n        return existing;\n    }\n    const marks = [];\n    function now() {\n        return new Date().getTime();\n    }\n    const startTime = now();\n    mark(\"start\", startTime);\n    let endTime;\n    let period;\n    function stop() {\n        endTime = now();\n        mark(\"end\", endTime);\n        period = endTime - startTime;\n        return period;\n    }\n    function mark(name, time) {\n        const currentTime = time ?? now();\n        let diff = 0;\n        if (marks.length > 0) {\n            diff = currentTime - marks[marks.length - 1].time;\n        }\n        marks.push({ name, time: currentTime, diff });\n    }\n    const timerObj = {\n        get startTime() {\n            return startTime;\n        },\n        get endTime() {\n            return endTime;\n        },\n        get period() {\n            return period;\n        },\n        stop,\n        mark,\n        marks\n    };\n    timers[timerName] = timerObj;\n    return timerObj;\n}\n\nconst WebSocketConstructor = Utils.isNode() ? null : window.WebSocket;\nclass WS {\n    ws;\n    logger;\n    settings;\n    startupTimer = timer(\"connection\");\n    _running = true;\n    _registry = CallbackRegistryFactory();\n    wsRequests = [];\n    constructor(settings, logger) {\n        this.settings = settings;\n        this.logger = logger;\n        if (!this.settings.ws) {\n            throw new Error(\"ws is missing\");\n        }\n    }\n    onMessage(callback) {\n        return this._registry.add(\"onMessage\", callback);\n    }\n    send(msg, options) {\n        return new Promise((resolve, reject) => {\n            this.waitForSocketConnection(() => {\n                try {\n                    this.ws?.send(msg);\n                    resolve();\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }, reject);\n        });\n    }\n    open() {\n        this.logger.info(\"opening ws...\");\n        this._running = true;\n        return new Promise((resolve, reject) => {\n            this.waitForSocketConnection(resolve, reject);\n        });\n    }\n    close() {\n        this._running = false;\n        if (this.ws) {\n            this.ws.close();\n        }\n        return Promise.resolve();\n    }\n    onConnectedChanged(callback) {\n        return this._registry.add(\"onConnectedChanged\", callback);\n    }\n    name() {\n        return this.settings.ws;\n    }\n    reconnect() {\n        this.ws?.close();\n        const pw = new PromiseWrapper();\n        this.waitForSocketConnection(() => {\n            pw.resolve();\n        });\n        return pw.promise;\n    }\n    waitForSocketConnection(callback, failed) {\n        failed = failed ?? (() => { });\n        if (!this._running) {\n            failed(`wait for socket on ${this.settings.ws} failed - socket closed by user`);\n            return;\n        }\n        if (this.ws?.readyState === 1) {\n            callback();\n            return;\n        }\n        this.wsRequests.push({ callback, failed });\n        if (this.wsRequests.length > 1) {\n            return;\n        }\n        this.openSocket();\n    }\n    async openSocket(retryInterval, retriesLeft) {\n        this.logger.info(`opening ws to ${this.settings.ws}, retryInterval: ${retryInterval}, retriesLeft: ${retriesLeft}...`);\n        this.startupTimer.mark(\"opening-socket\");\n        if (retryInterval === undefined) {\n            retryInterval = this.settings.reconnectInterval;\n        }\n        if (typeof retriesLeft === \"undefined\") {\n            retriesLeft = this.settings.reconnectAttempts;\n        }\n        if (retriesLeft !== undefined) {\n            if (retriesLeft === 0) {\n                this.notifyForSocketState(`wait for socket on ${this.settings.ws} failed - no more retries left`);\n                return;\n            }\n            this.logger.debug(`will retry ${retriesLeft} more times (every ${retryInterval} ms)`);\n        }\n        try {\n            await this.initiateSocket();\n            this.startupTimer.mark(\"socket-initiated\");\n            this.notifyForSocketState();\n        }\n        catch {\n            setTimeout(() => {\n                const retries = retriesLeft === undefined ? undefined : retriesLeft - 1;\n                this.openSocket(retryInterval, retries);\n            }, retryInterval);\n        }\n    }\n    initiateSocket() {\n        const pw = new PromiseWrapper();\n        this.logger.debug(`initiating ws to ${this.settings.ws}...`);\n        this.ws = new WebSocketConstructor(this.settings.ws ?? \"\");\n        this.ws.onerror = (err) => {\n            let reason = \"\";\n            try {\n                reason = JSON.stringify(err);\n            }\n            catch (error) {\n                const seen = new WeakSet();\n                const replacer = (key, value) => {\n                    if (typeof value === \"object\" && value !== null) {\n                        if (seen.has(value)) {\n                            return;\n                        }\n                        seen.add(value);\n                    }\n                    return value;\n                };\n                reason = JSON.stringify(err, replacer);\n            }\n            this.logger.info(`ws error - reason: ${reason}`);\n            pw.reject(\"error\");\n            this.notifyStatusChanged(false, reason);\n        };\n        this.ws.onclose = (err) => {\n            this.logger.info(`ws closed - code: ${err?.code} reason: ${err?.reason}`);\n            pw.reject(\"closed\");\n            this.notifyStatusChanged(false);\n        };\n        this.ws.onopen = () => {\n            this.startupTimer.mark(\"ws-opened\");\n            this.logger.info(`ws opened ${this.settings.identity?.application}`);\n            pw.resolve();\n            this.notifyStatusChanged(true);\n        };\n        this.ws.onmessage = (message) => {\n            this._registry.execute(\"onMessage\", message.data);\n        };\n        return pw.promise;\n    }\n    notifyForSocketState(error) {\n        this.wsRequests.forEach((wsRequest) => {\n            if (error) {\n                if (wsRequest.failed) {\n                    wsRequest.failed(error);\n                }\n            }\n            else {\n                wsRequest.callback();\n            }\n        });\n        this.wsRequests = [];\n    }\n    notifyStatusChanged(status, reason) {\n        this._registry.execute(\"onConnectedChanged\", status, reason);\n    }\n}\n\nclass MessageReplayerImpl {\n    specs;\n    specsNames = [];\n    messages = {};\n    isDone;\n    subs = {};\n    subsRefCount = {};\n    connection;\n    constructor(specs) {\n        this.specs = {};\n        for (const spec of specs) {\n            this.specs[spec.name] = spec;\n            this.specsNames.push(spec.name);\n        }\n    }\n    init(connection) {\n        this.connection = connection;\n        for (const name of this.specsNames) {\n            for (const type of this.specs[name].types) {\n                let refCount = this.subsRefCount[type];\n                if (!refCount) {\n                    refCount = 0;\n                }\n                refCount += 1;\n                this.subsRefCount[type] = refCount;\n                if (refCount > 1) {\n                    continue;\n                }\n                const sub = connection.on(type, (msg) => this.processMessage(type, msg));\n                this.subs[type] = sub;\n            }\n        }\n    }\n    processMessage(type, msg) {\n        if (this.isDone || !msg) {\n            return;\n        }\n        for (const name of this.specsNames) {\n            if (this.specs[name].types.indexOf(type) !== -1) {\n                const messages = this.messages[name] || [];\n                this.messages[name] = messages;\n                messages.push(msg);\n            }\n        }\n    }\n    drain(name, callback) {\n        if (callback) {\n            (this.messages[name] || []).forEach(callback);\n        }\n        delete this.messages[name];\n        for (const type of this.specs[name].types) {\n            this.subsRefCount[type] -= 1;\n            if (this.subsRefCount[type] <= 0) {\n                this.connection?.off(this.subs[type]);\n                delete this.subs[type];\n                delete this.subsRefCount[type];\n            }\n        }\n        delete this.specs[name];\n        if (!this.specs.length) {\n            this.isDone = true;\n        }\n    }\n}\n\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict';\nlet nanoid = (size = 21) => {\n  let id = '';\n  let i = size;\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0];\n  }\n  return id\n};\n\nconst PromisePlus = (executor, timeoutMilliseconds, timeoutMessage) => {\n    return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => {\n            const message = timeoutMessage || `Promise timeout hit: ${timeoutMilliseconds}`;\n            reject(message);\n        }, timeoutMilliseconds);\n        const providedPromise = new Promise(executor);\n        providedPromise\n            .then((result) => {\n            clearTimeout(timeout);\n            resolve(result);\n        })\n            .catch((error) => {\n            clearTimeout(timeout);\n            reject(error);\n        });\n    });\n};\n\nclass WebPlatformTransport {\n    settings;\n    logger;\n    identity;\n    isPreferredActivated;\n    _communicationId;\n    publicWindowId;\n    selfAssignedWindowId;\n    iAmConnected = false;\n    parentReady = false;\n    rejected = false;\n    parentPingResolve;\n    parentPingInterval;\n    connectionResolve;\n    extConnectionResolve;\n    extConnectionReject;\n    connectionReject;\n    port;\n    myClientId;\n    children = [];\n    extContentAvailable = false;\n    extContentConnecting = false;\n    extContentConnected = false;\n    parentWindowId;\n    parentInExtMode = false;\n    webNamespace = \"g42_core_web\";\n    parent;\n    parentType;\n    parentPingTimeout = 5000;\n    connectionRequestTimeout = 7000;\n    defaultTargetString = \"*\";\n    registry = CallbackRegistryFactory();\n    messages = {\n        connectionAccepted: { name: \"connectionAccepted\", handle: this.handleConnectionAccepted.bind(this) },\n        connectionRejected: { name: \"connectionRejected\", handle: this.handleConnectionRejected.bind(this) },\n        connectionRequest: { name: \"connectionRequest\", handle: this.handleConnectionRequest.bind(this) },\n        parentReady: {\n            name: \"parentReady\", handle: () => {\n            }\n        },\n        parentPing: { name: \"parentPing\", handle: this.handleParentPing.bind(this) },\n        platformPing: { name: \"platformPing\", handle: this.handlePlatformPing.bind(this) },\n        platformReady: { name: \"platformReady\", handle: this.handlePlatformReady.bind(this) },\n        clientUnload: { name: \"clientUnload\", handle: this.handleClientUnload.bind(this) },\n        manualUnload: { name: \"manualUnload\", handle: this.handleManualUnload.bind(this) },\n        extConnectionResponse: { name: \"extConnectionResponse\", handle: this.handleExtConnectionResponse.bind(this) },\n        extSetupRequest: { name: \"extSetupRequest\", handle: this.handleExtSetupRequest.bind(this) },\n        gatewayDisconnect: { name: \"gatewayDisconnect\", handle: this.handleGatewayDisconnect.bind(this) },\n        gatewayInternalConnect: { name: \"gatewayInternalConnect\", handle: this.handleGatewayInternalConnect.bind(this) }\n    };\n    constructor(settings, logger, identity) {\n        this.settings = settings;\n        this.logger = logger;\n        this.identity = identity;\n        this.extContentAvailable = !!window.glue42ext;\n        this.setUpMessageListener();\n        this.setUpUnload();\n        this.setupPlatformUnloadListener();\n        this.parentType = window.name.includes(\"#wsp\") ? \"workspace\" : undefined;\n    }\n    manualSetReadyState() {\n        this.iAmConnected = true;\n        this.parentReady = true;\n    }\n    get transportWindowId() {\n        return this.publicWindowId;\n    }\n    get communicationId() {\n        return this._communicationId;\n    }\n    async sendObject(msg) {\n        if (this.extContentConnected) {\n            return window.postMessage({ glue42ExtOut: msg }, this.defaultTargetString);\n        }\n        if (!this.port) {\n            throw new Error(\"Cannot send message, because the port was not opened yet\");\n        }\n        this.port.postMessage(msg);\n    }\n    get isObjectBasedTransport() {\n        return true;\n    }\n    onMessage(callback) {\n        return this.registry.add(\"onMessage\", callback);\n    }\n    send() {\n        return Promise.reject(\"not supported\");\n    }\n    onConnectedChanged(callback) {\n        return this.registry.add(\"onConnectedChanged\", callback);\n    }\n    async open() {\n        this.logger.debug(\"opening a connection to the web platform gateway.\");\n        await this.connect();\n        this.notifyStatusChanged(true);\n    }\n    close() {\n        const message = {\n            glue42core: {\n                type: this.messages.gatewayDisconnect.name,\n                data: {\n                    clientId: this.myClientId,\n                    ownWindowId: this.identity?.windowId\n                }\n            }\n        };\n        this.port?.postMessage(message);\n        this.parentReady = false;\n        this.notifyStatusChanged(false, \"manual reconnection\");\n        return Promise.resolve();\n    }\n    name() {\n        return \"web-platform\";\n    }\n    async reconnect() {\n        await this.close();\n        return Promise.resolve();\n    }\n    initiateInternalConnection() {\n        return new Promise((resolve, reject) => {\n            this.logger.debug(\"opening an internal web platform connection\");\n            this.port = this.settings.port;\n            if (this.iAmConnected) {\n                this.logger.warn(\"cannot open a new connection, because this client is currently connected\");\n                return;\n            }\n            this.port.onmessage = (event) => {\n                if (this.iAmConnected && !event.data?.glue42core) {\n                    this.registry.execute(\"onMessage\", event.data);\n                    return;\n                }\n                const data = event.data?.glue42core;\n                if (!data) {\n                    return;\n                }\n                if (data.type === this.messages.gatewayInternalConnect.name && data.success) {\n                    this.publicWindowId = this.settings.windowId;\n                    if (this.identity && this.publicWindowId) {\n                        this.identity.windowId = this.publicWindowId;\n                        this.identity.instance = this.publicWindowId;\n                    }\n                    resolve();\n                }\n                if (data.type === this.messages.gatewayInternalConnect.name && data.error) {\n                    reject(data.error);\n                }\n            };\n            this.port.postMessage({\n                glue42core: {\n                    type: this.messages.gatewayInternalConnect.name\n                }\n            });\n        });\n    }\n    initiateRemoteConnection(target) {\n        return PromisePlus((resolve, reject) => {\n            this.connectionResolve = resolve;\n            this.connectionReject = reject;\n            this.myClientId = this.myClientId ?? nanoid(10);\n            const bridgeInstanceId = this.getMyWindowId() || nanoid(10);\n            const request = {\n                glue42core: {\n                    type: this.messages.connectionRequest.name,\n                    clientId: this.myClientId,\n                    clientType: \"child\",\n                    bridgeInstanceId,\n                    selfAssignedWindowId: this.selfAssignedWindowId\n                }\n            };\n            this.logger.debug(\"sending connection request\");\n            if (this.extContentConnecting) {\n                request.glue42core.clientType = \"child\";\n                request.glue42core.bridgeInstanceId = this.myClientId;\n                request.glue42core.parentWindowId = this.parentWindowId;\n                return window.postMessage(request, this.defaultTargetString);\n            }\n            if (!target) {\n                throw new Error(\"Cannot send a connection request, because no glue target was specified!\");\n            }\n            target.postMessage(request, this.defaultTargetString);\n        }, this.connectionRequestTimeout, \"The connection to the target glue window timed out\");\n    }\n    async isParentCheckSuccess(parentCheck) {\n        try {\n            await parentCheck;\n            return { success: true };\n        }\n        catch (error) {\n            return { success: false };\n        }\n    }\n    setUpMessageListener() {\n        if (this.settings.port) {\n            this.logger.debug(\"skipping generic message listener, because this is an internal client\");\n            return;\n        }\n        window.addEventListener(\"message\", (event) => {\n            const data = event.data?.glue42core;\n            if (!data || this.rejected) {\n                return;\n            }\n            const allowedOrigins = this.settings.allowedOrigins || [];\n            if (allowedOrigins.length && !allowedOrigins.includes(event.origin)) {\n                this.logger.warn(`received a message from an origin which is not in the allowed list: ${event.origin}`);\n                return;\n            }\n            if (!this.checkMessageTypeValid(data.type)) {\n                this.logger.error(`cannot handle the incoming glue42 core message, because the type is invalid: ${data.type}`);\n                return;\n            }\n            const messageType = data.type;\n            this.logger.debug(`received valid glue42core message of type: ${messageType}`);\n            this.messages[messageType].handle(event);\n        });\n    }\n    setUpUnload() {\n        if (this.settings.port) {\n            this.logger.debug(\"skipping unload event listener, because this is an internal client\");\n            return;\n        }\n        window.addEventListener(\"beforeunload\", () => {\n            if (this.extContentConnected) {\n                return;\n            }\n            const message = {\n                glue42core: {\n                    type: this.messages.clientUnload.name,\n                    data: {\n                        clientId: this.myClientId,\n                        ownWindowId: this.identity?.windowId\n                    }\n                }\n            };\n            if (this.parent) {\n                this.parent.postMessage(message, this.defaultTargetString);\n            }\n            this.port?.postMessage(message);\n        });\n    }\n    handlePlatformReady(event) {\n        this.logger.debug(\"the web platform gave the ready signal\");\n        this.parentReady = true;\n        if (this.parentPingResolve) {\n            this.parentPingResolve();\n            delete this.parentPingResolve;\n        }\n        if (this.parentPingInterval) {\n            clearInterval(this.parentPingInterval);\n            delete this.parentPingInterval;\n        }\n        this.parent = event.source;\n        this.parentType = window.name.includes(\"#wsp\") ? \"workspace\" : \"window\";\n    }\n    handleConnectionAccepted(event) {\n        const data = event.data?.glue42core;\n        if (this.myClientId === data.clientId) {\n            return this.handleAcceptanceOfMyRequest(data);\n        }\n        return this.handleAcceptanceOfGrandChildRequest(data, event);\n    }\n    handleAcceptanceOfMyRequest(data) {\n        this.logger.debug(\"handling a connection accepted signal targeted at me.\");\n        this.isPreferredActivated = data.isPreferredActivated;\n        if (this.extContentConnecting) {\n            return this.processExtContentConnection(data);\n        }\n        if (!data.port) {\n            this.logger.error(\"cannot set up my connection, because I was not provided with a port\");\n            return;\n        }\n        this.publicWindowId = this.getMyWindowId();\n        if (this.identity) {\n            this.identity.windowId = this.publicWindowId;\n            this.identity.instance = this.identity.instance ? this.identity.instance : this.publicWindowId || nanoid(10);\n        }\n        if (this.identity && data.appName) {\n            this.identity.application = data.appName;\n            this.identity.applicationName = data.appName;\n        }\n        this._communicationId = data.communicationId;\n        this.port = data.port;\n        this.port.onmessage = (e) => this.registry.execute(\"onMessage\", e.data);\n        if (this.connectionResolve) {\n            this.logger.debug(\"my connection is set up, calling the connection resolve.\");\n            this.connectionResolve();\n            delete this.connectionResolve;\n            return;\n        }\n        this.logger.error(\"unable to call the connection resolve, because no connection promise was found\");\n    }\n    processExtContentConnection(data) {\n        this.logger.debug(\"handling a connection accepted signal targeted at me for extension content connection.\");\n        this.extContentConnecting = false;\n        this.extContentConnected = true;\n        this.publicWindowId = this.parentWindowId || this.myClientId;\n        if (this.extContentConnecting && this.identity) {\n            this.identity.windowId = this.publicWindowId;\n        }\n        if (this.identity && data.appName) {\n            this.identity.application = data.appName;\n            this.identity.applicationName = data.appName;\n        }\n        window.addEventListener(\"message\", (event) => {\n            const extData = event.data?.glue42ExtInc;\n            if (!extData) {\n                return;\n            }\n            const allowedOrigins = this.settings.allowedOrigins || [];\n            if (allowedOrigins.length && !allowedOrigins.includes(event.origin)) {\n                this.logger.warn(`received a message from an origin which is not in the allowed list: ${event.origin}`);\n                return;\n            }\n            this.registry.execute(\"onMessage\", extData);\n        });\n        if (this.connectionResolve) {\n            this.logger.debug(\"my connection is set up, calling the connection resolve.\");\n            this.connectionResolve();\n            delete this.connectionResolve;\n            return;\n        }\n    }\n    handleAcceptanceOfGrandChildRequest(data, event) {\n        if (this.extContentConnecting || this.extContentConnected) {\n            this.logger.debug(\"cannot process acceptance of a grandchild, because I am connected to a content script\");\n            return;\n        }\n        this.logger.debug(`handling a connection accepted signal targeted at a grandchild: ${data.clientId}`);\n        const child = this.children.find((c) => c.grandChildId === data.clientId);\n        if (!child) {\n            this.logger.error(`cannot handle connection accepted for grandchild: ${data.clientId}, because there is no grandchild with this id`);\n            return;\n        }\n        child.connected = true;\n        this.logger.debug(`the grandchild connection for ${data.clientId} is set up, forwarding the success message and the gateway port`);\n        data.parentWindowId = this.publicWindowId;\n        child.source.postMessage(event.data, child.origin, [data.port]);\n        return;\n    }\n    handleConnectionRejected() {\n        this.logger.debug(\"handling a connection rejection. Most likely the reason is that this window was not created by a glue API call\");\n        if (this.connectionReject) {\n            this.connectionReject(\"The platform connection was rejected. Most likely because this window was not created by a glue API call\");\n            delete this.connectionReject;\n        }\n    }\n    handleConnectionRequest(event) {\n        if (this.extContentConnecting) {\n            this.logger.debug(\"This connection request event is targeted at the extension content\");\n            return;\n        }\n        const source = event.source;\n        const data = event.data.glue42core;\n        if (!data.clientType || data.clientType !== \"grandChild\") {\n            return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source was not opened by a glue API call\");\n        }\n        if (!data.clientId) {\n            return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source did not provide a valid id\");\n        }\n        if (!this.parent) {\n            return this.rejectConnectionRequest(source, event.origin, \"Cannot forward the connection request, because no direct connection to the platform was found\");\n        }\n        this.logger.debug(`handling a connection request for a grandchild: ${data.clientId}`);\n        this.children.push({ grandChildId: data.clientId, source, connected: false, origin: event.origin });\n        this.logger.debug(`grandchild: ${data.clientId} is prepared, forwarding connection request to the platform`);\n        this.parent.postMessage(event.data, this.defaultTargetString);\n    }\n    handleParentPing(event) {\n        if (!this.parentReady) {\n            this.logger.debug(\"my parent is not ready, I am ignoring the parent ping\");\n            return;\n        }\n        if (!this.iAmConnected) {\n            this.logger.debug(\"i am not fully connected yet, I am ignoring the parent ping\");\n            return;\n        }\n        const message = {\n            glue42core: {\n                type: this.messages.parentReady.name\n            }\n        };\n        if (this.extContentConnected) {\n            message.glue42core.extMode = { windowId: this.myClientId };\n        }\n        const source = event.source;\n        this.logger.debug(\"responding to a parent ping with a ready message\");\n        source.postMessage(message, event.origin);\n    }\n    setupPlatformUnloadListener() {\n        this.onMessage((msg) => {\n            if (msg.type === \"platformUnload\") {\n                this.logger.debug(\"detected a web platform unload\");\n                this.parentReady = false;\n                this.notifyStatusChanged(false, \"Gateway unloaded\");\n            }\n        });\n    }\n    handleManualUnload() {\n        const message = {\n            glue42core: {\n                type: this.messages.clientUnload.name,\n                data: {\n                    clientId: this.myClientId,\n                    ownWindowId: this.identity?.windowId\n                }\n            }\n        };\n        if (this.extContentConnected) {\n            return window.postMessage({ glue42ExtOut: message }, this.defaultTargetString);\n        }\n        this.port?.postMessage(message);\n    }\n    handleClientUnload(event) {\n        const data = event.data.glue42core;\n        const clientId = data?.data.clientId;\n        if (!clientId) {\n            this.logger.warn(\"cannot process grand child unload, because the provided id was not valid\");\n            return;\n        }\n        const foundChild = this.children.find((child) => child.grandChildId === clientId);\n        if (!foundChild) {\n            this.logger.warn(\"cannot process grand child unload, because this client is unaware of this grandchild\");\n            return;\n        }\n        this.logger.debug(`handling grandchild unload for id: ${clientId}`);\n        this.children = this.children.filter((child) => child.grandChildId !== clientId);\n    }\n    handlePlatformPing() {\n        return;\n    }\n    notifyStatusChanged(status, reason) {\n        this.iAmConnected = status;\n        this.registry.execute(\"onConnectedChanged\", status, reason);\n    }\n    checkMessageTypeValid(typeToValidate) {\n        return typeof typeToValidate === \"string\" && !!this.messages[typeToValidate];\n    }\n    rejectConnectionRequest(source, origin, reason) {\n        this.rejected = true;\n        this.logger.error(reason);\n        const rejection = {\n            glue42core: {\n                type: this.messages.connectionRejected.name\n            }\n        };\n        source.postMessage(rejection, origin);\n    }\n    requestConnectionPermissionFromExt() {\n        return this.waitForContentScript()\n            .then(() => PromisePlus((resolve, reject) => {\n            this.extConnectionResolve = resolve;\n            this.extConnectionReject = reject;\n            const message = {\n                glue42core: {\n                    type: \"extSetupRequest\"\n                }\n            };\n            this.logger.debug(\"permission request to the extension content script was sent\");\n            window.postMessage(message, this.defaultTargetString);\n        }, this.parentPingTimeout, \"Cannot initialize glue, because this app was not opened or created by a Glue Client and the request for extension connection timed out\"));\n    }\n    handleExtConnectionResponse(event) {\n        const data = event.data?.glue42core;\n        if (!data.approved) {\n            return this.extConnectionReject ? this.extConnectionReject(\"Cannot initialize glue, because this app was not opened or created by a Glue Client and the request for extension connection was rejected\") : undefined;\n        }\n        if (this.extConnectionResolve) {\n            this.extConnectionResolve();\n            delete this.extConnectionResolve;\n        }\n        this.extContentConnecting = true;\n        this.parentType = \"extension\";\n        this.logger.debug(\"The extension connection was approved, proceeding.\");\n    }\n    handleExtSetupRequest() {\n        return;\n    }\n    handleGatewayDisconnect() {\n        return;\n    }\n    handleGatewayInternalConnect() {\n        return;\n    }\n    waitForContentScript() {\n        const contentReady = !!window.glue42ext?.content;\n        if (contentReady) {\n            return Promise.resolve();\n        }\n        return PromisePlus((resolve) => {\n            window.addEventListener(\"Glue42EXTReady\", () => {\n                resolve();\n            });\n        }, this.connectionRequestTimeout, \"The content script was available, but was never heard to be ready\");\n    }\n    async connect() {\n        if (this.settings.port) {\n            await this.initiateInternalConnection();\n            this.logger.debug(\"internal web platform connection completed\");\n            return;\n        }\n        this.logger.debug(\"opening a client web platform connection\");\n        await this.findParent();\n        await this.initiateRemoteConnection(this.parent);\n        this.logger.debug(\"the client is connected\");\n    }\n    async findParent() {\n        const connectionNotPossibleMsg = \"Cannot initiate glue, because this window was not opened or created by a glue client\";\n        const myInsideParents = this.getPossibleParentsInWindow(window);\n        const myOutsideParents = this.getPossibleParentsOutsideWindow(window.top?.opener, window.top);\n        const uniqueParents = new Set([...myInsideParents, ...myOutsideParents]);\n        if (!uniqueParents.size && !this.extContentAvailable) {\n            throw new Error(connectionNotPossibleMsg);\n        }\n        if (!uniqueParents.size && this.extContentAvailable) {\n            await this.requestConnectionPermissionFromExt();\n            return;\n        }\n        const defaultParentCheck = await this.isParentCheckSuccess(this.confirmParent(Array.from(uniqueParents)));\n        if (defaultParentCheck.success) {\n            this.logger.debug(\"The default parent was found!\");\n            return;\n        }\n        if (!this.extContentAvailable) {\n            throw new Error(connectionNotPossibleMsg);\n        }\n        await this.requestConnectionPermissionFromExt();\n    }\n    getPossibleParentsInWindow(currentWindow) {\n        return (!currentWindow || currentWindow === currentWindow.top) ? [] : [currentWindow.parent, ...this.getPossibleParentsInWindow(currentWindow.parent)];\n    }\n    getPossibleParentsOutsideWindow(opener, current) {\n        return (!opener || !current || opener === current) ? [] : [opener, ...this.getPossibleParentsInWindow(opener), ...this.getPossibleParentsOutsideWindow(opener.opener, opener)];\n    }\n    confirmParent(targets) {\n        const connectionNotPossibleMsg = \"Cannot initiate glue, because this window was not opened or created by a glue client\";\n        const parentCheck = PromisePlus((resolve) => {\n            this.parentPingResolve = resolve;\n            const message = {\n                glue42core: {\n                    type: this.messages.platformPing.name\n                }\n            };\n            this.parentPingInterval = setInterval(() => {\n                targets.forEach((target) => {\n                    target.postMessage(message, this.defaultTargetString);\n                });\n            }, 1000);\n        }, this.parentPingTimeout, connectionNotPossibleMsg);\n        parentCheck.catch(() => {\n            if (this.parentPingInterval) {\n                clearInterval(this.parentPingInterval);\n                delete this.parentPingInterval;\n            }\n        });\n        return parentCheck;\n    }\n    getMyWindowId() {\n        if (this.parentType === \"workspace\") {\n            return window.name.substring(0, window.name.indexOf(\"#wsp\"));\n        }\n        if (window !== window.top) {\n            return;\n        }\n        if (window.name?.includes(\"g42\")) {\n            return window.name;\n        }\n        this.selfAssignedWindowId = this.selfAssignedWindowId || `g42-${nanoid(10)}`;\n        return this.selfAssignedWindowId;\n    }\n}\n\nconst waitForInvocations = (invocations, callback) => {\n    let left = invocations;\n    return () => {\n        left--;\n        if (left === 0) {\n            callback();\n        }\n    };\n};\n\nclass AsyncSequelizer {\n    minSequenceInterval;\n    queue = [];\n    isExecutingQueue = false;\n    constructor(minSequenceInterval = 0) {\n        this.minSequenceInterval = minSequenceInterval;\n    }\n    enqueue(action) {\n        return new Promise((resolve, reject) => {\n            this.queue.push({ action, resolve, reject });\n            this.executeQueue();\n        });\n    }\n    async executeQueue() {\n        if (this.isExecutingQueue) {\n            return;\n        }\n        this.isExecutingQueue = true;\n        while (this.queue.length) {\n            const operation = this.queue.shift();\n            if (!operation) {\n                this.isExecutingQueue = false;\n                return;\n            }\n            try {\n                const actionResult = await operation.action();\n                operation.resolve(actionResult);\n            }\n            catch (error) {\n                operation.reject(error);\n            }\n            await this.intervalBreak();\n        }\n        this.isExecutingQueue = false;\n    }\n    intervalBreak() {\n        return new Promise((res) => setTimeout(res, this.minSequenceInterval));\n    }\n}\n\nfunction domainSession (domain, connection, logger, successMessages, errorMessages) {\n    if (domain == null) {\n        domain = \"global\";\n    }\n    successMessages = successMessages ?? [\"success\"];\n    errorMessages = errorMessages ?? [\"error\"];\n    let isJoined = domain === \"global\";\n    let tryReconnecting = false;\n    let _latestOptions;\n    let _connectionOn = false;\n    const callbacks = CallbackRegistryFactory();\n    connection.disconnected(handleConnectionDisconnected);\n    connection.loggedIn(handleConnectionLoggedIn);\n    connection.on(\"success\", (msg) => handleSuccessMessage(msg));\n    connection.on(\"error\", (msg) => handleErrorMessage(msg));\n    connection.on(\"result\", (msg) => handleSuccessMessage(msg));\n    if (successMessages) {\n        successMessages.forEach((sm) => {\n            connection.on(sm, (msg) => handleSuccessMessage(msg));\n        });\n    }\n    if (errorMessages) {\n        errorMessages.forEach((sm) => {\n            connection.on(sm, (msg) => handleErrorMessage(msg));\n        });\n    }\n    const requestsMap = {};\n    function join(options) {\n        _latestOptions = options;\n        return new Promise((resolve, reject) => {\n            if (isJoined) {\n                resolve({});\n                return;\n            }\n            let joinPromise;\n            if (domain === \"global\") {\n                joinPromise = _connectionOn ? Promise.resolve({}) : Promise.reject(\"not connected to gateway\");\n            }\n            else {\n                logger.debug(`joining domain ${domain}`);\n                const joinMsg = {\n                    type: \"join\",\n                    destination: domain,\n                    domain: \"global\",\n                    options,\n                };\n                joinPromise = send(joinMsg);\n            }\n            joinPromise\n                .then(() => {\n                handleJoined();\n                resolve({});\n            })\n                .catch((err) => {\n                logger.debug(\"error joining \" + domain + \" domain: \" + JSON.stringify(err));\n                reject(err);\n            });\n        });\n    }\n    function leave() {\n        if (domain === \"global\") {\n            return Promise.resolve();\n        }\n        logger.debug(\"stopping session \" + domain + \"...\");\n        const leaveMsg = {\n            type: \"leave\",\n            destination: domain,\n            domain: \"global\",\n        };\n        tryReconnecting = false;\n        return send(leaveMsg)\n            .then(() => {\n            isJoined = false;\n            callbacks.execute(\"onLeft\");\n        })\n            .catch(() => {\n            isJoined = false;\n            callbacks.execute(\"onLeft\");\n        });\n    }\n    function handleJoined() {\n        logger.debug(\"did join \" + domain);\n        isJoined = true;\n        const wasReconnect = tryReconnecting;\n        tryReconnecting = false;\n        callbacks.execute(\"onJoined\", wasReconnect);\n    }\n    function handleConnectionDisconnected() {\n        _connectionOn = false;\n        logger.debug(\"connection is down\");\n        isJoined = false;\n        tryReconnecting = true;\n        callbacks.execute(\"onLeft\", { disconnected: true });\n    }\n    function handleConnectionLoggedIn() {\n        _connectionOn = true;\n        if (tryReconnecting) {\n            logger.debug(\"connection is now up - trying to reconnect...\");\n            join(_latestOptions);\n        }\n    }\n    function onJoined(callback) {\n        if (isJoined) {\n            callback(false);\n        }\n        return callbacks.add(\"onJoined\", callback);\n    }\n    function onLeft(callback) {\n        if (!isJoined) {\n            callback();\n        }\n        return callbacks.add(\"onLeft\", callback);\n    }\n    function handleErrorMessage(msg) {\n        if (domain !== msg.domain) {\n            return;\n        }\n        const requestId = msg.request_id;\n        if (!requestId) {\n            return;\n        }\n        const entry = requestsMap[requestId];\n        if (!entry) {\n            return;\n        }\n        entry.error(msg);\n    }\n    function handleSuccessMessage(msg) {\n        if (msg.domain !== domain) {\n            return;\n        }\n        const requestId = msg.request_id;\n        if (!requestId) {\n            return;\n        }\n        const entry = requestsMap[requestId];\n        if (!entry) {\n            return;\n        }\n        entry.success(msg);\n    }\n    function getNextRequestId() {\n        return nanoid(10);\n    }\n    let queuedCalls = [];\n    function send(msg, tag, options) {\n        const ignore = [\"hello\", \"join\"];\n        if (msg.type && ignore.indexOf(msg.type) === -1) {\n            if (!isJoined) {\n                console.warn(`trying to send a message (${msg.domain} ${msg.type}) but not connected, will queue`);\n                const pw = new PromiseWrapper();\n                queuedCalls.push({ msg, tag, options, pw });\n                if (queuedCalls.length === 1) {\n                    const unsubscribe = onJoined(() => {\n                        logger.info(`joined - will now send queued messages (${queuedCalls.length} -> [${queuedCalls.map((m) => m.msg.type)}])`);\n                        queuedCalls.forEach((qm) => {\n                            send(qm.msg, qm.tag, qm.options)\n                                .then((t) => qm.pw.resolve(t))\n                                .catch((e) => qm.pw.reject(e));\n                        });\n                        queuedCalls = [];\n                        unsubscribe();\n                    });\n                }\n                return pw.promise;\n            }\n        }\n        options = options ?? {};\n        msg.request_id = msg.request_id ?? getNextRequestId();\n        msg.domain = msg.domain ?? domain;\n        if (!options.skipPeerId) {\n            msg.peer_id = connection.peerId;\n        }\n        const requestId = msg.request_id;\n        return new Promise((resolve, reject) => {\n            requestsMap[requestId] = {\n                success: (successMsg) => {\n                    delete requestsMap[requestId];\n                    successMsg._tag = tag;\n                    resolve(successMsg);\n                },\n                error: (errorMsg) => {\n                    logger.warn(`Gateway error - ${JSON.stringify(errorMsg)}`);\n                    delete requestsMap[requestId];\n                    errorMsg._tag = tag;\n                    reject(errorMsg);\n                },\n            };\n            connection\n                .send(msg, options)\n                .catch((err) => {\n                requestsMap[requestId].error({ err });\n            });\n        });\n    }\n    function sendFireAndForget(msg) {\n        msg.request_id = msg.request_id ? msg.request_id : getNextRequestId();\n        msg.domain = msg.domain ?? domain;\n        msg.peer_id = connection.peerId;\n        return connection.send(msg);\n    }\n    return {\n        join,\n        leave,\n        onJoined,\n        onLeft,\n        send,\n        sendFireAndForget,\n        on: (type, callback) => {\n            connection.on(type, (msg) => {\n                if (msg.domain !== domain) {\n                    return;\n                }\n                try {\n                    callback(msg);\n                }\n                catch (e) {\n                    logger.error(`Callback  failed: ${e} \\n ${e.stack} \\n msg was: ${JSON.stringify(msg)}`, e);\n                }\n            });\n        },\n        loggedIn: (callback) => connection.loggedIn(callback),\n        connected: (callback) => connection.connected(callback),\n        disconnected: (callback) => connection.disconnected(callback),\n        get peerId() {\n            return connection.peerId;\n        },\n        get domain() {\n            return domain;\n        },\n    };\n}\n\nclass Connection {\n    settings;\n    logger;\n    protocolVersion = 3;\n    peerId;\n    token;\n    info;\n    resolvedIdentity;\n    availableDomains;\n    gatewayToken;\n    replayer;\n    messageHandlers = {};\n    ids = 1;\n    registry = CallbackRegistryFactory();\n    _connected = false;\n    isTrace = false;\n    transport;\n    _defaultTransport;\n    _defaultAuth;\n    _targetTransport;\n    _targetAuth;\n    _swapTransport = false;\n    _switchInProgress = false;\n    _transportSubscriptions = [];\n    datePrefix = \"#T42_DATE#\";\n    datePrefixLen = this.datePrefix.length;\n    dateMinLen = this.datePrefixLen + 1;\n    datePrefixFirstChar = this.datePrefix[0];\n    _sequelizer = new AsyncSequelizer();\n    _isLoggedIn = false;\n    shouldTryLogin = true;\n    pingTimer;\n    sessions = [];\n    globalDomain;\n    initialLogin = true;\n    initialLoginAttempts = 3;\n    loginConfig;\n    constructor(settings, logger) {\n        this.settings = settings;\n        this.logger = logger;\n        settings = settings || {};\n        settings.reconnectAttempts = settings.reconnectAttempts ?? 10;\n        settings.reconnectInterval = settings.reconnectInterval ?? 1000;\n        if (settings.inproc) {\n            this.transport = new InProcTransport(settings.inproc, logger.subLogger(\"inMemory\"));\n        }\n        else if (settings.sharedWorker) {\n            this.transport = new SharedWorkerTransport(settings.sharedWorker, logger.subLogger(\"shared-worker\"));\n        }\n        else if (settings.webPlatform) {\n            this.transport = new WebPlatformTransport(settings.webPlatform, logger.subLogger(\"web-platform\"), settings.identity);\n        }\n        else if (settings.ws !== undefined) {\n            this.transport = new WS(settings, logger.subLogger(\"ws\"));\n        }\n        else {\n            throw new Error(\"No connection information specified\");\n        }\n        this.isTrace = logger.canPublish(\"trace\");\n        logger.debug(`starting with ${this.transport.name()} transport`);\n        const unsubConnectionChanged = this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this));\n        const unsubOnMessage = this.transport.onMessage(this.handleTransportMessage.bind(this));\n        this._transportSubscriptions.push(unsubConnectionChanged);\n        this._transportSubscriptions.push(unsubOnMessage);\n        this._defaultTransport = this.transport;\n        this.ping();\n    }\n    async switchTransport(settings) {\n        return this._sequelizer.enqueue(async () => {\n            if (!settings || typeof settings !== \"object\") {\n                throw new Error(\"Cannot switch transports, because the settings are missing or invalid.\");\n            }\n            if (typeof settings.type === \"undefined\") {\n                throw new Error(\"Cannot switch the transport, because the type is not defined\");\n            }\n            this.logger.trace(`Starting transport switch with settings: ${JSON.stringify(settings)}`);\n            const switchTargetTransport = settings.type === \"secondary\" ? this.getNewSecondaryTransport(settings) : this._defaultTransport;\n            this._targetTransport = switchTargetTransport;\n            this._targetAuth = settings.type === \"secondary\" ? this.getNewSecondaryAuth(settings) : this._defaultAuth;\n            const verifyPromise = this.verifyConnection();\n            this._swapTransport = true;\n            this._switchInProgress = true;\n            this.logger.trace(\"The new transport has been set, closing the current transport\");\n            await this.transport.close();\n            try {\n                await verifyPromise;\n                const isSwitchSuccess = this.transport === switchTargetTransport;\n                this.logger.info(`The reconnection after the switch was completed. Was the switch a success: ${isSwitchSuccess}`);\n                this._switchInProgress = false;\n                return { success: isSwitchSuccess };\n            }\n            catch (error) {\n                this.logger.info(\"The reconnection after the switch timed out, reverting back to the default transport.\");\n                this.switchTransport({ type: \"default\" });\n                this._switchInProgress = false;\n                return { success: false };\n            }\n        });\n    }\n    onLibReAnnounced(callback) {\n        return this.registry.add(\"libReAnnounced\", callback);\n    }\n    setLibReAnnounced(lib) {\n        this.registry.execute(\"libReAnnounced\", lib);\n    }\n    send(message, options) {\n        if (this.transport.sendObject &&\n            this.transport.isObjectBasedTransport) {\n            const msg = this.createObjectMessage(message);\n            if (this.isTrace) {\n                this.logger.trace(`>> ${JSON.stringify(msg)}`);\n            }\n            return this.transport.sendObject(msg, options);\n        }\n        else {\n            const strMessage = this.createStringMessage(message);\n            if (this.isTrace) {\n                this.logger.trace(`>> ${strMessage}`);\n            }\n            return this.transport.send(strMessage, options);\n        }\n    }\n    on(type, messageHandler) {\n        type = type.toLowerCase();\n        if (this.messageHandlers[type] === undefined) {\n            this.messageHandlers[type] = {};\n        }\n        const id = this.ids++;\n        this.messageHandlers[type][id] = messageHandler;\n        return {\n            type,\n            id,\n        };\n    }\n    off(info) {\n        delete this.messageHandlers[info.type.toLowerCase()][info.id];\n    }\n    get isConnected() {\n        return this._isLoggedIn;\n    }\n    connected(callback) {\n        return this.loggedIn(() => {\n            const currentServer = this.transport.name();\n            callback(currentServer);\n        });\n    }\n    disconnected(callback) {\n        return this.registry.add(\"disconnected\", callback);\n    }\n    async login(authRequest, reconnect) {\n        if (!this._defaultAuth) {\n            this._defaultAuth = authRequest;\n        }\n        if (this._swapTransport) {\n            this.logger.trace(\"Detected a transport swap, swapping transports\");\n            const newAuth = this.transportSwap();\n            authRequest = newAuth ?? authRequest;\n        }\n        this.logger.trace(`Starting login for transport: ${this.transport.name()} and auth ${JSON.stringify(authRequest)}`);\n        try {\n            await this.transport.open();\n            this.logger.trace(`Transport: ${this.transport.name()} opened, logging in`);\n            timer(\"connection\").mark(\"transport-opened\");\n            const identity = await this.loginCore(authRequest, reconnect);\n            this.logger.trace(`Logged in with identity: ${JSON.stringify(identity)}`);\n            timer(\"connection\").mark(\"protocol-logged-in\");\n            return identity;\n        }\n        catch (error) {\n            if (this._switchInProgress) {\n                this.logger.trace(\"An error while logging in after a transport swap, preparing a default swap.\");\n                this.prepareDefaultSwap();\n            }\n            throw new Error(error);\n        }\n    }\n    async logout() {\n        await this.logoutCore();\n        await this.transport.close();\n    }\n    loggedIn(callback) {\n        if (this._isLoggedIn) {\n            callback();\n        }\n        return this.registry.add(\"onLoggedIn\", callback);\n    }\n    domain(domain, successMessages, errorMessages) {\n        let session = this.sessions.find((s) => s.domain === domain);\n        if (!session) {\n            session = domainSession(domain, this, this.logger.subLogger(`domain=${domain}`), successMessages, errorMessages);\n            this.sessions.push(session);\n        }\n        return session;\n    }\n    authToken() {\n        const createTokenReq = {\n            domain: \"global\",\n            type: \"create-token\"\n        };\n        if (!this.globalDomain) {\n            return Promise.reject(new Error(\"no global domain session\"));\n        }\n        return this.globalDomain.send(createTokenReq)\n            .then((res) => {\n            return res.token;\n        });\n    }\n    reconnect() {\n        return this.transport.reconnect();\n    }\n    setLoggedIn(value) {\n        this._isLoggedIn = value;\n        if (this._isLoggedIn) {\n            this.registry.execute(\"onLoggedIn\");\n        }\n    }\n    distributeMessage(message, type) {\n        const handlers = this.messageHandlers[type.toLowerCase()];\n        if (handlers !== undefined) {\n            Object.keys(handlers).forEach((handlerId) => {\n                const handler = handlers[handlerId];\n                if (handler !== undefined) {\n                    try {\n                        handler(message);\n                    }\n                    catch (error) {\n                        try {\n                            this.logger.error(`Message handler failed with ${error.stack}`, error);\n                        }\n                        catch (loggerError) {\n                            console.log(\"Message handler failed\", error);\n                        }\n                    }\n                }\n            });\n        }\n    }\n    handleConnectionChanged(connected) {\n        if (this._connected === connected) {\n            return;\n        }\n        this._connected = connected;\n        if (connected) {\n            if (this.settings?.replaySpecs?.length) {\n                this.replayer = new MessageReplayerImpl(this.settings.replaySpecs);\n                this.replayer.init(this);\n            }\n            this.registry.execute(\"connected\");\n        }\n        else {\n            this.handleDisconnected();\n            this.registry.execute(\"disconnected\");\n        }\n    }\n    handleDisconnected() {\n        this.setLoggedIn(false);\n        const tryToLogin = this.shouldTryLogin;\n        if (tryToLogin && this.initialLogin) {\n            if (this.initialLoginAttempts <= 0) {\n                return;\n            }\n            this.initialLoginAttempts--;\n        }\n        this.logger.debug(\"disconnected - will try new login?\" + this.shouldTryLogin);\n        if (this.shouldTryLogin) {\n            if (!this.loginConfig) {\n                throw new Error(\"no login info\");\n            }\n            this.login(this.loginConfig, true)\n                .catch(() => {\n                setTimeout(this.handleDisconnected.bind(this), this.settings.reconnectInterval || 1000);\n            });\n        }\n    }\n    handleTransportMessage(msg) {\n        let msgObj;\n        if (typeof msg === \"string\") {\n            msgObj = this.processStringMessage(msg);\n        }\n        else {\n            msgObj = this.processObjectMessage(msg);\n        }\n        if (this.isTrace) {\n            this.logger.trace(`<< ${JSON.stringify(msgObj)}`);\n        }\n        this.distributeMessage(msgObj.msg, msgObj.msgType);\n    }\n    verifyConnection() {\n        return PromisePlus((resolve) => {\n            let unsub;\n            const ready = waitForInvocations(2, () => {\n                if (unsub) {\n                    unsub();\n                }\n                resolve();\n            });\n            unsub = this.onLibReAnnounced((lib) => {\n                if (lib.name === \"interop\") {\n                    return ready();\n                }\n                if (lib.name === \"contexts\") {\n                    return ready();\n                }\n            });\n        }, 10000, \"Transport switch timed out waiting for all libraries to be re-announced\");\n    }\n    getNewSecondaryTransport(settings) {\n        if (!settings.transportConfig?.url) {\n            throw new Error(\"Missing secondary transport URL.\");\n        }\n        return new WS(Object.assign({}, this.settings, { ws: settings.transportConfig.url, reconnectAttempts: 1 }), this.logger.subLogger(\"ws-secondary\"));\n    }\n    getNewSecondaryAuth(settings) {\n        if (!settings.transportConfig?.auth) {\n            throw new Error(\"Missing secondary transport auth information.\");\n        }\n        return settings.transportConfig.auth;\n    }\n    transportSwap() {\n        this._swapTransport = false;\n        if (!this._targetTransport || !this._targetAuth) {\n            this.logger.warn(`Error while switching transports - either the target transport or auth is not defined: transport defined -> ${!!this._defaultTransport}, auth defined -> ${!!this._targetAuth}. Staying on the current one.`);\n            return;\n        }\n        this._transportSubscriptions.forEach((unsub) => unsub());\n        this._transportSubscriptions = [];\n        this.transport = this._targetTransport;\n        const unsubConnectionChanged = this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this));\n        const unsubOnMessage = this.transport.onMessage(this.handleTransportMessage.bind(this));\n        this._transportSubscriptions.push(unsubConnectionChanged);\n        this._transportSubscriptions.push(unsubOnMessage);\n        return this._targetAuth;\n    }\n    prepareDefaultSwap() {\n        this._transportSubscriptions.forEach((unsub) => unsub());\n        this._transportSubscriptions = [];\n        this.transport.close().catch((error) => this.logger.warn(`Error closing the ${this.transport.name()} transport after a failed connection attempt: ${JSON.stringify(error)}`));\n        this._targetTransport = this._defaultTransport;\n        this._targetAuth = this._defaultAuth;\n        this._swapTransport = true;\n    }\n    processStringMessage(message) {\n        const msg = JSON.parse(message, (key, value) => {\n            if (typeof value !== \"string\") {\n                return value;\n            }\n            if (value.length < this.dateMinLen) {\n                return value;\n            }\n            if (!value.startsWith(this.datePrefixFirstChar)) {\n                return value;\n            }\n            if (value.substring(0, this.datePrefixLen) !== this.datePrefix) {\n                return value;\n            }\n            try {\n                const milliseconds = parseInt(value.substring(this.datePrefixLen, value.length), 10);\n                if (isNaN(milliseconds)) {\n                    return value;\n                }\n                return new Date(milliseconds);\n            }\n            catch (ex) {\n                return value;\n            }\n        });\n        return {\n            msg,\n            msgType: msg.type,\n        };\n    }\n    createStringMessage(message) {\n        const oldToJson = Date.prototype.toJSON;\n        try {\n            const datePrefix = this.datePrefix;\n            Date.prototype.toJSON = function () {\n                return datePrefix + this.getTime();\n            };\n            const result = JSON.stringify(message);\n            return result;\n        }\n        finally {\n            Date.prototype.toJSON = oldToJson;\n        }\n    }\n    processObjectMessage(message) {\n        if (!message.type) {\n            throw new Error(\"Object should have type property\");\n        }\n        return {\n            msg: message,\n            msgType: message.type,\n        };\n    }\n    createObjectMessage(message) {\n        return message;\n    }\n    async loginCore(config, reconnect) {\n        this.logger.info(\"logging in...\");\n        this.loginConfig = config;\n        if (!this.loginConfig) {\n            this.loginConfig = { username: \"\", password: \"\" };\n        }\n        this.shouldTryLogin = true;\n        const authentication = await this.setupAuthConfig(config, reconnect);\n        const helloMsg = {\n            type: \"hello\",\n            identity: this.settings.identity,\n            authentication\n        };\n        if (config.sessionId) {\n            helloMsg.request_id = config.sessionId;\n        }\n        this.globalDomain = domainSession(\"global\", this, this.logger.subLogger(\"global-domain\"), [\n            \"welcome\",\n            \"token\",\n            \"authentication-request\"\n        ]);\n        const sendOptions = { skipPeerId: true };\n        if (this.initialLogin) {\n            sendOptions.retryInterval = this.settings.reconnectInterval;\n            sendOptions.maxRetries = this.settings.reconnectAttempts;\n        }\n        try {\n            const welcomeMsg = await this.tryAuthenticate(this.globalDomain, helloMsg, sendOptions, config);\n            this.initialLogin = false;\n            this.logger.info(\"login successful with peerId \" + welcomeMsg.peer_id);\n            this.peerId = welcomeMsg.peer_id;\n            this.resolvedIdentity = welcomeMsg.resolved_identity;\n            this.availableDomains = welcomeMsg.available_domains;\n            if (welcomeMsg.options) {\n                this.token = welcomeMsg.options.access_token;\n                this.info = welcomeMsg.options.info;\n            }\n            this.setLoggedIn(true);\n            return welcomeMsg.resolved_identity;\n        }\n        catch (err) {\n            this.logger.error(\"error sending hello message - \" + (err.message || err.msg || err.reason || err), err);\n            throw err;\n        }\n        finally {\n            if (config?.flowCallback && config.sessionId) {\n                config.flowCallback(config.sessionId, null);\n            }\n        }\n    }\n    async tryAuthenticate(globalDomain, helloMsg, sendOptions, config) {\n        let welcomeMsg;\n        while (true) {\n            const msg = await globalDomain.send(helloMsg, undefined, sendOptions);\n            if (msg.type === \"authentication-request\") {\n                const token = Buffer.from(msg.authentication.token, \"base64\");\n                if (config.flowCallback && config.sessionId) {\n                    helloMsg.authentication.token =\n                        (await config.flowCallback(config.sessionId, token))\n                            .data\n                            .toString(\"base64\");\n                }\n                helloMsg.request_id = config.sessionId;\n            }\n            else if (msg.type === \"welcome\") {\n                welcomeMsg = msg;\n                break;\n            }\n            else if (msg.type === \"error\") {\n                throw new Error(\"Authentication failed: \" + msg.reason);\n            }\n            else {\n                throw new Error(\"Unexpected message type during authentication: \" + msg.type);\n            }\n        }\n        return welcomeMsg;\n    }\n    async setupAuthConfig(config, reconnect) {\n        const authentication = {};\n        this.gatewayToken = config.gatewayToken;\n        if (config.gatewayToken) {\n            if (reconnect) {\n                try {\n                    config.gatewayToken = await this.getNewGWToken();\n                }\n                catch (e) {\n                    this.logger.warn(`failed to get GW token when reconnecting ${e?.message || e}`);\n                }\n            }\n            authentication.method = \"gateway-token\";\n            authentication.token = config.gatewayToken;\n            this.gatewayToken = config.gatewayToken;\n        }\n        else if (config.flowName === \"sspi\") {\n            authentication.provider = \"win\";\n            authentication.method = \"access-token\";\n            if (config.flowCallback && config.sessionId) {\n                authentication.token =\n                    (await config.flowCallback(config.sessionId, null))\n                        .data\n                        .toString(\"base64\");\n            }\n            else {\n                throw new Error(\"Invalid SSPI config\");\n            }\n        }\n        else if (config.token) {\n            authentication.method = \"access-token\";\n            authentication.token = config.token;\n        }\n        else if (config.username) {\n            authentication.method = \"secret\";\n            authentication.login = config.username;\n            authentication.secret = config.password;\n        }\n        else if (config.provider) {\n            authentication.provider = config.provider;\n            authentication.providerContext = config.providerContext;\n        }\n        else {\n            throw new Error(\"invalid auth message\" + JSON.stringify(config));\n        }\n        return authentication;\n    }\n    async logoutCore() {\n        this.logger.debug(\"logging out...\");\n        this.shouldTryLogin = false;\n        if (this.pingTimer) {\n            clearTimeout(this.pingTimer);\n        }\n        const promises = this.sessions.map((session) => {\n            session.leave();\n        });\n        await Promise.all(promises);\n    }\n    getNewGWToken() {\n        if (typeof window !== \"undefined\") {\n            const glue42gd = window.glue42gd;\n            if (glue42gd) {\n                return glue42gd.getGWToken();\n            }\n        }\n        return Promise.reject(new Error(\"not running in GD\"));\n    }\n    ping() {\n        if (!this.shouldTryLogin) {\n            return;\n        }\n        if (this._isLoggedIn) {\n            this.send({ type: \"ping\" });\n        }\n        this.pingTimer = setTimeout(() => {\n            this.ping();\n        }, 30 * 1000);\n    }\n}\n\nconst order = [\"trace\", \"debug\", \"info\", \"warn\", \"error\", \"off\"];\nclass Logger {\n    name;\n    parent;\n    static Interop;\n    static InteropMethodName = \"T42.AppLogger.Log\";\n    static Instance;\n    path;\n    subLoggers = [];\n    _consoleLevel;\n    _publishLevel;\n    loggerFullName;\n    includeTimeAndLevel;\n    logFn = console;\n    customLogFn = false;\n    constructor(name, parent, logFn) {\n        this.name = name;\n        this.parent = parent;\n        this.name = name;\n        if (parent) {\n            this.path = `${parent.path}.${name}`;\n        }\n        else {\n            this.path = name;\n        }\n        this.loggerFullName = `[${this.path}]`;\n        this.includeTimeAndLevel = !logFn;\n        if (logFn) {\n            this.logFn = logFn;\n            this.customLogFn = true;\n        }\n    }\n    subLogger(name) {\n        const existingSub = this.subLoggers.filter((subLogger) => {\n            return subLogger.name === name;\n        })[0];\n        if (existingSub !== undefined) {\n            return existingSub;\n        }\n        Object.keys(this).forEach((key) => {\n            if (key === name) {\n                throw new Error(\"This sub logger name is not allowed.\");\n            }\n        });\n        const sub = new Logger(name, this, this.customLogFn ? this.logFn : undefined);\n        this.subLoggers.push(sub);\n        return sub;\n    }\n    publishLevel(level) {\n        if (level) {\n            this._publishLevel = level;\n        }\n        return this._publishLevel || this.parent?.publishLevel();\n    }\n    consoleLevel(level) {\n        if (level) {\n            this._consoleLevel = level;\n        }\n        return this._consoleLevel || this.parent?.consoleLevel();\n    }\n    log(message, level, error) {\n        this.publishMessage(level || \"info\", message, error);\n    }\n    trace(message) {\n        this.log(message, \"trace\");\n    }\n    debug(message) {\n        this.log(message, \"debug\");\n    }\n    info(message) {\n        this.log(message, \"info\");\n    }\n    warn(message) {\n        this.log(message, \"warn\");\n    }\n    error(message, err) {\n        this.log(message, \"error\");\n    }\n    canPublish(level, compareWith) {\n        const levelIdx = order.indexOf(level);\n        const restrictionIdx = order.indexOf(compareWith || this.consoleLevel() || \"trace\");\n        return levelIdx >= restrictionIdx;\n    }\n    publishMessage(level, message, error) {\n        const loggerName = this.loggerFullName;\n        if (level === \"error\" && !error) {\n            const e = new Error();\n            if (e.stack) {\n                message =\n                    message +\n                        \"\\n\" +\n                        e.stack\n                            .split(\"\\n\")\n                            .slice(3)\n                            .join(\"\\n\");\n            }\n        }\n        if (this.canPublish(level, this.publishLevel())) {\n            const interop = Logger.Interop;\n            if (interop) {\n                try {\n                    if (interop.methods({ name: Logger.InteropMethodName }).length > 0) {\n                        interop.invoke(Logger.InteropMethodName, {\n                            msg: `${message}`,\n                            logger: loggerName,\n                            level\n                        });\n                    }\n                }\n                catch {\n                }\n            }\n        }\n        if (this.canPublish(level)) {\n            let prefix = \"\";\n            if (this.includeTimeAndLevel) {\n                const date = new Date();\n                const time = `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}:${date.getMilliseconds()}`;\n                prefix = `[${time}] [${level}] `;\n            }\n            const toPrint = `${prefix}${loggerName}: ${message}`;\n            switch (level) {\n                case \"trace\":\n                    this.logFn.debug(toPrint);\n                    break;\n                case \"debug\":\n                    if (this.logFn.debug) {\n                        this.logFn.debug(toPrint);\n                    }\n                    else {\n                        this.logFn.log(toPrint);\n                    }\n                    break;\n                case \"info\":\n                    this.logFn.info(toPrint);\n                    break;\n                case \"warn\":\n                    this.logFn.warn(toPrint);\n                    break;\n                case \"error\":\n                    this.logFn.error(toPrint, error);\n                    break;\n            }\n        }\n    }\n}\n\nconst GW_MESSAGE_CREATE_CONTEXT = \"create-context\";\nconst GW_MESSAGE_ACTIVITY_CREATED = \"created\";\nconst GW_MESSAGE_ACTIVITY_DESTROYED = \"destroyed\";\nconst GW_MESSAGE_CONTEXT_CREATED = \"context-created\";\nconst GW_MESSAGE_CONTEXT_ADDED = \"context-added\";\nconst GW_MESSAGE_SUBSCRIBE_CONTEXT = \"subscribe-context\";\nconst GW_MESSAGE_SUBSCRIBED_CONTEXT = \"subscribed-context\";\nconst GW_MESSAGE_UNSUBSCRIBE_CONTEXT = \"unsubscribe-context\";\nconst GW_MESSAGE_DESTROY_CONTEXT = \"destroy-context\";\nconst GW_MESSAGE_CONTEXT_DESTROYED = \"context-destroyed\";\nconst GW_MESSAGE_UPDATE_CONTEXT = \"update-context\";\nconst GW_MESSAGE_CONTEXT_UPDATED = \"context-updated\";\nconst GW_MESSAGE_JOINED_ACTIVITY = \"joined\";\n\nconst ContextMessageReplaySpec = {\n    get name() {\n        return \"context\";\n    },\n    get types() {\n        return [\n            GW_MESSAGE_CREATE_CONTEXT,\n            GW_MESSAGE_ACTIVITY_CREATED,\n            GW_MESSAGE_ACTIVITY_DESTROYED,\n            GW_MESSAGE_CONTEXT_CREATED,\n            GW_MESSAGE_CONTEXT_ADDED,\n            GW_MESSAGE_SUBSCRIBE_CONTEXT,\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\n            GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\n            GW_MESSAGE_DESTROY_CONTEXT,\n            GW_MESSAGE_CONTEXT_DESTROYED,\n            GW_MESSAGE_UPDATE_CONTEXT,\n            GW_MESSAGE_CONTEXT_UPDATED,\n            GW_MESSAGE_JOINED_ACTIVITY\n        ];\n    }\n};\n\nvar version = \"6.4.0\";\n\nfunction prepareConfig (configuration, ext, glue42gd) {\n    let nodeStartingContext;\n    if (Utils.isNode()) {\n        const startingContextString = process.env._GD_STARTING_CONTEXT_;\n        if (startingContextString) {\n            try {\n                nodeStartingContext = JSON.parse(startingContextString);\n            }\n            catch {\n            }\n        }\n    }\n    function getConnection() {\n        const gwConfig = configuration.gateway;\n        const protocolVersion = gwConfig?.protocolVersion ?? 3;\n        const reconnectInterval = gwConfig?.reconnectInterval;\n        const reconnectAttempts = gwConfig?.reconnectAttempts;\n        const defaultWs = \"ws://localhost:8385\";\n        let ws = gwConfig?.ws;\n        const sharedWorker = gwConfig?.sharedWorker;\n        const inproc = gwConfig?.inproc;\n        const webPlatform = gwConfig?.webPlatform ?? undefined;\n        if (glue42gd) {\n            ws = glue42gd.gwURL;\n        }\n        if (Utils.isNode() && nodeStartingContext && nodeStartingContext.gwURL) {\n            ws = nodeStartingContext.gwURL;\n        }\n        if (!ws && !sharedWorker && !inproc) {\n            ws = defaultWs;\n        }\n        let instanceId;\n        let windowId;\n        let pid;\n        let environment;\n        let region;\n        const appName = getApplication();\n        let uniqueAppName = appName;\n        if (typeof glue42gd !== \"undefined\") {\n            windowId = glue42gd.windowId;\n            pid = glue42gd.pid;\n            if (glue42gd.env) {\n                environment = glue42gd.env.env;\n                region = glue42gd.env.region;\n            }\n            uniqueAppName = glue42gd.application ?? \"glue-app\";\n            instanceId = glue42gd.appInstanceId;\n        }\n        else if (Utils.isNode()) {\n            pid = process.pid;\n            if (nodeStartingContext) {\n                environment = nodeStartingContext.env;\n                region = nodeStartingContext.region;\n                instanceId = nodeStartingContext.instanceId;\n            }\n        }\n        else if (typeof window?.glue42electron !== \"undefined\") {\n            windowId = window?.glue42electron.instanceId;\n            pid = window?.glue42electron.pid;\n            environment = window?.glue42electron.env;\n            region = window?.glue42electron.region;\n            uniqueAppName = window?.glue42electron.application ?? \"glue-app\";\n            instanceId = window?.glue42electron.instanceId;\n        }\n        else ;\n        const replaySpecs = configuration.gateway?.replaySpecs ?? [];\n        replaySpecs.push(ContextMessageReplaySpec);\n        let identity = {\n            application: uniqueAppName,\n            applicationName: appName,\n            windowId,\n            instance: instanceId,\n            process: pid,\n            region,\n            environment,\n            api: ext.version || version\n        };\n        if (configuration.identity) {\n            identity = Object.assign(identity, configuration.identity);\n        }\n        return {\n            identity,\n            reconnectInterval,\n            ws,\n            sharedWorker,\n            webPlatform,\n            inproc,\n            protocolVersion,\n            reconnectAttempts,\n            replaySpecs,\n        };\n    }\n    function getContexts() {\n        if (typeof configuration.contexts === \"undefined\") {\n            return { reAnnounceKnownContexts: true };\n        }\n        if (typeof configuration.contexts === \"boolean\" && configuration.contexts) {\n            return { reAnnounceKnownContexts: true };\n        }\n        if (typeof configuration.contexts === \"object\") {\n            return Object.assign({}, { reAnnounceKnownContexts: true }, configuration.contexts);\n        }\n        return false;\n    }\n    function getApplication() {\n        if (configuration.application) {\n            return configuration.application;\n        }\n        if (glue42gd) {\n            return glue42gd.applicationName;\n        }\n        if (typeof window !== \"undefined\" && typeof window.glue42electron !== \"undefined\") {\n            return window.glue42electron.application;\n        }\n        const uid = nanoid(10);\n        if (Utils.isNode()) {\n            if (nodeStartingContext) {\n                return nodeStartingContext.applicationConfig.name;\n            }\n            return \"NodeJS\" + uid;\n        }\n        if (typeof window !== \"undefined\" && typeof document !== \"undefined\") {\n            return document.title + ` (${uid})`;\n        }\n        return uid;\n    }\n    function getAuth() {\n        if (typeof configuration.auth === \"string\") {\n            return {\n                token: configuration.auth\n            };\n        }\n        if (configuration.auth) {\n            return configuration.auth;\n        }\n        if (Utils.isNode() && nodeStartingContext && nodeStartingContext.gwToken) {\n            return {\n                gatewayToken: nodeStartingContext.gwToken\n            };\n        }\n        if (configuration.gateway?.webPlatform || configuration.gateway?.inproc || configuration.gateway?.sharedWorker) {\n            return {\n                username: \"glue42\", password: \"glue42\"\n            };\n        }\n    }\n    function getLogger() {\n        let config = configuration.logger;\n        const defaultLevel = \"warn\";\n        if (!config) {\n            config = defaultLevel;\n        }\n        let gdConsoleLevel;\n        if (glue42gd) {\n            gdConsoleLevel = glue42gd.consoleLogLevel;\n        }\n        if (typeof config === \"string\") {\n            return { console: gdConsoleLevel ?? config, publish: defaultLevel };\n        }\n        return {\n            console: gdConsoleLevel ?? config.console ?? defaultLevel,\n            publish: config.publish ?? defaultLevel\n        };\n    }\n    const connection = getConnection();\n    let application = getApplication();\n    if (typeof window !== \"undefined\") {\n        const windowAsAny = window;\n        const containerApplication = windowAsAny.htmlContainer ?\n            `${windowAsAny.htmlContainer.containerName}.${windowAsAny.htmlContainer.application}` :\n            windowAsAny?.glue42gd?.application;\n        if (containerApplication) {\n            application = containerApplication;\n        }\n    }\n    return {\n        bus: configuration.bus ?? false,\n        application,\n        auth: getAuth(),\n        logger: getLogger(),\n        connection,\n        metrics: configuration.metrics ?? true,\n        contexts: getContexts(),\n        version: ext.version || version,\n        libs: ext.libs ?? [],\n        customLogger: configuration.customLogger\n    };\n}\n\nclass GW3ContextData {\n    name;\n    contextId;\n    context;\n    isAnnounced;\n    joinedActivity;\n    updateCallbacks = {};\n    activityId;\n    sentExplicitSubscription;\n    hasReceivedSnapshot;\n    constructor(contextId, name, isAnnounced, activityId) {\n        this.contextId = contextId;\n        this.name = name;\n        this.isAnnounced = isAnnounced;\n        this.activityId = activityId;\n        this.context = {};\n    }\n    hasCallbacks() {\n        return Object.keys(this.updateCallbacks).length > 0;\n    }\n    getState() {\n        if (this.isAnnounced && this.hasCallbacks()) {\n            return 3;\n        }\n        if (this.isAnnounced) {\n            return 2;\n        }\n        if (this.hasCallbacks()) {\n            return 1;\n        }\n        return 0;\n    }\n}\n\nvar lodash_clonedeep = {exports: {}};\n\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\nlodash_clonedeep.exports;\n\n(function (module, exports) {\n\t/** Used as the size to enable large array optimizations. */\n\tvar LARGE_ARRAY_SIZE = 200;\n\n\t/** Used to stand-in for `undefined` hash values. */\n\tvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n\t/** Used as references for various `Number` constants. */\n\tvar MAX_SAFE_INTEGER = 9007199254740991;\n\n\t/** `Object#toString` result references. */\n\tvar argsTag = '[object Arguments]',\n\t    arrayTag = '[object Array]',\n\t    boolTag = '[object Boolean]',\n\t    dateTag = '[object Date]',\n\t    errorTag = '[object Error]',\n\t    funcTag = '[object Function]',\n\t    genTag = '[object GeneratorFunction]',\n\t    mapTag = '[object Map]',\n\t    numberTag = '[object Number]',\n\t    objectTag = '[object Object]',\n\t    promiseTag = '[object Promise]',\n\t    regexpTag = '[object RegExp]',\n\t    setTag = '[object Set]',\n\t    stringTag = '[object String]',\n\t    symbolTag = '[object Symbol]',\n\t    weakMapTag = '[object WeakMap]';\n\n\tvar arrayBufferTag = '[object ArrayBuffer]',\n\t    dataViewTag = '[object DataView]',\n\t    float32Tag = '[object Float32Array]',\n\t    float64Tag = '[object Float64Array]',\n\t    int8Tag = '[object Int8Array]',\n\t    int16Tag = '[object Int16Array]',\n\t    int32Tag = '[object Int32Array]',\n\t    uint8Tag = '[object Uint8Array]',\n\t    uint8ClampedTag = '[object Uint8ClampedArray]',\n\t    uint16Tag = '[object Uint16Array]',\n\t    uint32Tag = '[object Uint32Array]';\n\n\t/**\n\t * Used to match `RegExp`\n\t * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n\t */\n\tvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n\t/** Used to match `RegExp` flags from their coerced string values. */\n\tvar reFlags = /\\w*$/;\n\n\t/** Used to detect host constructors (Safari). */\n\tvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n\t/** Used to detect unsigned integer values. */\n\tvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n\t/** Used to identify `toStringTag` values supported by `_.clone`. */\n\tvar cloneableTags = {};\n\tcloneableTags[argsTag] = cloneableTags[arrayTag] =\n\tcloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n\tcloneableTags[boolTag] = cloneableTags[dateTag] =\n\tcloneableTags[float32Tag] = cloneableTags[float64Tag] =\n\tcloneableTags[int8Tag] = cloneableTags[int16Tag] =\n\tcloneableTags[int32Tag] = cloneableTags[mapTag] =\n\tcloneableTags[numberTag] = cloneableTags[objectTag] =\n\tcloneableTags[regexpTag] = cloneableTags[setTag] =\n\tcloneableTags[stringTag] = cloneableTags[symbolTag] =\n\tcloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n\tcloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n\tcloneableTags[errorTag] = cloneableTags[funcTag] =\n\tcloneableTags[weakMapTag] = false;\n\n\t/** Detect free variable `global` from Node.js. */\n\tvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\n\t/** Detect free variable `self`. */\n\tvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n\t/** Used as a reference to the global object. */\n\tvar root = freeGlobal || freeSelf || Function('return this')();\n\n\t/** Detect free variable `exports`. */\n\tvar freeExports = exports && !exports.nodeType && exports;\n\n\t/** Detect free variable `module`. */\n\tvar freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;\n\n\t/** Detect the popular CommonJS extension `module.exports`. */\n\tvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n\t/**\n\t * Adds the key-value `pair` to `map`.\n\t *\n\t * @private\n\t * @param {Object} map The map to modify.\n\t * @param {Array} pair The key-value pair to add.\n\t * @returns {Object} Returns `map`.\n\t */\n\tfunction addMapEntry(map, pair) {\n\t  // Don't return `map.set` because it's not chainable in IE 11.\n\t  map.set(pair[0], pair[1]);\n\t  return map;\n\t}\n\n\t/**\n\t * Adds `value` to `set`.\n\t *\n\t * @private\n\t * @param {Object} set The set to modify.\n\t * @param {*} value The value to add.\n\t * @returns {Object} Returns `set`.\n\t */\n\tfunction addSetEntry(set, value) {\n\t  // Don't return `set.add` because it's not chainable in IE 11.\n\t  set.add(value);\n\t  return set;\n\t}\n\n\t/**\n\t * A specialized version of `_.forEach` for arrays without support for\n\t * iteratee shorthands.\n\t *\n\t * @private\n\t * @param {Array} [array] The array to iterate over.\n\t * @param {Function} iteratee The function invoked per iteration.\n\t * @returns {Array} Returns `array`.\n\t */\n\tfunction arrayEach(array, iteratee) {\n\t  var index = -1,\n\t      length = array ? array.length : 0;\n\n\t  while (++index < length) {\n\t    if (iteratee(array[index], index, array) === false) {\n\t      break;\n\t    }\n\t  }\n\t  return array;\n\t}\n\n\t/**\n\t * Appends the elements of `values` to `array`.\n\t *\n\t * @private\n\t * @param {Array} array The array to modify.\n\t * @param {Array} values The values to append.\n\t * @returns {Array} Returns `array`.\n\t */\n\tfunction arrayPush(array, values) {\n\t  var index = -1,\n\t      length = values.length,\n\t      offset = array.length;\n\n\t  while (++index < length) {\n\t    array[offset + index] = values[index];\n\t  }\n\t  return array;\n\t}\n\n\t/**\n\t * A specialized version of `_.reduce` for arrays without support for\n\t * iteratee shorthands.\n\t *\n\t * @private\n\t * @param {Array} [array] The array to iterate over.\n\t * @param {Function} iteratee The function invoked per iteration.\n\t * @param {*} [accumulator] The initial value.\n\t * @param {boolean} [initAccum] Specify using the first element of `array` as\n\t *  the initial value.\n\t * @returns {*} Returns the accumulated value.\n\t */\n\tfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n\t  var index = -1,\n\t      length = array ? array.length : 0;\n\n\t  if (initAccum && length) {\n\t    accumulator = array[++index];\n\t  }\n\t  while (++index < length) {\n\t    accumulator = iteratee(accumulator, array[index], index, array);\n\t  }\n\t  return accumulator;\n\t}\n\n\t/**\n\t * The base implementation of `_.times` without support for iteratee shorthands\n\t * or max array length checks.\n\t *\n\t * @private\n\t * @param {number} n The number of times to invoke `iteratee`.\n\t * @param {Function} iteratee The function invoked per iteration.\n\t * @returns {Array} Returns the array of results.\n\t */\n\tfunction baseTimes(n, iteratee) {\n\t  var index = -1,\n\t      result = Array(n);\n\n\t  while (++index < n) {\n\t    result[index] = iteratee(index);\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Gets the value at `key` of `object`.\n\t *\n\t * @private\n\t * @param {Object} [object] The object to query.\n\t * @param {string} key The key of the property to get.\n\t * @returns {*} Returns the property value.\n\t */\n\tfunction getValue(object, key) {\n\t  return object == null ? undefined : object[key];\n\t}\n\n\t/**\n\t * Checks if `value` is a host object in IE < 9.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n\t */\n\tfunction isHostObject(value) {\n\t  // Many host objects are `Object` objects that can coerce to strings\n\t  // despite having improperly defined `toString` methods.\n\t  var result = false;\n\t  if (value != null && typeof value.toString != 'function') {\n\t    try {\n\t      result = !!(value + '');\n\t    } catch (e) {}\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Converts `map` to its key-value pairs.\n\t *\n\t * @private\n\t * @param {Object} map The map to convert.\n\t * @returns {Array} Returns the key-value pairs.\n\t */\n\tfunction mapToArray(map) {\n\t  var index = -1,\n\t      result = Array(map.size);\n\n\t  map.forEach(function(value, key) {\n\t    result[++index] = [key, value];\n\t  });\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a unary function that invokes `func` with its argument transformed.\n\t *\n\t * @private\n\t * @param {Function} func The function to wrap.\n\t * @param {Function} transform The argument transform.\n\t * @returns {Function} Returns the new function.\n\t */\n\tfunction overArg(func, transform) {\n\t  return function(arg) {\n\t    return func(transform(arg));\n\t  };\n\t}\n\n\t/**\n\t * Converts `set` to an array of its values.\n\t *\n\t * @private\n\t * @param {Object} set The set to convert.\n\t * @returns {Array} Returns the values.\n\t */\n\tfunction setToArray(set) {\n\t  var index = -1,\n\t      result = Array(set.size);\n\n\t  set.forEach(function(value) {\n\t    result[++index] = value;\n\t  });\n\t  return result;\n\t}\n\n\t/** Used for built-in method references. */\n\tvar arrayProto = Array.prototype,\n\t    funcProto = Function.prototype,\n\t    objectProto = Object.prototype;\n\n\t/** Used to detect overreaching core-js shims. */\n\tvar coreJsData = root['__core-js_shared__'];\n\n\t/** Used to detect methods masquerading as native. */\n\tvar maskSrcKey = (function() {\n\t  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n\t  return uid ? ('Symbol(src)_1.' + uid) : '';\n\t}());\n\n\t/** Used to resolve the decompiled source of functions. */\n\tvar funcToString = funcProto.toString;\n\n\t/** Used to check objects for own properties. */\n\tvar hasOwnProperty = objectProto.hasOwnProperty;\n\n\t/**\n\t * Used to resolve the\n\t * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar objectToString = objectProto.toString;\n\n\t/** Used to detect if a method is native. */\n\tvar reIsNative = RegExp('^' +\n\t  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n\t  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n\t);\n\n\t/** Built-in value references. */\n\tvar Buffer = moduleExports ? root.Buffer : undefined,\n\t    Symbol = root.Symbol,\n\t    Uint8Array = root.Uint8Array,\n\t    getPrototype = overArg(Object.getPrototypeOf, Object),\n\t    objectCreate = Object.create,\n\t    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n\t    splice = arrayProto.splice;\n\n\t/* Built-in method references for those with the same name as other `lodash` methods. */\n\tvar nativeGetSymbols = Object.getOwnPropertySymbols,\n\t    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n\t    nativeKeys = overArg(Object.keys, Object);\n\n\t/* Built-in method references that are verified to be native. */\n\tvar DataView = getNative(root, 'DataView'),\n\t    Map = getNative(root, 'Map'),\n\t    Promise = getNative(root, 'Promise'),\n\t    Set = getNative(root, 'Set'),\n\t    WeakMap = getNative(root, 'WeakMap'),\n\t    nativeCreate = getNative(Object, 'create');\n\n\t/** Used to detect maps, sets, and weakmaps. */\n\tvar dataViewCtorString = toSource(DataView),\n\t    mapCtorString = toSource(Map),\n\t    promiseCtorString = toSource(Promise),\n\t    setCtorString = toSource(Set),\n\t    weakMapCtorString = toSource(WeakMap);\n\n\t/** Used to convert symbols to primitives and strings. */\n\tvar symbolProto = Symbol ? Symbol.prototype : undefined,\n\t    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n\t/**\n\t * Creates a hash object.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction Hash(entries) {\n\t  var index = -1,\n\t      length = entries ? entries.length : 0;\n\n\t  this.clear();\n\t  while (++index < length) {\n\t    var entry = entries[index];\n\t    this.set(entry[0], entry[1]);\n\t  }\n\t}\n\n\t/**\n\t * Removes all key-value entries from the hash.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf Hash\n\t */\n\tfunction hashClear() {\n\t  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n\t}\n\n\t/**\n\t * Removes `key` and its value from the hash.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf Hash\n\t * @param {Object} hash The hash to modify.\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction hashDelete(key) {\n\t  return this.has(key) && delete this.__data__[key];\n\t}\n\n\t/**\n\t * Gets the hash value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf Hash\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction hashGet(key) {\n\t  var data = this.__data__;\n\t  if (nativeCreate) {\n\t    var result = data[key];\n\t    return result === HASH_UNDEFINED ? undefined : result;\n\t  }\n\t  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n\t}\n\n\t/**\n\t * Checks if a hash value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf Hash\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction hashHas(key) {\n\t  var data = this.__data__;\n\t  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n\t}\n\n\t/**\n\t * Sets the hash `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf Hash\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the hash instance.\n\t */\n\tfunction hashSet(key, value) {\n\t  var data = this.__data__;\n\t  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n\t  return this;\n\t}\n\n\t// Add methods to `Hash`.\n\tHash.prototype.clear = hashClear;\n\tHash.prototype['delete'] = hashDelete;\n\tHash.prototype.get = hashGet;\n\tHash.prototype.has = hashHas;\n\tHash.prototype.set = hashSet;\n\n\t/**\n\t * Creates an list cache object.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction ListCache(entries) {\n\t  var index = -1,\n\t      length = entries ? entries.length : 0;\n\n\t  this.clear();\n\t  while (++index < length) {\n\t    var entry = entries[index];\n\t    this.set(entry[0], entry[1]);\n\t  }\n\t}\n\n\t/**\n\t * Removes all key-value entries from the list cache.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf ListCache\n\t */\n\tfunction listCacheClear() {\n\t  this.__data__ = [];\n\t}\n\n\t/**\n\t * Removes `key` and its value from the list cache.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf ListCache\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction listCacheDelete(key) {\n\t  var data = this.__data__,\n\t      index = assocIndexOf(data, key);\n\n\t  if (index < 0) {\n\t    return false;\n\t  }\n\t  var lastIndex = data.length - 1;\n\t  if (index == lastIndex) {\n\t    data.pop();\n\t  } else {\n\t    splice.call(data, index, 1);\n\t  }\n\t  return true;\n\t}\n\n\t/**\n\t * Gets the list cache value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf ListCache\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction listCacheGet(key) {\n\t  var data = this.__data__,\n\t      index = assocIndexOf(data, key);\n\n\t  return index < 0 ? undefined : data[index][1];\n\t}\n\n\t/**\n\t * Checks if a list cache value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf ListCache\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction listCacheHas(key) {\n\t  return assocIndexOf(this.__data__, key) > -1;\n\t}\n\n\t/**\n\t * Sets the list cache `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf ListCache\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the list cache instance.\n\t */\n\tfunction listCacheSet(key, value) {\n\t  var data = this.__data__,\n\t      index = assocIndexOf(data, key);\n\n\t  if (index < 0) {\n\t    data.push([key, value]);\n\t  } else {\n\t    data[index][1] = value;\n\t  }\n\t  return this;\n\t}\n\n\t// Add methods to `ListCache`.\n\tListCache.prototype.clear = listCacheClear;\n\tListCache.prototype['delete'] = listCacheDelete;\n\tListCache.prototype.get = listCacheGet;\n\tListCache.prototype.has = listCacheHas;\n\tListCache.prototype.set = listCacheSet;\n\n\t/**\n\t * Creates a map cache object to store key-value pairs.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction MapCache(entries) {\n\t  var index = -1,\n\t      length = entries ? entries.length : 0;\n\n\t  this.clear();\n\t  while (++index < length) {\n\t    var entry = entries[index];\n\t    this.set(entry[0], entry[1]);\n\t  }\n\t}\n\n\t/**\n\t * Removes all key-value entries from the map.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf MapCache\n\t */\n\tfunction mapCacheClear() {\n\t  this.__data__ = {\n\t    'hash': new Hash,\n\t    'map': new (Map || ListCache),\n\t    'string': new Hash\n\t  };\n\t}\n\n\t/**\n\t * Removes `key` and its value from the map.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf MapCache\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction mapCacheDelete(key) {\n\t  return getMapData(this, key)['delete'](key);\n\t}\n\n\t/**\n\t * Gets the map value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf MapCache\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction mapCacheGet(key) {\n\t  return getMapData(this, key).get(key);\n\t}\n\n\t/**\n\t * Checks if a map value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf MapCache\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction mapCacheHas(key) {\n\t  return getMapData(this, key).has(key);\n\t}\n\n\t/**\n\t * Sets the map `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf MapCache\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the map cache instance.\n\t */\n\tfunction mapCacheSet(key, value) {\n\t  getMapData(this, key).set(key, value);\n\t  return this;\n\t}\n\n\t// Add methods to `MapCache`.\n\tMapCache.prototype.clear = mapCacheClear;\n\tMapCache.prototype['delete'] = mapCacheDelete;\n\tMapCache.prototype.get = mapCacheGet;\n\tMapCache.prototype.has = mapCacheHas;\n\tMapCache.prototype.set = mapCacheSet;\n\n\t/**\n\t * Creates a stack cache object to store key-value pairs.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction Stack(entries) {\n\t  this.__data__ = new ListCache(entries);\n\t}\n\n\t/**\n\t * Removes all key-value entries from the stack.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf Stack\n\t */\n\tfunction stackClear() {\n\t  this.__data__ = new ListCache;\n\t}\n\n\t/**\n\t * Removes `key` and its value from the stack.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf Stack\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction stackDelete(key) {\n\t  return this.__data__['delete'](key);\n\t}\n\n\t/**\n\t * Gets the stack value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf Stack\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction stackGet(key) {\n\t  return this.__data__.get(key);\n\t}\n\n\t/**\n\t * Checks if a stack value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf Stack\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction stackHas(key) {\n\t  return this.__data__.has(key);\n\t}\n\n\t/**\n\t * Sets the stack `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf Stack\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the stack cache instance.\n\t */\n\tfunction stackSet(key, value) {\n\t  var cache = this.__data__;\n\t  if (cache instanceof ListCache) {\n\t    var pairs = cache.__data__;\n\t    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n\t      pairs.push([key, value]);\n\t      return this;\n\t    }\n\t    cache = this.__data__ = new MapCache(pairs);\n\t  }\n\t  cache.set(key, value);\n\t  return this;\n\t}\n\n\t// Add methods to `Stack`.\n\tStack.prototype.clear = stackClear;\n\tStack.prototype['delete'] = stackDelete;\n\tStack.prototype.get = stackGet;\n\tStack.prototype.has = stackHas;\n\tStack.prototype.set = stackSet;\n\n\t/**\n\t * Creates an array of the enumerable property names of the array-like `value`.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @param {boolean} inherited Specify returning inherited property names.\n\t * @returns {Array} Returns the array of property names.\n\t */\n\tfunction arrayLikeKeys(value, inherited) {\n\t  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n\t  // Safari 9 makes `arguments.length` enumerable in strict mode.\n\t  var result = (isArray(value) || isArguments(value))\n\t    ? baseTimes(value.length, String)\n\t    : [];\n\n\t  var length = result.length,\n\t      skipIndexes = !!length;\n\n\t  for (var key in value) {\n\t    if ((inherited || hasOwnProperty.call(value, key)) &&\n\t        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n\t      result.push(key);\n\t    }\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Assigns `value` to `key` of `object` if the existing value is not equivalent\n\t * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n\t * for equality comparisons.\n\t *\n\t * @private\n\t * @param {Object} object The object to modify.\n\t * @param {string} key The key of the property to assign.\n\t * @param {*} value The value to assign.\n\t */\n\tfunction assignValue(object, key, value) {\n\t  var objValue = object[key];\n\t  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n\t      (value === undefined && !(key in object))) {\n\t    object[key] = value;\n\t  }\n\t}\n\n\t/**\n\t * Gets the index at which the `key` is found in `array` of key-value pairs.\n\t *\n\t * @private\n\t * @param {Array} array The array to inspect.\n\t * @param {*} key The key to search for.\n\t * @returns {number} Returns the index of the matched value, else `-1`.\n\t */\n\tfunction assocIndexOf(array, key) {\n\t  var length = array.length;\n\t  while (length--) {\n\t    if (eq(array[length][0], key)) {\n\t      return length;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\n\t/**\n\t * The base implementation of `_.assign` without support for multiple sources\n\t * or `customizer` functions.\n\t *\n\t * @private\n\t * @param {Object} object The destination object.\n\t * @param {Object} source The source object.\n\t * @returns {Object} Returns `object`.\n\t */\n\tfunction baseAssign(object, source) {\n\t  return object && copyObject(source, keys(source), object);\n\t}\n\n\t/**\n\t * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n\t * traversed objects.\n\t *\n\t * @private\n\t * @param {*} value The value to clone.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @param {boolean} [isFull] Specify a clone including symbols.\n\t * @param {Function} [customizer] The function to customize cloning.\n\t * @param {string} [key] The key of `value`.\n\t * @param {Object} [object] The parent object of `value`.\n\t * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n\t * @returns {*} Returns the cloned value.\n\t */\n\tfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n\t  var result;\n\t  if (customizer) {\n\t    result = object ? customizer(value, key, object, stack) : customizer(value);\n\t  }\n\t  if (result !== undefined) {\n\t    return result;\n\t  }\n\t  if (!isObject(value)) {\n\t    return value;\n\t  }\n\t  var isArr = isArray(value);\n\t  if (isArr) {\n\t    result = initCloneArray(value);\n\t    if (!isDeep) {\n\t      return copyArray(value, result);\n\t    }\n\t  } else {\n\t    var tag = getTag(value),\n\t        isFunc = tag == funcTag || tag == genTag;\n\n\t    if (isBuffer(value)) {\n\t      return cloneBuffer(value, isDeep);\n\t    }\n\t    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n\t      if (isHostObject(value)) {\n\t        return object ? value : {};\n\t      }\n\t      result = initCloneObject(isFunc ? {} : value);\n\t      if (!isDeep) {\n\t        return copySymbols(value, baseAssign(result, value));\n\t      }\n\t    } else {\n\t      if (!cloneableTags[tag]) {\n\t        return object ? value : {};\n\t      }\n\t      result = initCloneByTag(value, tag, baseClone, isDeep);\n\t    }\n\t  }\n\t  // Check for circular references and return its corresponding clone.\n\t  stack || (stack = new Stack);\n\t  var stacked = stack.get(value);\n\t  if (stacked) {\n\t    return stacked;\n\t  }\n\t  stack.set(value, result);\n\n\t  if (!isArr) {\n\t    var props = isFull ? getAllKeys(value) : keys(value);\n\t  }\n\t  arrayEach(props || value, function(subValue, key) {\n\t    if (props) {\n\t      key = subValue;\n\t      subValue = value[key];\n\t    }\n\t    // Recursively populate clone (susceptible to call stack limits).\n\t    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n\t  });\n\t  return result;\n\t}\n\n\t/**\n\t * The base implementation of `_.create` without support for assigning\n\t * properties to the created object.\n\t *\n\t * @private\n\t * @param {Object} prototype The object to inherit from.\n\t * @returns {Object} Returns the new object.\n\t */\n\tfunction baseCreate(proto) {\n\t  return isObject(proto) ? objectCreate(proto) : {};\n\t}\n\n\t/**\n\t * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n\t * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n\t * symbols of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @param {Function} keysFunc The function to get the keys of `object`.\n\t * @param {Function} symbolsFunc The function to get the symbols of `object`.\n\t * @returns {Array} Returns the array of property names and symbols.\n\t */\n\tfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n\t  var result = keysFunc(object);\n\t  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n\t}\n\n\t/**\n\t * The base implementation of `getTag`.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @returns {string} Returns the `toStringTag`.\n\t */\n\tfunction baseGetTag(value) {\n\t  return objectToString.call(value);\n\t}\n\n\t/**\n\t * The base implementation of `_.isNative` without bad shim checks.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a native function,\n\t *  else `false`.\n\t */\n\tfunction baseIsNative(value) {\n\t  if (!isObject(value) || isMasked(value)) {\n\t    return false;\n\t  }\n\t  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n\t  return pattern.test(toSource(value));\n\t}\n\n\t/**\n\t * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t */\n\tfunction baseKeys(object) {\n\t  if (!isPrototype(object)) {\n\t    return nativeKeys(object);\n\t  }\n\t  var result = [];\n\t  for (var key in Object(object)) {\n\t    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n\t      result.push(key);\n\t    }\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a clone of  `buffer`.\n\t *\n\t * @private\n\t * @param {Buffer} buffer The buffer to clone.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Buffer} Returns the cloned buffer.\n\t */\n\tfunction cloneBuffer(buffer, isDeep) {\n\t  if (isDeep) {\n\t    return buffer.slice();\n\t  }\n\t  var result = new buffer.constructor(buffer.length);\n\t  buffer.copy(result);\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a clone of `arrayBuffer`.\n\t *\n\t * @private\n\t * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n\t * @returns {ArrayBuffer} Returns the cloned array buffer.\n\t */\n\tfunction cloneArrayBuffer(arrayBuffer) {\n\t  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n\t  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a clone of `dataView`.\n\t *\n\t * @private\n\t * @param {Object} dataView The data view to clone.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the cloned data view.\n\t */\n\tfunction cloneDataView(dataView, isDeep) {\n\t  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n\t  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n\t}\n\n\t/**\n\t * Creates a clone of `map`.\n\t *\n\t * @private\n\t * @param {Object} map The map to clone.\n\t * @param {Function} cloneFunc The function to clone values.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the cloned map.\n\t */\n\tfunction cloneMap(map, isDeep, cloneFunc) {\n\t  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n\t  return arrayReduce(array, addMapEntry, new map.constructor);\n\t}\n\n\t/**\n\t * Creates a clone of `regexp`.\n\t *\n\t * @private\n\t * @param {Object} regexp The regexp to clone.\n\t * @returns {Object} Returns the cloned regexp.\n\t */\n\tfunction cloneRegExp(regexp) {\n\t  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n\t  result.lastIndex = regexp.lastIndex;\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a clone of `set`.\n\t *\n\t * @private\n\t * @param {Object} set The set to clone.\n\t * @param {Function} cloneFunc The function to clone values.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the cloned set.\n\t */\n\tfunction cloneSet(set, isDeep, cloneFunc) {\n\t  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n\t  return arrayReduce(array, addSetEntry, new set.constructor);\n\t}\n\n\t/**\n\t * Creates a clone of the `symbol` object.\n\t *\n\t * @private\n\t * @param {Object} symbol The symbol object to clone.\n\t * @returns {Object} Returns the cloned symbol object.\n\t */\n\tfunction cloneSymbol(symbol) {\n\t  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n\t}\n\n\t/**\n\t * Creates a clone of `typedArray`.\n\t *\n\t * @private\n\t * @param {Object} typedArray The typed array to clone.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the cloned typed array.\n\t */\n\tfunction cloneTypedArray(typedArray, isDeep) {\n\t  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n\t  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n\t}\n\n\t/**\n\t * Copies the values of `source` to `array`.\n\t *\n\t * @private\n\t * @param {Array} source The array to copy values from.\n\t * @param {Array} [array=[]] The array to copy values to.\n\t * @returns {Array} Returns `array`.\n\t */\n\tfunction copyArray(source, array) {\n\t  var index = -1,\n\t      length = source.length;\n\n\t  array || (array = Array(length));\n\t  while (++index < length) {\n\t    array[index] = source[index];\n\t  }\n\t  return array;\n\t}\n\n\t/**\n\t * Copies properties of `source` to `object`.\n\t *\n\t * @private\n\t * @param {Object} source The object to copy properties from.\n\t * @param {Array} props The property identifiers to copy.\n\t * @param {Object} [object={}] The object to copy properties to.\n\t * @param {Function} [customizer] The function to customize copied values.\n\t * @returns {Object} Returns `object`.\n\t */\n\tfunction copyObject(source, props, object, customizer) {\n\t  object || (object = {});\n\n\t  var index = -1,\n\t      length = props.length;\n\n\t  while (++index < length) {\n\t    var key = props[index];\n\n\t    var newValue = customizer\n\t      ? customizer(object[key], source[key], key, object, source)\n\t      : undefined;\n\n\t    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n\t  }\n\t  return object;\n\t}\n\n\t/**\n\t * Copies own symbol properties of `source` to `object`.\n\t *\n\t * @private\n\t * @param {Object} source The object to copy symbols from.\n\t * @param {Object} [object={}] The object to copy symbols to.\n\t * @returns {Object} Returns `object`.\n\t */\n\tfunction copySymbols(source, object) {\n\t  return copyObject(source, getSymbols(source), object);\n\t}\n\n\t/**\n\t * Creates an array of own enumerable property names and symbols of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names and symbols.\n\t */\n\tfunction getAllKeys(object) {\n\t  return baseGetAllKeys(object, keys, getSymbols);\n\t}\n\n\t/**\n\t * Gets the data for `map`.\n\t *\n\t * @private\n\t * @param {Object} map The map to query.\n\t * @param {string} key The reference key.\n\t * @returns {*} Returns the map data.\n\t */\n\tfunction getMapData(map, key) {\n\t  var data = map.__data__;\n\t  return isKeyable(key)\n\t    ? data[typeof key == 'string' ? 'string' : 'hash']\n\t    : data.map;\n\t}\n\n\t/**\n\t * Gets the native function at `key` of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @param {string} key The key of the method to get.\n\t * @returns {*} Returns the function if it's native, else `undefined`.\n\t */\n\tfunction getNative(object, key) {\n\t  var value = getValue(object, key);\n\t  return baseIsNative(value) ? value : undefined;\n\t}\n\n\t/**\n\t * Creates an array of the own enumerable symbol properties of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of symbols.\n\t */\n\tvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n\t/**\n\t * Gets the `toStringTag` of `value`.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @returns {string} Returns the `toStringTag`.\n\t */\n\tvar getTag = baseGetTag;\n\n\t// Fallback for data views, maps, sets, and weak maps in IE 11,\n\t// for data views in Edge < 14, and promises in Node.js.\n\tif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n\t    (Map && getTag(new Map) != mapTag) ||\n\t    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n\t    (Set && getTag(new Set) != setTag) ||\n\t    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n\t  getTag = function(value) {\n\t    var result = objectToString.call(value),\n\t        Ctor = result == objectTag ? value.constructor : undefined,\n\t        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n\t    if (ctorString) {\n\t      switch (ctorString) {\n\t        case dataViewCtorString: return dataViewTag;\n\t        case mapCtorString: return mapTag;\n\t        case promiseCtorString: return promiseTag;\n\t        case setCtorString: return setTag;\n\t        case weakMapCtorString: return weakMapTag;\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t}\n\n\t/**\n\t * Initializes an array clone.\n\t *\n\t * @private\n\t * @param {Array} array The array to clone.\n\t * @returns {Array} Returns the initialized clone.\n\t */\n\tfunction initCloneArray(array) {\n\t  var length = array.length,\n\t      result = array.constructor(length);\n\n\t  // Add properties assigned by `RegExp#exec`.\n\t  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n\t    result.index = array.index;\n\t    result.input = array.input;\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Initializes an object clone.\n\t *\n\t * @private\n\t * @param {Object} object The object to clone.\n\t * @returns {Object} Returns the initialized clone.\n\t */\n\tfunction initCloneObject(object) {\n\t  return (typeof object.constructor == 'function' && !isPrototype(object))\n\t    ? baseCreate(getPrototype(object))\n\t    : {};\n\t}\n\n\t/**\n\t * Initializes an object clone based on its `toStringTag`.\n\t *\n\t * **Note:** This function only supports cloning values with tags of\n\t * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n\t *\n\t * @private\n\t * @param {Object} object The object to clone.\n\t * @param {string} tag The `toStringTag` of the object to clone.\n\t * @param {Function} cloneFunc The function to clone values.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the initialized clone.\n\t */\n\tfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n\t  var Ctor = object.constructor;\n\t  switch (tag) {\n\t    case arrayBufferTag:\n\t      return cloneArrayBuffer(object);\n\n\t    case boolTag:\n\t    case dateTag:\n\t      return new Ctor(+object);\n\n\t    case dataViewTag:\n\t      return cloneDataView(object, isDeep);\n\n\t    case float32Tag: case float64Tag:\n\t    case int8Tag: case int16Tag: case int32Tag:\n\t    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n\t      return cloneTypedArray(object, isDeep);\n\n\t    case mapTag:\n\t      return cloneMap(object, isDeep, cloneFunc);\n\n\t    case numberTag:\n\t    case stringTag:\n\t      return new Ctor(object);\n\n\t    case regexpTag:\n\t      return cloneRegExp(object);\n\n\t    case setTag:\n\t      return cloneSet(object, isDeep, cloneFunc);\n\n\t    case symbolTag:\n\t      return cloneSymbol(object);\n\t  }\n\t}\n\n\t/**\n\t * Checks if `value` is a valid array-like index.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n\t * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n\t */\n\tfunction isIndex(value, length) {\n\t  length = length == null ? MAX_SAFE_INTEGER : length;\n\t  return !!length &&\n\t    (typeof value == 'number' || reIsUint.test(value)) &&\n\t    (value > -1 && value % 1 == 0 && value < length);\n\t}\n\n\t/**\n\t * Checks if `value` is suitable for use as unique object key.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n\t */\n\tfunction isKeyable(value) {\n\t  var type = typeof value;\n\t  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n\t    ? (value !== '__proto__')\n\t    : (value === null);\n\t}\n\n\t/**\n\t * Checks if `func` has its source masked.\n\t *\n\t * @private\n\t * @param {Function} func The function to check.\n\t * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n\t */\n\tfunction isMasked(func) {\n\t  return !!maskSrcKey && (maskSrcKey in func);\n\t}\n\n\t/**\n\t * Checks if `value` is likely a prototype object.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n\t */\n\tfunction isPrototype(value) {\n\t  var Ctor = value && value.constructor,\n\t      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n\t  return value === proto;\n\t}\n\n\t/**\n\t * Converts `func` to its source code.\n\t *\n\t * @private\n\t * @param {Function} func The function to process.\n\t * @returns {string} Returns the source code.\n\t */\n\tfunction toSource(func) {\n\t  if (func != null) {\n\t    try {\n\t      return funcToString.call(func);\n\t    } catch (e) {}\n\t    try {\n\t      return (func + '');\n\t    } catch (e) {}\n\t  }\n\t  return '';\n\t}\n\n\t/**\n\t * This method is like `_.clone` except that it recursively clones `value`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 1.0.0\n\t * @category Lang\n\t * @param {*} value The value to recursively clone.\n\t * @returns {*} Returns the deep cloned value.\n\t * @see _.clone\n\t * @example\n\t *\n\t * var objects = [{ 'a': 1 }, { 'b': 2 }];\n\t *\n\t * var deep = _.cloneDeep(objects);\n\t * console.log(deep[0] === objects[0]);\n\t * // => false\n\t */\n\tfunction cloneDeep(value) {\n\t  return baseClone(value, true, true);\n\t}\n\n\t/**\n\t * Performs a\n\t * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n\t * comparison between two values to determine if they are equivalent.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to compare.\n\t * @param {*} other The other value to compare.\n\t * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n\t * @example\n\t *\n\t * var object = { 'a': 1 };\n\t * var other = { 'a': 1 };\n\t *\n\t * _.eq(object, object);\n\t * // => true\n\t *\n\t * _.eq(object, other);\n\t * // => false\n\t *\n\t * _.eq('a', 'a');\n\t * // => true\n\t *\n\t * _.eq('a', Object('a'));\n\t * // => false\n\t *\n\t * _.eq(NaN, NaN);\n\t * // => true\n\t */\n\tfunction eq(value, other) {\n\t  return value === other || (value !== value && other !== other);\n\t}\n\n\t/**\n\t * Checks if `value` is likely an `arguments` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n\t *  else `false`.\n\t * @example\n\t *\n\t * _.isArguments(function() { return arguments; }());\n\t * // => true\n\t *\n\t * _.isArguments([1, 2, 3]);\n\t * // => false\n\t */\n\tfunction isArguments(value) {\n\t  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n\t  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n\t    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n\t}\n\n\t/**\n\t * Checks if `value` is classified as an `Array` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n\t * @example\n\t *\n\t * _.isArray([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArray(document.body.children);\n\t * // => false\n\t *\n\t * _.isArray('abc');\n\t * // => false\n\t *\n\t * _.isArray(_.noop);\n\t * // => false\n\t */\n\tvar isArray = Array.isArray;\n\n\t/**\n\t * Checks if `value` is array-like. A value is considered array-like if it's\n\t * not a function and has a `value.length` that's an integer greater than or\n\t * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n\t * @example\n\t *\n\t * _.isArrayLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLike(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLike('abc');\n\t * // => true\n\t *\n\t * _.isArrayLike(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLike(value) {\n\t  return value != null && isLength(value.length) && !isFunction(value);\n\t}\n\n\t/**\n\t * This method is like `_.isArrayLike` except that it also checks if `value`\n\t * is an object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an array-like object,\n\t *  else `false`.\n\t * @example\n\t *\n\t * _.isArrayLikeObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLikeObject(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLikeObject('abc');\n\t * // => false\n\t *\n\t * _.isArrayLikeObject(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLikeObject(value) {\n\t  return isObjectLike(value) && isArrayLike(value);\n\t}\n\n\t/**\n\t * Checks if `value` is a buffer.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.3.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n\t * @example\n\t *\n\t * _.isBuffer(new Buffer(2));\n\t * // => true\n\t *\n\t * _.isBuffer(new Uint8Array(2));\n\t * // => false\n\t */\n\tvar isBuffer = nativeIsBuffer || stubFalse;\n\n\t/**\n\t * Checks if `value` is classified as a `Function` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n\t * @example\n\t *\n\t * _.isFunction(_);\n\t * // => true\n\t *\n\t * _.isFunction(/abc/);\n\t * // => false\n\t */\n\tfunction isFunction(value) {\n\t  // The use of `Object#toString` avoids issues with the `typeof` operator\n\t  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n\t  var tag = isObject(value) ? objectToString.call(value) : '';\n\t  return tag == funcTag || tag == genTag;\n\t}\n\n\t/**\n\t * Checks if `value` is a valid array-like length.\n\t *\n\t * **Note:** This method is loosely based on\n\t * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n\t * @example\n\t *\n\t * _.isLength(3);\n\t * // => true\n\t *\n\t * _.isLength(Number.MIN_VALUE);\n\t * // => false\n\t *\n\t * _.isLength(Infinity);\n\t * // => false\n\t *\n\t * _.isLength('3');\n\t * // => false\n\t */\n\tfunction isLength(value) {\n\t  return typeof value == 'number' &&\n\t    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n\t}\n\n\t/**\n\t * Checks if `value` is the\n\t * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n\t * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  var type = typeof value;\n\t  return !!value && (type == 'object' || type == 'function');\n\t}\n\n\t/**\n\t * Checks if `value` is object-like. A value is object-like if it's not `null`\n\t * and has a `typeof` result of \"object\".\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n\t * @example\n\t *\n\t * _.isObjectLike({});\n\t * // => true\n\t *\n\t * _.isObjectLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObjectLike(_.noop);\n\t * // => false\n\t *\n\t * _.isObjectLike(null);\n\t * // => false\n\t */\n\tfunction isObjectLike(value) {\n\t  return !!value && typeof value == 'object';\n\t}\n\n\t/**\n\t * Creates an array of the own enumerable property names of `object`.\n\t *\n\t * **Note:** Non-object values are coerced to objects. See the\n\t * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n\t * for more details.\n\t *\n\t * @static\n\t * @since 0.1.0\n\t * @memberOf _\n\t * @category Object\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t * @example\n\t *\n\t * function Foo() {\n\t *   this.a = 1;\n\t *   this.b = 2;\n\t * }\n\t *\n\t * Foo.prototype.c = 3;\n\t *\n\t * _.keys(new Foo);\n\t * // => ['a', 'b'] (iteration order is not guaranteed)\n\t *\n\t * _.keys('hi');\n\t * // => ['0', '1']\n\t */\n\tfunction keys(object) {\n\t  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n\t}\n\n\t/**\n\t * This method returns a new empty array.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.13.0\n\t * @category Util\n\t * @returns {Array} Returns the new empty array.\n\t * @example\n\t *\n\t * var arrays = _.times(2, _.stubArray);\n\t *\n\t * console.log(arrays);\n\t * // => [[], []]\n\t *\n\t * console.log(arrays[0] === arrays[1]);\n\t * // => false\n\t */\n\tfunction stubArray() {\n\t  return [];\n\t}\n\n\t/**\n\t * This method returns `false`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.13.0\n\t * @category Util\n\t * @returns {boolean} Returns `false`.\n\t * @example\n\t *\n\t * _.times(2, _.stubFalse);\n\t * // => [false, false]\n\t */\n\tfunction stubFalse() {\n\t  return false;\n\t}\n\n\tmodule.exports = cloneDeep; \n} (lodash_clonedeep, lodash_clonedeep.exports));\n\nvar lodash_clonedeepExports = lodash_clonedeep.exports;\nvar cloneDeep = /*@__PURE__*/getDefaultExportFromCjs(lodash_clonedeepExports);\n\nfunction applyContextDelta(context, delta, logger) {\n    try {\n        if (logger?.canPublish(\"trace\")) {\n            logger?.trace(`applying context delta ${JSON.stringify(delta)} on context ${JSON.stringify(context)}`);\n        }\n        if (!delta) {\n            return context;\n        }\n        if (delta.reset) {\n            context = { ...delta.reset };\n            return context;\n        }\n        context = deepClone(context, undefined);\n        if (delta.commands) {\n            for (const command of delta.commands) {\n                if (command.type === \"remove\") {\n                    deletePath(context, command.path);\n                }\n                else if (command.type === \"set\") {\n                    setValueToPath(context, command.value, command.path);\n                }\n            }\n            return context;\n        }\n        const added = delta.added;\n        const updated = delta.updated;\n        const removed = delta.removed;\n        if (added) {\n            Object.keys(added).forEach((key) => {\n                context[key] = added[key];\n            });\n        }\n        if (updated) {\n            Object.keys(updated).forEach((key) => {\n                mergeObjectsProperties(key, context, updated);\n            });\n        }\n        if (removed) {\n            removed.forEach((key) => {\n                delete context[key];\n            });\n        }\n        return context;\n    }\n    catch (e) {\n        logger?.error(`error applying context delta ${JSON.stringify(delta)} on context ${JSON.stringify(context)}`, e);\n        return context;\n    }\n}\nfunction deepClone(obj, hash) {\n    return cloneDeep(obj);\n}\nconst mergeObjectsProperties = (key, what, withWhat) => {\n    const right = withWhat[key];\n    if (right === undefined) {\n        return what;\n    }\n    const left = what[key];\n    if (!left || !right) {\n        what[key] = right;\n        return what;\n    }\n    if (typeof left === \"string\" ||\n        typeof left === \"number\" ||\n        typeof left === \"boolean\" ||\n        typeof right === \"string\" ||\n        typeof right === \"number\" ||\n        typeof right === \"boolean\" ||\n        Array.isArray(left) ||\n        Array.isArray(right)) {\n        what[key] = right;\n        return what;\n    }\n    what[key] = Object.assign({}, left, right);\n    return what;\n};\nfunction deepEqual(x, y) {\n    if (x === y) {\n        return true;\n    }\n    if (!(x instanceof Object) || !(y instanceof Object)) {\n        return false;\n    }\n    if (x.constructor !== y.constructor) {\n        return false;\n    }\n    for (const p in x) {\n        if (!x.hasOwnProperty(p)) {\n            continue;\n        }\n        if (!y.hasOwnProperty(p)) {\n            return false;\n        }\n        if (x[p] === y[p]) {\n            continue;\n        }\n        if (typeof (x[p]) !== \"object\") {\n            return false;\n        }\n        if (!deepEqual(x[p], y[p])) {\n            return false;\n        }\n    }\n    for (const p in y) {\n        if (y.hasOwnProperty(p) && !x.hasOwnProperty(p)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction setValueToPath(obj, value, path) {\n    const pathArr = path.split(\".\");\n    let i;\n    for (i = 0; i < pathArr.length - 1; i++) {\n        if (!obj[pathArr[i]]) {\n            obj[pathArr[i]] = {};\n        }\n        if (typeof obj[pathArr[i]] !== \"object\") {\n            obj[pathArr[i]] = {};\n        }\n        obj = obj[pathArr[i]];\n    }\n    obj[pathArr[i]] = value;\n}\nfunction isSubset(superObj, subObj) {\n    return Object.keys(subObj).every((ele) => {\n        if (typeof subObj[ele] === \"object\") {\n            return isSubset(superObj?.[ele] || {}, subObj[ele] || {});\n        }\n        return subObj[ele] === superObj?.[ele];\n    });\n}\nfunction deletePath(obj, path) {\n    const pathArr = path.split(\".\");\n    let i;\n    for (i = 0; i < pathArr.length - 1; i++) {\n        if (!obj[pathArr[i]]) {\n            return;\n        }\n        obj = obj[pathArr[i]];\n    }\n    delete obj[pathArr[i]];\n}\n\nclass GW3Bridge {\n    _logger;\n    _connection;\n    _trackAllContexts;\n    _reAnnounceKnownContexts;\n    _gw3Session;\n    _contextNameToData = {};\n    _gw3Subscriptions = [];\n    _nextCallbackSubscriptionNumber = 0;\n    _creationPromises = {};\n    _contextNameToId = {};\n    _contextIdToName = {};\n    _protocolVersion = undefined;\n    _contextsTempCache = {};\n    _contextsSubscriptionsCache = [];\n    _systemContextsSubKey;\n    get protocolVersion() {\n        if (!this._protocolVersion) {\n            const contextsDomainInfo = this._connection.availableDomains.find((d) => d.uri === \"context\");\n            this._protocolVersion = contextsDomainInfo?.version ?? 1;\n        }\n        return this._protocolVersion;\n    }\n    get setPathSupported() {\n        return this.protocolVersion >= 2;\n    }\n    constructor(config) {\n        this._connection = config.connection;\n        this._logger = config.logger;\n        this._trackAllContexts = config.trackAllContexts;\n        this._reAnnounceKnownContexts = config.reAnnounceKnownContexts;\n        this._gw3Session = this._connection.domain(\"global\", [\n            GW_MESSAGE_CONTEXT_CREATED,\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\n            GW_MESSAGE_CONTEXT_DESTROYED,\n            GW_MESSAGE_CONTEXT_UPDATED,\n        ]);\n        this._gw3Session.disconnected(this.resetState.bind(this));\n        this._gw3Session.onJoined((wasReconnect) => {\n            if (!wasReconnect) {\n                return;\n            }\n            if (!this._reAnnounceKnownContexts) {\n                return this._connection.setLibReAnnounced({ name: \"contexts\" });\n            }\n            this.reInitiateState().then(() => this._connection.setLibReAnnounced({ name: \"contexts\" }));\n        });\n        this.subscribeToContextCreatedMessages();\n        this.subscribeToContextUpdatedMessages();\n        this.subscribeToContextDestroyedMessages();\n        this._connection.replayer?.drain(ContextMessageReplaySpec.name, (message) => {\n            const type = message.type;\n            if (!type) {\n                return;\n            }\n            if (type === GW_MESSAGE_CONTEXT_CREATED ||\n                type === GW_MESSAGE_CONTEXT_ADDED ||\n                type === GW_MESSAGE_ACTIVITY_CREATED) {\n                this.handleContextCreatedMessage(message);\n            }\n            else if (type === GW_MESSAGE_SUBSCRIBED_CONTEXT ||\n                type === GW_MESSAGE_CONTEXT_UPDATED ||\n                type === GW_MESSAGE_JOINED_ACTIVITY) {\n                this.handleContextUpdatedMessage(message);\n            }\n            else if (type === GW_MESSAGE_CONTEXT_DESTROYED ||\n                type === GW_MESSAGE_ACTIVITY_DESTROYED) {\n                this.handleContextDestroyedMessage(message);\n            }\n        });\n    }\n    dispose() {\n        for (const sub of this._gw3Subscriptions) {\n            this._connection.off(sub);\n        }\n        this._gw3Subscriptions.length = 0;\n        for (const contextName in this._contextNameToData) {\n            if (this._contextNameToId.hasOwnProperty(contextName)) {\n                delete this._contextNameToData[contextName];\n            }\n        }\n    }\n    createContext(name, data) {\n        if (name in this._creationPromises) {\n            return this._creationPromises[name];\n        }\n        this._creationPromises[name] =\n            this._gw3Session\n                .send({\n                type: GW_MESSAGE_CREATE_CONTEXT,\n                domain: \"global\",\n                name,\n                data,\n                lifetime: \"retained\",\n            })\n                .then((createContextMsg) => {\n                this._contextNameToId[name] = createContextMsg.context_id;\n                this._contextIdToName[createContextMsg.context_id] = name;\n                const contextData = this._contextNameToData[name] || new GW3ContextData(createContextMsg.context_id, name, true, undefined);\n                contextData.isAnnounced = true;\n                contextData.name = name;\n                contextData.contextId = createContextMsg.context_id;\n                contextData.context = createContextMsg.data || deepClone(data);\n                contextData.hasReceivedSnapshot = true;\n                this._contextNameToData[name] = contextData;\n                delete this._creationPromises[name];\n                return createContextMsg.context_id;\n            });\n        return this._creationPromises[name];\n    }\n    all() {\n        return Object.keys(this._contextNameToData)\n            .filter((name) => this._contextNameToData[name].isAnnounced);\n    }\n    async update(name, delta) {\n        if (delta) {\n            delta = deepClone(delta);\n        }\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            return this.createContext(name, delta);\n        }\n        let currentContext = contextData.context;\n        if (!contextData.hasCallbacks()) {\n            currentContext = await this.get(contextData.name);\n        }\n        const calculatedDelta = this.setPathSupported ?\n            this.calculateContextDeltaV2(currentContext, delta) :\n            this.calculateContextDeltaV1(currentContext, delta);\n        if (!Object.keys(calculatedDelta.added).length\n            && !Object.keys(calculatedDelta.updated).length\n            && !calculatedDelta.removed.length\n            && !calculatedDelta.commands?.length) {\n            return Promise.resolve();\n        }\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_UPDATE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n            delta: calculatedDelta,\n        }, {}, { skipPeerId: false })\n            .then((gwResponse) => {\n            this.handleUpdated(contextData, calculatedDelta, {\n                updaterId: gwResponse.peer_id\n            });\n        });\n    }\n    async set(name, data) {\n        if (data) {\n            data = deepClone(data);\n        }\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            return this.createContext(name, data);\n        }\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_UPDATE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n            delta: { reset: data },\n        }, {}, { skipPeerId: false })\n            .then((gwResponse) => {\n            this.handleUpdated(contextData, {\n                reset: data,\n                added: {},\n                removed: [],\n                updated: {}\n            }, {\n                updaterId: gwResponse.peer_id\n            });\n        });\n    }\n    setPath(name, path, value) {\n        if (!this.setPathSupported) {\n            return Promise.reject(\"glue.contexts.setPath operation is not supported, use Glue42 3.10 or later\");\n        }\n        return this.setPaths(name, [{ path, value }]);\n    }\n    async setPaths(name, pathValues) {\n        if (!this.setPathSupported) {\n            return Promise.reject(\"glue.contexts.setPaths operation is not supported, use Glue42 3.10 or later\");\n        }\n        if (pathValues) {\n            pathValues = deepClone(pathValues);\n        }\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            const obj = {};\n            for (const pathValue of pathValues) {\n                setValueToPath(obj, pathValue.value, pathValue.path);\n            }\n            return this.createContext(name, obj);\n        }\n        const commands = [];\n        for (const pathValue of pathValues) {\n            if (pathValue.value === null) {\n                commands.push({ type: \"remove\", path: pathValue.path });\n            }\n            else {\n                commands.push({ type: \"set\", path: pathValue.path, value: pathValue.value });\n            }\n        }\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_UPDATE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n            delta: { commands }\n        }, {}, { skipPeerId: false })\n            .then((gwResponse) => {\n            this.handleUpdated(contextData, {\n                added: {},\n                removed: [],\n                updated: {},\n                commands\n            }, {\n                updaterId: gwResponse.peer_id\n            });\n        });\n    }\n    async get(name) {\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            return Promise.resolve({});\n        }\n        if (contextData && (!contextData.hasCallbacks() || !contextData.hasReceivedSnapshot)) {\n            return new Promise((resolve) => {\n                this.subscribe(name, (data, _d, _r, un) => {\n                    this.unsubscribe(un);\n                    resolve(data);\n                });\n            });\n        }\n        const context = contextData?.context ?? {};\n        return Promise.resolve(deepClone(context));\n    }\n    async subscribe(name, callback, subscriptionKey) {\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const thisCallbackSubscriptionNumber = typeof subscriptionKey === \"undefined\" ? this._nextCallbackSubscriptionNumber : subscriptionKey;\n        if (typeof subscriptionKey === \"undefined\") {\n            this._nextCallbackSubscriptionNumber += 1;\n        }\n        if (this._contextsSubscriptionsCache.every((subscription) => subscription.subKey !== this._nextCallbackSubscriptionNumber)) {\n            this._contextsSubscriptionsCache.push({ contextName: name, subKey: thisCallbackSubscriptionNumber, callback });\n        }\n        let contextData = this._contextNameToData[name];\n        if (!contextData ||\n            !contextData.isAnnounced) {\n            contextData = contextData || new GW3ContextData(undefined, name, false, undefined);\n            this._contextNameToData[name] = contextData;\n            contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\n            return Promise.resolve(thisCallbackSubscriptionNumber);\n        }\n        const hadCallbacks = contextData.hasCallbacks();\n        contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\n        if (!hadCallbacks) {\n            if (!contextData.joinedActivity) {\n                if (contextData.context && contextData.sentExplicitSubscription) {\n                    if (contextData.hasReceivedSnapshot) {\n                        const clone = deepClone(contextData.context);\n                        callback(clone, clone, [], thisCallbackSubscriptionNumber);\n                    }\n                    return Promise.resolve(thisCallbackSubscriptionNumber);\n                }\n                return this.sendSubscribe(contextData)\n                    .then(() => thisCallbackSubscriptionNumber);\n            }\n            else {\n                if (contextData.hasReceivedSnapshot) {\n                    const clone = deepClone(contextData.context);\n                    callback(clone, clone, [], thisCallbackSubscriptionNumber);\n                }\n                return Promise.resolve(thisCallbackSubscriptionNumber);\n            }\n        }\n        else {\n            if (contextData.hasReceivedSnapshot) {\n                const clone = deepClone(contextData.context);\n                callback(clone, clone, [], thisCallbackSubscriptionNumber);\n            }\n            return Promise.resolve(thisCallbackSubscriptionNumber);\n        }\n    }\n    unsubscribe(subscriptionKey) {\n        this._contextsSubscriptionsCache = this._contextsSubscriptionsCache.filter((subscription) => subscription.subKey !== subscriptionKey);\n        for (const name of Object.keys(this._contextNameToData)) {\n            const contextData = this._contextNameToData[name];\n            if (!contextData) {\n                return;\n            }\n            const hadCallbacks = contextData.hasCallbacks();\n            delete contextData.updateCallbacks[subscriptionKey];\n            if (contextData.isAnnounced &&\n                hadCallbacks &&\n                !contextData.hasCallbacks() &&\n                contextData.sentExplicitSubscription) {\n                this.sendUnsubscribe(contextData).catch(() => { });\n            }\n            if (!contextData.isAnnounced &&\n                !contextData.hasCallbacks()) {\n                delete this._contextNameToData[name];\n            }\n        }\n    }\n    async destroy(name) {\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData) {\n            return Promise.reject(`context with ${name} does not exist`);\n        }\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_DESTROY_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n        }).then((_) => undefined);\n    }\n    handleUpdated(contextData, delta, extraData) {\n        const oldContext = contextData.context;\n        contextData.context = applyContextDelta(contextData.context, delta, this._logger);\n        contextData.hasReceivedSnapshot = true;\n        if (this._contextNameToData[contextData.name] === contextData &&\n            !deepEqual(oldContext, contextData.context)) {\n            this.invokeUpdateCallbacks(contextData, delta, extraData);\n        }\n    }\n    subscribeToContextCreatedMessages() {\n        const createdMessageTypes = [\n            GW_MESSAGE_CONTEXT_ADDED,\n            GW_MESSAGE_CONTEXT_CREATED,\n            GW_MESSAGE_ACTIVITY_CREATED,\n        ];\n        for (const createdMessageType of createdMessageTypes) {\n            const sub = this._connection.on(createdMessageType, this.handleContextCreatedMessage.bind(this));\n            this._gw3Subscriptions.push(sub);\n        }\n    }\n    handleContextCreatedMessage(contextCreatedMsg) {\n        const createdMessageType = contextCreatedMsg.type;\n        if (createdMessageType === GW_MESSAGE_ACTIVITY_CREATED) {\n            this._contextNameToId[contextCreatedMsg.activity_id] = contextCreatedMsg.context_id;\n            this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.activity_id;\n        }\n        else if (createdMessageType === GW_MESSAGE_CONTEXT_ADDED) {\n            this._contextNameToId[contextCreatedMsg.name] = contextCreatedMsg.context_id;\n            this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.name;\n        }\n        else ;\n        const name = this._contextIdToName[contextCreatedMsg.context_id];\n        if (!name) {\n            throw new Error(\"Received created event for context with unknown name: \" + contextCreatedMsg.context_id);\n        }\n        if (!this._contextNameToId[name]) {\n            throw new Error(\"Received created event for context with unknown id: \" + contextCreatedMsg.context_id);\n        }\n        let contextData = this._contextNameToData[name];\n        if (contextData) {\n            if (contextData.isAnnounced) {\n                return;\n            }\n            else {\n                if (!contextData.hasCallbacks()) {\n                    throw new Error(\"Assertion failure: contextData.hasCallbacks()\");\n                }\n                contextData.isAnnounced = true;\n                contextData.contextId = contextCreatedMsg.context_id;\n                contextData.activityId = contextCreatedMsg.activity_id;\n                if (!contextData.sentExplicitSubscription) {\n                    this.sendSubscribe(contextData);\n                }\n            }\n        }\n        else {\n            this._contextNameToData[name] = contextData =\n                new GW3ContextData(contextCreatedMsg.context_id, name, true, contextCreatedMsg.activity_id);\n            if (this._trackAllContexts) {\n                this.subscribe(name, () => { }).then((subKey) => this._systemContextsSubKey = subKey);\n            }\n        }\n    }\n    subscribeToContextUpdatedMessages() {\n        const updatedMessageTypes = [\n            GW_MESSAGE_CONTEXT_UPDATED,\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\n            GW_MESSAGE_JOINED_ACTIVITY,\n        ];\n        for (const updatedMessageType of updatedMessageTypes) {\n            const sub = this._connection.on(updatedMessageType, this.handleContextUpdatedMessage.bind(this));\n            this._gw3Subscriptions.push(sub);\n        }\n    }\n    handleContextUpdatedMessage(contextUpdatedMsg) {\n        const updatedMessageType = contextUpdatedMsg.type;\n        const contextId = contextUpdatedMsg.context_id;\n        let contextData = this._contextNameToData[this._contextIdToName[contextId]];\n        const justSeen = !contextData || !contextData.isAnnounced;\n        if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\n            if (!contextData) {\n                contextData =\n                    this._contextNameToData[contextUpdatedMsg.activity_id] ||\n                        new GW3ContextData(contextId, contextUpdatedMsg.activity_id, true, contextUpdatedMsg.activity_id);\n            }\n            this._contextNameToData[contextUpdatedMsg.activity_id] = contextData;\n            this._contextIdToName[contextId] = contextUpdatedMsg.activity_id;\n            this._contextNameToId[contextUpdatedMsg.activity_id] = contextId;\n            contextData.contextId = contextId;\n            contextData.isAnnounced = true;\n            contextData.activityId = contextUpdatedMsg.activity_id;\n            contextData.joinedActivity = true;\n        }\n        else {\n            if (!contextData || !contextData.isAnnounced) {\n                if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\n                    contextData = contextData || new GW3ContextData(contextId, contextUpdatedMsg.name, true, undefined);\n                    contextData.sentExplicitSubscription = true;\n                    this._contextNameToData[contextUpdatedMsg.name] = contextData;\n                    this._contextIdToName[contextId] = contextUpdatedMsg.name;\n                    this._contextNameToId[contextUpdatedMsg.name] = contextId;\n                }\n                else {\n                    this._logger.error(`Received 'update' for unknown context: ${contextId}`);\n                }\n                return;\n            }\n        }\n        const oldContext = contextData.context;\n        contextData.hasReceivedSnapshot = true;\n        if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\n            contextData.context = contextUpdatedMsg.data || {};\n        }\n        else if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\n            contextData.context = contextUpdatedMsg.context_snapshot || {};\n        }\n        else if (updatedMessageType === GW_MESSAGE_CONTEXT_UPDATED) {\n            contextData.context = applyContextDelta(contextData.context, contextUpdatedMsg.delta, this._logger);\n        }\n        else {\n            throw new Error(\"Unrecognized context update message \" + updatedMessageType);\n        }\n        if (justSeen ||\n            !deepEqual(contextData.context, oldContext) ||\n            updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\n            this.invokeUpdateCallbacks(contextData, contextUpdatedMsg.delta, { updaterId: contextUpdatedMsg.updater_id });\n        }\n    }\n    invokeUpdateCallbacks(contextData, delta, extraData) {\n        delta = delta || { added: {}, updated: {}, reset: {}, removed: [] };\n        if (delta.commands) {\n            delta.added = delta.updated = delta.reset = {};\n            delta.removed = [];\n            for (const command of delta.commands) {\n                if (command.type === \"remove\") {\n                    if (command.path.indexOf(\".\") === -1) {\n                        delta.removed.push(command.path);\n                    }\n                    setValueToPath(delta.updated, null, command.path);\n                }\n                else if (command.type === \"set\") {\n                    setValueToPath(delta.updated, command.value, command.path);\n                }\n            }\n        }\n        for (const updateCallbackIndex in contextData.updateCallbacks) {\n            if (contextData.updateCallbacks.hasOwnProperty(updateCallbackIndex)) {\n                try {\n                    const updateCallback = contextData.updateCallbacks[updateCallbackIndex];\n                    updateCallback(deepClone(contextData.context), deepClone(Object.assign({}, delta.added || {}, delta.updated || {}, delta.reset || {})), delta.removed, parseInt(updateCallbackIndex, 10), extraData);\n                }\n                catch (err) {\n                    this._logger.debug(\"callback error: \" + JSON.stringify(err));\n                }\n            }\n        }\n    }\n    subscribeToContextDestroyedMessages() {\n        const destroyedMessageTypes = [\n            GW_MESSAGE_CONTEXT_DESTROYED,\n            GW_MESSAGE_ACTIVITY_DESTROYED,\n        ];\n        for (const destroyedMessageType of destroyedMessageTypes) {\n            const sub = this._connection.on(destroyedMessageType, this.handleContextDestroyedMessage.bind(this));\n            this._gw3Subscriptions.push(sub);\n        }\n    }\n    handleContextDestroyedMessage(destroyedMsg) {\n        const destroyedMessageType = destroyedMsg.type;\n        let contextId;\n        let name;\n        if (destroyedMessageType === GW_MESSAGE_ACTIVITY_DESTROYED) {\n            name = destroyedMsg.activity_id;\n            contextId = this._contextNameToId[name];\n            if (!contextId) {\n                this._logger.error(`Received 'destroyed' for unknown activity: ${destroyedMsg.activity_id}`);\n                return;\n            }\n        }\n        else {\n            contextId = destroyedMsg.context_id;\n            name = this._contextIdToName[contextId];\n            if (!name) {\n                this._logger.error(`Received 'destroyed' for unknown context: ${destroyedMsg.context_id}`);\n                return;\n            }\n        }\n        delete this._contextIdToName[contextId];\n        delete this._contextNameToId[name];\n        const contextData = this._contextNameToData[name];\n        delete this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            this._logger.error(`Received 'destroyed' for unknown context: ${contextId}`);\n            return;\n        }\n    }\n    sendSubscribe(contextData) {\n        contextData.sentExplicitSubscription = true;\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_SUBSCRIBE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n        }).then((_) => undefined);\n    }\n    sendUnsubscribe(contextData) {\n        contextData.sentExplicitSubscription = false;\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n        }).then((_) => undefined);\n    }\n    calculateContextDeltaV1(from, to) {\n        const delta = { added: {}, updated: {}, removed: [], reset: undefined };\n        if (from) {\n            for (const x of Object.keys(from)) {\n                if (Object.keys(to).indexOf(x) !== -1\n                    && to[x] !== null\n                    && !deepEqual(from[x], to[x])) {\n                    delta.updated[x] = to[x];\n                }\n            }\n        }\n        for (const x of Object.keys(to)) {\n            if (!from || (Object.keys(from).indexOf(x) === -1)) {\n                if (to[x] !== null) {\n                    delta.added[x] = to[x];\n                }\n            }\n            else if (to[x] === null) {\n                delta.removed.push(x);\n            }\n        }\n        return delta;\n    }\n    calculateContextDeltaV2(from, to) {\n        const delta = { added: {}, updated: {}, removed: [], reset: undefined, commands: [] };\n        for (const x of Object.keys(to)) {\n            if (to[x] !== null) {\n                const fromX = from ? from[x] : null;\n                if (!deepEqual(fromX, to[x])) {\n                    delta.commands?.push({ type: \"set\", path: x, value: to[x] });\n                }\n            }\n            else {\n                delta.commands?.push({ type: \"remove\", path: x });\n            }\n        }\n        return delta;\n    }\n    resetState() {\n        for (const sub of this._gw3Subscriptions) {\n            this._connection.off(sub);\n        }\n        if (this._systemContextsSubKey) {\n            this.unsubscribe(this._systemContextsSubKey);\n            delete this._systemContextsSubKey;\n        }\n        this._gw3Subscriptions = [];\n        this._contextNameToId = {};\n        this._contextIdToName = {};\n        delete this._protocolVersion;\n        this._contextsTempCache = Object.keys(this._contextNameToData).reduce((cacheSoFar, ctxName) => {\n            cacheSoFar[ctxName] = this._contextNameToData[ctxName].context;\n            return cacheSoFar;\n        }, {});\n        this._contextNameToData = {};\n    }\n    async reInitiateState() {\n        this.subscribeToContextCreatedMessages();\n        this.subscribeToContextUpdatedMessages();\n        this.subscribeToContextDestroyedMessages();\n        this._connection.replayer?.drain(ContextMessageReplaySpec.name, (message) => {\n            const type = message.type;\n            if (!type) {\n                return;\n            }\n            if (type === GW_MESSAGE_CONTEXT_CREATED ||\n                type === GW_MESSAGE_CONTEXT_ADDED ||\n                type === GW_MESSAGE_ACTIVITY_CREATED) {\n                this.handleContextCreatedMessage(message);\n            }\n            else if (type === GW_MESSAGE_SUBSCRIBED_CONTEXT ||\n                type === GW_MESSAGE_CONTEXT_UPDATED ||\n                type === GW_MESSAGE_JOINED_ACTIVITY) {\n                this.handleContextUpdatedMessage(message);\n            }\n            else if (type === GW_MESSAGE_CONTEXT_DESTROYED ||\n                type === GW_MESSAGE_ACTIVITY_DESTROYED) {\n                this.handleContextDestroyedMessage(message);\n            }\n        });\n        await Promise.all(this._contextsSubscriptionsCache.map((subscription) => this.subscribe(subscription.contextName, subscription.callback, subscription.subKey)));\n        await this.flushQueue();\n        for (const ctxName in this._contextsTempCache) {\n            if (typeof this._contextsTempCache[ctxName] !== \"object\" || Object.keys(this._contextsTempCache[ctxName]).length === 0) {\n                continue;\n            }\n            const lastKnownData = this._contextsTempCache[ctxName];\n            this._logger.info(`Re-announcing known context: ${ctxName}`);\n            await this.flushQueue();\n            await this.update(ctxName, lastKnownData);\n        }\n        this._contextsTempCache = {};\n        this._logger.info(\"Contexts are re-announced\");\n    }\n    flushQueue() {\n        return new Promise((resolve) => setTimeout(() => resolve(), 0));\n    }\n}\n\nclass ContextsModule {\n    initTime;\n    initStartTime;\n    initEndTime;\n    _bridge;\n    constructor(config) {\n        this._bridge = new GW3Bridge(config);\n    }\n    all() {\n        return this._bridge.all();\n    }\n    update(name, data) {\n        this.checkName(name);\n        this.checkData(data);\n        return this._bridge.update(name, data);\n    }\n    set(name, data) {\n        this.checkName(name);\n        this.checkData(data);\n        return this._bridge.set(name, data);\n    }\n    setPath(name, path, data) {\n        this.checkName(name);\n        this.checkPath(path);\n        const isTopLevelPath = path === \"\";\n        if (isTopLevelPath) {\n            this.checkData(data);\n            return this.set(name, data);\n        }\n        return this._bridge.setPath(name, path, data);\n    }\n    setPaths(name, paths) {\n        this.checkName(name);\n        if (!Array.isArray(paths)) {\n            throw new Error(\"Please provide the paths as an array of PathValues!\");\n        }\n        for (const { path, value } of paths) {\n            this.checkPath(path);\n            const isTopLevelPath = path === \"\";\n            if (isTopLevelPath) {\n                this.checkData(value);\n            }\n        }\n        return this._bridge.setPaths(name, paths);\n    }\n    subscribe(name, callback) {\n        this.checkName(name);\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n        return this._bridge\n            .subscribe(name, (data, delta, removed, key, extraData) => callback(data, delta, removed, () => this._bridge.unsubscribe(key), extraData))\n            .then((key) => () => {\n            this._bridge.unsubscribe(key);\n        });\n    }\n    get(name) {\n        this.checkName(name);\n        return this._bridge.get(name);\n    }\n    ready() {\n        return Promise.resolve(this);\n    }\n    destroy(name) {\n        this.checkName(name);\n        return this._bridge.destroy(name);\n    }\n    get setPathSupported() {\n        return this._bridge.setPathSupported;\n    }\n    checkName(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n            throw new Error(\"Please provide the name as a non-empty string!\");\n        }\n    }\n    checkPath(path) {\n        if (typeof path !== \"string\") {\n            throw new Error(\"Please provide the path as a dot delimited string!\");\n        }\n    }\n    checkData(data) {\n        if (typeof data !== \"object\") {\n            throw new Error(\"Please provide the data as an object!\");\n        }\n    }\n}\n\nfunction promisify (promise, successCallback, errorCallback) {\n    if (typeof successCallback !== \"function\" && typeof errorCallback !== \"function\") {\n        return promise;\n    }\n    if (typeof successCallback !== \"function\") {\n        successCallback = () => { };\n    }\n    else if (typeof errorCallback !== \"function\") {\n        errorCallback = () => { };\n    }\n    return promise.then(successCallback, errorCallback);\n}\n\nfunction rejectAfter(ms = 0, promise, error) {\n    let timeout;\n    const clearTimeoutIfThere = () => {\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n    };\n    promise\n        .then(() => {\n        clearTimeoutIfThere();\n    })\n        .catch(() => {\n        clearTimeoutIfThere();\n    });\n    return new Promise((resolve, reject) => {\n        timeout = setTimeout(() => reject(error), ms);\n    });\n}\n\nvar InvokeStatus;\n(function (InvokeStatus) {\n    InvokeStatus[InvokeStatus[\"Success\"] = 0] = \"Success\";\n    InvokeStatus[InvokeStatus[\"Error\"] = 1] = \"Error\";\n})(InvokeStatus || (InvokeStatus = {}));\nclass Client {\n    protocol;\n    repo;\n    instance;\n    configuration;\n    constructor(protocol, repo, instance, configuration) {\n        this.protocol = protocol;\n        this.repo = repo;\n        this.instance = instance;\n        this.configuration = configuration;\n    }\n    subscribe(method, options, successCallback, errorCallback, existingSub) {\n        const callProtocolSubscribe = (targetServers, stream, successProxy, errorProxy) => {\n            options.methodResponseTimeout = options.methodResponseTimeout ?? options.waitTimeoutMs;\n            this.protocol.client.subscribe(stream, options, targetServers, successProxy, errorProxy, existingSub);\n        };\n        const promise = new Promise((resolve, reject) => {\n            const successProxy = (sub) => {\n                resolve(sub);\n            };\n            const errorProxy = (err) => {\n                reject(err);\n            };\n            if (!method) {\n                reject(`Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.`);\n                return;\n            }\n            let methodDef;\n            if (typeof method === \"string\") {\n                methodDef = { name: method };\n            }\n            else {\n                methodDef = method;\n            }\n            if (!methodDef.name) {\n                reject(`Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.`);\n                return;\n            }\n            if (options === undefined) {\n                options = {};\n            }\n            let target = options.target;\n            if (target === undefined) {\n                target = \"best\";\n            }\n            if (typeof target === \"string\" && target !== \"all\" && target !== \"best\") {\n                reject(new Error(`\"${target}\" is not a valid target. Valid targets are \"all\", \"best\", or an instance.`));\n                return;\n            }\n            if (options.methodResponseTimeout === undefined) {\n                options.methodResponseTimeout = options.method_response_timeout;\n                if (options.methodResponseTimeout === undefined) {\n                    options.methodResponseTimeout = this.configuration.methodResponseTimeout;\n                }\n            }\n            if (options.waitTimeoutMs === undefined) {\n                options.waitTimeoutMs = options.wait_for_method_timeout;\n                if (options.waitTimeoutMs === undefined) {\n                    options.waitTimeoutMs = this.configuration.waitTimeoutMs;\n                }\n            }\n            const delayStep = 500;\n            let delayTillNow = 0;\n            let currentServers = this.getServerMethodsByFilterAndTarget(methodDef, target);\n            if (currentServers.length > 0) {\n                callProtocolSubscribe(currentServers, currentServers[0].methods[0], successProxy, errorProxy);\n            }\n            else {\n                const retry = () => {\n                    if (!target || !(options.waitTimeoutMs)) {\n                        return;\n                    }\n                    delayTillNow += delayStep;\n                    currentServers = this.getServerMethodsByFilterAndTarget(methodDef, target);\n                    if (currentServers.length > 0) {\n                        const streamInfo = currentServers[0].methods[0];\n                        callProtocolSubscribe(currentServers, streamInfo, successProxy, errorProxy);\n                    }\n                    else if (delayTillNow >= options.waitTimeoutMs) {\n                        const def = typeof method === \"string\" ? { name: method } : method;\n                        callProtocolSubscribe(currentServers, def, successProxy, errorProxy);\n                    }\n                    else {\n                        setTimeout(retry, delayStep);\n                    }\n                };\n                setTimeout(retry, delayStep);\n            }\n        });\n        return promisify(promise, successCallback, errorCallback);\n    }\n    servers(methodFilter) {\n        const filterCopy = methodFilter === undefined\n            ? undefined\n            : { ...methodFilter };\n        return this.getServers(filterCopy).map((serverMethodMap) => {\n            return serverMethodMap.server.instance;\n        });\n    }\n    methods(methodFilter) {\n        if (typeof methodFilter === \"string\") {\n            methodFilter = { name: methodFilter };\n        }\n        else {\n            methodFilter = { ...methodFilter };\n        }\n        return this.getMethods(methodFilter);\n    }\n    methodsForInstance(instance) {\n        return this.getMethodsForInstance(instance);\n    }\n    methodAdded(callback) {\n        return this.repo.onMethodAdded(callback);\n    }\n    methodRemoved(callback) {\n        return this.repo.onMethodRemoved(callback);\n    }\n    serverAdded(callback) {\n        return this.repo.onServerAdded(callback);\n    }\n    serverRemoved(callback) {\n        return this.repo.onServerRemoved((server, reason) => {\n            callback(server, reason);\n        });\n    }\n    serverMethodAdded(callback) {\n        return this.repo.onServerMethodAdded((server, method) => {\n            callback({ server, method });\n        });\n    }\n    serverMethodRemoved(callback) {\n        return this.repo.onServerMethodRemoved((server, method) => {\n            callback({ server, method });\n        });\n    }\n    async invoke(methodFilter, argumentObj, target, additionalOptions, success, error) {\n        const getInvokePromise = async () => {\n            let methodDefinition;\n            if (typeof methodFilter === \"string\") {\n                methodDefinition = { name: methodFilter };\n            }\n            else {\n                methodDefinition = { ...methodFilter };\n            }\n            if (!methodDefinition.name) {\n                return Promise.reject(`Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.`);\n            }\n            if (!argumentObj) {\n                argumentObj = {};\n            }\n            if (!target) {\n                target = \"best\";\n            }\n            if (typeof target === \"string\" && target !== \"all\" && target !== \"best\" && target !== \"skipMine\") {\n                return Promise.reject(new Error(`\"${target}\" is not a valid target. Valid targets are \"all\" and \"best\".`));\n            }\n            if (!additionalOptions) {\n                additionalOptions = {};\n            }\n            if (additionalOptions.methodResponseTimeoutMs === undefined) {\n                additionalOptions.methodResponseTimeoutMs = additionalOptions.method_response_timeout;\n                if (additionalOptions.methodResponseTimeoutMs === undefined) {\n                    additionalOptions.methodResponseTimeoutMs = this.configuration.methodResponseTimeout;\n                }\n            }\n            if (additionalOptions.waitTimeoutMs === undefined) {\n                additionalOptions.waitTimeoutMs = additionalOptions.wait_for_method_timeout;\n                if (additionalOptions.waitTimeoutMs === undefined) {\n                    additionalOptions.waitTimeoutMs = this.configuration.waitTimeoutMs;\n                }\n            }\n            if (additionalOptions.waitTimeoutMs !== undefined && typeof additionalOptions.waitTimeoutMs !== \"number\") {\n                return Promise.reject(new Error(`\"${additionalOptions.waitTimeoutMs}\" is not a valid number for \"waitTimeoutMs\" `));\n            }\n            if (typeof argumentObj !== \"object\") {\n                return Promise.reject(new Error(`The method arguments must be an object. method: ${methodDefinition.name}`));\n            }\n            let serversMethodMap = this.getServerMethodsByFilterAndTarget(methodDefinition, target);\n            if (serversMethodMap.length === 0) {\n                try {\n                    serversMethodMap = await this.tryToAwaitForMethods(methodDefinition, target, additionalOptions);\n                }\n                catch (err) {\n                    const method = {\n                        ...methodDefinition,\n                        getServers: () => [],\n                        supportsStreaming: false,\n                        objectTypes: methodDefinition.objectTypes ?? [],\n                        flags: methodDefinition.flags?.metadata ?? {}\n                    };\n                    const errorObj = {\n                        method,\n                        called_with: argumentObj,\n                        message: `Can not find a method matching ${JSON.stringify(methodFilter)} with server filter ${JSON.stringify(target)}`,\n                        executed_by: undefined,\n                        returned: undefined,\n                        status: undefined,\n                    };\n                    return Promise.reject(errorObj);\n                }\n            }\n            const timeout = additionalOptions.methodResponseTimeoutMs;\n            const additionalOptionsCopy = additionalOptions;\n            const invokePromises = serversMethodMap.map((serversMethodPair) => {\n                const invId = nanoid(10);\n                const method = serversMethodPair.methods[0];\n                const server = serversMethodPair.server;\n                const invokePromise = this.protocol.client.invoke(invId, method, argumentObj, server, additionalOptionsCopy);\n                return Promise.race([\n                    invokePromise,\n                    rejectAfter(timeout, invokePromise, {\n                        invocationId: invId,\n                        message: `Invocation timeout (${timeout} ms) reached for method name: ${method?.name}, target instance: ${JSON.stringify(server.instance)}, options: ${JSON.stringify(additionalOptionsCopy)}`,\n                        status: InvokeStatus.Error,\n                    })\n                ]);\n            });\n            const invocationMessages = await Promise.all(invokePromises);\n            const results = this.getInvocationResultObj(invocationMessages, methodDefinition, argumentObj);\n            const allRejected = invocationMessages.every((result) => result.status === InvokeStatus.Error);\n            if (allRejected) {\n                return Promise.reject(results);\n            }\n            return results;\n        };\n        return promisify(getInvokePromise(), success, error);\n    }\n    getInvocationResultObj(invocationResults, method, calledWith) {\n        const all_return_values = invocationResults\n            .filter((invokeMessage) => invokeMessage.status === InvokeStatus.Success)\n            .reduce((allValues, currentValue) => {\n            allValues = [\n                ...allValues,\n                {\n                    executed_by: currentValue.instance,\n                    returned: currentValue.result,\n                    called_with: calledWith,\n                    method,\n                    message: currentValue.message,\n                    status: currentValue.status,\n                }\n            ];\n            return allValues;\n        }, []);\n        const all_errors = invocationResults\n            .filter((invokeMessage) => invokeMessage.status === InvokeStatus.Error)\n            .reduce((allErrors, currError) => {\n            allErrors = [\n                ...allErrors,\n                {\n                    executed_by: currError.instance,\n                    called_with: calledWith,\n                    name: method.name,\n                    message: currError.message,\n                }\n            ];\n            return allErrors;\n        }, []);\n        const invResult = invocationResults[0];\n        const result = {\n            method,\n            called_with: calledWith,\n            returned: invResult.result,\n            executed_by: invResult.instance,\n            all_return_values,\n            all_errors,\n            message: invResult.message,\n            status: invResult.status\n        };\n        return result;\n    }\n    tryToAwaitForMethods(methodDefinition, target, additionalOptions) {\n        return new Promise((resolve, reject) => {\n            if (additionalOptions.waitTimeoutMs === 0) {\n                reject();\n                return;\n            }\n            const delayStep = 500;\n            let delayTillNow = 0;\n            const retry = () => {\n                delayTillNow += delayStep;\n                const serversMethodMap = this.getServerMethodsByFilterAndTarget(methodDefinition, target);\n                if (serversMethodMap.length > 0) {\n                    clearInterval(interval);\n                    resolve(serversMethodMap);\n                }\n                else if (delayTillNow >= (additionalOptions.waitTimeoutMs || 10000)) {\n                    clearInterval(interval);\n                    reject();\n                    return;\n                }\n            };\n            const interval = setInterval(retry, delayStep);\n        });\n    }\n    filterByTarget(target, serverMethodMap) {\n        if (typeof target === \"string\") {\n            if (target === \"all\") {\n                return [...serverMethodMap];\n            }\n            else if (target === \"best\") {\n                const localMachine = serverMethodMap\n                    .find((s) => s.server.instance.isLocal);\n                if (localMachine) {\n                    return [localMachine];\n                }\n                if (serverMethodMap[0] !== undefined) {\n                    return [serverMethodMap[0]];\n                }\n            }\n            else if (target === \"skipMine\") {\n                return serverMethodMap.filter(({ server }) => server.instance.peerId !== this.instance.peerId);\n            }\n        }\n        else {\n            let targetArray;\n            if (!Array.isArray(target)) {\n                targetArray = [target];\n            }\n            else {\n                targetArray = target;\n            }\n            const allServersMatching = targetArray.reduce((matches, filter) => {\n                const myMatches = serverMethodMap.filter((serverMethodPair) => {\n                    return this.instanceMatch(filter, serverMethodPair.server.instance);\n                });\n                return matches.concat(myMatches);\n            }, []);\n            return allServersMatching;\n        }\n        return [];\n    }\n    instanceMatch(instanceFilter, instanceDefinition) {\n        return this.containsProps(instanceFilter, instanceDefinition);\n    }\n    methodMatch(methodFilter, methodDefinition) {\n        return this.containsProps(methodFilter, methodDefinition);\n    }\n    containsProps(filter, repoMethod) {\n        const filterProps = Object.keys(filter)\n            .filter((prop) => {\n            return filter[prop] !== undefined\n                && filter[prop] !== null\n                && typeof filter[prop] !== \"function\"\n                && prop !== \"object_types\"\n                && prop !== \"display_name\"\n                && prop !== \"id\"\n                && prop !== \"gatewayId\"\n                && prop !== \"identifier\"\n                && prop[0] !== \"_\";\n        });\n        return filterProps.every((prop) => {\n            let isMatch;\n            const filterValue = filter[prop];\n            const repoMethodValue = repoMethod[prop];\n            switch (prop) {\n                case \"objectTypes\":\n                    isMatch = (filterValue || []).every((filterValueEl) => {\n                        return (repoMethodValue || []).includes(filterValueEl);\n                    });\n                    break;\n                case \"flags\":\n                    isMatch = isSubset(repoMethodValue || {}, filterValue || {});\n                    break;\n                default:\n                    isMatch = String(filterValue).toLowerCase() === String(repoMethodValue).toLowerCase();\n            }\n            return isMatch;\n        });\n    }\n    getMethods(methodFilter) {\n        if (methodFilter === undefined) {\n            return this.repo.getMethods();\n        }\n        const methods = this.repo.getMethods().filter((method) => {\n            return this.methodMatch(methodFilter, method);\n        });\n        return methods;\n    }\n    getMethodsForInstance(instanceFilter) {\n        const allServers = this.repo.getServers();\n        const matchingServers = allServers.filter((server) => {\n            return this.instanceMatch(instanceFilter, server.instance);\n        });\n        if (matchingServers.length === 0) {\n            return [];\n        }\n        let resultMethodsObject = {};\n        if (matchingServers.length === 1) {\n            resultMethodsObject = matchingServers[0].methods;\n        }\n        else {\n            matchingServers.forEach((server) => {\n                Object.keys(server.methods).forEach((methodKey) => {\n                    const method = server.methods[methodKey];\n                    resultMethodsObject[method.identifier] = method;\n                });\n            });\n        }\n        return Object.keys(resultMethodsObject)\n            .map((key) => {\n            return resultMethodsObject[key];\n        });\n    }\n    getServers(methodFilter) {\n        const servers = this.repo.getServers();\n        if (methodFilter === undefined) {\n            return servers.map((server) => {\n                return { server, methods: [] };\n            });\n        }\n        return servers.reduce((prev, current) => {\n            const methodsForServer = Object.values(current.methods);\n            const matchingMethods = methodsForServer.filter((method) => {\n                return this.methodMatch(methodFilter, method);\n            });\n            if (matchingMethods.length > 0) {\n                prev.push({ server: current, methods: matchingMethods });\n            }\n            return prev;\n        }, []);\n    }\n    getServerMethodsByFilterAndTarget(methodFilter, target) {\n        const serversMethodMap = this.getServers(methodFilter);\n        return this.filterByTarget(target, serversMethodMap);\n    }\n}\n\nclass ServerSubscription {\n    protocol;\n    repoMethod;\n    subscription;\n    constructor(protocol, repoMethod, subscription) {\n        this.protocol = protocol;\n        this.repoMethod = repoMethod;\n        this.subscription = subscription;\n    }\n    get stream() {\n        if (!this.repoMethod.stream) {\n            throw new Error(\"no stream\");\n        }\n        return this.repoMethod.stream;\n    }\n    get arguments() { return this.subscription.arguments || {}; }\n    get branchKey() { return this.subscription.branchKey; }\n    get instance() {\n        if (!this.subscription.instance) {\n            throw new Error(\"no instance\");\n        }\n        return this.subscription.instance;\n    }\n    close() {\n        this.protocol.server.closeSingleSubscription(this.repoMethod, this.subscription);\n    }\n    push(data) {\n        this.protocol.server.pushDataToSingle(this.repoMethod, this.subscription, data);\n    }\n}\n\nclass Request {\n    protocol;\n    repoMethod;\n    requestContext;\n    arguments;\n    instance;\n    constructor(protocol, repoMethod, requestContext) {\n        this.protocol = protocol;\n        this.repoMethod = repoMethod;\n        this.requestContext = requestContext;\n        this.arguments = requestContext.arguments;\n        this.instance = requestContext.instance;\n    }\n    accept() {\n        this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, \"\");\n    }\n    acceptOnBranch(branch) {\n        this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, branch);\n    }\n    reject(reason) {\n        this.protocol.server.rejectRequest(this.requestContext, this.repoMethod, reason);\n    }\n}\n\nlet ServerStreaming$1 = class ServerStreaming {\n    protocol;\n    server;\n    constructor(protocol, server) {\n        this.protocol = protocol;\n        this.server = server;\n        protocol.server.onSubRequest((rc, rm) => this.handleSubRequest(rc, rm));\n        protocol.server.onSubAdded((sub, rm) => this.handleSubAdded(sub, rm));\n        protocol.server.onSubRemoved((sub, rm) => this.handleSubRemoved(sub, rm));\n    }\n    handleSubRequest(requestContext, repoMethod) {\n        if (!(repoMethod &&\n            repoMethod.streamCallbacks &&\n            typeof repoMethod.streamCallbacks.subscriptionRequestHandler === \"function\")) {\n            return;\n        }\n        const request = new Request(this.protocol, repoMethod, requestContext);\n        repoMethod.streamCallbacks.subscriptionRequestHandler(request);\n    }\n    handleSubAdded(subscription, repoMethod) {\n        if (!(repoMethod &&\n            repoMethod.streamCallbacks &&\n            typeof repoMethod.streamCallbacks.subscriptionAddedHandler === \"function\")) {\n            return;\n        }\n        const sub = new ServerSubscription(this.protocol, repoMethod, subscription);\n        repoMethod.streamCallbacks.subscriptionAddedHandler(sub);\n    }\n    handleSubRemoved(subscription, repoMethod) {\n        if (!(repoMethod &&\n            repoMethod.streamCallbacks &&\n            typeof repoMethod.streamCallbacks.subscriptionRemovedHandler === \"function\")) {\n            return;\n        }\n        const sub = new ServerSubscription(this.protocol, repoMethod, subscription);\n        repoMethod.streamCallbacks.subscriptionRemovedHandler(sub);\n    }\n};\n\nclass ServerBranch {\n    key;\n    protocol;\n    repoMethod;\n    constructor(key, protocol, repoMethod) {\n        this.key = key;\n        this.protocol = protocol;\n        this.repoMethod = repoMethod;\n    }\n    subscriptions() {\n        const subList = this.protocol.server.getSubscriptionList(this.repoMethod, this.key);\n        return subList.map((sub) => {\n            return new ServerSubscription(this.protocol, this.repoMethod, sub);\n        });\n    }\n    close() {\n        this.protocol.server.closeAllSubscriptions(this.repoMethod, this.key);\n    }\n    push(data) {\n        this.protocol.server.pushData(this.repoMethod, data, [this.key]);\n    }\n}\n\nclass ServerStream {\n    _protocol;\n    _repoMethod;\n    _server;\n    name;\n    constructor(_protocol, _repoMethod, _server) {\n        this._protocol = _protocol;\n        this._repoMethod = _repoMethod;\n        this._server = _server;\n        this.name = this._repoMethod.definition.name;\n    }\n    branches(key) {\n        const bList = this._protocol.server.getBranchList(this._repoMethod);\n        if (key) {\n            if (bList.indexOf(key) > -1) {\n                return new ServerBranch(key, this._protocol, this._repoMethod);\n            }\n            return undefined;\n        }\n        else {\n            return bList.map((branchKey) => {\n                return new ServerBranch(branchKey, this._protocol, this._repoMethod);\n            });\n        }\n    }\n    branch(key) {\n        return this.branches(key);\n    }\n    subscriptions() {\n        const subList = this._protocol.server.getSubscriptionList(this._repoMethod);\n        return subList.map((sub) => {\n            return new ServerSubscription(this._protocol, this._repoMethod, sub);\n        });\n    }\n    get definition() {\n        const def2 = this._repoMethod.definition;\n        return {\n            accepts: def2.accepts,\n            description: def2.description,\n            displayName: def2.displayName,\n            name: def2.name,\n            objectTypes: def2.objectTypes,\n            returns: def2.returns,\n            supportsStreaming: def2.supportsStreaming,\n            flags: def2.flags?.metadata,\n        };\n    }\n    close() {\n        this._protocol.server.closeAllSubscriptions(this._repoMethod);\n        this._server.unregister(this._repoMethod.definition, true);\n    }\n    push(data, branches) {\n        if (typeof branches !== \"string\" && !Array.isArray(branches) && branches !== undefined) {\n            throw new Error(\"invalid branches should be string or string array\");\n        }\n        if (typeof data !== \"object\") {\n            throw new Error(\"Invalid arguments. Data must be an object.\");\n        }\n        this._protocol.server.pushData(this._repoMethod, data, branches);\n    }\n    updateRepoMethod(repoMethod) {\n        this._repoMethod = repoMethod;\n    }\n}\n\nclass Server {\n    protocol;\n    serverRepository;\n    streaming;\n    invocations = 0;\n    currentlyUnregistering = {};\n    constructor(protocol, serverRepository) {\n        this.protocol = protocol;\n        this.serverRepository = serverRepository;\n        this.streaming = new ServerStreaming$1(protocol, this);\n        this.protocol.server.onInvoked(this.onMethodInvoked.bind(this));\n    }\n    createStream(streamDef, callbacks, successCallback, errorCallback, existingStream) {\n        const promise = new Promise((resolve, reject) => {\n            if (!streamDef) {\n                reject(\"The stream name must be unique! Please, provide either a unique string for a stream name to “glue.interop.createStream()” or a “methodDefinition” object with a unique “name” property for the stream.\");\n                return;\n            }\n            let streamMethodDefinition;\n            if (typeof streamDef === \"string\") {\n                streamMethodDefinition = { name: \"\" + streamDef };\n            }\n            else {\n                streamMethodDefinition = { ...streamDef };\n            }\n            if (!streamMethodDefinition.name) {\n                return reject(`The “name” property is required for the “streamDefinition” object and must be unique. Stream definition: ${JSON.stringify(streamMethodDefinition)}`);\n            }\n            const nameAlreadyExists = this.serverRepository.getList()\n                .some((serverMethod) => serverMethod.definition.name === streamMethodDefinition.name);\n            if (nameAlreadyExists) {\n                return reject(`A stream with the name \"${streamMethodDefinition.name}\" already exists! Please, provide a unique name for the stream.`);\n            }\n            streamMethodDefinition.supportsStreaming = true;\n            if (!callbacks) {\n                callbacks = {};\n            }\n            if (typeof callbacks.subscriptionRequestHandler !== \"function\") {\n                callbacks.subscriptionRequestHandler = (request) => {\n                    request.accept();\n                };\n            }\n            const repoMethod = this.serverRepository.add({\n                definition: streamMethodDefinition,\n                streamCallbacks: callbacks,\n                protocolState: {},\n            });\n            this.protocol.server.createStream(repoMethod)\n                .then(() => {\n                let streamUserObject;\n                if (existingStream) {\n                    streamUserObject = existingStream;\n                    existingStream.updateRepoMethod(repoMethod);\n                }\n                else {\n                    streamUserObject = new ServerStream(this.protocol, repoMethod, this);\n                }\n                repoMethod.stream = streamUserObject;\n                resolve(streamUserObject);\n            })\n                .catch((err) => {\n                if (repoMethod.repoId) {\n                    this.serverRepository.remove(repoMethod.repoId);\n                }\n                reject(err);\n            });\n        });\n        return promisify(promise, successCallback, errorCallback);\n    }\n    register(methodDefinition, callback) {\n        if (!methodDefinition) {\n            return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.\");\n        }\n        if (typeof callback !== \"function\") {\n            return Promise.reject(`The second parameter must be a callback function. Method: ${typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name}`);\n        }\n        const wrappedCallbackFunction = async (context, resultCallback) => {\n            try {\n                const result = callback(context.args, context.instance);\n                if (result && typeof result.then === \"function\") {\n                    const resultValue = await result;\n                    resultCallback(undefined, resultValue);\n                }\n                else {\n                    resultCallback(undefined, result);\n                }\n            }\n            catch (e) {\n                resultCallback(e ?? \"\", e ?? \"\");\n            }\n        };\n        wrappedCallbackFunction.userCallback = callback;\n        return this.registerCore(methodDefinition, wrappedCallbackFunction);\n    }\n    registerAsync(methodDefinition, callback) {\n        if (!methodDefinition) {\n            return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.\");\n        }\n        if (typeof callback !== \"function\") {\n            return Promise.reject(`The second parameter must be a callback function. Method: ${typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name}`);\n        }\n        const wrappedCallback = async (context, resultCallback) => {\n            try {\n                let resultCalled = false;\n                const success = (result) => {\n                    if (!resultCalled) {\n                        resultCallback(undefined, result);\n                    }\n                    resultCalled = true;\n                };\n                const error = (e) => {\n                    if (!resultCalled) {\n                        if (!e) {\n                            e = \"\";\n                        }\n                        resultCallback(e, e);\n                    }\n                    resultCalled = true;\n                };\n                const methodResult = callback(context.args, context.instance, success, error);\n                if (methodResult && typeof methodResult.then === \"function\") {\n                    methodResult\n                        .then(success)\n                        .catch(error);\n                }\n            }\n            catch (e) {\n                resultCallback(e, undefined);\n            }\n        };\n        wrappedCallback.userCallbackAsync = callback;\n        return this.registerCore(methodDefinition, wrappedCallback);\n    }\n    async unregister(methodFilter, forStream = false) {\n        if (methodFilter === undefined) {\n            return Promise.reject(\"Please, provide either a unique string for a name or an object containing a “name” property.\");\n        }\n        if (typeof methodFilter === \"function\") {\n            await this.unregisterWithPredicate(methodFilter, forStream);\n            return;\n        }\n        let methodDefinition;\n        if (typeof methodFilter === \"string\") {\n            methodDefinition = { name: methodFilter };\n        }\n        else {\n            methodDefinition = methodFilter;\n        }\n        if (methodDefinition.name === undefined) {\n            return Promise.reject(\"Method name is required. Cannot find a method if the method name is undefined!\");\n        }\n        const methodToBeRemoved = this.serverRepository.getList().find((serverMethod) => {\n            return serverMethod.definition.name === methodDefinition.name\n                && (serverMethod.definition.supportsStreaming || false) === forStream;\n        });\n        if (!methodToBeRemoved) {\n            return Promise.reject(`Method with a name \"${methodDefinition.name}\" does not exist or is not registered by your application!`);\n        }\n        await this.removeMethodsOrStreams([methodToBeRemoved]);\n    }\n    async unregisterWithPredicate(filterPredicate, forStream) {\n        const methodsOrStreamsToRemove = this.serverRepository.getList()\n            .filter((sm) => filterPredicate(sm.definition))\n            .filter((serverMethod) => (serverMethod.definition.supportsStreaming || false) === forStream);\n        if (!methodsOrStreamsToRemove || methodsOrStreamsToRemove.length === 0) {\n            return Promise.reject(`Could not find a ${forStream ? \"stream\" : \"method\"} matching the specified condition!`);\n        }\n        await this.removeMethodsOrStreams(methodsOrStreamsToRemove);\n    }\n    removeMethodsOrStreams(methodsToRemove) {\n        const methodUnregPromises = [];\n        methodsToRemove.forEach((method) => {\n            const promise = this.protocol.server.unregister(method)\n                .then(() => {\n                if (method.repoId) {\n                    this.serverRepository.remove(method.repoId);\n                }\n            });\n            methodUnregPromises.push(promise);\n            this.addAsCurrentlyUnregistering(method.definition.name, promise);\n        });\n        return Promise.all(methodUnregPromises);\n    }\n    async addAsCurrentlyUnregistering(methodName, promise) {\n        const timeout = new Promise((resolve) => setTimeout(resolve, 5000));\n        this.currentlyUnregistering[methodName] = Promise.race([promise, timeout]).then(() => {\n            delete this.currentlyUnregistering[methodName];\n        });\n    }\n    async registerCore(method, theFunction) {\n        let methodDefinition;\n        if (typeof method === \"string\") {\n            methodDefinition = { name: \"\" + method };\n        }\n        else {\n            methodDefinition = { ...method };\n        }\n        if (!methodDefinition.name) {\n            return Promise.reject(`Please, provide a (unique) string value for the “name” property in the “methodDefinition” object: ${JSON.stringify(method)}`);\n        }\n        const unregisterInProgress = this.currentlyUnregistering[methodDefinition.name];\n        if (typeof unregisterInProgress !== \"undefined\") {\n            await unregisterInProgress;\n        }\n        const nameAlreadyExists = this.serverRepository.getList()\n            .some((serverMethod) => serverMethod.definition.name === methodDefinition.name);\n        if (nameAlreadyExists) {\n            return Promise.reject(`A method with the name \"${methodDefinition.name}\" already exists! Please, provide a unique name for the method.`);\n        }\n        if (methodDefinition.supportsStreaming) {\n            return Promise.reject(`When you create methods with “glue.interop.register()” or “glue.interop.registerAsync()” the property “supportsStreaming” cannot be “true”. If you want “${methodDefinition.name}” to be a stream, please use the “glue.interop.createStream()” method.`);\n        }\n        const repoMethod = this.serverRepository.add({\n            definition: methodDefinition,\n            theFunction,\n            protocolState: {},\n        });\n        return this.protocol.server.register(repoMethod)\n            .catch((err) => {\n            if (repoMethod?.repoId) {\n                this.serverRepository.remove(repoMethod.repoId);\n            }\n            throw err;\n        });\n    }\n    onMethodInvoked(methodToExecute, invocationId, invocationArgs) {\n        if (!methodToExecute || !methodToExecute.theFunction) {\n            return;\n        }\n        methodToExecute.theFunction(invocationArgs, (err, result) => {\n            if (err !== undefined && err !== null) {\n                if (err.message && typeof err.message === \"string\") {\n                    err = err.message;\n                }\n                else if (typeof err !== \"string\") {\n                    try {\n                        err = JSON.stringify(err);\n                    }\n                    catch (unStrException) {\n                        err = `un-stringifyable error in onMethodInvoked! Top level prop names: ${Object.keys(err)}`;\n                    }\n                }\n            }\n            if (!result) {\n                result = {};\n            }\n            else if (typeof result !== \"object\" || Array.isArray(result)) {\n                result = { _value: result };\n            }\n            this.protocol.server.methodInvocationResult(methodToExecute, invocationId, err, result);\n        });\n    }\n}\n\nclass InstanceWrapper {\n    wrapped = {};\n    constructor(API, instance, connection) {\n        this.wrapped.getMethods = function () {\n            return API.methodsForInstance(this);\n        };\n        this.wrapped.getStreams = function () {\n            return API.methodsForInstance(this).filter((m) => m.supportsStreaming);\n        };\n        if (instance) {\n            this.refreshWrappedObject(instance);\n        }\n        if (connection) {\n            connection.loggedIn(() => {\n                this.refresh(connection);\n            });\n            this.refresh(connection);\n        }\n    }\n    unwrap() {\n        return this.wrapped;\n    }\n    refresh(connection) {\n        if (!connection) {\n            return;\n        }\n        const resolvedIdentity = connection?.resolvedIdentity;\n        const instance = Object.assign({}, resolvedIdentity ?? {}, { peerId: connection?.peerId });\n        this.refreshWrappedObject(instance);\n    }\n    refreshWrappedObject(resolvedIdentity) {\n        Object.keys(resolvedIdentity).forEach((key) => {\n            this.wrapped[key] = resolvedIdentity[key];\n        });\n        this.wrapped.user = resolvedIdentity.user;\n        this.wrapped.instance = resolvedIdentity.instance;\n        this.wrapped.application = resolvedIdentity.application ?? nanoid(10);\n        this.wrapped.applicationName = resolvedIdentity.applicationName;\n        this.wrapped.pid = resolvedIdentity.pid ?? resolvedIdentity.process ?? Math.floor(Math.random() * 10000000000);\n        this.wrapped.machine = resolvedIdentity.machine;\n        this.wrapped.environment = resolvedIdentity.environment;\n        this.wrapped.region = resolvedIdentity.region;\n        this.wrapped.windowId = resolvedIdentity.windowId;\n        this.wrapped.isLocal = resolvedIdentity.isLocal ?? true;\n        this.wrapped.api = resolvedIdentity.api;\n        this.wrapped.service = resolvedIdentity.service;\n        this.wrapped.peerId = resolvedIdentity.peerId;\n    }\n}\n\nconst hideMethodSystemFlags = (method) => {\n    return {\n        ...method,\n        flags: method.flags.metadata || {}\n    };\n};\nclass ClientRepository {\n    logger;\n    API;\n    servers = {};\n    myServer;\n    methodsCount = {};\n    callbacks = CallbackRegistryFactory();\n    constructor(logger, API) {\n        this.logger = logger;\n        this.API = API;\n        const peerId = this.API.instance.peerId;\n        this.myServer = {\n            id: peerId,\n            methods: {},\n            instance: this.API.instance,\n            wrapper: this.API.unwrappedInstance,\n        };\n        this.servers[peerId] = this.myServer;\n    }\n    addServer(info, serverId) {\n        this.logger.debug(`adding server ${serverId}`);\n        const current = this.servers[serverId];\n        if (current) {\n            return current.id;\n        }\n        const wrapper = new InstanceWrapper(this.API, info);\n        const serverEntry = {\n            id: serverId,\n            methods: {},\n            instance: wrapper.unwrap(),\n            wrapper,\n        };\n        this.servers[serverId] = serverEntry;\n        this.callbacks.execute(\"onServerAdded\", serverEntry.instance);\n        return serverId;\n    }\n    removeServerById(id, reason) {\n        const server = this.servers[id];\n        if (!server) {\n            this.logger.warn(`not aware of server ${id}, my state ${JSON.stringify(Object.keys(this.servers))}`);\n            return;\n        }\n        else {\n            this.logger.debug(`removing server ${id}`);\n        }\n        Object.keys(server.methods).forEach((methodId) => {\n            this.removeServerMethod(id, methodId);\n        });\n        delete this.servers[id];\n        this.callbacks.execute(\"onServerRemoved\", server.instance, reason);\n    }\n    addServerMethod(serverId, method) {\n        const server = this.servers[serverId];\n        if (!server) {\n            throw new Error(\"server does not exists\");\n        }\n        if (server.methods[method.id]) {\n            return;\n        }\n        const identifier = this.createMethodIdentifier(method);\n        const that = this;\n        const methodDefinition = {\n            identifier,\n            gatewayId: method.id,\n            name: method.name,\n            displayName: method.display_name,\n            description: method.description,\n            version: method.version,\n            objectTypes: method.object_types || [],\n            accepts: method.input_signature,\n            returns: method.result_signature,\n            supportsStreaming: typeof method.flags !== \"undefined\" ? method.flags.streaming : false,\n            flags: method.flags ?? {},\n            getServers: () => {\n                return that.getServersByMethod(identifier);\n            }\n        };\n        methodDefinition.object_types = methodDefinition.objectTypes;\n        methodDefinition.display_name = methodDefinition.displayName;\n        methodDefinition.version = methodDefinition.version;\n        server.methods[method.id] = methodDefinition;\n        const clientMethodDefinition = hideMethodSystemFlags(methodDefinition);\n        if (!this.methodsCount[identifier]) {\n            this.methodsCount[identifier] = 0;\n            this.callbacks.execute(\"onMethodAdded\", clientMethodDefinition);\n        }\n        this.methodsCount[identifier] = this.methodsCount[identifier] + 1;\n        this.callbacks.execute(\"onServerMethodAdded\", server.instance, clientMethodDefinition);\n        return methodDefinition;\n    }\n    removeServerMethod(serverId, methodId) {\n        const server = this.servers[serverId];\n        if (!server) {\n            throw new Error(\"server does not exists\");\n        }\n        const method = server.methods[methodId];\n        delete server.methods[methodId];\n        const clientMethodDefinition = hideMethodSystemFlags(method);\n        this.methodsCount[method.identifier] = this.methodsCount[method.identifier] - 1;\n        if (this.methodsCount[method.identifier] === 0) {\n            this.callbacks.execute(\"onMethodRemoved\", clientMethodDefinition);\n        }\n        this.callbacks.execute(\"onServerMethodRemoved\", server.instance, clientMethodDefinition);\n    }\n    getMethods() {\n        return this.extractMethodsFromServers(Object.values(this.servers)).map(hideMethodSystemFlags);\n    }\n    getServers() {\n        return Object.values(this.servers).map(this.hideServerMethodSystemFlags);\n    }\n    onServerAdded(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onServerAdded\", callback);\n        const serversWithMethodsToReplay = this.getServers().map((s) => s.instance);\n        return this.returnUnsubWithDelayedReplay(unsubscribeFunc, serversWithMethodsToReplay, callback);\n    }\n    onMethodAdded(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onMethodAdded\", callback);\n        const methodsToReplay = this.getMethods();\n        return this.returnUnsubWithDelayedReplay(unsubscribeFunc, methodsToReplay, callback);\n    }\n    onServerMethodAdded(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onServerMethodAdded\", callback);\n        let unsubCalled = false;\n        const servers = this.getServers();\n        setTimeout(() => {\n            servers.forEach((server) => {\n                const methods = server.methods;\n                Object.keys(methods).forEach((methodId) => {\n                    if (!unsubCalled) {\n                        callback(server.instance, methods[methodId]);\n                    }\n                });\n            });\n        }, 0);\n        return () => {\n            unsubCalled = true;\n            unsubscribeFunc();\n        };\n    }\n    onMethodRemoved(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onMethodRemoved\", callback);\n        return unsubscribeFunc;\n    }\n    onServerRemoved(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onServerRemoved\", callback);\n        return unsubscribeFunc;\n    }\n    onServerMethodRemoved(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onServerMethodRemoved\", callback);\n        return unsubscribeFunc;\n    }\n    getServerById(id) {\n        const server = this.servers[id];\n        if (!server) {\n            return undefined;\n        }\n        return this.hideServerMethodSystemFlags(this.servers[id]);\n    }\n    reset() {\n        Object.keys(this.servers).forEach((key) => {\n            this.removeServerById(key, \"reset\");\n        });\n        this.servers = {\n            [this.myServer.id]: this.myServer\n        };\n        this.methodsCount = {};\n    }\n    createMethodIdentifier(methodInfo) {\n        const accepts = methodInfo.input_signature ?? \"\";\n        const returns = methodInfo.result_signature ?? \"\";\n        return (methodInfo.name + accepts + returns).toLowerCase();\n    }\n    getServersByMethod(identifier) {\n        const allServers = [];\n        Object.values(this.servers).forEach((server) => {\n            Object.values(server.methods).forEach((method) => {\n                if (method.identifier === identifier) {\n                    allServers.push(server.instance);\n                }\n            });\n        });\n        return allServers;\n    }\n    returnUnsubWithDelayedReplay(unsubscribeFunc, collectionToReplay, callback) {\n        let unsubCalled = false;\n        setTimeout(() => {\n            collectionToReplay.forEach((item) => {\n                if (!unsubCalled) {\n                    callback(item);\n                }\n            });\n        }, 0);\n        return () => {\n            unsubCalled = true;\n            unsubscribeFunc();\n        };\n    }\n    hideServerMethodSystemFlags(server) {\n        const clientMethods = {};\n        Object.entries(server.methods).forEach(([name, method]) => {\n            clientMethods[name] = hideMethodSystemFlags(method);\n        });\n        return {\n            ...server,\n            methods: clientMethods\n        };\n    }\n    extractMethodsFromServers(servers) {\n        const methods = Object.values(servers).reduce((clientMethods, server) => {\n            return [...clientMethods, ...Object.values(server.methods)];\n        }, []);\n        return methods;\n    }\n}\n\nclass ServerRepository {\n    nextId = 0;\n    methods = [];\n    add(method) {\n        method.repoId = String(this.nextId);\n        this.nextId += 1;\n        this.methods.push(method);\n        return method;\n    }\n    remove(repoId) {\n        if (typeof repoId !== \"string\") {\n            return new TypeError(\"Expecting a string\");\n        }\n        this.methods = this.methods.filter((m) => {\n            return m.repoId !== repoId;\n        });\n    }\n    getById(id) {\n        if (typeof id !== \"string\") {\n            return undefined;\n        }\n        return this.methods.find((m) => {\n            return m.repoId === id;\n        });\n    }\n    getList() {\n        return this.methods.map((m) => m);\n    }\n    length() {\n        return this.methods.length;\n    }\n    reset() {\n        this.methods = [];\n    }\n}\n\nconst SUBSCRIPTION_REQUEST = \"onSubscriptionRequest\";\nconst SUBSCRIPTION_ADDED = \"onSubscriptionAdded\";\nconst SUBSCRIPTION_REMOVED = \"onSubscriptionRemoved\";\nclass ServerStreaming {\n    session;\n    repository;\n    serverRepository;\n    ERR_URI_SUBSCRIPTION_FAILED = \"com.tick42.agm.errors.subscription.failure\";\n    callbacks = CallbackRegistryFactory();\n    nextStreamId = 0;\n    constructor(session, repository, serverRepository) {\n        this.session = session;\n        this.repository = repository;\n        this.serverRepository = serverRepository;\n        session.on(\"add-interest\", (msg) => {\n            this.handleAddInterest(msg);\n        });\n        session.on(\"remove-interest\", (msg) => {\n            this.handleRemoveInterest(msg);\n        });\n    }\n    acceptRequestOnBranch(requestContext, streamingMethod, branch) {\n        if (typeof branch !== \"string\") {\n            branch = \"\";\n        }\n        if (typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\n            throw new TypeError(\"The streaming method is missing its subscriptions.\");\n        }\n        if (!Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\n            throw new TypeError(\"The streaming method is missing its branches.\");\n        }\n        const streamId = this.getStreamId(streamingMethod, branch);\n        const key = requestContext.msg.subscription_id;\n        const subscription = {\n            id: key,\n            arguments: requestContext.arguments,\n            instance: requestContext.instance,\n            branchKey: branch,\n            streamId,\n            subscribeMsg: requestContext.msg,\n        };\n        streamingMethod.protocolState.subscriptionsMap[key] = subscription;\n        this.session.sendFireAndForget({\n            type: \"accepted\",\n            subscription_id: key,\n            stream_id: streamId,\n        });\n        this.callbacks.execute(SUBSCRIPTION_ADDED, subscription, streamingMethod);\n    }\n    rejectRequest(requestContext, streamingMethod, reason) {\n        if (typeof reason !== \"string\") {\n            reason = \"\";\n        }\n        this.sendSubscriptionFailed(\"Subscription rejected by user. \" + reason, requestContext.msg.subscription_id);\n    }\n    pushData(streamingMethod, data, branches) {\n        if (typeof streamingMethod !== \"object\" || !Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\n            return;\n        }\n        if (typeof data !== \"object\") {\n            throw new Error(\"Invalid arguments. Data must be an object.\");\n        }\n        if (typeof branches === \"string\") {\n            branches = [branches];\n        }\n        else if (!Array.isArray(branches) || branches.length <= 0) {\n            branches = [];\n        }\n        const streamIdList = streamingMethod.protocolState.branchKeyToStreamIdMap\n            .filter((br) => {\n            if (!branches || branches.length === 0) {\n                return true;\n            }\n            return branches.indexOf(br.key) >= 0;\n        }).map((br) => {\n            return br.streamId;\n        });\n        streamIdList.forEach((streamId) => {\n            const publishMessage = {\n                type: \"publish\",\n                stream_id: streamId,\n                data,\n            };\n            this.session.sendFireAndForget(publishMessage);\n        });\n    }\n    pushDataToSingle(method, subscription, data) {\n        if (typeof data !== \"object\") {\n            throw new Error(\"Invalid arguments. Data must be an object.\");\n        }\n        const postMessage = {\n            type: \"post\",\n            subscription_id: subscription.id,\n            data,\n        };\n        this.session.sendFireAndForget(postMessage);\n    }\n    closeSingleSubscription(streamingMethod, subscription) {\n        if (streamingMethod.protocolState.subscriptionsMap) {\n            delete streamingMethod.protocolState.subscriptionsMap[subscription.id];\n        }\n        const dropSubscriptionMessage = {\n            type: \"drop-subscription\",\n            subscription_id: subscription.id,\n            reason: \"Server dropping a single subscription\",\n        };\n        this.session.sendFireAndForget(dropSubscriptionMessage);\n        subscription.instance;\n        this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\n    }\n    closeMultipleSubscriptions(streamingMethod, branchKey) {\n        if (typeof streamingMethod !== \"object\" || typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\n            return;\n        }\n        if (!streamingMethod.protocolState.subscriptionsMap) {\n            return;\n        }\n        const subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\n        let subscriptionsToClose = Object.keys(subscriptionsMap)\n            .map((key) => {\n            return subscriptionsMap[key];\n        });\n        if (typeof branchKey === \"string\") {\n            subscriptionsToClose = subscriptionsToClose.filter((sub) => {\n                return sub.branchKey === branchKey;\n            });\n        }\n        subscriptionsToClose.forEach((subscription) => {\n            delete subscriptionsMap[subscription.id];\n            const drop = {\n                type: \"drop-subscription\",\n                subscription_id: subscription.id,\n                reason: \"Server dropping all subscriptions on stream_id: \" + subscription.streamId,\n            };\n            this.session.sendFireAndForget(drop);\n        });\n    }\n    getSubscriptionList(streamingMethod, branchKey) {\n        if (typeof streamingMethod !== \"object\") {\n            return [];\n        }\n        let subscriptions = [];\n        if (!streamingMethod.protocolState.subscriptionsMap) {\n            return [];\n        }\n        const subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\n        const allSubscriptions = Object.keys(subscriptionsMap)\n            .map((key) => {\n            return subscriptionsMap[key];\n        });\n        if (typeof branchKey !== \"string\") {\n            subscriptions = allSubscriptions;\n        }\n        else {\n            subscriptions = allSubscriptions.filter((sub) => {\n                return sub.branchKey === branchKey;\n            });\n        }\n        return subscriptions;\n    }\n    getBranchList(streamingMethod) {\n        if (typeof streamingMethod !== \"object\") {\n            return [];\n        }\n        if (!streamingMethod.protocolState.subscriptionsMap) {\n            return [];\n        }\n        const subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\n        const allSubscriptions = Object.keys(subscriptionsMap)\n            .map((key) => {\n            return subscriptionsMap[key];\n        });\n        const result = [];\n        allSubscriptions.forEach((sub) => {\n            let branch = \"\";\n            if (typeof sub === \"object\" && typeof sub.branchKey === \"string\") {\n                branch = sub.branchKey;\n            }\n            if (result.indexOf(branch) === -1) {\n                result.push(branch);\n            }\n        });\n        return result;\n    }\n    onSubAdded(callback) {\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_ADDED, callback);\n    }\n    onSubRequest(callback) {\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REQUEST, callback);\n    }\n    onSubRemoved(callback) {\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REMOVED, callback);\n    }\n    handleRemoveInterest(msg) {\n        const streamingMethod = this.serverRepository.getById(msg.method_id);\n        if (typeof msg.subscription_id !== \"string\" ||\n            typeof streamingMethod !== \"object\") {\n            return;\n        }\n        if (!streamingMethod.protocolState.subscriptionsMap) {\n            return;\n        }\n        if (typeof streamingMethod.protocolState.subscriptionsMap[msg.subscription_id] !== \"object\") {\n            return;\n        }\n        const subscription = streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\n        delete streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\n        this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\n    }\n    onSubscriptionLifetimeEvent(eventName, handlerFunc) {\n        this.callbacks.add(eventName, handlerFunc);\n    }\n    getNextStreamId() {\n        return this.nextStreamId++ + \"\";\n    }\n    handleAddInterest(msg) {\n        const caller = this.repository.getServerById(msg.caller_id);\n        const instance = caller?.instance ?? {};\n        const requestContext = {\n            msg,\n            arguments: msg.arguments_kv || {},\n            instance,\n        };\n        const streamingMethod = this.serverRepository.getById(msg.method_id);\n        if (streamingMethod === undefined) {\n            const errorMsg = \"No method with id \" + msg.method_id + \" on this server.\";\n            this.sendSubscriptionFailed(errorMsg, msg.subscription_id);\n            return;\n        }\n        if (streamingMethod.protocolState.subscriptionsMap &&\n            streamingMethod.protocolState.subscriptionsMap[msg.subscription_id]) {\n            this.sendSubscriptionFailed(\"A subscription with id \" + msg.subscription_id + \" already exists.\", msg.subscription_id);\n            return;\n        }\n        this.callbacks.execute(SUBSCRIPTION_REQUEST, requestContext, streamingMethod);\n    }\n    sendSubscriptionFailed(reason, subscriptionId) {\n        const errorMessage = {\n            type: \"error\",\n            reason_uri: this.ERR_URI_SUBSCRIPTION_FAILED,\n            reason,\n            request_id: subscriptionId,\n        };\n        this.session.sendFireAndForget(errorMessage);\n    }\n    getStreamId(streamingMethod, branchKey) {\n        if (typeof branchKey !== \"string\") {\n            branchKey = \"\";\n        }\n        if (!streamingMethod.protocolState.branchKeyToStreamIdMap) {\n            throw new Error(`streaming ${streamingMethod.definition.name} method without protocol state`);\n        }\n        const needleBranch = streamingMethod.protocolState.branchKeyToStreamIdMap.filter((branch) => {\n            return branch.key === branchKey;\n        })[0];\n        let streamId = (needleBranch ? needleBranch.streamId : undefined);\n        if (typeof streamId !== \"string\" || streamId === \"\") {\n            streamId = this.getNextStreamId();\n            streamingMethod.protocolState.branchKeyToStreamIdMap.push({ key: branchKey, streamId });\n        }\n        return streamId;\n    }\n}\n\nclass ServerProtocol {\n    session;\n    clientRepository;\n    serverRepository;\n    logger;\n    callbacks = CallbackRegistryFactory();\n    streaming;\n    constructor(session, clientRepository, serverRepository, logger) {\n        this.session = session;\n        this.clientRepository = clientRepository;\n        this.serverRepository = serverRepository;\n        this.logger = logger;\n        this.streaming = new ServerStreaming(session, clientRepository, serverRepository);\n        this.session.on(\"invoke\", (msg) => this.handleInvokeMessage(msg));\n    }\n    createStream(repoMethod) {\n        repoMethod.protocolState.subscriptionsMap = {};\n        repoMethod.protocolState.branchKeyToStreamIdMap = [];\n        return this.register(repoMethod, true);\n    }\n    register(repoMethod, isStreaming) {\n        const methodDef = repoMethod.definition;\n        const flags = Object.assign({}, { metadata: methodDef.flags ?? {} }, { streaming: isStreaming || false });\n        const registerMsg = {\n            type: \"register\",\n            methods: [{\n                    id: repoMethod.repoId,\n                    name: methodDef.name,\n                    display_name: methodDef.displayName,\n                    description: methodDef.description,\n                    version: methodDef.version,\n                    flags,\n                    object_types: methodDef.objectTypes || methodDef.object_types,\n                    input_signature: methodDef.accepts,\n                    result_signature: methodDef.returns,\n                    restrictions: undefined,\n                }],\n        };\n        return this.session.send(registerMsg, { methodId: repoMethod.repoId })\n            .then(() => {\n            this.logger.debug(\"registered method \" + repoMethod.definition.name + \" with id \" + repoMethod.repoId);\n        })\n            .catch((msg) => {\n            this.logger.warn(`failed to register method ${repoMethod.definition.name} with id ${repoMethod.repoId} - ${JSON.stringify(msg)}`);\n            throw msg;\n        });\n    }\n    onInvoked(callback) {\n        this.callbacks.add(\"onInvoked\", callback);\n    }\n    methodInvocationResult(method, invocationId, err, result) {\n        let msg;\n        if (err || err === \"\") {\n            msg = {\n                type: \"error\",\n                request_id: invocationId,\n                reason_uri: \"agm.errors.client_error\",\n                reason: err,\n                context: result,\n                peer_id: undefined,\n            };\n        }\n        else {\n            msg = {\n                type: \"yield\",\n                invocation_id: invocationId,\n                peer_id: this.session.peerId,\n                result,\n                request_id: undefined,\n            };\n        }\n        this.session.sendFireAndForget(msg);\n    }\n    async unregister(method) {\n        const msg = {\n            type: \"unregister\",\n            methods: [method.repoId],\n        };\n        await this.session.send(msg);\n    }\n    getBranchList(method) {\n        return this.streaming.getBranchList(method);\n    }\n    getSubscriptionList(method, branchKey) {\n        return this.streaming.getSubscriptionList(method, branchKey);\n    }\n    closeAllSubscriptions(method, branchKey) {\n        this.streaming.closeMultipleSubscriptions(method, branchKey);\n    }\n    pushData(method, data, branches) {\n        this.streaming.pushData(method, data, branches);\n    }\n    pushDataToSingle(method, subscription, data) {\n        this.streaming.pushDataToSingle(method, subscription, data);\n    }\n    closeSingleSubscription(method, subscription) {\n        this.streaming.closeSingleSubscription(method, subscription);\n    }\n    acceptRequestOnBranch(requestContext, method, branch) {\n        this.streaming.acceptRequestOnBranch(requestContext, method, branch);\n    }\n    rejectRequest(requestContext, method, reason) {\n        this.streaming.rejectRequest(requestContext, method, reason);\n    }\n    onSubRequest(callback) {\n        this.streaming.onSubRequest(callback);\n    }\n    onSubAdded(callback) {\n        this.streaming.onSubAdded(callback);\n    }\n    onSubRemoved(callback) {\n        this.streaming.onSubRemoved(callback);\n    }\n    handleInvokeMessage(msg) {\n        const invocationId = msg.invocation_id;\n        const callerId = msg.caller_id;\n        const methodId = msg.method_id;\n        const args = msg.arguments_kv;\n        const methodList = this.serverRepository.getList();\n        const method = methodList.filter((m) => {\n            return m.repoId === methodId;\n        })[0];\n        if (method === undefined) {\n            return;\n        }\n        const client = this.clientRepository.getServerById(callerId)?.instance;\n        const invocationArgs = { args, instance: client };\n        this.callbacks.execute(\"onInvoked\", method, invocationId, invocationArgs);\n    }\n}\n\nclass UserSubscription {\n    repository;\n    subscriptionData;\n    get requestArguments() {\n        return this.subscriptionData.params.arguments || {};\n    }\n    get servers() {\n        return this.subscriptionData.trackedServers.reduce((servers, pair) => {\n            if (pair.subscriptionId) {\n                const server = this.repository.getServerById(pair.serverId)?.instance;\n                if (server) {\n                    servers.push(server);\n                }\n            }\n            return servers;\n        }, []);\n    }\n    get serverInstance() {\n        return this.servers[0];\n    }\n    get stream() {\n        return this.subscriptionData.method;\n    }\n    constructor(repository, subscriptionData) {\n        this.repository = repository;\n        this.subscriptionData = subscriptionData;\n    }\n    onData(dataCallback) {\n        if (typeof dataCallback !== \"function\") {\n            throw new TypeError(\"The data callback must be a function.\");\n        }\n        this.subscriptionData.handlers.onData.push(dataCallback);\n        if (this.subscriptionData.handlers.onData.length === 1 && this.subscriptionData.queued.data.length > 0) {\n            this.subscriptionData.queued.data.forEach((dataItem) => {\n                dataCallback(dataItem);\n            });\n        }\n    }\n    onClosed(closedCallback) {\n        if (typeof closedCallback !== \"function\") {\n            throw new TypeError(\"The callback must be a function.\");\n        }\n        this.subscriptionData.handlers.onClosed.push(closedCallback);\n    }\n    onFailed(callback) {\n    }\n    onConnected(callback) {\n        if (typeof callback !== \"function\") {\n            throw new TypeError(\"The callback must be a function.\");\n        }\n        this.subscriptionData.handlers.onConnected.push(callback);\n    }\n    close() {\n        this.subscriptionData.close();\n    }\n    setNewSubscription(newSub) {\n        this.subscriptionData = newSub;\n    }\n}\n\nclass TimedCache {\n    config;\n    cache = [];\n    timeoutIds = [];\n    constructor(config) {\n        this.config = config;\n    }\n    add(element) {\n        const id = nanoid(10);\n        this.cache.push({ id, element });\n        const timeoutId = setTimeout(() => {\n            const elementIdx = this.cache.findIndex((entry) => entry.id === id);\n            if (elementIdx < 0) {\n                return;\n            }\n            this.cache.splice(elementIdx, 1);\n        }, this.config.ELEMENT_TTL_MS);\n        this.timeoutIds.push(timeoutId);\n    }\n    flush() {\n        const elements = this.cache.map((entry) => entry.element);\n        this.timeoutIds.forEach((id) => clearInterval(id));\n        this.cache = [];\n        this.timeoutIds = [];\n        return elements;\n    }\n}\n\nconst STATUS_AWAITING_ACCEPT = \"awaitingAccept\";\nconst STATUS_SUBSCRIBED = \"subscribed\";\nconst ERR_MSG_SUB_FAILED = \"Subscription failed.\";\nconst ERR_MSG_SUB_REJECTED = \"Subscription rejected.\";\nconst ON_CLOSE_MSG_SERVER_INIT = \"ServerInitiated\";\nconst ON_CLOSE_MSG_CLIENT_INIT = \"ClientInitiated\";\nclass ClientStreaming {\n    session;\n    repository;\n    logger;\n    subscriptionsList = {};\n    timedCache = new TimedCache({ ELEMENT_TTL_MS: 10000 });\n    subscriptionIdToLocalKeyMap = {};\n    nextSubLocalKey = 0;\n    constructor(session, repository, logger) {\n        this.session = session;\n        this.repository = repository;\n        this.logger = logger;\n        session.on(\"subscribed\", this.handleSubscribed);\n        session.on(\"event\", this.handleEventData);\n        session.on(\"subscription-cancelled\", this.handleSubscriptionCancelled);\n    }\n    subscribe(streamingMethod, params, targetServers, success, error, existingSub) {\n        if (targetServers.length === 0) {\n            error({\n                method: streamingMethod,\n                called_with: params.arguments,\n                message: ERR_MSG_SUB_FAILED + \" No available servers matched the target params.\",\n            });\n            return;\n        }\n        const subLocalKey = this.getNextSubscriptionLocalKey();\n        const pendingSub = this.registerSubscription(subLocalKey, streamingMethod, params, success, error, params.methodResponseTimeout || 10000, existingSub);\n        if (typeof pendingSub !== \"object\") {\n            error({\n                method: streamingMethod,\n                called_with: params.arguments,\n                message: ERR_MSG_SUB_FAILED + \" Unable to register the user callbacks.\",\n            });\n            return;\n        }\n        targetServers.forEach((target) => {\n            const serverId = target.server.id;\n            const method = target.methods.find((m) => m.name === streamingMethod.name);\n            if (!method) {\n                this.logger.error(`can not find method ${streamingMethod.name} for target ${target.server.id}`);\n                return;\n            }\n            pendingSub.trackedServers.push({\n                serverId,\n                subscriptionId: undefined,\n            });\n            const msg = {\n                type: \"subscribe\",\n                server_id: serverId,\n                method_id: method.gatewayId,\n                arguments_kv: params.arguments,\n            };\n            this.session.send(msg, { serverId, subLocalKey })\n                .then((m) => this.handleSubscribed(m))\n                .catch((err) => this.handleErrorSubscribing(err));\n        });\n    }\n    drainSubscriptions() {\n        const existing = Object.values(this.subscriptionsList);\n        this.subscriptionsList = {};\n        this.subscriptionIdToLocalKeyMap = {};\n        return existing;\n    }\n    drainSubscriptionsCache() {\n        return this.timedCache.flush();\n    }\n    getNextSubscriptionLocalKey() {\n        const current = this.nextSubLocalKey;\n        this.nextSubLocalKey += 1;\n        return current;\n    }\n    registerSubscription(subLocalKey, method, params, success, error, timeout, existingSub) {\n        const subsInfo = {\n            localKey: subLocalKey,\n            status: STATUS_AWAITING_ACCEPT,\n            method,\n            params,\n            success,\n            error,\n            trackedServers: [],\n            handlers: {\n                onData: existingSub?.handlers.onData || [],\n                onClosed: existingSub?.handlers.onClosed || [],\n                onConnected: existingSub?.handlers.onConnected || [],\n            },\n            queued: {\n                data: [],\n                closers: [],\n            },\n            timeoutId: undefined,\n            close: () => this.closeSubscription(subLocalKey),\n            subscription: existingSub?.subscription\n        };\n        if (!existingSub) {\n            if (params.onData) {\n                subsInfo.handlers.onData.push(params.onData);\n            }\n            if (params.onClosed) {\n                subsInfo.handlers.onClosed.push(params.onClosed);\n            }\n            if (params.onConnected) {\n                subsInfo.handlers.onConnected.push(params.onConnected);\n            }\n        }\n        this.subscriptionsList[subLocalKey] = subsInfo;\n        subsInfo.timeoutId = setTimeout(() => {\n            if (this.subscriptionsList[subLocalKey] === undefined) {\n                return;\n            }\n            const pendingSub = this.subscriptionsList[subLocalKey];\n            if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\n                error({\n                    method,\n                    called_with: params.arguments,\n                    message: ERR_MSG_SUB_FAILED + \" Subscription attempt timed out after \" + timeout + \" ms.\",\n                });\n                delete this.subscriptionsList[subLocalKey];\n            }\n            else if (pendingSub.status === STATUS_SUBSCRIBED && pendingSub.trackedServers.length > 0) {\n                pendingSub.trackedServers = pendingSub.trackedServers.filter((server) => {\n                    return (typeof server.subscriptionId !== \"undefined\");\n                });\n                delete pendingSub.timeoutId;\n                if (pendingSub.trackedServers.length <= 0) {\n                    this.callOnClosedHandlers(pendingSub);\n                    delete this.subscriptionsList[subLocalKey];\n                }\n            }\n        }, timeout);\n        return subsInfo;\n    }\n    handleErrorSubscribing = (errorResponse) => {\n        const tag = errorResponse._tag;\n        const subLocalKey = tag.subLocalKey;\n        const pendingSub = this.subscriptionsList[subLocalKey];\n        if (typeof pendingSub !== \"object\") {\n            return;\n        }\n        pendingSub.trackedServers = pendingSub.trackedServers.filter((server) => {\n            return server.serverId !== tag.serverId;\n        });\n        if (pendingSub.trackedServers.length <= 0) {\n            clearTimeout(pendingSub.timeoutId);\n            if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\n                const reason = (typeof errorResponse.reason === \"string\" && errorResponse.reason !== \"\") ?\n                    ' Publisher said \"' + errorResponse.reason + '\".' :\n                    \" No reason given.\";\n                const callArgs = typeof pendingSub.params.arguments === \"object\" ?\n                    JSON.stringify(pendingSub.params.arguments) :\n                    \"{}\";\n                pendingSub.error({\n                    message: ERR_MSG_SUB_REJECTED + reason + \" Called with:\" + callArgs,\n                    called_with: pendingSub.params.arguments,\n                    method: pendingSub.method,\n                });\n            }\n            else if (pendingSub.status === STATUS_SUBSCRIBED) {\n                this.callOnClosedHandlers(pendingSub);\n            }\n            delete this.subscriptionsList[subLocalKey];\n        }\n    };\n    handleSubscribed = (msg) => {\n        const subLocalKey = msg._tag.subLocalKey;\n        const pendingSub = this.subscriptionsList[subLocalKey];\n        if (typeof pendingSub !== \"object\") {\n            return;\n        }\n        const serverId = msg._tag.serverId;\n        const acceptingServer = pendingSub.trackedServers\n            .filter((server) => {\n            return server.serverId === serverId;\n        })[0];\n        if (typeof acceptingServer !== \"object\") {\n            return;\n        }\n        acceptingServer.subscriptionId = msg.subscription_id;\n        this.subscriptionIdToLocalKeyMap[msg.subscription_id] = subLocalKey;\n        const isFirstResponse = (pendingSub.status === STATUS_AWAITING_ACCEPT);\n        pendingSub.status = STATUS_SUBSCRIBED;\n        if (isFirstResponse) {\n            let reconnect = false;\n            let sub = pendingSub.subscription;\n            if (sub) {\n                sub.setNewSubscription(pendingSub);\n                pendingSub.success(sub);\n                reconnect = true;\n            }\n            else {\n                sub = new UserSubscription(this.repository, pendingSub);\n                pendingSub.subscription = sub;\n                pendingSub.success(sub);\n            }\n            for (const handler of pendingSub.handlers.onConnected) {\n                try {\n                    handler(sub.serverInstance, reconnect);\n                }\n                catch (e) {\n                }\n            }\n        }\n    };\n    handleEventData = (msg) => {\n        const subLocalKey = this.subscriptionIdToLocalKeyMap[msg.subscription_id];\n        if (typeof subLocalKey === \"undefined\") {\n            return;\n        }\n        const subscription = this.subscriptionsList[subLocalKey];\n        if (typeof subscription !== \"object\") {\n            return;\n        }\n        const trackedServersFound = subscription.trackedServers.filter((s) => {\n            return s.subscriptionId === msg.subscription_id;\n        });\n        if (trackedServersFound.length !== 1) {\n            return;\n        }\n        const isPrivateData = msg.oob;\n        const sendingServerId = trackedServersFound[0].serverId;\n        const server = this.repository.getServerById(sendingServerId);\n        const receivedStreamData = () => {\n            return {\n                data: msg.data,\n                server: server?.instance ?? {},\n                requestArguments: subscription.params.arguments,\n                message: undefined,\n                private: isPrivateData,\n            };\n        };\n        const onDataHandlers = subscription.handlers.onData;\n        const queuedData = subscription.queued.data;\n        if (onDataHandlers.length > 0) {\n            onDataHandlers.forEach((callback) => {\n                if (typeof callback === \"function\") {\n                    callback(receivedStreamData());\n                }\n            });\n        }\n        else {\n            queuedData.push(receivedStreamData());\n        }\n    };\n    handleSubscriptionCancelled = (msg) => {\n        const subLocalKey = this.subscriptionIdToLocalKeyMap[msg.subscription_id];\n        if (typeof subLocalKey === \"undefined\") {\n            return;\n        }\n        const subscription = this.subscriptionsList[subLocalKey];\n        if (typeof subscription !== \"object\") {\n            return;\n        }\n        const expectedNewLength = subscription.trackedServers.length - 1;\n        subscription.trackedServers = subscription.trackedServers.filter((server) => {\n            if (server.subscriptionId === msg.subscription_id) {\n                subscription.queued.closers.push(server.serverId);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n        if (subscription.trackedServers.length !== expectedNewLength) {\n            return;\n        }\n        if (subscription.trackedServers.length <= 0) {\n            this.timedCache.add(subscription);\n            clearTimeout(subscription.timeoutId);\n            this.callOnClosedHandlers(subscription);\n            delete this.subscriptionsList[subLocalKey];\n        }\n        delete this.subscriptionIdToLocalKeyMap[msg.subscription_id];\n    };\n    callOnClosedHandlers(subscription, reason) {\n        const closersCount = subscription.queued.closers.length;\n        const closingServerId = (closersCount > 0) ? subscription.queued.closers[closersCount - 1] : null;\n        let closingServer;\n        if (closingServerId !== undefined && typeof closingServerId === \"string\") {\n            closingServer = this.repository.getServerById(closingServerId)?.instance ?? {};\n        }\n        subscription.handlers.onClosed.forEach((callback) => {\n            if (typeof callback !== \"function\") {\n                return;\n            }\n            callback({\n                message: reason || ON_CLOSE_MSG_SERVER_INIT,\n                requestArguments: subscription.params.arguments || {},\n                server: closingServer,\n                stream: subscription.method,\n            });\n        });\n    }\n    closeSubscription(subLocalKey) {\n        const subscription = this.subscriptionsList[subLocalKey];\n        if (typeof subscription !== \"object\") {\n            return;\n        }\n        subscription.trackedServers.forEach((server) => {\n            if (typeof server.subscriptionId === \"undefined\") {\n                return;\n            }\n            subscription.queued.closers.push(server.serverId);\n            this.session.sendFireAndForget({\n                type: \"unsubscribe\",\n                subscription_id: server.subscriptionId,\n                reason_uri: \"\",\n                reason: ON_CLOSE_MSG_CLIENT_INIT,\n            });\n            delete this.subscriptionIdToLocalKeyMap[server.subscriptionId];\n        });\n        subscription.trackedServers = [];\n        this.callOnClosedHandlers(subscription, ON_CLOSE_MSG_CLIENT_INIT);\n        delete this.subscriptionsList[subLocalKey];\n    }\n}\n\nclass ClientProtocol {\n    session;\n    repository;\n    logger;\n    streaming;\n    constructor(session, repository, logger) {\n        this.session = session;\n        this.repository = repository;\n        this.logger = logger;\n        session.on(\"peer-added\", (msg) => this.handlePeerAdded(msg));\n        session.on(\"peer-removed\", (msg) => this.handlePeerRemoved(msg));\n        session.on(\"methods-added\", (msg) => this.handleMethodsAddedMessage(msg));\n        session.on(\"methods-removed\", (msg) => this.handleMethodsRemovedMessage(msg));\n        this.streaming = new ClientStreaming(session, repository, logger);\n    }\n    subscribe(stream, options, targetServers, success, error, existingSub) {\n        this.streaming.subscribe(stream, options, targetServers, success, error, existingSub);\n    }\n    invoke(id, method, args, target) {\n        const serverId = target.id;\n        const methodId = method.gatewayId;\n        const msg = {\n            type: \"call\",\n            server_id: serverId,\n            method_id: methodId,\n            arguments_kv: args,\n        };\n        return this.session.send(msg, { invocationId: id, serverId })\n            .then((m) => this.handleResultMessage(m))\n            .catch((err) => this.handleInvocationError(err));\n    }\n    drainSubscriptions() {\n        return this.streaming.drainSubscriptions();\n    }\n    drainSubscriptionsCache() {\n        return this.streaming.drainSubscriptionsCache();\n    }\n    handlePeerAdded(msg) {\n        const newPeerId = msg.new_peer_id;\n        const remoteId = msg.identity;\n        const isLocal = msg.meta ? msg.meta.local : true;\n        const pid = Number(remoteId.process);\n        const serverInfo = {\n            machine: remoteId.machine,\n            pid: isNaN(pid) ? remoteId.process : pid,\n            instance: remoteId.instance,\n            application: remoteId.application,\n            applicationName: remoteId.applicationName,\n            environment: remoteId.environment,\n            region: remoteId.region,\n            user: remoteId.user,\n            windowId: remoteId.windowId,\n            peerId: newPeerId,\n            api: remoteId.api,\n            isLocal\n        };\n        this.repository.addServer(serverInfo, newPeerId);\n    }\n    handlePeerRemoved(msg) {\n        const removedPeerId = msg.removed_id;\n        const reason = msg.reason;\n        this.repository.removeServerById(removedPeerId, reason);\n    }\n    handleMethodsAddedMessage(msg) {\n        const serverId = msg.server_id;\n        const methods = msg.methods;\n        methods.forEach((method) => {\n            this.repository.addServerMethod(serverId, method);\n        });\n    }\n    handleMethodsRemovedMessage(msg) {\n        const serverId = msg.server_id;\n        const methodIdList = msg.methods;\n        const server = this.repository.getServerById(serverId);\n        if (server) {\n            const serverMethodKeys = Object.keys(server.methods);\n            serverMethodKeys.forEach((methodKey) => {\n                const method = server.methods[methodKey];\n                if (methodIdList.indexOf(method.gatewayId) > -1) {\n                    this.repository.removeServerMethod(serverId, methodKey);\n                }\n            });\n        }\n    }\n    handleResultMessage(msg) {\n        const invocationId = msg._tag.invocationId;\n        const result = msg.result;\n        const serverId = msg._tag.serverId;\n        const server = this.repository.getServerById(serverId);\n        return {\n            invocationId,\n            result,\n            instance: server?.instance,\n            status: InvokeStatus.Success,\n            message: \"\"\n        };\n    }\n    handleInvocationError(msg) {\n        this.logger.debug(`handle invocation error ${JSON.stringify(msg)}`);\n        if (\"_tag\" in msg) {\n            const invocationId = msg._tag.invocationId;\n            const serverId = msg._tag.serverId;\n            const server = this.repository.getServerById(serverId);\n            const message = msg.reason;\n            const context = msg.context;\n            return {\n                invocationId,\n                result: context,\n                instance: server?.instance,\n                status: InvokeStatus.Error,\n                message\n            };\n        }\n        else {\n            return {\n                invocationId: \"\",\n                message: msg.message,\n                status: InvokeStatus.Error,\n                error: msg\n            };\n        }\n    }\n}\n\nfunction gW3ProtocolFactory (instance, connection, clientRepository, serverRepository, libConfig, interop) {\n    const logger = libConfig.logger.subLogger(\"gw3-protocol\");\n    let resolveReadyPromise;\n    const readyPromise = new Promise((resolve) => {\n        resolveReadyPromise = resolve;\n    });\n    const session = connection.domain(\"agm\", [\"subscribed\"]);\n    const server = new ServerProtocol(session, clientRepository, serverRepository, logger.subLogger(\"server\"));\n    const client = new ClientProtocol(session, clientRepository, logger.subLogger(\"client\"));\n    async function handleReconnect() {\n        logger.info(\"reconnected - will replay registered methods and subscriptions\");\n        client.drainSubscriptionsCache().forEach((sub) => {\n            const methodInfo = sub.method;\n            const params = Object.assign({}, sub.params);\n            logger.info(`trying to soft-re-subscribe to method ${methodInfo.name}, with params: ${JSON.stringify(params)}`);\n            interop.client.subscribe(methodInfo, params, undefined, undefined, sub).then(() => logger.info(`soft-subscribing to method ${methodInfo.name} DONE`)).catch((error) => logger.warn(`subscribing to method ${methodInfo.name} failed: ${JSON.stringify(error)}}`));\n        });\n        const reconnectionPromises = [];\n        const existingSubscriptions = client.drainSubscriptions();\n        for (const sub of existingSubscriptions) {\n            const methodInfo = sub.method;\n            const params = Object.assign({}, sub.params);\n            logger.info(`trying to re-subscribe to method ${methodInfo.name}, with params: ${JSON.stringify(params)}`);\n            reconnectionPromises.push(interop.client.subscribe(methodInfo, params, undefined, undefined, sub).then(() => logger.info(`subscribing to method ${methodInfo.name} DONE`)));\n        }\n        const registeredMethods = serverRepository.getList();\n        serverRepository.reset();\n        for (const method of registeredMethods) {\n            const def = method.definition;\n            if (method.stream) {\n                reconnectionPromises.push(interop.server.createStream(def, method.streamCallbacks, undefined, undefined, method.stream)\n                    .then(() => logger.info(`subscribing to method ${def.name} DONE`))\n                    .catch(() => logger.warn(`subscribing to method ${def.name} FAILED`)));\n            }\n            else if (method?.theFunction?.userCallback) {\n                reconnectionPromises.push(interop.register(def, method.theFunction.userCallback)\n                    .then(() => logger.info(`registering method ${def.name} DONE`))\n                    .catch(() => logger.warn(`registering method ${def.name} FAILED`)));\n            }\n            else if (method?.theFunction?.userCallbackAsync) {\n                reconnectionPromises.push(interop.registerAsync(def, method.theFunction.userCallbackAsync)\n                    .then(() => logger.info(`registering method ${def.name} DONE`))\n                    .catch(() => logger.warn(`registering method ${def.name} FAILED`)));\n            }\n        }\n        await Promise.all(reconnectionPromises);\n        logger.info(\"Interop is re-announced\");\n    }\n    function handleInitialJoin() {\n        if (resolveReadyPromise) {\n            resolveReadyPromise({\n                client,\n                server,\n            });\n            resolveReadyPromise = undefined;\n        }\n    }\n    session.onJoined((reconnect) => {\n        clientRepository.addServer(instance, connection.peerId);\n        if (reconnect) {\n            handleReconnect().then(() => connection.setLibReAnnounced({ name: \"interop\" })).catch((error) => logger.warn(`Error while re-announcing interop: ${JSON.stringify(error)}`));\n        }\n        else {\n            handleInitialJoin();\n        }\n    });\n    session.onLeft(() => {\n        clientRepository.reset();\n    });\n    session.join();\n    return readyPromise;\n}\n\nclass Interop {\n    instance;\n    readyPromise;\n    client;\n    server;\n    unwrappedInstance;\n    protocol;\n    clientRepository;\n    serverRepository;\n    constructor(configuration) {\n        if (typeof configuration === \"undefined\") {\n            throw new Error(\"configuration is required\");\n        }\n        if (typeof configuration.connection === \"undefined\") {\n            throw new Error(\"configuration.connections is required\");\n        }\n        const connection = configuration.connection;\n        if (typeof configuration.methodResponseTimeout !== \"number\") {\n            configuration.methodResponseTimeout = 30 * 1000;\n        }\n        if (typeof configuration.waitTimeoutMs !== \"number\") {\n            configuration.waitTimeoutMs = 30 * 1000;\n        }\n        this.unwrappedInstance = new InstanceWrapper(this, undefined, connection);\n        this.instance = this.unwrappedInstance.unwrap();\n        this.clientRepository = new ClientRepository(configuration.logger.subLogger(\"cRep\"), this);\n        this.serverRepository = new ServerRepository();\n        let protocolPromise;\n        if (connection.protocolVersion === 3) {\n            protocolPromise = gW3ProtocolFactory(this.instance, connection, this.clientRepository, this.serverRepository, configuration, this);\n        }\n        else {\n            throw new Error(`protocol ${connection.protocolVersion} not supported`);\n        }\n        this.readyPromise = protocolPromise.then((protocol) => {\n            this.protocol = protocol;\n            this.client = new Client(this.protocol, this.clientRepository, this.instance, configuration);\n            this.server = new Server(this.protocol, this.serverRepository);\n            return this;\n        });\n    }\n    ready() {\n        return this.readyPromise;\n    }\n    serverRemoved(callback) {\n        return this.client.serverRemoved(callback);\n    }\n    serverAdded(callback) {\n        return this.client.serverAdded(callback);\n    }\n    serverMethodRemoved(callback) {\n        return this.client.serverMethodRemoved(callback);\n    }\n    serverMethodAdded(callback) {\n        return this.client.serverMethodAdded(callback);\n    }\n    methodRemoved(callback) {\n        return this.client.methodRemoved(callback);\n    }\n    methodAdded(callback) {\n        return this.client.methodAdded(callback);\n    }\n    methodsForInstance(instance) {\n        return this.client.methodsForInstance(instance);\n    }\n    methods(methodFilter) {\n        return this.client.methods(methodFilter);\n    }\n    servers(methodFilter) {\n        return this.client.servers(methodFilter);\n    }\n    subscribe(method, options, successCallback, errorCallback) {\n        return this.client.subscribe(method, options, successCallback, errorCallback);\n    }\n    createStream(streamDef, callbacks, successCallback, errorCallback) {\n        return this.server.createStream(streamDef, callbacks, successCallback, errorCallback);\n    }\n    unregister(methodFilter) {\n        return this.server.unregister(methodFilter);\n    }\n    registerAsync(methodDefinition, callback) {\n        return this.server.registerAsync(methodDefinition, callback);\n    }\n    register(methodDefinition, callback) {\n        return this.server.register(methodDefinition, callback);\n    }\n    invoke(methodFilter, argumentObj, target, additionalOptions, success, error) {\n        return this.client.invoke(methodFilter, argumentObj, target, additionalOptions, success, error);\n    }\n    waitForMethod(name) {\n        const pw = new PromiseWrapper();\n        const unsubscribe = this.client.methodAdded((m) => {\n            if (m.name === name) {\n                unsubscribe();\n                pw.resolve(m);\n            }\n        });\n        return pw.promise;\n    }\n}\n\nconst successMessages = [\"subscribed\", \"success\"];\nclass MessageBus {\n    connection;\n    logger;\n    peerId;\n    session;\n    subscriptions;\n    readyPromise;\n    constructor(connection, logger) {\n        this.connection = connection;\n        this.logger = logger;\n        this.peerId = connection.peerId;\n        this.subscriptions = [];\n        this.session = connection.domain(\"bus\", successMessages);\n        this.readyPromise = this.session.join();\n        this.readyPromise.then(() => {\n            this.watchOnEvent();\n        });\n    }\n    ready() {\n        return this.readyPromise;\n    }\n    publish = (topic, data, options) => {\n        const { routingKey, target } = options || {};\n        const args = this.removeEmptyValues({\n            type: \"publish\",\n            topic,\n            data,\n            peer_id: this.peerId,\n            routing_key: routingKey,\n            target_identity: target\n        });\n        this.session.send(args);\n    };\n    subscribe = (topic, callback, options) => {\n        return new Promise((resolve, reject) => {\n            const { routingKey, target } = options || {};\n            const args = this.removeEmptyValues({\n                type: \"subscribe\",\n                topic,\n                peer_id: this.peerId,\n                routing_key: routingKey,\n                source: target\n            });\n            this.session.send(args)\n                .then((response) => {\n                const { subscription_id } = response;\n                this.subscriptions.push({ subscription_id, topic, callback, source: target });\n                resolve({\n                    unsubscribe: () => {\n                        this.session.send({ type: \"unsubscribe\", subscription_id, peer_id: this.peerId });\n                        this.subscriptions = this.subscriptions.filter((s) => s.subscription_id !== subscription_id);\n                        return Promise.resolve();\n                    }\n                });\n            })\n                .catch((error) => reject(error));\n        });\n    };\n    watchOnEvent = () => {\n        this.session.on(\"event\", (args) => {\n            const { data, subscription_id } = args;\n            const source = args[\"publisher-identity\"];\n            const subscription = this.subscriptions.find((s) => s.subscription_id === subscription_id);\n            if (subscription) {\n                if (!subscription.source) {\n                    subscription.callback(data, subscription.topic, source);\n                }\n                else {\n                    if (this.keysMatch(subscription.source, source)) {\n                        subscription.callback(data, subscription.topic, source);\n                    }\n                }\n            }\n        });\n    };\n    removeEmptyValues(obj) {\n        const cleaned = {};\n        Object.keys(obj).forEach((key) => {\n            if (obj[key] !== undefined && obj[key] !== null) {\n                cleaned[key] = obj[key];\n            }\n        });\n        return cleaned;\n    }\n    keysMatch(obj1, obj2) {\n        const keysObj1 = Object.keys(obj1);\n        let allMatch = true;\n        keysObj1.forEach((key) => {\n            if (obj1[key] !== obj2[key]) {\n                allMatch = false;\n            }\n        });\n        return allMatch;\n    }\n}\n\nconst IOConnectCoreFactory = (userConfig, ext) => {\n    const iodesktop = typeof window === \"object\" ? (window.iodesktop ?? window.glue42gd) : undefined;\n    const preloadPromise = typeof window === \"object\" ? (window.gdPreloadPromise ?? Promise.resolve()) : Promise.resolve();\n    const glueInitTimer = timer(\"glue\");\n    userConfig = userConfig || {};\n    ext = ext || {};\n    const internalConfig = prepareConfig(userConfig, ext, iodesktop);\n    let _connection;\n    let _interop;\n    let _logger;\n    let _metrics;\n    let _contexts;\n    let _bus;\n    let _allowTrace;\n    const libs = {};\n    function registerLib(name, inner, t) {\n        _allowTrace = _logger.canPublish(\"trace\");\n        if (_allowTrace) {\n            _logger.trace(`registering ${name} module`);\n        }\n        const done = () => {\n            inner.initTime = t.stop();\n            inner.initEndTime = t.endTime;\n            inner.marks = t.marks;\n            if (_allowTrace) {\n                _logger.trace(`${name} is ready - ${t.endTime - t.startTime}`);\n            }\n        };\n        inner.initStartTime = t.startTime;\n        if (inner.ready) {\n            inner.ready().then(() => {\n                done();\n            });\n        }\n        else {\n            done();\n        }\n        if (!Array.isArray(name)) {\n            name = [name];\n        }\n        name.forEach((n) => {\n            libs[n] = inner;\n            IOConnectCoreFactory[n] = inner;\n        });\n    }\n    function setupConnection() {\n        const initTimer = timer(\"connection\");\n        _connection = new Connection(internalConfig.connection, _logger.subLogger(\"connection\"));\n        let authPromise = Promise.resolve(internalConfig.auth);\n        if (internalConfig.connection && !internalConfig.auth) {\n            if (iodesktop) {\n                authPromise = iodesktop.getGWToken()\n                    .then((token) => {\n                    return {\n                        gatewayToken: token\n                    };\n                });\n            }\n            else if (typeof window !== \"undefined\" && window?.glue42electron) {\n                if (typeof window.glue42electron.gwToken === \"string\") {\n                    authPromise = Promise.resolve({\n                        gatewayToken: window.glue42electron.gwToken\n                    });\n                }\n            }\n            else {\n                authPromise = Promise.reject(\"You need to provide auth information\");\n            }\n        }\n        return authPromise\n            .then((authConfig) => {\n            initTimer.mark(\"auth-promise-resolved\");\n            let authRequest;\n            if (Object.prototype.toString.call(authConfig) === \"[object Object]\") {\n                authRequest = authConfig;\n            }\n            else {\n                throw new Error(\"Invalid auth object - \" + JSON.stringify(authConfig));\n            }\n            return _connection.login(authRequest);\n        })\n            .then(() => {\n            registerLib(\"connection\", _connection, initTimer);\n            return internalConfig;\n        })\n            .catch((e) => {\n            if (_connection) {\n                _connection.logout();\n            }\n            throw e;\n        });\n    }\n    function setupLogger() {\n        const initTimer = timer(\"logger\");\n        _logger = new Logger(`${internalConfig.connection.identity?.application}`, undefined, internalConfig.customLogger);\n        _logger.consoleLevel(internalConfig.logger.console);\n        _logger.publishLevel(internalConfig.logger.publish);\n        if (_logger.canPublish(\"debug\")) {\n            _logger.debug(\"initializing glue...\");\n        }\n        registerLib(\"logger\", _logger, initTimer);\n        return Promise.resolve(undefined);\n    }\n    function setupMetrics() {\n        const initTimer = timer(\"metrics\");\n        const config = internalConfig.metrics;\n        const metricsPublishingEnabledFunc = iodesktop?.getMetricsPublishingEnabled;\n        const identity = internalConfig.connection.identity;\n        const canUpdateMetric = metricsPublishingEnabledFunc ? metricsPublishingEnabledFunc : () => true;\n        const disableAutoAppSystem = (typeof config !== \"boolean\" && config.disableAutoAppSystem) ?? false;\n        _metrics = metrics({\n            connection: config ? _connection : undefined,\n            logger: _logger.subLogger(\"metrics\"),\n            canUpdateMetric,\n            system: \"Glue42\",\n            service: identity?.service ?? iodesktop?.applicationName ?? internalConfig.application,\n            instance: identity?.instance ?? identity?.windowId ?? nanoid(10),\n            disableAutoAppSystem,\n            pagePerformanceMetrics: typeof config !== \"boolean\" ? config?.pagePerformanceMetrics : undefined\n        });\n        registerLib(\"metrics\", _metrics, initTimer);\n        return Promise.resolve();\n    }\n    function setupInterop() {\n        const initTimer = timer(\"interop\");\n        const agmConfig = {\n            connection: _connection,\n            logger: _logger.subLogger(\"interop\"),\n        };\n        _interop = new Interop(agmConfig);\n        Logger.Interop = _interop;\n        registerLib([\"interop\", \"agm\"], _interop, initTimer);\n        return Promise.resolve();\n    }\n    function setupContexts() {\n        const hasActivities = (internalConfig.activities && _connection.protocolVersion === 3);\n        const needsContexts = internalConfig.contexts || hasActivities;\n        if (needsContexts) {\n            const initTimer = timer(\"contexts\");\n            _contexts = new ContextsModule({\n                connection: _connection,\n                logger: _logger.subLogger(\"contexts\"),\n                trackAllContexts: typeof internalConfig.contexts === \"object\" ? internalConfig.contexts.trackAllContexts : false,\n                reAnnounceKnownContexts: typeof internalConfig.contexts === \"object\" ? internalConfig.contexts.reAnnounceKnownContexts : false\n            });\n            registerLib(\"contexts\", _contexts, initTimer);\n            return _contexts;\n        }\n        else {\n            const replayer = _connection.replayer;\n            if (replayer) {\n                replayer.drain(ContextMessageReplaySpec.name);\n            }\n        }\n    }\n    async function setupBus() {\n        if (!internalConfig.bus) {\n            return Promise.resolve();\n        }\n        const initTimer = timer(\"bus\");\n        _bus = new MessageBus(_connection, _logger.subLogger(\"bus\"));\n        registerLib(\"bus\", _bus, initTimer);\n        return Promise.resolve();\n    }\n    function setupExternalLibs(externalLibs) {\n        try {\n            externalLibs.forEach((lib) => {\n                setupExternalLib(lib.name, lib.create);\n            });\n            return Promise.resolve();\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    function setupExternalLib(name, createCallback) {\n        const initTimer = timer(name);\n        const lib = createCallback(libs);\n        if (lib) {\n            registerLib(name, lib, initTimer);\n        }\n    }\n    function waitForLibs() {\n        const libsReadyPromises = Object.keys(libs).map((key) => {\n            const lib = libs[key];\n            return lib.ready ?\n                lib.ready() : Promise.resolve();\n        });\n        return Promise.all(libsReadyPromises);\n    }\n    function constructGlueObject() {\n        const feedbackFunc = (feedbackInfo) => {\n            if (!_interop) {\n                return;\n            }\n            _interop.invoke(\"T42.ACS.Feedback\", feedbackInfo, \"best\");\n        };\n        const info = {\n            coreVersion: version,\n            version: internalConfig.version\n        };\n        glueInitTimer.stop();\n        const glue = {\n            feedback: feedbackFunc,\n            info,\n            logger: _logger,\n            interop: _interop,\n            agm: _interop,\n            connection: _connection,\n            metrics: _metrics,\n            contexts: _contexts,\n            bus: _bus,\n            version: internalConfig.version,\n            userConfig,\n            done: () => {\n                _logger?.info(\"done called by user...\");\n                return _connection.logout();\n            }\n        };\n        glue.performance = {\n            get glueVer() {\n                return internalConfig.version;\n            },\n            get glueConfig() {\n                return JSON.stringify(userConfig);\n            },\n            get browser() {\n                return window.performance.timing.toJSON();\n            },\n            get memory() {\n                return window.performance.memory;\n            },\n            get initTimes() {\n                const all = getAllTimers();\n                return Object.keys(all).map((key) => {\n                    const t = all[key];\n                    return {\n                        name: key,\n                        duration: t.endTime - t.startTime,\n                        marks: t.marks,\n                        startTime: t.startTime,\n                        endTime: t.endTime\n                    };\n                });\n            }\n        };\n        Object.keys(libs).forEach((key) => {\n            const lib = libs[key];\n            glue[key] = lib;\n        });\n        glue.config = {};\n        Object.keys(internalConfig).forEach((k) => {\n            glue.config[k] = internalConfig[k];\n        });\n        if (ext && ext.extOptions) {\n            Object.keys(ext.extOptions).forEach((k) => {\n                glue.config[k] = ext?.extOptions[k];\n            });\n        }\n        if (ext?.enrichGlue) {\n            ext.enrichGlue(glue);\n        }\n        if (iodesktop && iodesktop.updatePerfData) {\n            iodesktop.updatePerfData(glue.performance);\n        }\n        if (glue.agm) {\n            const deprecatedDecorator = (fn, wrong, proper) => {\n                return function () {\n                    glue.logger.warn(`glue.js - 'glue.agm.${wrong}' method is deprecated, use 'glue.interop.${proper}' instead.`);\n                    return fn.apply(glue.agm, arguments);\n                };\n            };\n            const agmAny = glue.agm;\n            agmAny.method_added = deprecatedDecorator(glue.agm.methodAdded, \"method_added\", \"methodAdded\");\n            agmAny.method_removed = deprecatedDecorator(glue.agm.methodRemoved, \"method_removed\", \"methodRemoved\");\n            agmAny.server_added = deprecatedDecorator(glue.agm.serverAdded, \"server_added\", \"serverAdded\");\n            agmAny.server_method_aded = deprecatedDecorator(glue.agm.serverMethodAdded, \"server_method_aded\", \"serverMethodAdded\");\n            agmAny.server_method_removed = deprecatedDecorator(glue.agm.serverMethodRemoved, \"server_method_removed\", \"serverMethodRemoved\");\n        }\n        return glue;\n    }\n    async function registerInstanceIfNeeded() {\n        const RegisterInstanceMethodName = \"T42.ACS.RegisterInstance\";\n        if (Utils.isNode() && typeof process.env._GD_STARTING_CONTEXT_ === \"undefined\" && typeof userConfig?.application !== \"undefined\") {\n            const isMethodAvailable = _interop.methods({ name: RegisterInstanceMethodName }).length > 0;\n            if (isMethodAvailable) {\n                try {\n                    await _interop.invoke(RegisterInstanceMethodName, { appName: userConfig?.application, pid: process.pid });\n                }\n                catch (error) {\n                    const typedError = error;\n                    _logger.error(`Cannot register as an instance: ${JSON.stringify(typedError.message)}`);\n                }\n            }\n        }\n    }\n    return preloadPromise\n        .then(setupLogger)\n        .then(setupConnection)\n        .then(() => Promise.all([setupMetrics(), setupInterop(), setupContexts(), setupBus()]))\n        .then(() => _interop.readyPromise)\n        .then(() => registerInstanceIfNeeded())\n        .then(() => {\n        return setupExternalLibs(internalConfig.libs || []);\n    })\n        .then(waitForLibs)\n        .then(constructGlueObject)\n        .catch((err) => {\n        return Promise.reject({\n            err,\n            libs\n        });\n    });\n};\nif (typeof window !== \"undefined\") {\n    window.IOConnectCore = IOConnectCoreFactory;\n}\nIOConnectCoreFactory.version = version;\nIOConnectCoreFactory.default = IOConnectCoreFactory;\n\nconst iOConnectBrowserFactory = createFactoryFunction(IOConnectCoreFactory);\nif (typeof window !== \"undefined\") {\n    const windowAny = window;\n    windowAny.IOBrowser = iOConnectBrowserFactory;\n    delete windowAny.GlueCore;\n    delete windowAny.IOConnectCore;\n}\nconst legacyGlobal = window.glue42gd || window.glue42core;\nconst ioGlobal = window.iodesktop || window.iobrowser;\nif (!legacyGlobal && !ioGlobal) {\n    window.iobrowser = { webStarted: false };\n}\niOConnectBrowserFactory.version = version$1;\n\nexport { iOConnectBrowserFactory as default };\n//# sourceMappingURL=browser.es.js.map\n","var MetricTypes = {\n    STRING: 1,\n    NUMBER: 2,\n    TIMESTAMP: 3,\n    OBJECT: 4\n};\n\nfunction getMetricTypeByValue(metric) {\n    if (metric.type === MetricTypes.TIMESTAMP) {\n        return \"timestamp\";\n    }\n    else if (metric.type === MetricTypes.NUMBER) {\n        return \"number\";\n    }\n    else if (metric.type === MetricTypes.STRING) {\n        return \"string\";\n    }\n    else if (metric.type === MetricTypes.OBJECT) {\n        return \"object\";\n    }\n    return \"unknown\";\n}\nfunction getTypeByValue(value) {\n    if (value.constructor === Date) {\n        return \"timestamp\";\n    }\n    else if (typeof value === \"number\") {\n        return \"number\";\n    }\n    else if (typeof value === \"string\") {\n        return \"string\";\n    }\n    else if (typeof value === \"object\") {\n        return \"object\";\n    }\n    else {\n        return \"string\";\n    }\n}\nfunction serializeMetric(metric) {\n    const serializedMetrics = {};\n    const type = getMetricTypeByValue(metric);\n    if (type === \"object\") {\n        const values = Object.keys(metric.value).reduce((memo, key) => {\n            const innerType = getTypeByValue(metric.value[key]);\n            if (innerType === \"object\") {\n                const composite = defineNestedComposite(metric.value[key]);\n                memo[key] = {\n                    type: \"object\",\n                    description: \"\",\n                    context: {},\n                    composite,\n                };\n            }\n            else {\n                memo[key] = {\n                    type: innerType,\n                    description: \"\",\n                    context: {},\n                };\n            }\n            return memo;\n        }, {});\n        serializedMetrics.composite = values;\n    }\n    serializedMetrics.name = normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name);\n    serializedMetrics.type = type;\n    serializedMetrics.description = metric.description;\n    serializedMetrics.context = {};\n    return serializedMetrics;\n}\nfunction defineNestedComposite(values) {\n    return Object.keys(values).reduce((memo, key) => {\n        const type = getTypeByValue(values[key]);\n        if (type === \"object\") {\n            memo[key] = {\n                type: \"object\",\n                description: \"\",\n                context: {},\n                composite: defineNestedComposite(values[key]),\n            };\n        }\n        else {\n            memo[key] = {\n                type,\n                description: \"\",\n                context: {},\n            };\n        }\n        return memo;\n    }, {});\n}\nfunction normalizeMetricName(name) {\n    if (typeof name !== \"undefined\" && name.length > 0 && name[0] !== \"/\") {\n        return \"/\" + name;\n    }\n    else {\n        return name;\n    }\n}\nfunction getMetricValueByType(metric) {\n    const type = getMetricTypeByValue(metric);\n    if (type === \"timestamp\") {\n        return Date.now();\n    }\n    else {\n        return publishNestedComposite(metric.value);\n    }\n}\nfunction publishNestedComposite(values) {\n    if (typeof values !== \"object\") {\n        return values;\n    }\n    return Object.keys(values).reduce((memo, key) => {\n        const value = values[key];\n        if (typeof value === \"object\" && value.constructor !== Date) {\n            memo[key] = publishNestedComposite(value);\n        }\n        else if (value.constructor === Date) {\n            memo[key] = new Date(value).getTime();\n        }\n        else if (value.constructor === Boolean) {\n            memo[key] = value.toString();\n        }\n        else {\n            memo[key] = value;\n        }\n        return memo;\n    }, {});\n}\nfunction flatten(arr) {\n    return arr.reduce((flat, toFlatten) => {\n        return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n    }, []);\n}\nfunction getHighestState(arr) {\n    return arr.sort((a, b) => {\n        if (!a.state) {\n            return 1;\n        }\n        if (!b.state) {\n            return -1;\n        }\n        return b.state - a.state;\n    })[0];\n}\nfunction aggregateDescription(arr) {\n    let msg = \"\";\n    arr.forEach((m, idx, a) => {\n        const path = m.path.join(\".\");\n        if (idx === a.length - 1) {\n            msg += path + \".\" + m.name + \": \" + m.description;\n        }\n        else {\n            msg += path + \".\" + m.name + \": \" + m.description + \",\";\n        }\n    });\n    if (msg.length > 100) {\n        return msg.slice(0, 100) + \"...\";\n    }\n    else {\n        return msg;\n    }\n}\nfunction composeMsgForRootStateMetric(system) {\n    const aggregatedState = system.root.getAggregateState();\n    const merged = flatten(aggregatedState);\n    const highestState = getHighestState(merged);\n    const aggregateDesc = aggregateDescription(merged);\n    return {\n        description: aggregateDesc,\n        value: highestState.state,\n    };\n}\n\nfunction gw3 (connection, config) {\n    if (!connection || typeof connection !== \"object\") {\n        throw new Error(\"Connection is required parameter\");\n    }\n    let joinPromise;\n    let session;\n    const init = (repo) => {\n        let resolveReadyPromise;\n        joinPromise = new Promise((resolve) => {\n            resolveReadyPromise = resolve;\n        });\n        session = connection.domain(\"metrics\");\n        session.onJoined((reconnect) => {\n            if (!reconnect && resolveReadyPromise) {\n                resolveReadyPromise();\n                resolveReadyPromise = undefined;\n            }\n            const rootStateMetric = {\n                name: \"/State\",\n                type: \"object\",\n                composite: {\n                    Description: {\n                        type: \"string\",\n                        description: \"\",\n                    },\n                    Value: {\n                        type: \"number\",\n                        description: \"\",\n                    },\n                },\n                description: \"System state\",\n                context: {},\n            };\n            const defineRootMetricsMsg = {\n                type: \"define\",\n                metrics: [rootStateMetric],\n            };\n            session.send(defineRootMetricsMsg);\n            if (reconnect) {\n                replayRepo(repo);\n            }\n        });\n        session.join({\n            system: config.system,\n            service: config.service,\n            instance: config.instance\n        });\n    };\n    const replayRepo = (repo) => {\n        replaySystem(repo.root);\n    };\n    const replaySystem = (system) => {\n        createSystem(system);\n        system.metrics.forEach((m) => {\n            createMetric(m);\n        });\n        system.subSystems.forEach((ss) => {\n            replaySystem(ss);\n        });\n    };\n    const createSystem = async (system) => {\n        if (system.parent === undefined) {\n            return;\n        }\n        await joinPromise;\n        const metric = {\n            name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\n            type: \"object\",\n            composite: {\n                Description: {\n                    type: \"string\",\n                    description: \"\",\n                },\n                Value: {\n                    type: \"number\",\n                    description: \"\",\n                },\n            },\n            description: \"System state\",\n            context: {},\n        };\n        const createMetricsMsg = {\n            type: \"define\",\n            metrics: [metric],\n        };\n        session.send(createMetricsMsg);\n    };\n    const updateSystem = async (system, state) => {\n        await joinPromise;\n        const shadowedUpdateMetric = {\n            type: \"publish\",\n            values: [{\n                    name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\n                    value: {\n                        Description: state.description,\n                        Value: state.state,\n                    },\n                    timestamp: Date.now(),\n                }],\n        };\n        session.send(shadowedUpdateMetric);\n        const stateObj = composeMsgForRootStateMetric(system);\n        const rootMetric = {\n            type: \"publish\",\n            peer_id: connection.peerId,\n            values: [{\n                    name: \"/State\",\n                    value: {\n                        Description: stateObj.description,\n                        Value: stateObj.value,\n                    },\n                    timestamp: Date.now(),\n                }],\n        };\n        session.send(rootMetric);\n    };\n    const createMetric = async (metric) => {\n        const metricClone = cloneMetric(metric);\n        await joinPromise;\n        const m = serializeMetric(metricClone);\n        const createMetricsMsg = {\n            type: \"define\",\n            metrics: [m],\n        };\n        session.send(createMetricsMsg);\n        if (typeof metricClone.value !== \"undefined\") {\n            updateMetricCore(metricClone);\n        }\n    };\n    const updateMetric = async (metric) => {\n        const metricClone = cloneMetric(metric);\n        await joinPromise;\n        updateMetricCore(metricClone);\n    };\n    const updateMetricCore = (metric) => {\n        if (canUpdate()) {\n            const value = getMetricValueByType(metric);\n            const publishMetricsMsg = {\n                type: \"publish\",\n                values: [{\n                        name: normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name),\n                        value,\n                        timestamp: Date.now(),\n                    }],\n            };\n            return session.sendFireAndForget(publishMetricsMsg);\n        }\n        return Promise.resolve();\n    };\n    const cloneMetric = (metric) => {\n        const metricClone = { ...metric };\n        if (typeof metric.value === \"object\" && metric.value !== null) {\n            metricClone.value = { ...metric.value };\n        }\n        return metricClone;\n    };\n    const canUpdate = () => {\n        try {\n            const func = config.canUpdateMetric ?? (() => true);\n            return func();\n        }\n        catch {\n            return true;\n        }\n    };\n    return {\n        init,\n        createSystem,\n        updateSystem,\n        createMetric,\n        updateMetric,\n    };\n}\n\nvar Helpers = {\n    validate: (definition, parent, transport) => {\n        if (definition === null || typeof definition !== \"object\") {\n            throw new Error(\"Missing definition\");\n        }\n        if (parent === null || typeof parent !== \"object\") {\n            throw new Error(\"Missing parent\");\n        }\n        if (transport === null || typeof transport !== \"object\") {\n            throw new Error(\"Missing transport\");\n        }\n    },\n};\n\nclass BaseMetric {\n    definition;\n    system;\n    transport;\n    value;\n    type;\n    path = [];\n    name;\n    description;\n    get repo() {\n        return this.system?.repo;\n    }\n    get id() { return `${this.system.path}/${name}`; }\n    constructor(definition, system, transport, value, type) {\n        this.definition = definition;\n        this.system = system;\n        this.transport = transport;\n        this.value = value;\n        this.type = type;\n        Helpers.validate(definition, system, transport);\n        this.path = system.path.slice(0);\n        this.path.push(system.name);\n        this.name = definition.name;\n        this.description = definition.description;\n        transport.createMetric(this);\n    }\n    update(newValue) {\n        this.value = newValue;\n        return this.transport.updateMetric(this);\n    }\n}\n\nclass NumberMetric extends BaseMetric {\n    constructor(definition, system, transport, value) {\n        super(definition, system, transport, value, MetricTypes.NUMBER);\n    }\n    incrementBy(num) {\n        this.update(this.value + num);\n    }\n    increment() {\n        this.incrementBy(1);\n    }\n    decrement() {\n        this.incrementBy(-1);\n    }\n    decrementBy(num) {\n        this.incrementBy(num * -1);\n    }\n}\n\nclass ObjectMetric extends BaseMetric {\n    constructor(definition, system, transport, value) {\n        super(definition, system, transport, value, MetricTypes.OBJECT);\n    }\n    update(newValue) {\n        this.mergeValues(newValue);\n        return this.transport.updateMetric(this);\n    }\n    mergeValues(values) {\n        return Object.keys(this.value).forEach((k) => {\n            if (typeof values[k] !== \"undefined\") {\n                this.value[k] = values[k];\n            }\n        });\n    }\n}\n\nclass StringMetric extends BaseMetric {\n    constructor(definition, system, transport, value) {\n        super(definition, system, transport, value, MetricTypes.STRING);\n    }\n}\n\nclass TimestampMetric extends BaseMetric {\n    constructor(definition, system, transport, value) {\n        super(definition, system, transport, value, MetricTypes.TIMESTAMP);\n    }\n    now() {\n        this.update(new Date());\n    }\n}\n\nfunction system(name, repo, protocol, parent, description) {\n    if (!repo) {\n        throw new Error(\"Repository is required\");\n    }\n    if (!protocol) {\n        throw new Error(\"Transport is required\");\n    }\n    const _transport = protocol;\n    const _name = name;\n    const _description = description || \"\";\n    const _repo = repo;\n    const _parent = parent;\n    const _path = _buildPath(parent);\n    let _state = {};\n    const id = _arrayToString(_path, \"/\") + name;\n    const root = repo.root;\n    const _subSystems = [];\n    const _metrics = [];\n    function subSystem(nameSystem, descriptionSystem) {\n        if (!nameSystem || nameSystem.length === 0) {\n            throw new Error(\"name is required\");\n        }\n        const match = _subSystems.filter((s) => s.name === nameSystem);\n        if (match.length > 0) {\n            return match[0];\n        }\n        const _system = system(nameSystem, _repo, _transport, me, descriptionSystem);\n        _subSystems.push(_system);\n        return _system;\n    }\n    function setState(state, stateDescription) {\n        _state = { state, description: stateDescription };\n        _transport.updateSystem(me, _state);\n    }\n    function stringMetric(definition, value) {\n        return _getOrCreateMetric(definition, MetricTypes.STRING, value, (metricDef) => new StringMetric(metricDef, me, _transport, value));\n    }\n    function numberMetric(definition, value) {\n        return _getOrCreateMetric(definition, MetricTypes.NUMBER, value, (metricDef) => new NumberMetric(metricDef, me, _transport, value));\n    }\n    function objectMetric(definition, value) {\n        return _getOrCreateMetric(definition, MetricTypes.OBJECT, value, (metricDef) => new ObjectMetric(metricDef, me, _transport, value));\n    }\n    function timestampMetric(definition, value) {\n        return _getOrCreateMetric(definition, MetricTypes.TIMESTAMP, value, (metricDef) => new TimestampMetric(metricDef, me, _transport, value));\n    }\n    function _getOrCreateMetric(metricObject, expectedType, value, createMetric) {\n        let metricDef = { name: \"\" };\n        if (typeof metricObject === \"string\") {\n            metricDef = { name: metricObject };\n        }\n        else {\n            metricDef = metricObject;\n        }\n        const matching = _metrics.filter((shadowedMetric) => shadowedMetric.name === metricDef.name);\n        if (matching.length > 0) {\n            const existing = matching[0];\n            if (existing.type !== expectedType) {\n                throw new Error(`A metric named ${metricDef.name} is already defined with different type.`);\n            }\n            if (typeof value !== \"undefined\") {\n                existing\n                    .update(value)\n                    .catch(() => { });\n            }\n            return existing;\n        }\n        const metric = createMetric(metricDef);\n        _metrics.push(metric);\n        return metric;\n    }\n    function _buildPath(shadowedSystem) {\n        if (!shadowedSystem || !shadowedSystem.parent) {\n            return [];\n        }\n        const path = _buildPath(shadowedSystem.parent);\n        path.push(shadowedSystem.name);\n        return path;\n    }\n    function _arrayToString(path, separator) {\n        return ((path && path.length > 0) ? path.join(separator) : \"\");\n    }\n    function getAggregateState() {\n        const aggState = [];\n        if (Object.keys(_state).length > 0) {\n            aggState.push({\n                name: _name,\n                path: _path,\n                state: _state.state,\n                description: _state.description,\n            });\n        }\n        _subSystems.forEach((shadowedSubSystem) => {\n            const result = shadowedSubSystem.getAggregateState();\n            if (result.length > 0) {\n                aggState.push(...result);\n            }\n        });\n        return aggState;\n    }\n    const me = {\n        get name() {\n            return _name;\n        },\n        get description() {\n            return _description;\n        },\n        get repo() {\n            return _repo;\n        },\n        get parent() {\n            return _parent;\n        },\n        path: _path,\n        id,\n        root,\n        get subSystems() {\n            return _subSystems;\n        },\n        get metrics() {\n            return _metrics;\n        },\n        subSystem,\n        getState: () => {\n            return _state;\n        },\n        setState,\n        stringMetric,\n        timestampMetric,\n        objectMetric,\n        numberMetric,\n        getAggregateState,\n    };\n    _transport.createSystem(me);\n    return me;\n}\n\nclass Repository {\n    root;\n    constructor(options, protocol) {\n        protocol.init(this);\n        this.root = system(\"\", this, protocol);\n        this.addSystemMetrics(this.root, options.clickStream || options.clickStream === undefined);\n    }\n    addSystemMetrics(rootSystem, useClickStream) {\n        if (typeof navigator !== \"undefined\") {\n            rootSystem.stringMetric(\"UserAgent\", navigator.userAgent);\n        }\n        if (useClickStream && typeof document !== \"undefined\") {\n            const clickStream = rootSystem.subSystem(\"ClickStream\");\n            const documentClickHandler = (e) => {\n                if (!e.target) {\n                    return;\n                }\n                const target = e.target;\n                const className = target ? target.getAttribute(\"class\") ?? \"\" : \"\";\n                clickStream.objectMetric(\"LastBrowserEvent\", {\n                    type: \"click\",\n                    timestamp: new Date(),\n                    target: {\n                        className,\n                        id: target.id,\n                        type: \"<\" + target.tagName.toLowerCase() + \">\",\n                        href: target.href || \"\",\n                    },\n                });\n            };\n            clickStream.objectMetric(\"Page\", {\n                title: document.title,\n                page: window.location.href,\n            });\n            if (document.addEventListener) {\n                document.addEventListener(\"click\", documentClickHandler);\n            }\n            else {\n                document.attachEvent(\"onclick\", documentClickHandler);\n            }\n        }\n        rootSystem.stringMetric(\"StartTime\", (new Date()).toString());\n        const urlMetric = rootSystem.stringMetric(\"StartURL\", \"\");\n        const appNameMetric = rootSystem.stringMetric(\"AppName\", \"\");\n        if (typeof window !== \"undefined\") {\n            if (typeof window.location !== \"undefined\") {\n                const startUrl = window.location.href;\n                urlMetric.update(startUrl);\n            }\n            if (typeof window.glue42gd !== \"undefined\") {\n                appNameMetric.update(window.glue42gd.appName);\n            }\n        }\n    }\n}\n\nclass NullProtocol {\n    init(repo) {\n    }\n    createSystem(system) {\n        return Promise.resolve();\n    }\n    updateSystem(metric, state) {\n        return Promise.resolve();\n    }\n    createMetric(metric) {\n        return Promise.resolve();\n    }\n    updateMetric(metric) {\n        return Promise.resolve();\n    }\n}\n\nclass PerfTracker {\n    api;\n    lastCount = 0;\n    initialPublishTimeout = 10 * 1000;\n    publishInterval = 60 * 1000;\n    system;\n    constructor(api, initialPublishTimeout, publishInterval) {\n        this.api = api;\n        this.initialPublishTimeout = initialPublishTimeout ?? this.initialPublishTimeout;\n        this.publishInterval = publishInterval ?? this.publishInterval;\n        this.scheduleCollection();\n        this.system = this.api.subSystem(\"performance\", \"Performance data published by the web application\");\n    }\n    scheduleCollection() {\n        setTimeout(() => {\n            this.collect();\n            setInterval(() => {\n                this.collect();\n            }, this.publishInterval);\n        }, this.initialPublishTimeout);\n    }\n    collect() {\n        try {\n            this.collectMemory();\n            this.collectEntries();\n        }\n        catch {\n        }\n    }\n    collectMemory() {\n        const memory = window.performance.memory;\n        this.system.stringMetric(\"memory\", JSON.stringify({\n            totalJSHeapSize: memory.totalJSHeapSize,\n            usedJSHeapSize: memory.usedJSHeapSize\n        }));\n    }\n    collectEntries() {\n        const allEntries = window.performance.getEntries();\n        if (allEntries.length <= this.lastCount) {\n            return;\n        }\n        this.lastCount = allEntries.length;\n        const jsonfiedEntries = allEntries.map((i) => i.toJSON());\n        this.system.stringMetric(\"entries\", JSON.stringify(jsonfiedEntries));\n    }\n}\n\nvar metrics = (options) => {\n    let protocol;\n    if (!options.connection || typeof options.connection !== \"object\") {\n        protocol = new NullProtocol();\n    }\n    else {\n        protocol = gw3(options.connection, options);\n    }\n    const repo = new Repository(options, protocol);\n    let rootSystem = repo.root;\n    if (!options.disableAutoAppSystem) {\n        rootSystem = rootSystem.subSystem(\"App\");\n    }\n    const api = addFAVSupport(rootSystem);\n    initPerf(api, options.pagePerformanceMetrics);\n    return api;\n};\nfunction initPerf(api, config) {\n    if (typeof window === \"undefined\") {\n        return;\n    }\n    const perfConfig = window?.glue42gd?.metrics?.pagePerformanceMetrics;\n    if (perfConfig) {\n        config = perfConfig;\n    }\n    if (config?.enabled) {\n        new PerfTracker(api, config.initialPublishTimeout, config.publishInterval);\n    }\n}\nfunction addFAVSupport(system) {\n    const reportingSystem = system.subSystem(\"reporting\");\n    const def = {\n        name: \"features\"\n    };\n    let featureMetric;\n    const featureMetricFunc = (name, action, payload) => {\n        if (typeof name === \"undefined\" || name === \"\") {\n            throw new Error(\"name is mandatory\");\n        }\n        else if (typeof action === \"undefined\" || action === \"\") {\n            throw new Error(\"action is mandatory\");\n        }\n        else if (typeof payload === \"undefined\" || payload === \"\") {\n            throw new Error(\"payload is mandatory\");\n        }\n        if (!featureMetric) {\n            featureMetric = reportingSystem.objectMetric(def, { name, action, payload });\n        }\n        else {\n            featureMetric.update({\n                name,\n                action,\n                payload\n            });\n        }\n    };\n    system.featureMetric = featureMetricFunc;\n    return system;\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs$1 (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createRegistry$1(options) {\n    if (options && options.errorHandling\n        && typeof options.errorHandling !== \"function\"\n        && options.errorHandling !== \"log\"\n        && options.errorHandling !== \"silent\"\n        && options.errorHandling !== \"throw\") {\n        throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\n    }\n    var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\n    var callbacks = {};\n    function add(key, callback, replayArgumentsArr) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            callbacksForKey = [];\n            callbacks[key] = callbacksForKey;\n        }\n        callbacksForKey.push(callback);\n        if (replayArgumentsArr) {\n            setTimeout(function () {\n                replayArgumentsArr.forEach(function (replayArgument) {\n                    var _a;\n                    if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\n                        try {\n                            if (Array.isArray(replayArgument)) {\n                                callback.apply(undefined, replayArgument);\n                            }\n                            else {\n                                callback.apply(undefined, [replayArgument]);\n                            }\n                        }\n                        catch (err) {\n                            _handleError(err, key);\n                        }\n                    }\n                });\n            }, 0);\n        }\n        return function () {\n            var allForKey = callbacks[key];\n            if (!allForKey) {\n                return;\n            }\n            allForKey = allForKey.reduce(function (acc, element, index) {\n                if (!(element === callback && acc.length === index)) {\n                    acc.push(element);\n                }\n                return acc;\n            }, []);\n            if (allForKey.length === 0) {\n                delete callbacks[key];\n            }\n            else {\n                callbacks[key] = allForKey;\n            }\n        };\n    }\n    function execute(key) {\n        var argumentsArr = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            argumentsArr[_i - 1] = arguments[_i];\n        }\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey || callbacksForKey.length === 0) {\n            return [];\n        }\n        var results = [];\n        callbacksForKey.forEach(function (callback) {\n            try {\n                var result = callback.apply(undefined, argumentsArr);\n                results.push(result);\n            }\n            catch (err) {\n                results.push(undefined);\n                _handleError(err, key);\n            }\n        });\n        return results;\n    }\n    function _handleError(exceptionArtifact, key) {\n        var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\n        if (_userErrorHandler) {\n            _userErrorHandler(errParam);\n            return;\n        }\n        var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\n        if (options) {\n            switch (options.errorHandling) {\n                case \"log\":\n                    return console.error(msg);\n                case \"silent\":\n                    return;\n                case \"throw\":\n                    throw new Error(msg);\n            }\n        }\n        console.error(msg);\n    }\n    function clear() {\n        callbacks = {};\n    }\n    function clearKey(key) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            return;\n        }\n        delete callbacks[key];\n    }\n    return {\n        add: add,\n        execute: execute,\n        clear: clear,\n        clearKey: clearKey\n    };\n}\ncreateRegistry$1.default = createRegistry$1;\nvar lib$1 = createRegistry$1;\n\n\nvar CallbackRegistryFactory$1 = /*@__PURE__*/getDefaultExportFromCjs$1(lib$1);\n\nclass InProcTransport {\n    gw;\n    registry = CallbackRegistryFactory$1();\n    client;\n    constructor(settings, logger) {\n        this.gw = settings.facade;\n        this.gw.connect((_client, message) => {\n            this.messageHandler(message);\n        }).then((client) => {\n            this.client = client;\n        });\n    }\n    get isObjectBasedTransport() {\n        return true;\n    }\n    sendObject(msg) {\n        if (this.client) {\n            this.client.send(msg);\n            return Promise.resolve(undefined);\n        }\n        else {\n            return Promise.reject(`not connected`);\n        }\n    }\n    send(_msg) {\n        return Promise.reject(\"not supported\");\n    }\n    onMessage(callback) {\n        return this.registry.add(\"onMessage\", callback);\n    }\n    onConnectedChanged(callback) {\n        callback(true);\n        return () => { };\n    }\n    close() {\n        return Promise.resolve();\n    }\n    open() {\n        return Promise.resolve();\n    }\n    name() {\n        return \"in-memory\";\n    }\n    reconnect() {\n        return Promise.resolve();\n    }\n    messageHandler(msg) {\n        this.registry.execute(\"onMessage\", msg);\n    }\n}\n\nclass SharedWorkerTransport {\n    logger;\n    worker;\n    registry = CallbackRegistryFactory$1();\n    constructor(workerFile, logger) {\n        this.logger = logger;\n        this.worker = new SharedWorker(workerFile);\n        this.worker.port.onmessage = (e) => {\n            this.messageHandler(e.data);\n        };\n    }\n    get isObjectBasedTransport() {\n        return true;\n    }\n    sendObject(msg) {\n        this.worker.port.postMessage(msg);\n        return Promise.resolve();\n    }\n    send(_msg) {\n        return Promise.reject(\"not supported\");\n    }\n    onMessage(callback) {\n        return this.registry.add(\"onMessage\", callback);\n    }\n    onConnectedChanged(callback) {\n        callback(true);\n        return () => { };\n    }\n    close() {\n        return Promise.resolve();\n    }\n    open() {\n        return Promise.resolve();\n    }\n    name() {\n        return \"shared-worker\";\n    }\n    reconnect() {\n        return Promise.resolve();\n    }\n    messageHandler(msg) {\n        this.registry.execute(\"onMessage\", msg);\n    }\n}\n\nlet Utils$1 = class Utils {\n    static isNode() {\n        if (typeof Utils._isNode !== \"undefined\") {\n            return Utils._isNode;\n        }\n        if (typeof window !== \"undefined\") {\n            Utils._isNode = false;\n            return false;\n        }\n        try {\n            Utils._isNode = Object.prototype.toString.call(global.process) === \"[object process]\";\n        }\n        catch (e) {\n            Utils._isNode = false;\n        }\n        return Utils._isNode;\n    }\n    static _isNode;\n};\n\nclass PromiseWrapper {\n    static delay(time) {\n        return new Promise((resolve) => setTimeout(resolve, time));\n    }\n    resolve;\n    reject;\n    promise;\n    rejected = false;\n    resolved = false;\n    get ended() {\n        return this.rejected || this.resolved;\n    }\n    constructor() {\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = (t) => {\n                this.resolved = true;\n                resolve(t);\n            };\n            this.reject = (err) => {\n                this.rejected = true;\n                reject(err);\n            };\n        });\n    }\n}\n\nconst timers = {};\nfunction getAllTimers() {\n    return timers;\n}\nfunction timer (timerName) {\n    const existing = timers[timerName];\n    if (existing) {\n        return existing;\n    }\n    const marks = [];\n    function now() {\n        return new Date().getTime();\n    }\n    const startTime = now();\n    mark(\"start\", startTime);\n    let endTime;\n    let period;\n    function stop() {\n        endTime = now();\n        mark(\"end\", endTime);\n        period = endTime - startTime;\n        return period;\n    }\n    function mark(name, time) {\n        const currentTime = time ?? now();\n        let diff = 0;\n        if (marks.length > 0) {\n            diff = currentTime - marks[marks.length - 1].time;\n        }\n        marks.push({ name, time: currentTime, diff });\n    }\n    const timerObj = {\n        get startTime() {\n            return startTime;\n        },\n        get endTime() {\n            return endTime;\n        },\n        get period() {\n            return period;\n        },\n        stop,\n        mark,\n        marks\n    };\n    timers[timerName] = timerObj;\n    return timerObj;\n}\n\nconst WebSocketConstructor = Utils$1.isNode() ? require(\"ws\") : window.WebSocket;\nclass WS {\n    ws;\n    logger;\n    settings;\n    startupTimer = timer(\"connection\");\n    _running = true;\n    _registry = CallbackRegistryFactory$1();\n    wsRequests = [];\n    constructor(settings, logger) {\n        this.settings = settings;\n        this.logger = logger;\n        if (!this.settings.ws) {\n            throw new Error(\"ws is missing\");\n        }\n    }\n    onMessage(callback) {\n        return this._registry.add(\"onMessage\", callback);\n    }\n    send(msg, options) {\n        return new Promise((resolve, reject) => {\n            this.waitForSocketConnection(() => {\n                try {\n                    this.ws?.send(msg);\n                    resolve();\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }, reject);\n        });\n    }\n    open() {\n        this.logger.info(\"opening ws...\");\n        this._running = true;\n        return new Promise((resolve, reject) => {\n            this.waitForSocketConnection(resolve, reject);\n        });\n    }\n    close() {\n        this._running = false;\n        if (this.ws) {\n            this.ws.close();\n        }\n        return Promise.resolve();\n    }\n    onConnectedChanged(callback) {\n        return this._registry.add(\"onConnectedChanged\", callback);\n    }\n    name() {\n        return this.settings.ws;\n    }\n    reconnect() {\n        this.ws?.close();\n        const pw = new PromiseWrapper();\n        this.waitForSocketConnection(() => {\n            pw.resolve();\n        });\n        return pw.promise;\n    }\n    waitForSocketConnection(callback, failed) {\n        failed = failed ?? (() => { });\n        if (!this._running) {\n            failed(`wait for socket on ${this.settings.ws} failed - socket closed by user`);\n            return;\n        }\n        if (this.ws?.readyState === 1) {\n            callback();\n            return;\n        }\n        this.wsRequests.push({ callback, failed });\n        if (this.wsRequests.length > 1) {\n            return;\n        }\n        this.openSocket();\n    }\n    async openSocket(retryInterval, retriesLeft) {\n        this.logger.info(`opening ws to ${this.settings.ws}, retryInterval: ${retryInterval}, retriesLeft: ${retriesLeft}...`);\n        this.startupTimer.mark(\"opening-socket\");\n        if (retryInterval === undefined) {\n            retryInterval = this.settings.reconnectInterval;\n        }\n        if (typeof retriesLeft === \"undefined\") {\n            retriesLeft = this.settings.reconnectAttempts;\n        }\n        if (retriesLeft !== undefined) {\n            if (retriesLeft === 0) {\n                this.notifyForSocketState(`wait for socket on ${this.settings.ws} failed - no more retries left`);\n                return;\n            }\n            this.logger.debug(`will retry ${retriesLeft} more times (every ${retryInterval} ms)`);\n        }\n        try {\n            await this.initiateSocket();\n            this.startupTimer.mark(\"socket-initiated\");\n            this.notifyForSocketState();\n        }\n        catch {\n            setTimeout(() => {\n                const retries = retriesLeft === undefined ? undefined : retriesLeft - 1;\n                this.openSocket(retryInterval, retries);\n            }, retryInterval);\n        }\n    }\n    initiateSocket() {\n        const pw = new PromiseWrapper();\n        this.logger.debug(`initiating ws to ${this.settings.ws}...`);\n        this.ws = new WebSocketConstructor(this.settings.ws ?? \"\");\n        this.ws.onerror = (err) => {\n            let reason = \"\";\n            try {\n                reason = JSON.stringify(err);\n            }\n            catch (error) {\n                const seen = new WeakSet();\n                const replacer = (key, value) => {\n                    if (typeof value === \"object\" && value !== null) {\n                        if (seen.has(value)) {\n                            return;\n                        }\n                        seen.add(value);\n                    }\n                    return value;\n                };\n                reason = JSON.stringify(err, replacer);\n            }\n            this.logger.info(`ws error - reason: ${reason}`);\n            pw.reject(\"error\");\n            this.notifyStatusChanged(false, reason);\n        };\n        this.ws.onclose = (err) => {\n            this.logger.info(`ws closed - code: ${err?.code} reason: ${err?.reason}`);\n            pw.reject(\"closed\");\n            this.notifyStatusChanged(false);\n        };\n        this.ws.onopen = () => {\n            this.startupTimer.mark(\"ws-opened\");\n            this.logger.info(`ws opened ${this.settings.identity?.application}`);\n            pw.resolve();\n            this.notifyStatusChanged(true);\n        };\n        this.ws.onmessage = (message) => {\n            this._registry.execute(\"onMessage\", message.data);\n        };\n        return pw.promise;\n    }\n    notifyForSocketState(error) {\n        this.wsRequests.forEach((wsRequest) => {\n            if (error) {\n                if (wsRequest.failed) {\n                    wsRequest.failed(error);\n                }\n            }\n            else {\n                wsRequest.callback();\n            }\n        });\n        this.wsRequests = [];\n    }\n    notifyStatusChanged(status, reason) {\n        this._registry.execute(\"onConnectedChanged\", status, reason);\n    }\n}\n\nclass MessageReplayerImpl {\n    specs;\n    specsNames = [];\n    messages = {};\n    isDone;\n    subs = {};\n    subsRefCount = {};\n    connection;\n    constructor(specs) {\n        this.specs = {};\n        for (const spec of specs) {\n            this.specs[spec.name] = spec;\n            this.specsNames.push(spec.name);\n        }\n    }\n    init(connection) {\n        this.connection = connection;\n        for (const name of this.specsNames) {\n            for (const type of this.specs[name].types) {\n                let refCount = this.subsRefCount[type];\n                if (!refCount) {\n                    refCount = 0;\n                }\n                refCount += 1;\n                this.subsRefCount[type] = refCount;\n                if (refCount > 1) {\n                    continue;\n                }\n                const sub = connection.on(type, (msg) => this.processMessage(type, msg));\n                this.subs[type] = sub;\n            }\n        }\n    }\n    processMessage(type, msg) {\n        if (this.isDone || !msg) {\n            return;\n        }\n        for (const name of this.specsNames) {\n            if (this.specs[name].types.indexOf(type) !== -1) {\n                const messages = this.messages[name] || [];\n                this.messages[name] = messages;\n                messages.push(msg);\n            }\n        }\n    }\n    drain(name, callback) {\n        if (callback) {\n            (this.messages[name] || []).forEach(callback);\n        }\n        delete this.messages[name];\n        for (const type of this.specs[name].types) {\n            this.subsRefCount[type] -= 1;\n            if (this.subsRefCount[type] <= 0) {\n                this.connection?.off(this.subs[type]);\n                delete this.subs[type];\n                delete this.subsRefCount[type];\n            }\n        }\n        delete this.specs[name];\n        if (!this.specs.length) {\n            this.isDone = true;\n        }\n    }\n}\n\nlet urlAlphabet$1 =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict';\nlet nanoid$1 = (size = 21) => {\n  let id = '';\n  let i = size;\n  while (i--) {\n    id += urlAlphabet$1[(Math.random() * 64) | 0];\n  }\n  return id\n};\n\nconst PromisePlus$1 = (executor, timeoutMilliseconds, timeoutMessage) => {\n    return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => {\n            const message = timeoutMessage || `Promise timeout hit: ${timeoutMilliseconds}`;\n            reject(message);\n        }, timeoutMilliseconds);\n        const providedPromise = new Promise(executor);\n        providedPromise\n            .then((result) => {\n            clearTimeout(timeout);\n            resolve(result);\n        })\n            .catch((error) => {\n            clearTimeout(timeout);\n            reject(error);\n        });\n    });\n};\n\nclass WebPlatformTransport {\n    settings;\n    logger;\n    identity;\n    isPreferredActivated;\n    _communicationId;\n    publicWindowId;\n    selfAssignedWindowId;\n    iAmConnected = false;\n    parentReady = false;\n    rejected = false;\n    parentPingResolve;\n    parentPingInterval;\n    connectionResolve;\n    extConnectionResolve;\n    extConnectionReject;\n    connectionReject;\n    port;\n    myClientId;\n    children = [];\n    extContentAvailable = false;\n    extContentConnecting = false;\n    extContentConnected = false;\n    parentWindowId;\n    parentInExtMode = false;\n    webNamespace = \"g42_core_web\";\n    parent;\n    parentType;\n    parentPingTimeout = 5000;\n    connectionRequestTimeout = 7000;\n    defaultTargetString = \"*\";\n    registry = CallbackRegistryFactory$1();\n    messages = {\n        connectionAccepted: { name: \"connectionAccepted\", handle: this.handleConnectionAccepted.bind(this) },\n        connectionRejected: { name: \"connectionRejected\", handle: this.handleConnectionRejected.bind(this) },\n        connectionRequest: { name: \"connectionRequest\", handle: this.handleConnectionRequest.bind(this) },\n        parentReady: {\n            name: \"parentReady\", handle: () => {\n            }\n        },\n        parentPing: { name: \"parentPing\", handle: this.handleParentPing.bind(this) },\n        platformPing: { name: \"platformPing\", handle: this.handlePlatformPing.bind(this) },\n        platformReady: { name: \"platformReady\", handle: this.handlePlatformReady.bind(this) },\n        clientUnload: { name: \"clientUnload\", handle: this.handleClientUnload.bind(this) },\n        manualUnload: { name: \"manualUnload\", handle: this.handleManualUnload.bind(this) },\n        extConnectionResponse: { name: \"extConnectionResponse\", handle: this.handleExtConnectionResponse.bind(this) },\n        extSetupRequest: { name: \"extSetupRequest\", handle: this.handleExtSetupRequest.bind(this) },\n        gatewayDisconnect: { name: \"gatewayDisconnect\", handle: this.handleGatewayDisconnect.bind(this) },\n        gatewayInternalConnect: { name: \"gatewayInternalConnect\", handle: this.handleGatewayInternalConnect.bind(this) }\n    };\n    constructor(settings, logger, identity) {\n        this.settings = settings;\n        this.logger = logger;\n        this.identity = identity;\n        this.extContentAvailable = !!window.glue42ext;\n        this.setUpMessageListener();\n        this.setUpUnload();\n        this.setupPlatformUnloadListener();\n        this.parentType = window.name.includes(\"#wsp\") ? \"workspace\" : undefined;\n    }\n    manualSetReadyState() {\n        this.iAmConnected = true;\n        this.parentReady = true;\n    }\n    get transportWindowId() {\n        return this.publicWindowId;\n    }\n    get communicationId() {\n        return this._communicationId;\n    }\n    async sendObject(msg) {\n        if (this.extContentConnected) {\n            return window.postMessage({ glue42ExtOut: msg }, this.defaultTargetString);\n        }\n        if (!this.port) {\n            throw new Error(\"Cannot send message, because the port was not opened yet\");\n        }\n        this.port.postMessage(msg);\n    }\n    get isObjectBasedTransport() {\n        return true;\n    }\n    onMessage(callback) {\n        return this.registry.add(\"onMessage\", callback);\n    }\n    send() {\n        return Promise.reject(\"not supported\");\n    }\n    onConnectedChanged(callback) {\n        return this.registry.add(\"onConnectedChanged\", callback);\n    }\n    async open() {\n        this.logger.debug(\"opening a connection to the web platform gateway.\");\n        await this.connect();\n        this.notifyStatusChanged(true);\n    }\n    close() {\n        const message = {\n            glue42core: {\n                type: this.messages.gatewayDisconnect.name,\n                data: {\n                    clientId: this.myClientId,\n                    ownWindowId: this.identity?.windowId\n                }\n            }\n        };\n        this.port?.postMessage(message);\n        this.parentReady = false;\n        this.notifyStatusChanged(false, \"manual reconnection\");\n        return Promise.resolve();\n    }\n    name() {\n        return \"web-platform\";\n    }\n    async reconnect() {\n        await this.close();\n        return Promise.resolve();\n    }\n    initiateInternalConnection() {\n        return new Promise((resolve, reject) => {\n            this.logger.debug(\"opening an internal web platform connection\");\n            this.port = this.settings.port;\n            if (this.iAmConnected) {\n                this.logger.warn(\"cannot open a new connection, because this client is currently connected\");\n                return;\n            }\n            this.port.onmessage = (event) => {\n                if (this.iAmConnected && !event.data?.glue42core) {\n                    this.registry.execute(\"onMessage\", event.data);\n                    return;\n                }\n                const data = event.data?.glue42core;\n                if (!data) {\n                    return;\n                }\n                if (data.type === this.messages.gatewayInternalConnect.name && data.success) {\n                    this.publicWindowId = this.settings.windowId;\n                    if (this.identity && this.publicWindowId) {\n                        this.identity.windowId = this.publicWindowId;\n                        this.identity.instance = this.publicWindowId;\n                    }\n                    resolve();\n                }\n                if (data.type === this.messages.gatewayInternalConnect.name && data.error) {\n                    reject(data.error);\n                }\n            };\n            this.port.postMessage({\n                glue42core: {\n                    type: this.messages.gatewayInternalConnect.name\n                }\n            });\n        });\n    }\n    initiateRemoteConnection(target) {\n        return PromisePlus$1((resolve, reject) => {\n            this.connectionResolve = resolve;\n            this.connectionReject = reject;\n            this.myClientId = this.myClientId ?? nanoid$1(10);\n            const bridgeInstanceId = this.getMyWindowId() || nanoid$1(10);\n            const request = {\n                glue42core: {\n                    type: this.messages.connectionRequest.name,\n                    clientId: this.myClientId,\n                    clientType: \"child\",\n                    bridgeInstanceId,\n                    selfAssignedWindowId: this.selfAssignedWindowId\n                }\n            };\n            this.logger.debug(\"sending connection request\");\n            if (this.extContentConnecting) {\n                request.glue42core.clientType = \"child\";\n                request.glue42core.bridgeInstanceId = this.myClientId;\n                request.glue42core.parentWindowId = this.parentWindowId;\n                return window.postMessage(request, this.defaultTargetString);\n            }\n            if (!target) {\n                throw new Error(\"Cannot send a connection request, because no glue target was specified!\");\n            }\n            target.postMessage(request, this.defaultTargetString);\n        }, this.connectionRequestTimeout, \"The connection to the target glue window timed out\");\n    }\n    async isParentCheckSuccess(parentCheck) {\n        try {\n            await parentCheck;\n            return { success: true };\n        }\n        catch (error) {\n            return { success: false };\n        }\n    }\n    setUpMessageListener() {\n        if (this.settings.port) {\n            this.logger.debug(\"skipping generic message listener, because this is an internal client\");\n            return;\n        }\n        window.addEventListener(\"message\", (event) => {\n            const data = event.data?.glue42core;\n            if (!data || this.rejected) {\n                return;\n            }\n            const allowedOrigins = this.settings.allowedOrigins || [];\n            if (allowedOrigins.length && !allowedOrigins.includes(event.origin)) {\n                this.logger.warn(`received a message from an origin which is not in the allowed list: ${event.origin}`);\n                return;\n            }\n            if (!this.checkMessageTypeValid(data.type)) {\n                this.logger.error(`cannot handle the incoming glue42 core message, because the type is invalid: ${data.type}`);\n                return;\n            }\n            const messageType = data.type;\n            this.logger.debug(`received valid glue42core message of type: ${messageType}`);\n            this.messages[messageType].handle(event);\n        });\n    }\n    setUpUnload() {\n        if (this.settings.port) {\n            this.logger.debug(\"skipping unload event listener, because this is an internal client\");\n            return;\n        }\n        window.addEventListener(\"beforeunload\", () => {\n            if (this.extContentConnected) {\n                return;\n            }\n            const message = {\n                glue42core: {\n                    type: this.messages.clientUnload.name,\n                    data: {\n                        clientId: this.myClientId,\n                        ownWindowId: this.identity?.windowId\n                    }\n                }\n            };\n            if (this.parent) {\n                this.parent.postMessage(message, this.defaultTargetString);\n            }\n            this.port?.postMessage(message);\n        });\n    }\n    handlePlatformReady(event) {\n        this.logger.debug(\"the web platform gave the ready signal\");\n        this.parentReady = true;\n        if (this.parentPingResolve) {\n            this.parentPingResolve();\n            delete this.parentPingResolve;\n        }\n        if (this.parentPingInterval) {\n            clearInterval(this.parentPingInterval);\n            delete this.parentPingInterval;\n        }\n        this.parent = event.source;\n        this.parentType = window.name.includes(\"#wsp\") ? \"workspace\" : \"window\";\n    }\n    handleConnectionAccepted(event) {\n        const data = event.data?.glue42core;\n        if (this.myClientId === data.clientId) {\n            return this.handleAcceptanceOfMyRequest(data);\n        }\n        return this.handleAcceptanceOfGrandChildRequest(data, event);\n    }\n    handleAcceptanceOfMyRequest(data) {\n        this.logger.debug(\"handling a connection accepted signal targeted at me.\");\n        this.isPreferredActivated = data.isPreferredActivated;\n        if (this.extContentConnecting) {\n            return this.processExtContentConnection(data);\n        }\n        if (!data.port) {\n            this.logger.error(\"cannot set up my connection, because I was not provided with a port\");\n            return;\n        }\n        this.publicWindowId = this.getMyWindowId();\n        if (this.identity) {\n            this.identity.windowId = this.publicWindowId;\n            this.identity.instance = this.identity.instance ? this.identity.instance : this.publicWindowId || nanoid$1(10);\n        }\n        if (this.identity && data.appName) {\n            this.identity.application = data.appName;\n            this.identity.applicationName = data.appName;\n        }\n        this._communicationId = data.communicationId;\n        this.port = data.port;\n        this.port.onmessage = (e) => this.registry.execute(\"onMessage\", e.data);\n        if (this.connectionResolve) {\n            this.logger.debug(\"my connection is set up, calling the connection resolve.\");\n            this.connectionResolve();\n            delete this.connectionResolve;\n            return;\n        }\n        this.logger.error(\"unable to call the connection resolve, because no connection promise was found\");\n    }\n    processExtContentConnection(data) {\n        this.logger.debug(\"handling a connection accepted signal targeted at me for extension content connection.\");\n        this.extContentConnecting = false;\n        this.extContentConnected = true;\n        this.publicWindowId = this.parentWindowId || this.myClientId;\n        if (this.extContentConnecting && this.identity) {\n            this.identity.windowId = this.publicWindowId;\n        }\n        if (this.identity && data.appName) {\n            this.identity.application = data.appName;\n            this.identity.applicationName = data.appName;\n        }\n        window.addEventListener(\"message\", (event) => {\n            const extData = event.data?.glue42ExtInc;\n            if (!extData) {\n                return;\n            }\n            const allowedOrigins = this.settings.allowedOrigins || [];\n            if (allowedOrigins.length && !allowedOrigins.includes(event.origin)) {\n                this.logger.warn(`received a message from an origin which is not in the allowed list: ${event.origin}`);\n                return;\n            }\n            this.registry.execute(\"onMessage\", extData);\n        });\n        if (this.connectionResolve) {\n            this.logger.debug(\"my connection is set up, calling the connection resolve.\");\n            this.connectionResolve();\n            delete this.connectionResolve;\n            return;\n        }\n    }\n    handleAcceptanceOfGrandChildRequest(data, event) {\n        if (this.extContentConnecting || this.extContentConnected) {\n            this.logger.debug(\"cannot process acceptance of a grandchild, because I am connected to a content script\");\n            return;\n        }\n        this.logger.debug(`handling a connection accepted signal targeted at a grandchild: ${data.clientId}`);\n        const child = this.children.find((c) => c.grandChildId === data.clientId);\n        if (!child) {\n            this.logger.error(`cannot handle connection accepted for grandchild: ${data.clientId}, because there is no grandchild with this id`);\n            return;\n        }\n        child.connected = true;\n        this.logger.debug(`the grandchild connection for ${data.clientId} is set up, forwarding the success message and the gateway port`);\n        data.parentWindowId = this.publicWindowId;\n        child.source.postMessage(event.data, child.origin, [data.port]);\n        return;\n    }\n    handleConnectionRejected() {\n        this.logger.debug(\"handling a connection rejection. Most likely the reason is that this window was not created by a glue API call\");\n        if (this.connectionReject) {\n            this.connectionReject(\"The platform connection was rejected. Most likely because this window was not created by a glue API call\");\n            delete this.connectionReject;\n        }\n    }\n    handleConnectionRequest(event) {\n        if (this.extContentConnecting) {\n            this.logger.debug(\"This connection request event is targeted at the extension content\");\n            return;\n        }\n        const source = event.source;\n        const data = event.data.glue42core;\n        if (!data.clientType || data.clientType !== \"grandChild\") {\n            return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source was not opened by a glue API call\");\n        }\n        if (!data.clientId) {\n            return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source did not provide a valid id\");\n        }\n        if (!this.parent) {\n            return this.rejectConnectionRequest(source, event.origin, \"Cannot forward the connection request, because no direct connection to the platform was found\");\n        }\n        this.logger.debug(`handling a connection request for a grandchild: ${data.clientId}`);\n        this.children.push({ grandChildId: data.clientId, source, connected: false, origin: event.origin });\n        this.logger.debug(`grandchild: ${data.clientId} is prepared, forwarding connection request to the platform`);\n        this.parent.postMessage(event.data, this.defaultTargetString);\n    }\n    handleParentPing(event) {\n        if (!this.parentReady) {\n            this.logger.debug(\"my parent is not ready, I am ignoring the parent ping\");\n            return;\n        }\n        if (!this.iAmConnected) {\n            this.logger.debug(\"i am not fully connected yet, I am ignoring the parent ping\");\n            return;\n        }\n        const message = {\n            glue42core: {\n                type: this.messages.parentReady.name\n            }\n        };\n        if (this.extContentConnected) {\n            message.glue42core.extMode = { windowId: this.myClientId };\n        }\n        const source = event.source;\n        this.logger.debug(\"responding to a parent ping with a ready message\");\n        source.postMessage(message, event.origin);\n    }\n    setupPlatformUnloadListener() {\n        this.onMessage((msg) => {\n            if (msg.type === \"platformUnload\") {\n                this.logger.debug(\"detected a web platform unload\");\n                this.parentReady = false;\n                this.notifyStatusChanged(false, \"Gateway unloaded\");\n            }\n        });\n    }\n    handleManualUnload() {\n        const message = {\n            glue42core: {\n                type: this.messages.clientUnload.name,\n                data: {\n                    clientId: this.myClientId,\n                    ownWindowId: this.identity?.windowId\n                }\n            }\n        };\n        if (this.extContentConnected) {\n            return window.postMessage({ glue42ExtOut: message }, this.defaultTargetString);\n        }\n        this.port?.postMessage(message);\n    }\n    handleClientUnload(event) {\n        const data = event.data.glue42core;\n        const clientId = data?.data.clientId;\n        if (!clientId) {\n            this.logger.warn(\"cannot process grand child unload, because the provided id was not valid\");\n            return;\n        }\n        const foundChild = this.children.find((child) => child.grandChildId === clientId);\n        if (!foundChild) {\n            this.logger.warn(\"cannot process grand child unload, because this client is unaware of this grandchild\");\n            return;\n        }\n        this.logger.debug(`handling grandchild unload for id: ${clientId}`);\n        this.children = this.children.filter((child) => child.grandChildId !== clientId);\n    }\n    handlePlatformPing() {\n        return;\n    }\n    notifyStatusChanged(status, reason) {\n        this.iAmConnected = status;\n        this.registry.execute(\"onConnectedChanged\", status, reason);\n    }\n    checkMessageTypeValid(typeToValidate) {\n        return typeof typeToValidate === \"string\" && !!this.messages[typeToValidate];\n    }\n    rejectConnectionRequest(source, origin, reason) {\n        this.rejected = true;\n        this.logger.error(reason);\n        const rejection = {\n            glue42core: {\n                type: this.messages.connectionRejected.name\n            }\n        };\n        source.postMessage(rejection, origin);\n    }\n    requestConnectionPermissionFromExt() {\n        return this.waitForContentScript()\n            .then(() => PromisePlus$1((resolve, reject) => {\n            this.extConnectionResolve = resolve;\n            this.extConnectionReject = reject;\n            const message = {\n                glue42core: {\n                    type: \"extSetupRequest\"\n                }\n            };\n            this.logger.debug(\"permission request to the extension content script was sent\");\n            window.postMessage(message, this.defaultTargetString);\n        }, this.parentPingTimeout, \"Cannot initialize glue, because this app was not opened or created by a Glue Client and the request for extension connection timed out\"));\n    }\n    handleExtConnectionResponse(event) {\n        const data = event.data?.glue42core;\n        if (!data.approved) {\n            return this.extConnectionReject ? this.extConnectionReject(\"Cannot initialize glue, because this app was not opened or created by a Glue Client and the request for extension connection was rejected\") : undefined;\n        }\n        if (this.extConnectionResolve) {\n            this.extConnectionResolve();\n            delete this.extConnectionResolve;\n        }\n        this.extContentConnecting = true;\n        this.parentType = \"extension\";\n        this.logger.debug(\"The extension connection was approved, proceeding.\");\n    }\n    handleExtSetupRequest() {\n        return;\n    }\n    handleGatewayDisconnect() {\n        return;\n    }\n    handleGatewayInternalConnect() {\n        return;\n    }\n    waitForContentScript() {\n        const contentReady = !!window.glue42ext?.content;\n        if (contentReady) {\n            return Promise.resolve();\n        }\n        return PromisePlus$1((resolve) => {\n            window.addEventListener(\"Glue42EXTReady\", () => {\n                resolve();\n            });\n        }, this.connectionRequestTimeout, \"The content script was available, but was never heard to be ready\");\n    }\n    async connect() {\n        if (this.settings.port) {\n            await this.initiateInternalConnection();\n            this.logger.debug(\"internal web platform connection completed\");\n            return;\n        }\n        this.logger.debug(\"opening a client web platform connection\");\n        await this.findParent();\n        await this.initiateRemoteConnection(this.parent);\n        this.logger.debug(\"the client is connected\");\n    }\n    async findParent() {\n        const connectionNotPossibleMsg = \"Cannot initiate glue, because this window was not opened or created by a glue client\";\n        const myInsideParents = this.getPossibleParentsInWindow(window);\n        const myOutsideParents = this.getPossibleParentsOutsideWindow(window.top?.opener, window.top);\n        const uniqueParents = new Set([...myInsideParents, ...myOutsideParents]);\n        if (!uniqueParents.size && !this.extContentAvailable) {\n            throw new Error(connectionNotPossibleMsg);\n        }\n        if (!uniqueParents.size && this.extContentAvailable) {\n            await this.requestConnectionPermissionFromExt();\n            return;\n        }\n        const defaultParentCheck = await this.isParentCheckSuccess(this.confirmParent(Array.from(uniqueParents)));\n        if (defaultParentCheck.success) {\n            this.logger.debug(\"The default parent was found!\");\n            return;\n        }\n        if (!this.extContentAvailable) {\n            throw new Error(connectionNotPossibleMsg);\n        }\n        await this.requestConnectionPermissionFromExt();\n    }\n    getPossibleParentsInWindow(currentWindow) {\n        return (!currentWindow || currentWindow === currentWindow.top) ? [] : [currentWindow.parent, ...this.getPossibleParentsInWindow(currentWindow.parent)];\n    }\n    getPossibleParentsOutsideWindow(opener, current) {\n        return (!opener || !current || opener === current) ? [] : [opener, ...this.getPossibleParentsInWindow(opener), ...this.getPossibleParentsOutsideWindow(opener.opener, opener)];\n    }\n    confirmParent(targets) {\n        const connectionNotPossibleMsg = \"Cannot initiate glue, because this window was not opened or created by a glue client\";\n        const parentCheck = PromisePlus$1((resolve) => {\n            this.parentPingResolve = resolve;\n            const message = {\n                glue42core: {\n                    type: this.messages.platformPing.name\n                }\n            };\n            this.parentPingInterval = setInterval(() => {\n                targets.forEach((target) => {\n                    target.postMessage(message, this.defaultTargetString);\n                });\n            }, 1000);\n        }, this.parentPingTimeout, connectionNotPossibleMsg);\n        parentCheck.catch(() => {\n            if (this.parentPingInterval) {\n                clearInterval(this.parentPingInterval);\n                delete this.parentPingInterval;\n            }\n        });\n        return parentCheck;\n    }\n    getMyWindowId() {\n        if (this.parentType === \"workspace\") {\n            return window.name.substring(0, window.name.indexOf(\"#wsp\"));\n        }\n        if (window !== window.top) {\n            return;\n        }\n        if (window.name?.includes(\"g42\")) {\n            return window.name;\n        }\n        this.selfAssignedWindowId = this.selfAssignedWindowId || `g42-${nanoid$1(10)}`;\n        return this.selfAssignedWindowId;\n    }\n}\n\nconst waitForInvocations = (invocations, callback) => {\n    let left = invocations;\n    return () => {\n        left--;\n        if (left === 0) {\n            callback();\n        }\n    };\n};\n\nclass AsyncSequelizer {\n    minSequenceInterval;\n    queue = [];\n    isExecutingQueue = false;\n    constructor(minSequenceInterval = 0) {\n        this.minSequenceInterval = minSequenceInterval;\n    }\n    enqueue(action) {\n        return new Promise((resolve, reject) => {\n            this.queue.push({ action, resolve, reject });\n            this.executeQueue();\n        });\n    }\n    async executeQueue() {\n        if (this.isExecutingQueue) {\n            return;\n        }\n        this.isExecutingQueue = true;\n        while (this.queue.length) {\n            const operation = this.queue.shift();\n            if (!operation) {\n                this.isExecutingQueue = false;\n                return;\n            }\n            try {\n                const actionResult = await operation.action();\n                operation.resolve(actionResult);\n            }\n            catch (error) {\n                operation.reject(error);\n            }\n            await this.intervalBreak();\n        }\n        this.isExecutingQueue = false;\n    }\n    intervalBreak() {\n        return new Promise((res) => setTimeout(res, this.minSequenceInterval));\n    }\n}\n\nfunction domainSession (domain, connection, logger, successMessages, errorMessages) {\n    if (domain == null) {\n        domain = \"global\";\n    }\n    successMessages = successMessages ?? [\"success\"];\n    errorMessages = errorMessages ?? [\"error\"];\n    let isJoined = domain === \"global\";\n    let tryReconnecting = false;\n    let _latestOptions;\n    let _connectionOn = false;\n    const callbacks = CallbackRegistryFactory$1();\n    connection.disconnected(handleConnectionDisconnected);\n    connection.loggedIn(handleConnectionLoggedIn);\n    connection.on(\"success\", (msg) => handleSuccessMessage(msg));\n    connection.on(\"error\", (msg) => handleErrorMessage(msg));\n    connection.on(\"result\", (msg) => handleSuccessMessage(msg));\n    if (successMessages) {\n        successMessages.forEach((sm) => {\n            connection.on(sm, (msg) => handleSuccessMessage(msg));\n        });\n    }\n    if (errorMessages) {\n        errorMessages.forEach((sm) => {\n            connection.on(sm, (msg) => handleErrorMessage(msg));\n        });\n    }\n    const requestsMap = {};\n    function join(options) {\n        _latestOptions = options;\n        return new Promise((resolve, reject) => {\n            if (isJoined) {\n                resolve({});\n                return;\n            }\n            let joinPromise;\n            if (domain === \"global\") {\n                joinPromise = _connectionOn ? Promise.resolve({}) : Promise.reject(\"not connected to gateway\");\n            }\n            else {\n                logger.debug(`joining domain ${domain}`);\n                const joinMsg = {\n                    type: \"join\",\n                    destination: domain,\n                    domain: \"global\",\n                    options,\n                };\n                joinPromise = send(joinMsg);\n            }\n            joinPromise\n                .then(() => {\n                handleJoined();\n                resolve({});\n            })\n                .catch((err) => {\n                logger.debug(\"error joining \" + domain + \" domain: \" + JSON.stringify(err));\n                reject(err);\n            });\n        });\n    }\n    function leave() {\n        if (domain === \"global\") {\n            return Promise.resolve();\n        }\n        logger.debug(\"stopping session \" + domain + \"...\");\n        const leaveMsg = {\n            type: \"leave\",\n            destination: domain,\n            domain: \"global\",\n        };\n        tryReconnecting = false;\n        return send(leaveMsg)\n            .then(() => {\n            isJoined = false;\n            callbacks.execute(\"onLeft\");\n        })\n            .catch(() => {\n            isJoined = false;\n            callbacks.execute(\"onLeft\");\n        });\n    }\n    function handleJoined() {\n        logger.debug(\"did join \" + domain);\n        isJoined = true;\n        const wasReconnect = tryReconnecting;\n        tryReconnecting = false;\n        callbacks.execute(\"onJoined\", wasReconnect);\n    }\n    function handleConnectionDisconnected() {\n        _connectionOn = false;\n        logger.debug(\"connection is down\");\n        isJoined = false;\n        tryReconnecting = true;\n        callbacks.execute(\"onLeft\", { disconnected: true });\n    }\n    function handleConnectionLoggedIn() {\n        _connectionOn = true;\n        if (tryReconnecting) {\n            logger.debug(\"connection is now up - trying to reconnect...\");\n            join(_latestOptions);\n        }\n    }\n    function onJoined(callback) {\n        if (isJoined) {\n            callback(false);\n        }\n        return callbacks.add(\"onJoined\", callback);\n    }\n    function onLeft(callback) {\n        if (!isJoined) {\n            callback();\n        }\n        return callbacks.add(\"onLeft\", callback);\n    }\n    function handleErrorMessage(msg) {\n        if (domain !== msg.domain) {\n            return;\n        }\n        const requestId = msg.request_id;\n        if (!requestId) {\n            return;\n        }\n        const entry = requestsMap[requestId];\n        if (!entry) {\n            return;\n        }\n        entry.error(msg);\n    }\n    function handleSuccessMessage(msg) {\n        if (msg.domain !== domain) {\n            return;\n        }\n        const requestId = msg.request_id;\n        if (!requestId) {\n            return;\n        }\n        const entry = requestsMap[requestId];\n        if (!entry) {\n            return;\n        }\n        entry.success(msg);\n    }\n    function getNextRequestId() {\n        return nanoid$1(10);\n    }\n    let queuedCalls = [];\n    function send(msg, tag, options) {\n        const ignore = [\"hello\", \"join\"];\n        if (msg.type && ignore.indexOf(msg.type) === -1) {\n            if (!isJoined) {\n                console.warn(`trying to send a message (${msg.domain} ${msg.type}) but not connected, will queue`);\n                const pw = new PromiseWrapper();\n                queuedCalls.push({ msg, tag, options, pw });\n                if (queuedCalls.length === 1) {\n                    const unsubscribe = onJoined(() => {\n                        logger.info(`joined - will now send queued messages (${queuedCalls.length} -> [${queuedCalls.map((m) => m.msg.type)}])`);\n                        queuedCalls.forEach((qm) => {\n                            send(qm.msg, qm.tag, qm.options)\n                                .then((t) => qm.pw.resolve(t))\n                                .catch((e) => qm.pw.reject(e));\n                        });\n                        queuedCalls = [];\n                        unsubscribe();\n                    });\n                }\n                return pw.promise;\n            }\n        }\n        options = options ?? {};\n        msg.request_id = msg.request_id ?? getNextRequestId();\n        msg.domain = msg.domain ?? domain;\n        if (!options.skipPeerId) {\n            msg.peer_id = connection.peerId;\n        }\n        const requestId = msg.request_id;\n        return new Promise((resolve, reject) => {\n            requestsMap[requestId] = {\n                success: (successMsg) => {\n                    delete requestsMap[requestId];\n                    successMsg._tag = tag;\n                    resolve(successMsg);\n                },\n                error: (errorMsg) => {\n                    logger.warn(`Gateway error - ${JSON.stringify(errorMsg)}`);\n                    delete requestsMap[requestId];\n                    errorMsg._tag = tag;\n                    reject(errorMsg);\n                },\n            };\n            connection\n                .send(msg, options)\n                .catch((err) => {\n                requestsMap[requestId].error({ err });\n            });\n        });\n    }\n    function sendFireAndForget(msg) {\n        msg.request_id = msg.request_id ? msg.request_id : getNextRequestId();\n        msg.domain = msg.domain ?? domain;\n        msg.peer_id = connection.peerId;\n        return connection.send(msg);\n    }\n    return {\n        join,\n        leave,\n        onJoined,\n        onLeft,\n        send,\n        sendFireAndForget,\n        on: (type, callback) => {\n            connection.on(type, (msg) => {\n                if (msg.domain !== domain) {\n                    return;\n                }\n                try {\n                    callback(msg);\n                }\n                catch (e) {\n                    logger.error(`Callback  failed: ${e} \\n ${e.stack} \\n msg was: ${JSON.stringify(msg)}`, e);\n                }\n            });\n        },\n        loggedIn: (callback) => connection.loggedIn(callback),\n        connected: (callback) => connection.connected(callback),\n        disconnected: (callback) => connection.disconnected(callback),\n        get peerId() {\n            return connection.peerId;\n        },\n        get domain() {\n            return domain;\n        },\n    };\n}\n\nclass Connection {\n    settings;\n    logger;\n    protocolVersion = 3;\n    peerId;\n    token;\n    info;\n    resolvedIdentity;\n    availableDomains;\n    gatewayToken;\n    replayer;\n    messageHandlers = {};\n    ids = 1;\n    registry = CallbackRegistryFactory$1();\n    _connected = false;\n    isTrace = false;\n    transport;\n    _defaultTransport;\n    _defaultAuth;\n    _targetTransport;\n    _targetAuth;\n    _swapTransport = false;\n    _switchInProgress = false;\n    _transportSubscriptions = [];\n    datePrefix = \"#T42_DATE#\";\n    datePrefixLen = this.datePrefix.length;\n    dateMinLen = this.datePrefixLen + 1;\n    datePrefixFirstChar = this.datePrefix[0];\n    _sequelizer = new AsyncSequelizer();\n    _isLoggedIn = false;\n    shouldTryLogin = true;\n    pingTimer;\n    sessions = [];\n    globalDomain;\n    initialLogin = true;\n    initialLoginAttempts = 3;\n    loginConfig;\n    constructor(settings, logger) {\n        this.settings = settings;\n        this.logger = logger;\n        settings = settings || {};\n        settings.reconnectAttempts = settings.reconnectAttempts ?? 10;\n        settings.reconnectInterval = settings.reconnectInterval ?? 1000;\n        if (settings.inproc) {\n            this.transport = new InProcTransport(settings.inproc, logger.subLogger(\"inMemory\"));\n        }\n        else if (settings.sharedWorker) {\n            this.transport = new SharedWorkerTransport(settings.sharedWorker, logger.subLogger(\"shared-worker\"));\n        }\n        else if (settings.webPlatform) {\n            this.transport = new WebPlatformTransport(settings.webPlatform, logger.subLogger(\"web-platform\"), settings.identity);\n        }\n        else if (settings.ws !== undefined) {\n            this.transport = new WS(settings, logger.subLogger(\"ws\"));\n        }\n        else {\n            throw new Error(\"No connection information specified\");\n        }\n        this.isTrace = logger.canPublish(\"trace\");\n        logger.debug(`starting with ${this.transport.name()} transport`);\n        const unsubConnectionChanged = this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this));\n        const unsubOnMessage = this.transport.onMessage(this.handleTransportMessage.bind(this));\n        this._transportSubscriptions.push(unsubConnectionChanged);\n        this._transportSubscriptions.push(unsubOnMessage);\n        this._defaultTransport = this.transport;\n        this.ping();\n    }\n    async switchTransport(settings) {\n        return this._sequelizer.enqueue(async () => {\n            if (!settings || typeof settings !== \"object\") {\n                throw new Error(\"Cannot switch transports, because the settings are missing or invalid.\");\n            }\n            if (typeof settings.type === \"undefined\") {\n                throw new Error(\"Cannot switch the transport, because the type is not defined\");\n            }\n            this.logger.trace(`Starting transport switch with settings: ${JSON.stringify(settings)}`);\n            const switchTargetTransport = settings.type === \"secondary\" ? this.getNewSecondaryTransport(settings) : this._defaultTransport;\n            this._targetTransport = switchTargetTransport;\n            this._targetAuth = settings.type === \"secondary\" ? this.getNewSecondaryAuth(settings) : this._defaultAuth;\n            const verifyPromise = this.verifyConnection();\n            this._swapTransport = true;\n            this._switchInProgress = true;\n            this.logger.trace(\"The new transport has been set, closing the current transport\");\n            await this.transport.close();\n            try {\n                await verifyPromise;\n                const isSwitchSuccess = this.transport === switchTargetTransport;\n                this.logger.info(`The reconnection after the switch was completed. Was the switch a success: ${isSwitchSuccess}`);\n                this._switchInProgress = false;\n                return { success: isSwitchSuccess };\n            }\n            catch (error) {\n                this.logger.info(\"The reconnection after the switch timed out, reverting back to the default transport.\");\n                this.switchTransport({ type: \"default\" });\n                this._switchInProgress = false;\n                return { success: false };\n            }\n        });\n    }\n    onLibReAnnounced(callback) {\n        return this.registry.add(\"libReAnnounced\", callback);\n    }\n    setLibReAnnounced(lib) {\n        this.registry.execute(\"libReAnnounced\", lib);\n    }\n    send(message, options) {\n        if (this.transport.sendObject &&\n            this.transport.isObjectBasedTransport) {\n            const msg = this.createObjectMessage(message);\n            if (this.isTrace) {\n                this.logger.trace(`>> ${JSON.stringify(msg)}`);\n            }\n            return this.transport.sendObject(msg, options);\n        }\n        else {\n            const strMessage = this.createStringMessage(message);\n            if (this.isTrace) {\n                this.logger.trace(`>> ${strMessage}`);\n            }\n            return this.transport.send(strMessage, options);\n        }\n    }\n    on(type, messageHandler) {\n        type = type.toLowerCase();\n        if (this.messageHandlers[type] === undefined) {\n            this.messageHandlers[type] = {};\n        }\n        const id = this.ids++;\n        this.messageHandlers[type][id] = messageHandler;\n        return {\n            type,\n            id,\n        };\n    }\n    off(info) {\n        delete this.messageHandlers[info.type.toLowerCase()][info.id];\n    }\n    get isConnected() {\n        return this._isLoggedIn;\n    }\n    connected(callback) {\n        return this.loggedIn(() => {\n            const currentServer = this.transport.name();\n            callback(currentServer);\n        });\n    }\n    disconnected(callback) {\n        return this.registry.add(\"disconnected\", callback);\n    }\n    async login(authRequest, reconnect) {\n        if (!this._defaultAuth) {\n            this._defaultAuth = authRequest;\n        }\n        if (this._swapTransport) {\n            this.logger.trace(\"Detected a transport swap, swapping transports\");\n            const newAuth = this.transportSwap();\n            authRequest = newAuth ?? authRequest;\n        }\n        this.logger.trace(`Starting login for transport: ${this.transport.name()} and auth ${JSON.stringify(authRequest)}`);\n        try {\n            await this.transport.open();\n            this.logger.trace(`Transport: ${this.transport.name()} opened, logging in`);\n            timer(\"connection\").mark(\"transport-opened\");\n            const identity = await this.loginCore(authRequest, reconnect);\n            this.logger.trace(`Logged in with identity: ${JSON.stringify(identity)}`);\n            timer(\"connection\").mark(\"protocol-logged-in\");\n            return identity;\n        }\n        catch (error) {\n            if (this._switchInProgress) {\n                this.logger.trace(\"An error while logging in after a transport swap, preparing a default swap.\");\n                this.prepareDefaultSwap();\n            }\n            throw new Error(error);\n        }\n    }\n    async logout() {\n        await this.logoutCore();\n        await this.transport.close();\n    }\n    loggedIn(callback) {\n        if (this._isLoggedIn) {\n            callback();\n        }\n        return this.registry.add(\"onLoggedIn\", callback);\n    }\n    domain(domain, successMessages, errorMessages) {\n        let session = this.sessions.find((s) => s.domain === domain);\n        if (!session) {\n            session = domainSession(domain, this, this.logger.subLogger(`domain=${domain}`), successMessages, errorMessages);\n            this.sessions.push(session);\n        }\n        return session;\n    }\n    authToken() {\n        const createTokenReq = {\n            domain: \"global\",\n            type: \"create-token\"\n        };\n        if (!this.globalDomain) {\n            return Promise.reject(new Error(\"no global domain session\"));\n        }\n        return this.globalDomain.send(createTokenReq)\n            .then((res) => {\n            return res.token;\n        });\n    }\n    reconnect() {\n        return this.transport.reconnect();\n    }\n    setLoggedIn(value) {\n        this._isLoggedIn = value;\n        if (this._isLoggedIn) {\n            this.registry.execute(\"onLoggedIn\");\n        }\n    }\n    distributeMessage(message, type) {\n        const handlers = this.messageHandlers[type.toLowerCase()];\n        if (handlers !== undefined) {\n            Object.keys(handlers).forEach((handlerId) => {\n                const handler = handlers[handlerId];\n                if (handler !== undefined) {\n                    try {\n                        handler(message);\n                    }\n                    catch (error) {\n                        try {\n                            this.logger.error(`Message handler failed with ${error.stack}`, error);\n                        }\n                        catch (loggerError) {\n                            console.log(\"Message handler failed\", error);\n                        }\n                    }\n                }\n            });\n        }\n    }\n    handleConnectionChanged(connected) {\n        if (this._connected === connected) {\n            return;\n        }\n        this._connected = connected;\n        if (connected) {\n            if (this.settings?.replaySpecs?.length) {\n                this.replayer = new MessageReplayerImpl(this.settings.replaySpecs);\n                this.replayer.init(this);\n            }\n            this.registry.execute(\"connected\");\n        }\n        else {\n            this.handleDisconnected();\n            this.registry.execute(\"disconnected\");\n        }\n    }\n    handleDisconnected() {\n        this.setLoggedIn(false);\n        const tryToLogin = this.shouldTryLogin;\n        if (tryToLogin && this.initialLogin) {\n            if (this.initialLoginAttempts <= 0) {\n                return;\n            }\n            this.initialLoginAttempts--;\n        }\n        this.logger.debug(\"disconnected - will try new login?\" + this.shouldTryLogin);\n        if (this.shouldTryLogin) {\n            if (!this.loginConfig) {\n                throw new Error(\"no login info\");\n            }\n            this.login(this.loginConfig, true)\n                .catch(() => {\n                setTimeout(this.handleDisconnected.bind(this), this.settings.reconnectInterval || 1000);\n            });\n        }\n    }\n    handleTransportMessage(msg) {\n        let msgObj;\n        if (typeof msg === \"string\") {\n            msgObj = this.processStringMessage(msg);\n        }\n        else {\n            msgObj = this.processObjectMessage(msg);\n        }\n        if (this.isTrace) {\n            this.logger.trace(`<< ${JSON.stringify(msgObj)}`);\n        }\n        this.distributeMessage(msgObj.msg, msgObj.msgType);\n    }\n    verifyConnection() {\n        return PromisePlus$1((resolve) => {\n            let unsub;\n            const ready = waitForInvocations(2, () => {\n                if (unsub) {\n                    unsub();\n                }\n                resolve();\n            });\n            unsub = this.onLibReAnnounced((lib) => {\n                if (lib.name === \"interop\") {\n                    return ready();\n                }\n                if (lib.name === \"contexts\") {\n                    return ready();\n                }\n            });\n        }, 10000, \"Transport switch timed out waiting for all libraries to be re-announced\");\n    }\n    getNewSecondaryTransport(settings) {\n        if (!settings.transportConfig?.url) {\n            throw new Error(\"Missing secondary transport URL.\");\n        }\n        return new WS(Object.assign({}, this.settings, { ws: settings.transportConfig.url, reconnectAttempts: 1 }), this.logger.subLogger(\"ws-secondary\"));\n    }\n    getNewSecondaryAuth(settings) {\n        if (!settings.transportConfig?.auth) {\n            throw new Error(\"Missing secondary transport auth information.\");\n        }\n        return settings.transportConfig.auth;\n    }\n    transportSwap() {\n        this._swapTransport = false;\n        if (!this._targetTransport || !this._targetAuth) {\n            this.logger.warn(`Error while switching transports - either the target transport or auth is not defined: transport defined -> ${!!this._defaultTransport}, auth defined -> ${!!this._targetAuth}. Staying on the current one.`);\n            return;\n        }\n        this._transportSubscriptions.forEach((unsub) => unsub());\n        this._transportSubscriptions = [];\n        this.transport = this._targetTransport;\n        const unsubConnectionChanged = this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this));\n        const unsubOnMessage = this.transport.onMessage(this.handleTransportMessage.bind(this));\n        this._transportSubscriptions.push(unsubConnectionChanged);\n        this._transportSubscriptions.push(unsubOnMessage);\n        return this._targetAuth;\n    }\n    prepareDefaultSwap() {\n        this._transportSubscriptions.forEach((unsub) => unsub());\n        this._transportSubscriptions = [];\n        this.transport.close().catch((error) => this.logger.warn(`Error closing the ${this.transport.name()} transport after a failed connection attempt: ${JSON.stringify(error)}`));\n        this._targetTransport = this._defaultTransport;\n        this._targetAuth = this._defaultAuth;\n        this._swapTransport = true;\n    }\n    processStringMessage(message) {\n        const msg = JSON.parse(message, (key, value) => {\n            if (typeof value !== \"string\") {\n                return value;\n            }\n            if (value.length < this.dateMinLen) {\n                return value;\n            }\n            if (!value.startsWith(this.datePrefixFirstChar)) {\n                return value;\n            }\n            if (value.substring(0, this.datePrefixLen) !== this.datePrefix) {\n                return value;\n            }\n            try {\n                const milliseconds = parseInt(value.substring(this.datePrefixLen, value.length), 10);\n                if (isNaN(milliseconds)) {\n                    return value;\n                }\n                return new Date(milliseconds);\n            }\n            catch (ex) {\n                return value;\n            }\n        });\n        return {\n            msg,\n            msgType: msg.type,\n        };\n    }\n    createStringMessage(message) {\n        const oldToJson = Date.prototype.toJSON;\n        try {\n            const datePrefix = this.datePrefix;\n            Date.prototype.toJSON = function () {\n                return datePrefix + this.getTime();\n            };\n            const result = JSON.stringify(message);\n            return result;\n        }\n        finally {\n            Date.prototype.toJSON = oldToJson;\n        }\n    }\n    processObjectMessage(message) {\n        if (!message.type) {\n            throw new Error(\"Object should have type property\");\n        }\n        return {\n            msg: message,\n            msgType: message.type,\n        };\n    }\n    createObjectMessage(message) {\n        return message;\n    }\n    async loginCore(config, reconnect) {\n        this.logger.info(\"logging in...\");\n        this.loginConfig = config;\n        if (!this.loginConfig) {\n            this.loginConfig = { username: \"\", password: \"\" };\n        }\n        this.shouldTryLogin = true;\n        const authentication = await this.setupAuthConfig(config, reconnect);\n        const helloMsg = {\n            type: \"hello\",\n            identity: this.settings.identity,\n            authentication\n        };\n        if (config.sessionId) {\n            helloMsg.request_id = config.sessionId;\n        }\n        this.globalDomain = domainSession(\"global\", this, this.logger.subLogger(\"global-domain\"), [\n            \"welcome\",\n            \"token\",\n            \"authentication-request\"\n        ]);\n        const sendOptions = { skipPeerId: true };\n        if (this.initialLogin) {\n            sendOptions.retryInterval = this.settings.reconnectInterval;\n            sendOptions.maxRetries = this.settings.reconnectAttempts;\n        }\n        try {\n            const welcomeMsg = await this.tryAuthenticate(this.globalDomain, helloMsg, sendOptions, config);\n            this.initialLogin = false;\n            this.logger.info(\"login successful with peerId \" + welcomeMsg.peer_id);\n            this.peerId = welcomeMsg.peer_id;\n            this.resolvedIdentity = welcomeMsg.resolved_identity;\n            this.availableDomains = welcomeMsg.available_domains;\n            if (welcomeMsg.options) {\n                this.token = welcomeMsg.options.access_token;\n                this.info = welcomeMsg.options.info;\n            }\n            this.setLoggedIn(true);\n            return welcomeMsg.resolved_identity;\n        }\n        catch (err) {\n            this.logger.error(\"error sending hello message - \" + (err.message || err.msg || err.reason || err), err);\n            throw err;\n        }\n        finally {\n            if (config?.flowCallback && config.sessionId) {\n                config.flowCallback(config.sessionId, null);\n            }\n        }\n    }\n    async tryAuthenticate(globalDomain, helloMsg, sendOptions, config) {\n        let welcomeMsg;\n        while (true) {\n            const msg = await globalDomain.send(helloMsg, undefined, sendOptions);\n            if (msg.type === \"authentication-request\") {\n                const token = Buffer.from(msg.authentication.token, \"base64\");\n                if (config.flowCallback && config.sessionId) {\n                    helloMsg.authentication.token =\n                        (await config.flowCallback(config.sessionId, token))\n                            .data\n                            .toString(\"base64\");\n                }\n                helloMsg.request_id = config.sessionId;\n            }\n            else if (msg.type === \"welcome\") {\n                welcomeMsg = msg;\n                break;\n            }\n            else if (msg.type === \"error\") {\n                throw new Error(\"Authentication failed: \" + msg.reason);\n            }\n            else {\n                throw new Error(\"Unexpected message type during authentication: \" + msg.type);\n            }\n        }\n        return welcomeMsg;\n    }\n    async setupAuthConfig(config, reconnect) {\n        const authentication = {};\n        this.gatewayToken = config.gatewayToken;\n        if (config.gatewayToken) {\n            if (reconnect) {\n                try {\n                    config.gatewayToken = await this.getNewGWToken();\n                }\n                catch (e) {\n                    this.logger.warn(`failed to get GW token when reconnecting ${e?.message || e}`);\n                }\n            }\n            authentication.method = \"gateway-token\";\n            authentication.token = config.gatewayToken;\n            this.gatewayToken = config.gatewayToken;\n        }\n        else if (config.flowName === \"sspi\") {\n            authentication.provider = \"win\";\n            authentication.method = \"access-token\";\n            if (config.flowCallback && config.sessionId) {\n                authentication.token =\n                    (await config.flowCallback(config.sessionId, null))\n                        .data\n                        .toString(\"base64\");\n            }\n            else {\n                throw new Error(\"Invalid SSPI config\");\n            }\n        }\n        else if (config.token) {\n            authentication.method = \"access-token\";\n            authentication.token = config.token;\n        }\n        else if (config.username) {\n            authentication.method = \"secret\";\n            authentication.login = config.username;\n            authentication.secret = config.password;\n        }\n        else if (config.provider) {\n            authentication.provider = config.provider;\n            authentication.providerContext = config.providerContext;\n        }\n        else {\n            throw new Error(\"invalid auth message\" + JSON.stringify(config));\n        }\n        return authentication;\n    }\n    async logoutCore() {\n        this.logger.debug(\"logging out...\");\n        this.shouldTryLogin = false;\n        if (this.pingTimer) {\n            clearTimeout(this.pingTimer);\n        }\n        const promises = this.sessions.map((session) => {\n            session.leave();\n        });\n        await Promise.all(promises);\n    }\n    getNewGWToken() {\n        if (typeof window !== \"undefined\") {\n            const glue42gd = window.glue42gd;\n            if (glue42gd) {\n                return glue42gd.getGWToken();\n            }\n        }\n        return Promise.reject(new Error(\"not running in GD\"));\n    }\n    ping() {\n        if (!this.shouldTryLogin) {\n            return;\n        }\n        if (this._isLoggedIn) {\n            this.send({ type: \"ping\" });\n        }\n        this.pingTimer = setTimeout(() => {\n            this.ping();\n        }, 30 * 1000);\n    }\n}\n\nconst order = [\"trace\", \"debug\", \"info\", \"warn\", \"error\", \"off\"];\nlet Logger$1 = class Logger {\n    name;\n    parent;\n    static Interop;\n    static InteropMethodName = \"T42.AppLogger.Log\";\n    static Instance;\n    path;\n    subLoggers = [];\n    _consoleLevel;\n    _publishLevel;\n    loggerFullName;\n    includeTimeAndLevel;\n    logFn = console;\n    customLogFn = false;\n    constructor(name, parent, logFn) {\n        this.name = name;\n        this.parent = parent;\n        this.name = name;\n        if (parent) {\n            this.path = `${parent.path}.${name}`;\n        }\n        else {\n            this.path = name;\n        }\n        this.loggerFullName = `[${this.path}]`;\n        this.includeTimeAndLevel = !logFn;\n        if (logFn) {\n            this.logFn = logFn;\n            this.customLogFn = true;\n        }\n    }\n    subLogger(name) {\n        const existingSub = this.subLoggers.filter((subLogger) => {\n            return subLogger.name === name;\n        })[0];\n        if (existingSub !== undefined) {\n            return existingSub;\n        }\n        Object.keys(this).forEach((key) => {\n            if (key === name) {\n                throw new Error(\"This sub logger name is not allowed.\");\n            }\n        });\n        const sub = new Logger(name, this, this.customLogFn ? this.logFn : undefined);\n        this.subLoggers.push(sub);\n        return sub;\n    }\n    publishLevel(level) {\n        if (level) {\n            this._publishLevel = level;\n        }\n        return this._publishLevel || this.parent?.publishLevel();\n    }\n    consoleLevel(level) {\n        if (level) {\n            this._consoleLevel = level;\n        }\n        return this._consoleLevel || this.parent?.consoleLevel();\n    }\n    log(message, level, error) {\n        this.publishMessage(level || \"info\", message, error);\n    }\n    trace(message) {\n        this.log(message, \"trace\");\n    }\n    debug(message) {\n        this.log(message, \"debug\");\n    }\n    info(message) {\n        this.log(message, \"info\");\n    }\n    warn(message) {\n        this.log(message, \"warn\");\n    }\n    error(message, err) {\n        this.log(message, \"error\");\n    }\n    canPublish(level, compareWith) {\n        const levelIdx = order.indexOf(level);\n        const restrictionIdx = order.indexOf(compareWith || this.consoleLevel() || \"trace\");\n        return levelIdx >= restrictionIdx;\n    }\n    publishMessage(level, message, error) {\n        const loggerName = this.loggerFullName;\n        if (level === \"error\" && !error) {\n            const e = new Error();\n            if (e.stack) {\n                message =\n                    message +\n                        \"\\n\" +\n                        e.stack\n                            .split(\"\\n\")\n                            .slice(3)\n                            .join(\"\\n\");\n            }\n        }\n        if (this.canPublish(level, this.publishLevel())) {\n            const interop = Logger.Interop;\n            if (interop) {\n                try {\n                    if (interop.methods({ name: Logger.InteropMethodName }).length > 0) {\n                        interop.invoke(Logger.InteropMethodName, {\n                            msg: `${message}`,\n                            logger: loggerName,\n                            level\n                        });\n                    }\n                }\n                catch {\n                }\n            }\n        }\n        if (this.canPublish(level)) {\n            let prefix = \"\";\n            if (this.includeTimeAndLevel) {\n                const date = new Date();\n                const time = `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}:${date.getMilliseconds()}`;\n                prefix = `[${time}] [${level}] `;\n            }\n            const toPrint = `${prefix}${loggerName}: ${message}`;\n            switch (level) {\n                case \"trace\":\n                    this.logFn.debug(toPrint);\n                    break;\n                case \"debug\":\n                    if (this.logFn.debug) {\n                        this.logFn.debug(toPrint);\n                    }\n                    else {\n                        this.logFn.log(toPrint);\n                    }\n                    break;\n                case \"info\":\n                    this.logFn.info(toPrint);\n                    break;\n                case \"warn\":\n                    this.logFn.warn(toPrint);\n                    break;\n                case \"error\":\n                    this.logFn.error(toPrint, error);\n                    break;\n            }\n        }\n    }\n};\n\nconst GW_MESSAGE_CREATE_CONTEXT = \"create-context\";\nconst GW_MESSAGE_ACTIVITY_CREATED = \"created\";\nconst GW_MESSAGE_ACTIVITY_DESTROYED = \"destroyed\";\nconst GW_MESSAGE_CONTEXT_CREATED = \"context-created\";\nconst GW_MESSAGE_CONTEXT_ADDED = \"context-added\";\nconst GW_MESSAGE_SUBSCRIBE_CONTEXT = \"subscribe-context\";\nconst GW_MESSAGE_SUBSCRIBED_CONTEXT = \"subscribed-context\";\nconst GW_MESSAGE_UNSUBSCRIBE_CONTEXT = \"unsubscribe-context\";\nconst GW_MESSAGE_DESTROY_CONTEXT = \"destroy-context\";\nconst GW_MESSAGE_CONTEXT_DESTROYED = \"context-destroyed\";\nconst GW_MESSAGE_UPDATE_CONTEXT = \"update-context\";\nconst GW_MESSAGE_CONTEXT_UPDATED = \"context-updated\";\nconst GW_MESSAGE_JOINED_ACTIVITY = \"joined\";\n\nconst ContextMessageReplaySpec = {\n    get name() {\n        return \"context\";\n    },\n    get types() {\n        return [\n            GW_MESSAGE_CREATE_CONTEXT,\n            GW_MESSAGE_ACTIVITY_CREATED,\n            GW_MESSAGE_ACTIVITY_DESTROYED,\n            GW_MESSAGE_CONTEXT_CREATED,\n            GW_MESSAGE_CONTEXT_ADDED,\n            GW_MESSAGE_SUBSCRIBE_CONTEXT,\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\n            GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\n            GW_MESSAGE_DESTROY_CONTEXT,\n            GW_MESSAGE_CONTEXT_DESTROYED,\n            GW_MESSAGE_UPDATE_CONTEXT,\n            GW_MESSAGE_CONTEXT_UPDATED,\n            GW_MESSAGE_JOINED_ACTIVITY\n        ];\n    }\n};\n\nvar version$1 = \"6.4.0\";\n\nfunction prepareConfig$1 (configuration, ext, glue42gd) {\n    let nodeStartingContext;\n    if (Utils$1.isNode()) {\n        const startingContextString = process.env._GD_STARTING_CONTEXT_;\n        if (startingContextString) {\n            try {\n                nodeStartingContext = JSON.parse(startingContextString);\n            }\n            catch {\n            }\n        }\n    }\n    function getConnection() {\n        const gwConfig = configuration.gateway;\n        const protocolVersion = gwConfig?.protocolVersion ?? 3;\n        const reconnectInterval = gwConfig?.reconnectInterval;\n        const reconnectAttempts = gwConfig?.reconnectAttempts;\n        const defaultWs = \"ws://localhost:8385\";\n        let ws = gwConfig?.ws;\n        const sharedWorker = gwConfig?.sharedWorker;\n        const inproc = gwConfig?.inproc;\n        const webPlatform = gwConfig?.webPlatform ?? undefined;\n        if (glue42gd) {\n            ws = glue42gd.gwURL;\n        }\n        if (Utils$1.isNode() && nodeStartingContext && nodeStartingContext.gwURL) {\n            ws = nodeStartingContext.gwURL;\n        }\n        if (!ws && !sharedWorker && !inproc) {\n            ws = defaultWs;\n        }\n        let instanceId;\n        let windowId;\n        let pid;\n        let environment;\n        let region;\n        const appName = getApplication();\n        let uniqueAppName = appName;\n        if (typeof glue42gd !== \"undefined\") {\n            windowId = glue42gd.windowId;\n            pid = glue42gd.pid;\n            if (glue42gd.env) {\n                environment = glue42gd.env.env;\n                region = glue42gd.env.region;\n            }\n            uniqueAppName = glue42gd.application ?? \"glue-app\";\n            instanceId = glue42gd.appInstanceId;\n        }\n        else if (Utils$1.isNode()) {\n            pid = process.pid;\n            if (nodeStartingContext) {\n                environment = nodeStartingContext.env;\n                region = nodeStartingContext.region;\n                instanceId = nodeStartingContext.instanceId;\n            }\n        }\n        else if (typeof window?.glue42electron !== \"undefined\") {\n            windowId = window?.glue42electron.instanceId;\n            pid = window?.glue42electron.pid;\n            environment = window?.glue42electron.env;\n            region = window?.glue42electron.region;\n            uniqueAppName = window?.glue42electron.application ?? \"glue-app\";\n            instanceId = window?.glue42electron.instanceId;\n        }\n        else ;\n        const replaySpecs = configuration.gateway?.replaySpecs ?? [];\n        replaySpecs.push(ContextMessageReplaySpec);\n        let identity = {\n            application: uniqueAppName,\n            applicationName: appName,\n            windowId,\n            instance: instanceId,\n            process: pid,\n            region,\n            environment,\n            api: ext.version || version$1\n        };\n        if (configuration.identity) {\n            identity = Object.assign(identity, configuration.identity);\n        }\n        return {\n            identity,\n            reconnectInterval,\n            ws,\n            sharedWorker,\n            webPlatform,\n            inproc,\n            protocolVersion,\n            reconnectAttempts,\n            replaySpecs,\n        };\n    }\n    function getContexts() {\n        if (typeof configuration.contexts === \"undefined\") {\n            return { reAnnounceKnownContexts: true };\n        }\n        if (typeof configuration.contexts === \"boolean\" && configuration.contexts) {\n            return { reAnnounceKnownContexts: true };\n        }\n        if (typeof configuration.contexts === \"object\") {\n            return Object.assign({}, { reAnnounceKnownContexts: true }, configuration.contexts);\n        }\n        return false;\n    }\n    function getApplication() {\n        if (configuration.application) {\n            return configuration.application;\n        }\n        if (glue42gd) {\n            return glue42gd.applicationName;\n        }\n        if (typeof window !== \"undefined\" && typeof window.glue42electron !== \"undefined\") {\n            return window.glue42electron.application;\n        }\n        const uid = nanoid$1(10);\n        if (Utils$1.isNode()) {\n            if (nodeStartingContext) {\n                return nodeStartingContext.applicationConfig.name;\n            }\n            return \"NodeJS\" + uid;\n        }\n        if (typeof window !== \"undefined\" && typeof document !== \"undefined\") {\n            return document.title + ` (${uid})`;\n        }\n        return uid;\n    }\n    function getAuth() {\n        if (typeof configuration.auth === \"string\") {\n            return {\n                token: configuration.auth\n            };\n        }\n        if (configuration.auth) {\n            return configuration.auth;\n        }\n        if (Utils$1.isNode() && nodeStartingContext && nodeStartingContext.gwToken) {\n            return {\n                gatewayToken: nodeStartingContext.gwToken\n            };\n        }\n        if (configuration.gateway?.webPlatform || configuration.gateway?.inproc || configuration.gateway?.sharedWorker) {\n            return {\n                username: \"glue42\", password: \"glue42\"\n            };\n        }\n    }\n    function getLogger() {\n        let config = configuration.logger;\n        const defaultLevel = \"warn\";\n        if (!config) {\n            config = defaultLevel;\n        }\n        let gdConsoleLevel;\n        if (glue42gd) {\n            gdConsoleLevel = glue42gd.consoleLogLevel;\n        }\n        if (typeof config === \"string\") {\n            return { console: gdConsoleLevel ?? config, publish: defaultLevel };\n        }\n        return {\n            console: gdConsoleLevel ?? config.console ?? defaultLevel,\n            publish: config.publish ?? defaultLevel\n        };\n    }\n    const connection = getConnection();\n    let application = getApplication();\n    if (typeof window !== \"undefined\") {\n        const windowAsAny = window;\n        const containerApplication = windowAsAny.htmlContainer ?\n            `${windowAsAny.htmlContainer.containerName}.${windowAsAny.htmlContainer.application}` :\n            windowAsAny?.glue42gd?.application;\n        if (containerApplication) {\n            application = containerApplication;\n        }\n    }\n    return {\n        bus: configuration.bus ?? false,\n        application,\n        auth: getAuth(),\n        logger: getLogger(),\n        connection,\n        metrics: configuration.metrics ?? true,\n        contexts: getContexts(),\n        version: ext.version || version$1,\n        libs: ext.libs ?? [],\n        customLogger: configuration.customLogger\n    };\n}\n\nclass GW3ContextData {\n    name;\n    contextId;\n    context;\n    isAnnounced;\n    joinedActivity;\n    updateCallbacks = {};\n    activityId;\n    sentExplicitSubscription;\n    hasReceivedSnapshot;\n    constructor(contextId, name, isAnnounced, activityId) {\n        this.contextId = contextId;\n        this.name = name;\n        this.isAnnounced = isAnnounced;\n        this.activityId = activityId;\n        this.context = {};\n    }\n    hasCallbacks() {\n        return Object.keys(this.updateCallbacks).length > 0;\n    }\n    getState() {\n        if (this.isAnnounced && this.hasCallbacks()) {\n            return 3;\n        }\n        if (this.isAnnounced) {\n            return 2;\n        }\n        if (this.hasCallbacks()) {\n            return 1;\n        }\n        return 0;\n    }\n}\n\nvar lodash_clonedeep = {exports: {}};\n\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\nlodash_clonedeep.exports;\n\n(function (module, exports) {\n\t/** Used as the size to enable large array optimizations. */\n\tvar LARGE_ARRAY_SIZE = 200;\n\n\t/** Used to stand-in for `undefined` hash values. */\n\tvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n\t/** Used as references for various `Number` constants. */\n\tvar MAX_SAFE_INTEGER = 9007199254740991;\n\n\t/** `Object#toString` result references. */\n\tvar argsTag = '[object Arguments]',\n\t    arrayTag = '[object Array]',\n\t    boolTag = '[object Boolean]',\n\t    dateTag = '[object Date]',\n\t    errorTag = '[object Error]',\n\t    funcTag = '[object Function]',\n\t    genTag = '[object GeneratorFunction]',\n\t    mapTag = '[object Map]',\n\t    numberTag = '[object Number]',\n\t    objectTag = '[object Object]',\n\t    promiseTag = '[object Promise]',\n\t    regexpTag = '[object RegExp]',\n\t    setTag = '[object Set]',\n\t    stringTag = '[object String]',\n\t    symbolTag = '[object Symbol]',\n\t    weakMapTag = '[object WeakMap]';\n\n\tvar arrayBufferTag = '[object ArrayBuffer]',\n\t    dataViewTag = '[object DataView]',\n\t    float32Tag = '[object Float32Array]',\n\t    float64Tag = '[object Float64Array]',\n\t    int8Tag = '[object Int8Array]',\n\t    int16Tag = '[object Int16Array]',\n\t    int32Tag = '[object Int32Array]',\n\t    uint8Tag = '[object Uint8Array]',\n\t    uint8ClampedTag = '[object Uint8ClampedArray]',\n\t    uint16Tag = '[object Uint16Array]',\n\t    uint32Tag = '[object Uint32Array]';\n\n\t/**\n\t * Used to match `RegExp`\n\t * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n\t */\n\tvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n\t/** Used to match `RegExp` flags from their coerced string values. */\n\tvar reFlags = /\\w*$/;\n\n\t/** Used to detect host constructors (Safari). */\n\tvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n\t/** Used to detect unsigned integer values. */\n\tvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n\t/** Used to identify `toStringTag` values supported by `_.clone`. */\n\tvar cloneableTags = {};\n\tcloneableTags[argsTag] = cloneableTags[arrayTag] =\n\tcloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n\tcloneableTags[boolTag] = cloneableTags[dateTag] =\n\tcloneableTags[float32Tag] = cloneableTags[float64Tag] =\n\tcloneableTags[int8Tag] = cloneableTags[int16Tag] =\n\tcloneableTags[int32Tag] = cloneableTags[mapTag] =\n\tcloneableTags[numberTag] = cloneableTags[objectTag] =\n\tcloneableTags[regexpTag] = cloneableTags[setTag] =\n\tcloneableTags[stringTag] = cloneableTags[symbolTag] =\n\tcloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n\tcloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n\tcloneableTags[errorTag] = cloneableTags[funcTag] =\n\tcloneableTags[weakMapTag] = false;\n\n\t/** Detect free variable `global` from Node.js. */\n\tvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\n\t/** Detect free variable `self`. */\n\tvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n\t/** Used as a reference to the global object. */\n\tvar root = freeGlobal || freeSelf || Function('return this')();\n\n\t/** Detect free variable `exports`. */\n\tvar freeExports = exports && !exports.nodeType && exports;\n\n\t/** Detect free variable `module`. */\n\tvar freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;\n\n\t/** Detect the popular CommonJS extension `module.exports`. */\n\tvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n\t/**\n\t * Adds the key-value `pair` to `map`.\n\t *\n\t * @private\n\t * @param {Object} map The map to modify.\n\t * @param {Array} pair The key-value pair to add.\n\t * @returns {Object} Returns `map`.\n\t */\n\tfunction addMapEntry(map, pair) {\n\t  // Don't return `map.set` because it's not chainable in IE 11.\n\t  map.set(pair[0], pair[1]);\n\t  return map;\n\t}\n\n\t/**\n\t * Adds `value` to `set`.\n\t *\n\t * @private\n\t * @param {Object} set The set to modify.\n\t * @param {*} value The value to add.\n\t * @returns {Object} Returns `set`.\n\t */\n\tfunction addSetEntry(set, value) {\n\t  // Don't return `set.add` because it's not chainable in IE 11.\n\t  set.add(value);\n\t  return set;\n\t}\n\n\t/**\n\t * A specialized version of `_.forEach` for arrays without support for\n\t * iteratee shorthands.\n\t *\n\t * @private\n\t * @param {Array} [array] The array to iterate over.\n\t * @param {Function} iteratee The function invoked per iteration.\n\t * @returns {Array} Returns `array`.\n\t */\n\tfunction arrayEach(array, iteratee) {\n\t  var index = -1,\n\t      length = array ? array.length : 0;\n\n\t  while (++index < length) {\n\t    if (iteratee(array[index], index, array) === false) {\n\t      break;\n\t    }\n\t  }\n\t  return array;\n\t}\n\n\t/**\n\t * Appends the elements of `values` to `array`.\n\t *\n\t * @private\n\t * @param {Array} array The array to modify.\n\t * @param {Array} values The values to append.\n\t * @returns {Array} Returns `array`.\n\t */\n\tfunction arrayPush(array, values) {\n\t  var index = -1,\n\t      length = values.length,\n\t      offset = array.length;\n\n\t  while (++index < length) {\n\t    array[offset + index] = values[index];\n\t  }\n\t  return array;\n\t}\n\n\t/**\n\t * A specialized version of `_.reduce` for arrays without support for\n\t * iteratee shorthands.\n\t *\n\t * @private\n\t * @param {Array} [array] The array to iterate over.\n\t * @param {Function} iteratee The function invoked per iteration.\n\t * @param {*} [accumulator] The initial value.\n\t * @param {boolean} [initAccum] Specify using the first element of `array` as\n\t *  the initial value.\n\t * @returns {*} Returns the accumulated value.\n\t */\n\tfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n\t  var index = -1,\n\t      length = array ? array.length : 0;\n\n\t  if (initAccum && length) {\n\t    accumulator = array[++index];\n\t  }\n\t  while (++index < length) {\n\t    accumulator = iteratee(accumulator, array[index], index, array);\n\t  }\n\t  return accumulator;\n\t}\n\n\t/**\n\t * The base implementation of `_.times` without support for iteratee shorthands\n\t * or max array length checks.\n\t *\n\t * @private\n\t * @param {number} n The number of times to invoke `iteratee`.\n\t * @param {Function} iteratee The function invoked per iteration.\n\t * @returns {Array} Returns the array of results.\n\t */\n\tfunction baseTimes(n, iteratee) {\n\t  var index = -1,\n\t      result = Array(n);\n\n\t  while (++index < n) {\n\t    result[index] = iteratee(index);\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Gets the value at `key` of `object`.\n\t *\n\t * @private\n\t * @param {Object} [object] The object to query.\n\t * @param {string} key The key of the property to get.\n\t * @returns {*} Returns the property value.\n\t */\n\tfunction getValue(object, key) {\n\t  return object == null ? undefined : object[key];\n\t}\n\n\t/**\n\t * Checks if `value` is a host object in IE < 9.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n\t */\n\tfunction isHostObject(value) {\n\t  // Many host objects are `Object` objects that can coerce to strings\n\t  // despite having improperly defined `toString` methods.\n\t  var result = false;\n\t  if (value != null && typeof value.toString != 'function') {\n\t    try {\n\t      result = !!(value + '');\n\t    } catch (e) {}\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Converts `map` to its key-value pairs.\n\t *\n\t * @private\n\t * @param {Object} map The map to convert.\n\t * @returns {Array} Returns the key-value pairs.\n\t */\n\tfunction mapToArray(map) {\n\t  var index = -1,\n\t      result = Array(map.size);\n\n\t  map.forEach(function(value, key) {\n\t    result[++index] = [key, value];\n\t  });\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a unary function that invokes `func` with its argument transformed.\n\t *\n\t * @private\n\t * @param {Function} func The function to wrap.\n\t * @param {Function} transform The argument transform.\n\t * @returns {Function} Returns the new function.\n\t */\n\tfunction overArg(func, transform) {\n\t  return function(arg) {\n\t    return func(transform(arg));\n\t  };\n\t}\n\n\t/**\n\t * Converts `set` to an array of its values.\n\t *\n\t * @private\n\t * @param {Object} set The set to convert.\n\t * @returns {Array} Returns the values.\n\t */\n\tfunction setToArray(set) {\n\t  var index = -1,\n\t      result = Array(set.size);\n\n\t  set.forEach(function(value) {\n\t    result[++index] = value;\n\t  });\n\t  return result;\n\t}\n\n\t/** Used for built-in method references. */\n\tvar arrayProto = Array.prototype,\n\t    funcProto = Function.prototype,\n\t    objectProto = Object.prototype;\n\n\t/** Used to detect overreaching core-js shims. */\n\tvar coreJsData = root['__core-js_shared__'];\n\n\t/** Used to detect methods masquerading as native. */\n\tvar maskSrcKey = (function() {\n\t  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n\t  return uid ? ('Symbol(src)_1.' + uid) : '';\n\t}());\n\n\t/** Used to resolve the decompiled source of functions. */\n\tvar funcToString = funcProto.toString;\n\n\t/** Used to check objects for own properties. */\n\tvar hasOwnProperty = objectProto.hasOwnProperty;\n\n\t/**\n\t * Used to resolve the\n\t * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar objectToString = objectProto.toString;\n\n\t/** Used to detect if a method is native. */\n\tvar reIsNative = RegExp('^' +\n\t  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n\t  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n\t);\n\n\t/** Built-in value references. */\n\tvar Buffer = moduleExports ? root.Buffer : undefined,\n\t    Symbol = root.Symbol,\n\t    Uint8Array = root.Uint8Array,\n\t    getPrototype = overArg(Object.getPrototypeOf, Object),\n\t    objectCreate = Object.create,\n\t    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n\t    splice = arrayProto.splice;\n\n\t/* Built-in method references for those with the same name as other `lodash` methods. */\n\tvar nativeGetSymbols = Object.getOwnPropertySymbols,\n\t    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n\t    nativeKeys = overArg(Object.keys, Object);\n\n\t/* Built-in method references that are verified to be native. */\n\tvar DataView = getNative(root, 'DataView'),\n\t    Map = getNative(root, 'Map'),\n\t    Promise = getNative(root, 'Promise'),\n\t    Set = getNative(root, 'Set'),\n\t    WeakMap = getNative(root, 'WeakMap'),\n\t    nativeCreate = getNative(Object, 'create');\n\n\t/** Used to detect maps, sets, and weakmaps. */\n\tvar dataViewCtorString = toSource(DataView),\n\t    mapCtorString = toSource(Map),\n\t    promiseCtorString = toSource(Promise),\n\t    setCtorString = toSource(Set),\n\t    weakMapCtorString = toSource(WeakMap);\n\n\t/** Used to convert symbols to primitives and strings. */\n\tvar symbolProto = Symbol ? Symbol.prototype : undefined,\n\t    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n\t/**\n\t * Creates a hash object.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction Hash(entries) {\n\t  var index = -1,\n\t      length = entries ? entries.length : 0;\n\n\t  this.clear();\n\t  while (++index < length) {\n\t    var entry = entries[index];\n\t    this.set(entry[0], entry[1]);\n\t  }\n\t}\n\n\t/**\n\t * Removes all key-value entries from the hash.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf Hash\n\t */\n\tfunction hashClear() {\n\t  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n\t}\n\n\t/**\n\t * Removes `key` and its value from the hash.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf Hash\n\t * @param {Object} hash The hash to modify.\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction hashDelete(key) {\n\t  return this.has(key) && delete this.__data__[key];\n\t}\n\n\t/**\n\t * Gets the hash value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf Hash\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction hashGet(key) {\n\t  var data = this.__data__;\n\t  if (nativeCreate) {\n\t    var result = data[key];\n\t    return result === HASH_UNDEFINED ? undefined : result;\n\t  }\n\t  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n\t}\n\n\t/**\n\t * Checks if a hash value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf Hash\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction hashHas(key) {\n\t  var data = this.__data__;\n\t  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n\t}\n\n\t/**\n\t * Sets the hash `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf Hash\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the hash instance.\n\t */\n\tfunction hashSet(key, value) {\n\t  var data = this.__data__;\n\t  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n\t  return this;\n\t}\n\n\t// Add methods to `Hash`.\n\tHash.prototype.clear = hashClear;\n\tHash.prototype['delete'] = hashDelete;\n\tHash.prototype.get = hashGet;\n\tHash.prototype.has = hashHas;\n\tHash.prototype.set = hashSet;\n\n\t/**\n\t * Creates an list cache object.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction ListCache(entries) {\n\t  var index = -1,\n\t      length = entries ? entries.length : 0;\n\n\t  this.clear();\n\t  while (++index < length) {\n\t    var entry = entries[index];\n\t    this.set(entry[0], entry[1]);\n\t  }\n\t}\n\n\t/**\n\t * Removes all key-value entries from the list cache.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf ListCache\n\t */\n\tfunction listCacheClear() {\n\t  this.__data__ = [];\n\t}\n\n\t/**\n\t * Removes `key` and its value from the list cache.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf ListCache\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction listCacheDelete(key) {\n\t  var data = this.__data__,\n\t      index = assocIndexOf(data, key);\n\n\t  if (index < 0) {\n\t    return false;\n\t  }\n\t  var lastIndex = data.length - 1;\n\t  if (index == lastIndex) {\n\t    data.pop();\n\t  } else {\n\t    splice.call(data, index, 1);\n\t  }\n\t  return true;\n\t}\n\n\t/**\n\t * Gets the list cache value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf ListCache\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction listCacheGet(key) {\n\t  var data = this.__data__,\n\t      index = assocIndexOf(data, key);\n\n\t  return index < 0 ? undefined : data[index][1];\n\t}\n\n\t/**\n\t * Checks if a list cache value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf ListCache\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction listCacheHas(key) {\n\t  return assocIndexOf(this.__data__, key) > -1;\n\t}\n\n\t/**\n\t * Sets the list cache `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf ListCache\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the list cache instance.\n\t */\n\tfunction listCacheSet(key, value) {\n\t  var data = this.__data__,\n\t      index = assocIndexOf(data, key);\n\n\t  if (index < 0) {\n\t    data.push([key, value]);\n\t  } else {\n\t    data[index][1] = value;\n\t  }\n\t  return this;\n\t}\n\n\t// Add methods to `ListCache`.\n\tListCache.prototype.clear = listCacheClear;\n\tListCache.prototype['delete'] = listCacheDelete;\n\tListCache.prototype.get = listCacheGet;\n\tListCache.prototype.has = listCacheHas;\n\tListCache.prototype.set = listCacheSet;\n\n\t/**\n\t * Creates a map cache object to store key-value pairs.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction MapCache(entries) {\n\t  var index = -1,\n\t      length = entries ? entries.length : 0;\n\n\t  this.clear();\n\t  while (++index < length) {\n\t    var entry = entries[index];\n\t    this.set(entry[0], entry[1]);\n\t  }\n\t}\n\n\t/**\n\t * Removes all key-value entries from the map.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf MapCache\n\t */\n\tfunction mapCacheClear() {\n\t  this.__data__ = {\n\t    'hash': new Hash,\n\t    'map': new (Map || ListCache),\n\t    'string': new Hash\n\t  };\n\t}\n\n\t/**\n\t * Removes `key` and its value from the map.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf MapCache\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction mapCacheDelete(key) {\n\t  return getMapData(this, key)['delete'](key);\n\t}\n\n\t/**\n\t * Gets the map value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf MapCache\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction mapCacheGet(key) {\n\t  return getMapData(this, key).get(key);\n\t}\n\n\t/**\n\t * Checks if a map value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf MapCache\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction mapCacheHas(key) {\n\t  return getMapData(this, key).has(key);\n\t}\n\n\t/**\n\t * Sets the map `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf MapCache\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the map cache instance.\n\t */\n\tfunction mapCacheSet(key, value) {\n\t  getMapData(this, key).set(key, value);\n\t  return this;\n\t}\n\n\t// Add methods to `MapCache`.\n\tMapCache.prototype.clear = mapCacheClear;\n\tMapCache.prototype['delete'] = mapCacheDelete;\n\tMapCache.prototype.get = mapCacheGet;\n\tMapCache.prototype.has = mapCacheHas;\n\tMapCache.prototype.set = mapCacheSet;\n\n\t/**\n\t * Creates a stack cache object to store key-value pairs.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction Stack(entries) {\n\t  this.__data__ = new ListCache(entries);\n\t}\n\n\t/**\n\t * Removes all key-value entries from the stack.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf Stack\n\t */\n\tfunction stackClear() {\n\t  this.__data__ = new ListCache;\n\t}\n\n\t/**\n\t * Removes `key` and its value from the stack.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf Stack\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction stackDelete(key) {\n\t  return this.__data__['delete'](key);\n\t}\n\n\t/**\n\t * Gets the stack value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf Stack\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction stackGet(key) {\n\t  return this.__data__.get(key);\n\t}\n\n\t/**\n\t * Checks if a stack value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf Stack\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction stackHas(key) {\n\t  return this.__data__.has(key);\n\t}\n\n\t/**\n\t * Sets the stack `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf Stack\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the stack cache instance.\n\t */\n\tfunction stackSet(key, value) {\n\t  var cache = this.__data__;\n\t  if (cache instanceof ListCache) {\n\t    var pairs = cache.__data__;\n\t    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n\t      pairs.push([key, value]);\n\t      return this;\n\t    }\n\t    cache = this.__data__ = new MapCache(pairs);\n\t  }\n\t  cache.set(key, value);\n\t  return this;\n\t}\n\n\t// Add methods to `Stack`.\n\tStack.prototype.clear = stackClear;\n\tStack.prototype['delete'] = stackDelete;\n\tStack.prototype.get = stackGet;\n\tStack.prototype.has = stackHas;\n\tStack.prototype.set = stackSet;\n\n\t/**\n\t * Creates an array of the enumerable property names of the array-like `value`.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @param {boolean} inherited Specify returning inherited property names.\n\t * @returns {Array} Returns the array of property names.\n\t */\n\tfunction arrayLikeKeys(value, inherited) {\n\t  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n\t  // Safari 9 makes `arguments.length` enumerable in strict mode.\n\t  var result = (isArray(value) || isArguments(value))\n\t    ? baseTimes(value.length, String)\n\t    : [];\n\n\t  var length = result.length,\n\t      skipIndexes = !!length;\n\n\t  for (var key in value) {\n\t    if ((inherited || hasOwnProperty.call(value, key)) &&\n\t        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n\t      result.push(key);\n\t    }\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Assigns `value` to `key` of `object` if the existing value is not equivalent\n\t * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n\t * for equality comparisons.\n\t *\n\t * @private\n\t * @param {Object} object The object to modify.\n\t * @param {string} key The key of the property to assign.\n\t * @param {*} value The value to assign.\n\t */\n\tfunction assignValue(object, key, value) {\n\t  var objValue = object[key];\n\t  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n\t      (value === undefined && !(key in object))) {\n\t    object[key] = value;\n\t  }\n\t}\n\n\t/**\n\t * Gets the index at which the `key` is found in `array` of key-value pairs.\n\t *\n\t * @private\n\t * @param {Array} array The array to inspect.\n\t * @param {*} key The key to search for.\n\t * @returns {number} Returns the index of the matched value, else `-1`.\n\t */\n\tfunction assocIndexOf(array, key) {\n\t  var length = array.length;\n\t  while (length--) {\n\t    if (eq(array[length][0], key)) {\n\t      return length;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\n\t/**\n\t * The base implementation of `_.assign` without support for multiple sources\n\t * or `customizer` functions.\n\t *\n\t * @private\n\t * @param {Object} object The destination object.\n\t * @param {Object} source The source object.\n\t * @returns {Object} Returns `object`.\n\t */\n\tfunction baseAssign(object, source) {\n\t  return object && copyObject(source, keys(source), object);\n\t}\n\n\t/**\n\t * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n\t * traversed objects.\n\t *\n\t * @private\n\t * @param {*} value The value to clone.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @param {boolean} [isFull] Specify a clone including symbols.\n\t * @param {Function} [customizer] The function to customize cloning.\n\t * @param {string} [key] The key of `value`.\n\t * @param {Object} [object] The parent object of `value`.\n\t * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n\t * @returns {*} Returns the cloned value.\n\t */\n\tfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n\t  var result;\n\t  if (customizer) {\n\t    result = object ? customizer(value, key, object, stack) : customizer(value);\n\t  }\n\t  if (result !== undefined) {\n\t    return result;\n\t  }\n\t  if (!isObject(value)) {\n\t    return value;\n\t  }\n\t  var isArr = isArray(value);\n\t  if (isArr) {\n\t    result = initCloneArray(value);\n\t    if (!isDeep) {\n\t      return copyArray(value, result);\n\t    }\n\t  } else {\n\t    var tag = getTag(value),\n\t        isFunc = tag == funcTag || tag == genTag;\n\n\t    if (isBuffer(value)) {\n\t      return cloneBuffer(value, isDeep);\n\t    }\n\t    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n\t      if (isHostObject(value)) {\n\t        return object ? value : {};\n\t      }\n\t      result = initCloneObject(isFunc ? {} : value);\n\t      if (!isDeep) {\n\t        return copySymbols(value, baseAssign(result, value));\n\t      }\n\t    } else {\n\t      if (!cloneableTags[tag]) {\n\t        return object ? value : {};\n\t      }\n\t      result = initCloneByTag(value, tag, baseClone, isDeep);\n\t    }\n\t  }\n\t  // Check for circular references and return its corresponding clone.\n\t  stack || (stack = new Stack);\n\t  var stacked = stack.get(value);\n\t  if (stacked) {\n\t    return stacked;\n\t  }\n\t  stack.set(value, result);\n\n\t  if (!isArr) {\n\t    var props = isFull ? getAllKeys(value) : keys(value);\n\t  }\n\t  arrayEach(props || value, function(subValue, key) {\n\t    if (props) {\n\t      key = subValue;\n\t      subValue = value[key];\n\t    }\n\t    // Recursively populate clone (susceptible to call stack limits).\n\t    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n\t  });\n\t  return result;\n\t}\n\n\t/**\n\t * The base implementation of `_.create` without support for assigning\n\t * properties to the created object.\n\t *\n\t * @private\n\t * @param {Object} prototype The object to inherit from.\n\t * @returns {Object} Returns the new object.\n\t */\n\tfunction baseCreate(proto) {\n\t  return isObject(proto) ? objectCreate(proto) : {};\n\t}\n\n\t/**\n\t * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n\t * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n\t * symbols of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @param {Function} keysFunc The function to get the keys of `object`.\n\t * @param {Function} symbolsFunc The function to get the symbols of `object`.\n\t * @returns {Array} Returns the array of property names and symbols.\n\t */\n\tfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n\t  var result = keysFunc(object);\n\t  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n\t}\n\n\t/**\n\t * The base implementation of `getTag`.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @returns {string} Returns the `toStringTag`.\n\t */\n\tfunction baseGetTag(value) {\n\t  return objectToString.call(value);\n\t}\n\n\t/**\n\t * The base implementation of `_.isNative` without bad shim checks.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a native function,\n\t *  else `false`.\n\t */\n\tfunction baseIsNative(value) {\n\t  if (!isObject(value) || isMasked(value)) {\n\t    return false;\n\t  }\n\t  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n\t  return pattern.test(toSource(value));\n\t}\n\n\t/**\n\t * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t */\n\tfunction baseKeys(object) {\n\t  if (!isPrototype(object)) {\n\t    return nativeKeys(object);\n\t  }\n\t  var result = [];\n\t  for (var key in Object(object)) {\n\t    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n\t      result.push(key);\n\t    }\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a clone of  `buffer`.\n\t *\n\t * @private\n\t * @param {Buffer} buffer The buffer to clone.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Buffer} Returns the cloned buffer.\n\t */\n\tfunction cloneBuffer(buffer, isDeep) {\n\t  if (isDeep) {\n\t    return buffer.slice();\n\t  }\n\t  var result = new buffer.constructor(buffer.length);\n\t  buffer.copy(result);\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a clone of `arrayBuffer`.\n\t *\n\t * @private\n\t * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n\t * @returns {ArrayBuffer} Returns the cloned array buffer.\n\t */\n\tfunction cloneArrayBuffer(arrayBuffer) {\n\t  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n\t  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a clone of `dataView`.\n\t *\n\t * @private\n\t * @param {Object} dataView The data view to clone.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the cloned data view.\n\t */\n\tfunction cloneDataView(dataView, isDeep) {\n\t  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n\t  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n\t}\n\n\t/**\n\t * Creates a clone of `map`.\n\t *\n\t * @private\n\t * @param {Object} map The map to clone.\n\t * @param {Function} cloneFunc The function to clone values.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the cloned map.\n\t */\n\tfunction cloneMap(map, isDeep, cloneFunc) {\n\t  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n\t  return arrayReduce(array, addMapEntry, new map.constructor);\n\t}\n\n\t/**\n\t * Creates a clone of `regexp`.\n\t *\n\t * @private\n\t * @param {Object} regexp The regexp to clone.\n\t * @returns {Object} Returns the cloned regexp.\n\t */\n\tfunction cloneRegExp(regexp) {\n\t  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n\t  result.lastIndex = regexp.lastIndex;\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a clone of `set`.\n\t *\n\t * @private\n\t * @param {Object} set The set to clone.\n\t * @param {Function} cloneFunc The function to clone values.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the cloned set.\n\t */\n\tfunction cloneSet(set, isDeep, cloneFunc) {\n\t  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n\t  return arrayReduce(array, addSetEntry, new set.constructor);\n\t}\n\n\t/**\n\t * Creates a clone of the `symbol` object.\n\t *\n\t * @private\n\t * @param {Object} symbol The symbol object to clone.\n\t * @returns {Object} Returns the cloned symbol object.\n\t */\n\tfunction cloneSymbol(symbol) {\n\t  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n\t}\n\n\t/**\n\t * Creates a clone of `typedArray`.\n\t *\n\t * @private\n\t * @param {Object} typedArray The typed array to clone.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the cloned typed array.\n\t */\n\tfunction cloneTypedArray(typedArray, isDeep) {\n\t  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n\t  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n\t}\n\n\t/**\n\t * Copies the values of `source` to `array`.\n\t *\n\t * @private\n\t * @param {Array} source The array to copy values from.\n\t * @param {Array} [array=[]] The array to copy values to.\n\t * @returns {Array} Returns `array`.\n\t */\n\tfunction copyArray(source, array) {\n\t  var index = -1,\n\t      length = source.length;\n\n\t  array || (array = Array(length));\n\t  while (++index < length) {\n\t    array[index] = source[index];\n\t  }\n\t  return array;\n\t}\n\n\t/**\n\t * Copies properties of `source` to `object`.\n\t *\n\t * @private\n\t * @param {Object} source The object to copy properties from.\n\t * @param {Array} props The property identifiers to copy.\n\t * @param {Object} [object={}] The object to copy properties to.\n\t * @param {Function} [customizer] The function to customize copied values.\n\t * @returns {Object} Returns `object`.\n\t */\n\tfunction copyObject(source, props, object, customizer) {\n\t  object || (object = {});\n\n\t  var index = -1,\n\t      length = props.length;\n\n\t  while (++index < length) {\n\t    var key = props[index];\n\n\t    var newValue = customizer\n\t      ? customizer(object[key], source[key], key, object, source)\n\t      : undefined;\n\n\t    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n\t  }\n\t  return object;\n\t}\n\n\t/**\n\t * Copies own symbol properties of `source` to `object`.\n\t *\n\t * @private\n\t * @param {Object} source The object to copy symbols from.\n\t * @param {Object} [object={}] The object to copy symbols to.\n\t * @returns {Object} Returns `object`.\n\t */\n\tfunction copySymbols(source, object) {\n\t  return copyObject(source, getSymbols(source), object);\n\t}\n\n\t/**\n\t * Creates an array of own enumerable property names and symbols of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names and symbols.\n\t */\n\tfunction getAllKeys(object) {\n\t  return baseGetAllKeys(object, keys, getSymbols);\n\t}\n\n\t/**\n\t * Gets the data for `map`.\n\t *\n\t * @private\n\t * @param {Object} map The map to query.\n\t * @param {string} key The reference key.\n\t * @returns {*} Returns the map data.\n\t */\n\tfunction getMapData(map, key) {\n\t  var data = map.__data__;\n\t  return isKeyable(key)\n\t    ? data[typeof key == 'string' ? 'string' : 'hash']\n\t    : data.map;\n\t}\n\n\t/**\n\t * Gets the native function at `key` of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @param {string} key The key of the method to get.\n\t * @returns {*} Returns the function if it's native, else `undefined`.\n\t */\n\tfunction getNative(object, key) {\n\t  var value = getValue(object, key);\n\t  return baseIsNative(value) ? value : undefined;\n\t}\n\n\t/**\n\t * Creates an array of the own enumerable symbol properties of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of symbols.\n\t */\n\tvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n\t/**\n\t * Gets the `toStringTag` of `value`.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @returns {string} Returns the `toStringTag`.\n\t */\n\tvar getTag = baseGetTag;\n\n\t// Fallback for data views, maps, sets, and weak maps in IE 11,\n\t// for data views in Edge < 14, and promises in Node.js.\n\tif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n\t    (Map && getTag(new Map) != mapTag) ||\n\t    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n\t    (Set && getTag(new Set) != setTag) ||\n\t    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n\t  getTag = function(value) {\n\t    var result = objectToString.call(value),\n\t        Ctor = result == objectTag ? value.constructor : undefined,\n\t        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n\t    if (ctorString) {\n\t      switch (ctorString) {\n\t        case dataViewCtorString: return dataViewTag;\n\t        case mapCtorString: return mapTag;\n\t        case promiseCtorString: return promiseTag;\n\t        case setCtorString: return setTag;\n\t        case weakMapCtorString: return weakMapTag;\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t}\n\n\t/**\n\t * Initializes an array clone.\n\t *\n\t * @private\n\t * @param {Array} array The array to clone.\n\t * @returns {Array} Returns the initialized clone.\n\t */\n\tfunction initCloneArray(array) {\n\t  var length = array.length,\n\t      result = array.constructor(length);\n\n\t  // Add properties assigned by `RegExp#exec`.\n\t  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n\t    result.index = array.index;\n\t    result.input = array.input;\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Initializes an object clone.\n\t *\n\t * @private\n\t * @param {Object} object The object to clone.\n\t * @returns {Object} Returns the initialized clone.\n\t */\n\tfunction initCloneObject(object) {\n\t  return (typeof object.constructor == 'function' && !isPrototype(object))\n\t    ? baseCreate(getPrototype(object))\n\t    : {};\n\t}\n\n\t/**\n\t * Initializes an object clone based on its `toStringTag`.\n\t *\n\t * **Note:** This function only supports cloning values with tags of\n\t * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n\t *\n\t * @private\n\t * @param {Object} object The object to clone.\n\t * @param {string} tag The `toStringTag` of the object to clone.\n\t * @param {Function} cloneFunc The function to clone values.\n\t * @param {boolean} [isDeep] Specify a deep clone.\n\t * @returns {Object} Returns the initialized clone.\n\t */\n\tfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n\t  var Ctor = object.constructor;\n\t  switch (tag) {\n\t    case arrayBufferTag:\n\t      return cloneArrayBuffer(object);\n\n\t    case boolTag:\n\t    case dateTag:\n\t      return new Ctor(+object);\n\n\t    case dataViewTag:\n\t      return cloneDataView(object, isDeep);\n\n\t    case float32Tag: case float64Tag:\n\t    case int8Tag: case int16Tag: case int32Tag:\n\t    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n\t      return cloneTypedArray(object, isDeep);\n\n\t    case mapTag:\n\t      return cloneMap(object, isDeep, cloneFunc);\n\n\t    case numberTag:\n\t    case stringTag:\n\t      return new Ctor(object);\n\n\t    case regexpTag:\n\t      return cloneRegExp(object);\n\n\t    case setTag:\n\t      return cloneSet(object, isDeep, cloneFunc);\n\n\t    case symbolTag:\n\t      return cloneSymbol(object);\n\t  }\n\t}\n\n\t/**\n\t * Checks if `value` is a valid array-like index.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n\t * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n\t */\n\tfunction isIndex(value, length) {\n\t  length = length == null ? MAX_SAFE_INTEGER : length;\n\t  return !!length &&\n\t    (typeof value == 'number' || reIsUint.test(value)) &&\n\t    (value > -1 && value % 1 == 0 && value < length);\n\t}\n\n\t/**\n\t * Checks if `value` is suitable for use as unique object key.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n\t */\n\tfunction isKeyable(value) {\n\t  var type = typeof value;\n\t  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n\t    ? (value !== '__proto__')\n\t    : (value === null);\n\t}\n\n\t/**\n\t * Checks if `func` has its source masked.\n\t *\n\t * @private\n\t * @param {Function} func The function to check.\n\t * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n\t */\n\tfunction isMasked(func) {\n\t  return !!maskSrcKey && (maskSrcKey in func);\n\t}\n\n\t/**\n\t * Checks if `value` is likely a prototype object.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n\t */\n\tfunction isPrototype(value) {\n\t  var Ctor = value && value.constructor,\n\t      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n\t  return value === proto;\n\t}\n\n\t/**\n\t * Converts `func` to its source code.\n\t *\n\t * @private\n\t * @param {Function} func The function to process.\n\t * @returns {string} Returns the source code.\n\t */\n\tfunction toSource(func) {\n\t  if (func != null) {\n\t    try {\n\t      return funcToString.call(func);\n\t    } catch (e) {}\n\t    try {\n\t      return (func + '');\n\t    } catch (e) {}\n\t  }\n\t  return '';\n\t}\n\n\t/**\n\t * This method is like `_.clone` except that it recursively clones `value`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 1.0.0\n\t * @category Lang\n\t * @param {*} value The value to recursively clone.\n\t * @returns {*} Returns the deep cloned value.\n\t * @see _.clone\n\t * @example\n\t *\n\t * var objects = [{ 'a': 1 }, { 'b': 2 }];\n\t *\n\t * var deep = _.cloneDeep(objects);\n\t * console.log(deep[0] === objects[0]);\n\t * // => false\n\t */\n\tfunction cloneDeep(value) {\n\t  return baseClone(value, true, true);\n\t}\n\n\t/**\n\t * Performs a\n\t * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n\t * comparison between two values to determine if they are equivalent.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to compare.\n\t * @param {*} other The other value to compare.\n\t * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n\t * @example\n\t *\n\t * var object = { 'a': 1 };\n\t * var other = { 'a': 1 };\n\t *\n\t * _.eq(object, object);\n\t * // => true\n\t *\n\t * _.eq(object, other);\n\t * // => false\n\t *\n\t * _.eq('a', 'a');\n\t * // => true\n\t *\n\t * _.eq('a', Object('a'));\n\t * // => false\n\t *\n\t * _.eq(NaN, NaN);\n\t * // => true\n\t */\n\tfunction eq(value, other) {\n\t  return value === other || (value !== value && other !== other);\n\t}\n\n\t/**\n\t * Checks if `value` is likely an `arguments` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n\t *  else `false`.\n\t * @example\n\t *\n\t * _.isArguments(function() { return arguments; }());\n\t * // => true\n\t *\n\t * _.isArguments([1, 2, 3]);\n\t * // => false\n\t */\n\tfunction isArguments(value) {\n\t  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n\t  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n\t    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n\t}\n\n\t/**\n\t * Checks if `value` is classified as an `Array` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n\t * @example\n\t *\n\t * _.isArray([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArray(document.body.children);\n\t * // => false\n\t *\n\t * _.isArray('abc');\n\t * // => false\n\t *\n\t * _.isArray(_.noop);\n\t * // => false\n\t */\n\tvar isArray = Array.isArray;\n\n\t/**\n\t * Checks if `value` is array-like. A value is considered array-like if it's\n\t * not a function and has a `value.length` that's an integer greater than or\n\t * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n\t * @example\n\t *\n\t * _.isArrayLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLike(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLike('abc');\n\t * // => true\n\t *\n\t * _.isArrayLike(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLike(value) {\n\t  return value != null && isLength(value.length) && !isFunction(value);\n\t}\n\n\t/**\n\t * This method is like `_.isArrayLike` except that it also checks if `value`\n\t * is an object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an array-like object,\n\t *  else `false`.\n\t * @example\n\t *\n\t * _.isArrayLikeObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLikeObject(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLikeObject('abc');\n\t * // => false\n\t *\n\t * _.isArrayLikeObject(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLikeObject(value) {\n\t  return isObjectLike(value) && isArrayLike(value);\n\t}\n\n\t/**\n\t * Checks if `value` is a buffer.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.3.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n\t * @example\n\t *\n\t * _.isBuffer(new Buffer(2));\n\t * // => true\n\t *\n\t * _.isBuffer(new Uint8Array(2));\n\t * // => false\n\t */\n\tvar isBuffer = nativeIsBuffer || stubFalse;\n\n\t/**\n\t * Checks if `value` is classified as a `Function` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n\t * @example\n\t *\n\t * _.isFunction(_);\n\t * // => true\n\t *\n\t * _.isFunction(/abc/);\n\t * // => false\n\t */\n\tfunction isFunction(value) {\n\t  // The use of `Object#toString` avoids issues with the `typeof` operator\n\t  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n\t  var tag = isObject(value) ? objectToString.call(value) : '';\n\t  return tag == funcTag || tag == genTag;\n\t}\n\n\t/**\n\t * Checks if `value` is a valid array-like length.\n\t *\n\t * **Note:** This method is loosely based on\n\t * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n\t * @example\n\t *\n\t * _.isLength(3);\n\t * // => true\n\t *\n\t * _.isLength(Number.MIN_VALUE);\n\t * // => false\n\t *\n\t * _.isLength(Infinity);\n\t * // => false\n\t *\n\t * _.isLength('3');\n\t * // => false\n\t */\n\tfunction isLength(value) {\n\t  return typeof value == 'number' &&\n\t    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n\t}\n\n\t/**\n\t * Checks if `value` is the\n\t * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n\t * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  var type = typeof value;\n\t  return !!value && (type == 'object' || type == 'function');\n\t}\n\n\t/**\n\t * Checks if `value` is object-like. A value is object-like if it's not `null`\n\t * and has a `typeof` result of \"object\".\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n\t * @example\n\t *\n\t * _.isObjectLike({});\n\t * // => true\n\t *\n\t * _.isObjectLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObjectLike(_.noop);\n\t * // => false\n\t *\n\t * _.isObjectLike(null);\n\t * // => false\n\t */\n\tfunction isObjectLike(value) {\n\t  return !!value && typeof value == 'object';\n\t}\n\n\t/**\n\t * Creates an array of the own enumerable property names of `object`.\n\t *\n\t * **Note:** Non-object values are coerced to objects. See the\n\t * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n\t * for more details.\n\t *\n\t * @static\n\t * @since 0.1.0\n\t * @memberOf _\n\t * @category Object\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t * @example\n\t *\n\t * function Foo() {\n\t *   this.a = 1;\n\t *   this.b = 2;\n\t * }\n\t *\n\t * Foo.prototype.c = 3;\n\t *\n\t * _.keys(new Foo);\n\t * // => ['a', 'b'] (iteration order is not guaranteed)\n\t *\n\t * _.keys('hi');\n\t * // => ['0', '1']\n\t */\n\tfunction keys(object) {\n\t  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n\t}\n\n\t/**\n\t * This method returns a new empty array.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.13.0\n\t * @category Util\n\t * @returns {Array} Returns the new empty array.\n\t * @example\n\t *\n\t * var arrays = _.times(2, _.stubArray);\n\t *\n\t * console.log(arrays);\n\t * // => [[], []]\n\t *\n\t * console.log(arrays[0] === arrays[1]);\n\t * // => false\n\t */\n\tfunction stubArray() {\n\t  return [];\n\t}\n\n\t/**\n\t * This method returns `false`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.13.0\n\t * @category Util\n\t * @returns {boolean} Returns `false`.\n\t * @example\n\t *\n\t * _.times(2, _.stubFalse);\n\t * // => [false, false]\n\t */\n\tfunction stubFalse() {\n\t  return false;\n\t}\n\n\tmodule.exports = cloneDeep; \n} (lodash_clonedeep, lodash_clonedeep.exports));\n\nvar lodash_clonedeepExports = lodash_clonedeep.exports;\nvar cloneDeep = /*@__PURE__*/getDefaultExportFromCjs$1(lodash_clonedeepExports);\n\nfunction applyContextDelta(context, delta, logger) {\n    try {\n        if (logger?.canPublish(\"trace\")) {\n            logger?.trace(`applying context delta ${JSON.stringify(delta)} on context ${JSON.stringify(context)}`);\n        }\n        if (!delta) {\n            return context;\n        }\n        if (delta.reset) {\n            context = { ...delta.reset };\n            return context;\n        }\n        context = deepClone(context, undefined);\n        if (delta.commands) {\n            for (const command of delta.commands) {\n                if (command.type === \"remove\") {\n                    deletePath(context, command.path);\n                }\n                else if (command.type === \"set\") {\n                    setValueToPath(context, command.value, command.path);\n                }\n            }\n            return context;\n        }\n        const added = delta.added;\n        const updated = delta.updated;\n        const removed = delta.removed;\n        if (added) {\n            Object.keys(added).forEach((key) => {\n                context[key] = added[key];\n            });\n        }\n        if (updated) {\n            Object.keys(updated).forEach((key) => {\n                mergeObjectsProperties(key, context, updated);\n            });\n        }\n        if (removed) {\n            removed.forEach((key) => {\n                delete context[key];\n            });\n        }\n        return context;\n    }\n    catch (e) {\n        logger?.error(`error applying context delta ${JSON.stringify(delta)} on context ${JSON.stringify(context)}`, e);\n        return context;\n    }\n}\nfunction deepClone(obj, hash) {\n    return cloneDeep(obj);\n}\nconst mergeObjectsProperties = (key, what, withWhat) => {\n    const right = withWhat[key];\n    if (right === undefined) {\n        return what;\n    }\n    const left = what[key];\n    if (!left || !right) {\n        what[key] = right;\n        return what;\n    }\n    if (typeof left === \"string\" ||\n        typeof left === \"number\" ||\n        typeof left === \"boolean\" ||\n        typeof right === \"string\" ||\n        typeof right === \"number\" ||\n        typeof right === \"boolean\" ||\n        Array.isArray(left) ||\n        Array.isArray(right)) {\n        what[key] = right;\n        return what;\n    }\n    what[key] = Object.assign({}, left, right);\n    return what;\n};\nfunction deepEqual(x, y) {\n    if (x === y) {\n        return true;\n    }\n    if (!(x instanceof Object) || !(y instanceof Object)) {\n        return false;\n    }\n    if (x.constructor !== y.constructor) {\n        return false;\n    }\n    for (const p in x) {\n        if (!x.hasOwnProperty(p)) {\n            continue;\n        }\n        if (!y.hasOwnProperty(p)) {\n            return false;\n        }\n        if (x[p] === y[p]) {\n            continue;\n        }\n        if (typeof (x[p]) !== \"object\") {\n            return false;\n        }\n        if (!deepEqual(x[p], y[p])) {\n            return false;\n        }\n    }\n    for (const p in y) {\n        if (y.hasOwnProperty(p) && !x.hasOwnProperty(p)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction setValueToPath(obj, value, path) {\n    const pathArr = path.split(\".\");\n    let i;\n    for (i = 0; i < pathArr.length - 1; i++) {\n        if (!obj[pathArr[i]]) {\n            obj[pathArr[i]] = {};\n        }\n        if (typeof obj[pathArr[i]] !== \"object\") {\n            obj[pathArr[i]] = {};\n        }\n        obj = obj[pathArr[i]];\n    }\n    obj[pathArr[i]] = value;\n}\nfunction isSubset(superObj, subObj) {\n    return Object.keys(subObj).every((ele) => {\n        if (typeof subObj[ele] === \"object\") {\n            return isSubset(superObj?.[ele] || {}, subObj[ele] || {});\n        }\n        return subObj[ele] === superObj?.[ele];\n    });\n}\nfunction deletePath(obj, path) {\n    const pathArr = path.split(\".\");\n    let i;\n    for (i = 0; i < pathArr.length - 1; i++) {\n        if (!obj[pathArr[i]]) {\n            return;\n        }\n        obj = obj[pathArr[i]];\n    }\n    delete obj[pathArr[i]];\n}\n\nlet GW3Bridge$1 = class GW3Bridge {\n    _logger;\n    _connection;\n    _trackAllContexts;\n    _reAnnounceKnownContexts;\n    _gw3Session;\n    _contextNameToData = {};\n    _gw3Subscriptions = [];\n    _nextCallbackSubscriptionNumber = 0;\n    _creationPromises = {};\n    _contextNameToId = {};\n    _contextIdToName = {};\n    _protocolVersion = undefined;\n    _contextsTempCache = {};\n    _contextsSubscriptionsCache = [];\n    _systemContextsSubKey;\n    get protocolVersion() {\n        if (!this._protocolVersion) {\n            const contextsDomainInfo = this._connection.availableDomains.find((d) => d.uri === \"context\");\n            this._protocolVersion = contextsDomainInfo?.version ?? 1;\n        }\n        return this._protocolVersion;\n    }\n    get setPathSupported() {\n        return this.protocolVersion >= 2;\n    }\n    constructor(config) {\n        this._connection = config.connection;\n        this._logger = config.logger;\n        this._trackAllContexts = config.trackAllContexts;\n        this._reAnnounceKnownContexts = config.reAnnounceKnownContexts;\n        this._gw3Session = this._connection.domain(\"global\", [\n            GW_MESSAGE_CONTEXT_CREATED,\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\n            GW_MESSAGE_CONTEXT_DESTROYED,\n            GW_MESSAGE_CONTEXT_UPDATED,\n        ]);\n        this._gw3Session.disconnected(this.resetState.bind(this));\n        this._gw3Session.onJoined((wasReconnect) => {\n            if (!wasReconnect) {\n                return;\n            }\n            if (!this._reAnnounceKnownContexts) {\n                return this._connection.setLibReAnnounced({ name: \"contexts\" });\n            }\n            this.reInitiateState().then(() => this._connection.setLibReAnnounced({ name: \"contexts\" }));\n        });\n        this.subscribeToContextCreatedMessages();\n        this.subscribeToContextUpdatedMessages();\n        this.subscribeToContextDestroyedMessages();\n        this._connection.replayer?.drain(ContextMessageReplaySpec.name, (message) => {\n            const type = message.type;\n            if (!type) {\n                return;\n            }\n            if (type === GW_MESSAGE_CONTEXT_CREATED ||\n                type === GW_MESSAGE_CONTEXT_ADDED ||\n                type === GW_MESSAGE_ACTIVITY_CREATED) {\n                this.handleContextCreatedMessage(message);\n            }\n            else if (type === GW_MESSAGE_SUBSCRIBED_CONTEXT ||\n                type === GW_MESSAGE_CONTEXT_UPDATED ||\n                type === GW_MESSAGE_JOINED_ACTIVITY) {\n                this.handleContextUpdatedMessage(message);\n            }\n            else if (type === GW_MESSAGE_CONTEXT_DESTROYED ||\n                type === GW_MESSAGE_ACTIVITY_DESTROYED) {\n                this.handleContextDestroyedMessage(message);\n            }\n        });\n    }\n    dispose() {\n        for (const sub of this._gw3Subscriptions) {\n            this._connection.off(sub);\n        }\n        this._gw3Subscriptions.length = 0;\n        for (const contextName in this._contextNameToData) {\n            if (this._contextNameToId.hasOwnProperty(contextName)) {\n                delete this._contextNameToData[contextName];\n            }\n        }\n    }\n    createContext(name, data) {\n        if (name in this._creationPromises) {\n            return this._creationPromises[name];\n        }\n        this._creationPromises[name] =\n            this._gw3Session\n                .send({\n                type: GW_MESSAGE_CREATE_CONTEXT,\n                domain: \"global\",\n                name,\n                data,\n                lifetime: \"retained\",\n            })\n                .then((createContextMsg) => {\n                this._contextNameToId[name] = createContextMsg.context_id;\n                this._contextIdToName[createContextMsg.context_id] = name;\n                const contextData = this._contextNameToData[name] || new GW3ContextData(createContextMsg.context_id, name, true, undefined);\n                contextData.isAnnounced = true;\n                contextData.name = name;\n                contextData.contextId = createContextMsg.context_id;\n                contextData.context = createContextMsg.data || deepClone(data);\n                contextData.hasReceivedSnapshot = true;\n                this._contextNameToData[name] = contextData;\n                delete this._creationPromises[name];\n                return createContextMsg.context_id;\n            });\n        return this._creationPromises[name];\n    }\n    all() {\n        return Object.keys(this._contextNameToData)\n            .filter((name) => this._contextNameToData[name].isAnnounced);\n    }\n    async update(name, delta) {\n        if (delta) {\n            delta = deepClone(delta);\n        }\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            return this.createContext(name, delta);\n        }\n        let currentContext = contextData.context;\n        if (!contextData.hasCallbacks()) {\n            currentContext = await this.get(contextData.name);\n        }\n        const calculatedDelta = this.setPathSupported ?\n            this.calculateContextDeltaV2(currentContext, delta) :\n            this.calculateContextDeltaV1(currentContext, delta);\n        if (!Object.keys(calculatedDelta.added).length\n            && !Object.keys(calculatedDelta.updated).length\n            && !calculatedDelta.removed.length\n            && !calculatedDelta.commands?.length) {\n            return Promise.resolve();\n        }\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_UPDATE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n            delta: calculatedDelta,\n        }, {}, { skipPeerId: false })\n            .then((gwResponse) => {\n            this.handleUpdated(contextData, calculatedDelta, {\n                updaterId: gwResponse.peer_id\n            });\n        });\n    }\n    async set(name, data) {\n        if (data) {\n            data = deepClone(data);\n        }\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            return this.createContext(name, data);\n        }\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_UPDATE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n            delta: { reset: data },\n        }, {}, { skipPeerId: false })\n            .then((gwResponse) => {\n            this.handleUpdated(contextData, {\n                reset: data,\n                added: {},\n                removed: [],\n                updated: {}\n            }, {\n                updaterId: gwResponse.peer_id\n            });\n        });\n    }\n    setPath(name, path, value) {\n        if (!this.setPathSupported) {\n            return Promise.reject(\"glue.contexts.setPath operation is not supported, use Glue42 3.10 or later\");\n        }\n        return this.setPaths(name, [{ path, value }]);\n    }\n    async setPaths(name, pathValues) {\n        if (!this.setPathSupported) {\n            return Promise.reject(\"glue.contexts.setPaths operation is not supported, use Glue42 3.10 or later\");\n        }\n        if (pathValues) {\n            pathValues = deepClone(pathValues);\n        }\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            const obj = {};\n            for (const pathValue of pathValues) {\n                setValueToPath(obj, pathValue.value, pathValue.path);\n            }\n            return this.createContext(name, obj);\n        }\n        const commands = [];\n        for (const pathValue of pathValues) {\n            if (pathValue.value === null) {\n                commands.push({ type: \"remove\", path: pathValue.path });\n            }\n            else {\n                commands.push({ type: \"set\", path: pathValue.path, value: pathValue.value });\n            }\n        }\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_UPDATE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n            delta: { commands }\n        }, {}, { skipPeerId: false })\n            .then((gwResponse) => {\n            this.handleUpdated(contextData, {\n                added: {},\n                removed: [],\n                updated: {},\n                commands\n            }, {\n                updaterId: gwResponse.peer_id\n            });\n        });\n    }\n    async get(name) {\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            return Promise.resolve({});\n        }\n        if (contextData && (!contextData.hasCallbacks() || !contextData.hasReceivedSnapshot)) {\n            return new Promise((resolve) => {\n                this.subscribe(name, (data, _d, _r, un) => {\n                    this.unsubscribe(un);\n                    resolve(data);\n                });\n            });\n        }\n        const context = contextData?.context ?? {};\n        return Promise.resolve(deepClone(context));\n    }\n    async subscribe(name, callback, subscriptionKey) {\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const thisCallbackSubscriptionNumber = typeof subscriptionKey === \"undefined\" ? this._nextCallbackSubscriptionNumber : subscriptionKey;\n        if (typeof subscriptionKey === \"undefined\") {\n            this._nextCallbackSubscriptionNumber += 1;\n        }\n        if (this._contextsSubscriptionsCache.every((subscription) => subscription.subKey !== this._nextCallbackSubscriptionNumber)) {\n            this._contextsSubscriptionsCache.push({ contextName: name, subKey: thisCallbackSubscriptionNumber, callback });\n        }\n        let contextData = this._contextNameToData[name];\n        if (!contextData ||\n            !contextData.isAnnounced) {\n            contextData = contextData || new GW3ContextData(undefined, name, false, undefined);\n            this._contextNameToData[name] = contextData;\n            contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\n            return Promise.resolve(thisCallbackSubscriptionNumber);\n        }\n        const hadCallbacks = contextData.hasCallbacks();\n        contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\n        if (!hadCallbacks) {\n            if (!contextData.joinedActivity) {\n                if (contextData.context && contextData.sentExplicitSubscription) {\n                    if (contextData.hasReceivedSnapshot) {\n                        const clone = deepClone(contextData.context);\n                        callback(clone, clone, [], thisCallbackSubscriptionNumber);\n                    }\n                    return Promise.resolve(thisCallbackSubscriptionNumber);\n                }\n                return this.sendSubscribe(contextData)\n                    .then(() => thisCallbackSubscriptionNumber);\n            }\n            else {\n                if (contextData.hasReceivedSnapshot) {\n                    const clone = deepClone(contextData.context);\n                    callback(clone, clone, [], thisCallbackSubscriptionNumber);\n                }\n                return Promise.resolve(thisCallbackSubscriptionNumber);\n            }\n        }\n        else {\n            if (contextData.hasReceivedSnapshot) {\n                const clone = deepClone(contextData.context);\n                callback(clone, clone, [], thisCallbackSubscriptionNumber);\n            }\n            return Promise.resolve(thisCallbackSubscriptionNumber);\n        }\n    }\n    unsubscribe(subscriptionKey) {\n        this._contextsSubscriptionsCache = this._contextsSubscriptionsCache.filter((subscription) => subscription.subKey !== subscriptionKey);\n        for (const name of Object.keys(this._contextNameToData)) {\n            const contextData = this._contextNameToData[name];\n            if (!contextData) {\n                return;\n            }\n            const hadCallbacks = contextData.hasCallbacks();\n            delete contextData.updateCallbacks[subscriptionKey];\n            if (contextData.isAnnounced &&\n                hadCallbacks &&\n                !contextData.hasCallbacks() &&\n                contextData.sentExplicitSubscription) {\n                this.sendUnsubscribe(contextData).catch(() => { });\n            }\n            if (!contextData.isAnnounced &&\n                !contextData.hasCallbacks()) {\n                delete this._contextNameToData[name];\n            }\n        }\n    }\n    async destroy(name) {\n        if (name in this._creationPromises) {\n            await this._creationPromises[name];\n        }\n        const contextData = this._contextNameToData[name];\n        if (!contextData) {\n            return Promise.reject(`context with ${name} does not exist`);\n        }\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_DESTROY_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n        }).then((_) => undefined);\n    }\n    handleUpdated(contextData, delta, extraData) {\n        const oldContext = contextData.context;\n        contextData.context = applyContextDelta(contextData.context, delta, this._logger);\n        contextData.hasReceivedSnapshot = true;\n        if (this._contextNameToData[contextData.name] === contextData &&\n            !deepEqual(oldContext, contextData.context)) {\n            this.invokeUpdateCallbacks(contextData, delta, extraData);\n        }\n    }\n    subscribeToContextCreatedMessages() {\n        const createdMessageTypes = [\n            GW_MESSAGE_CONTEXT_ADDED,\n            GW_MESSAGE_CONTEXT_CREATED,\n            GW_MESSAGE_ACTIVITY_CREATED,\n        ];\n        for (const createdMessageType of createdMessageTypes) {\n            const sub = this._connection.on(createdMessageType, this.handleContextCreatedMessage.bind(this));\n            this._gw3Subscriptions.push(sub);\n        }\n    }\n    handleContextCreatedMessage(contextCreatedMsg) {\n        const createdMessageType = contextCreatedMsg.type;\n        if (createdMessageType === GW_MESSAGE_ACTIVITY_CREATED) {\n            this._contextNameToId[contextCreatedMsg.activity_id] = contextCreatedMsg.context_id;\n            this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.activity_id;\n        }\n        else if (createdMessageType === GW_MESSAGE_CONTEXT_ADDED) {\n            this._contextNameToId[contextCreatedMsg.name] = contextCreatedMsg.context_id;\n            this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.name;\n        }\n        else ;\n        const name = this._contextIdToName[contextCreatedMsg.context_id];\n        if (!name) {\n            throw new Error(\"Received created event for context with unknown name: \" + contextCreatedMsg.context_id);\n        }\n        if (!this._contextNameToId[name]) {\n            throw new Error(\"Received created event for context with unknown id: \" + contextCreatedMsg.context_id);\n        }\n        let contextData = this._contextNameToData[name];\n        if (contextData) {\n            if (contextData.isAnnounced) {\n                return;\n            }\n            else {\n                if (!contextData.hasCallbacks()) {\n                    throw new Error(\"Assertion failure: contextData.hasCallbacks()\");\n                }\n                contextData.isAnnounced = true;\n                contextData.contextId = contextCreatedMsg.context_id;\n                contextData.activityId = contextCreatedMsg.activity_id;\n                if (!contextData.sentExplicitSubscription) {\n                    this.sendSubscribe(contextData);\n                }\n            }\n        }\n        else {\n            this._contextNameToData[name] = contextData =\n                new GW3ContextData(contextCreatedMsg.context_id, name, true, contextCreatedMsg.activity_id);\n            if (this._trackAllContexts) {\n                this.subscribe(name, () => { }).then((subKey) => this._systemContextsSubKey = subKey);\n            }\n        }\n    }\n    subscribeToContextUpdatedMessages() {\n        const updatedMessageTypes = [\n            GW_MESSAGE_CONTEXT_UPDATED,\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\n            GW_MESSAGE_JOINED_ACTIVITY,\n        ];\n        for (const updatedMessageType of updatedMessageTypes) {\n            const sub = this._connection.on(updatedMessageType, this.handleContextUpdatedMessage.bind(this));\n            this._gw3Subscriptions.push(sub);\n        }\n    }\n    handleContextUpdatedMessage(contextUpdatedMsg) {\n        const updatedMessageType = contextUpdatedMsg.type;\n        const contextId = contextUpdatedMsg.context_id;\n        let contextData = this._contextNameToData[this._contextIdToName[contextId]];\n        const justSeen = !contextData || !contextData.isAnnounced;\n        if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\n            if (!contextData) {\n                contextData =\n                    this._contextNameToData[contextUpdatedMsg.activity_id] ||\n                        new GW3ContextData(contextId, contextUpdatedMsg.activity_id, true, contextUpdatedMsg.activity_id);\n            }\n            this._contextNameToData[contextUpdatedMsg.activity_id] = contextData;\n            this._contextIdToName[contextId] = contextUpdatedMsg.activity_id;\n            this._contextNameToId[contextUpdatedMsg.activity_id] = contextId;\n            contextData.contextId = contextId;\n            contextData.isAnnounced = true;\n            contextData.activityId = contextUpdatedMsg.activity_id;\n            contextData.joinedActivity = true;\n        }\n        else {\n            if (!contextData || !contextData.isAnnounced) {\n                if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\n                    contextData = contextData || new GW3ContextData(contextId, contextUpdatedMsg.name, true, undefined);\n                    contextData.sentExplicitSubscription = true;\n                    this._contextNameToData[contextUpdatedMsg.name] = contextData;\n                    this._contextIdToName[contextId] = contextUpdatedMsg.name;\n                    this._contextNameToId[contextUpdatedMsg.name] = contextId;\n                }\n                else {\n                    this._logger.error(`Received 'update' for unknown context: ${contextId}`);\n                }\n                return;\n            }\n        }\n        const oldContext = contextData.context;\n        contextData.hasReceivedSnapshot = true;\n        if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\n            contextData.context = contextUpdatedMsg.data || {};\n        }\n        else if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\n            contextData.context = contextUpdatedMsg.context_snapshot || {};\n        }\n        else if (updatedMessageType === GW_MESSAGE_CONTEXT_UPDATED) {\n            contextData.context = applyContextDelta(contextData.context, contextUpdatedMsg.delta, this._logger);\n        }\n        else {\n            throw new Error(\"Unrecognized context update message \" + updatedMessageType);\n        }\n        if (justSeen ||\n            !deepEqual(contextData.context, oldContext) ||\n            updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\n            this.invokeUpdateCallbacks(contextData, contextUpdatedMsg.delta, { updaterId: contextUpdatedMsg.updater_id });\n        }\n    }\n    invokeUpdateCallbacks(contextData, delta, extraData) {\n        delta = delta || { added: {}, updated: {}, reset: {}, removed: [] };\n        if (delta.commands) {\n            delta.added = delta.updated = delta.reset = {};\n            delta.removed = [];\n            for (const command of delta.commands) {\n                if (command.type === \"remove\") {\n                    if (command.path.indexOf(\".\") === -1) {\n                        delta.removed.push(command.path);\n                    }\n                    setValueToPath(delta.updated, null, command.path);\n                }\n                else if (command.type === \"set\") {\n                    setValueToPath(delta.updated, command.value, command.path);\n                }\n            }\n        }\n        for (const updateCallbackIndex in contextData.updateCallbacks) {\n            if (contextData.updateCallbacks.hasOwnProperty(updateCallbackIndex)) {\n                try {\n                    const updateCallback = contextData.updateCallbacks[updateCallbackIndex];\n                    updateCallback(deepClone(contextData.context), deepClone(Object.assign({}, delta.added || {}, delta.updated || {}, delta.reset || {})), delta.removed, parseInt(updateCallbackIndex, 10), extraData);\n                }\n                catch (err) {\n                    this._logger.debug(\"callback error: \" + JSON.stringify(err));\n                }\n            }\n        }\n    }\n    subscribeToContextDestroyedMessages() {\n        const destroyedMessageTypes = [\n            GW_MESSAGE_CONTEXT_DESTROYED,\n            GW_MESSAGE_ACTIVITY_DESTROYED,\n        ];\n        for (const destroyedMessageType of destroyedMessageTypes) {\n            const sub = this._connection.on(destroyedMessageType, this.handleContextDestroyedMessage.bind(this));\n            this._gw3Subscriptions.push(sub);\n        }\n    }\n    handleContextDestroyedMessage(destroyedMsg) {\n        const destroyedMessageType = destroyedMsg.type;\n        let contextId;\n        let name;\n        if (destroyedMessageType === GW_MESSAGE_ACTIVITY_DESTROYED) {\n            name = destroyedMsg.activity_id;\n            contextId = this._contextNameToId[name];\n            if (!contextId) {\n                this._logger.error(`Received 'destroyed' for unknown activity: ${destroyedMsg.activity_id}`);\n                return;\n            }\n        }\n        else {\n            contextId = destroyedMsg.context_id;\n            name = this._contextIdToName[contextId];\n            if (!name) {\n                this._logger.error(`Received 'destroyed' for unknown context: ${destroyedMsg.context_id}`);\n                return;\n            }\n        }\n        delete this._contextIdToName[contextId];\n        delete this._contextNameToId[name];\n        const contextData = this._contextNameToData[name];\n        delete this._contextNameToData[name];\n        if (!contextData || !contextData.isAnnounced) {\n            this._logger.error(`Received 'destroyed' for unknown context: ${contextId}`);\n            return;\n        }\n    }\n    sendSubscribe(contextData) {\n        contextData.sentExplicitSubscription = true;\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_SUBSCRIBE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n        }).then((_) => undefined);\n    }\n    sendUnsubscribe(contextData) {\n        contextData.sentExplicitSubscription = false;\n        return this._gw3Session\n            .send({\n            type: GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\n            domain: \"global\",\n            context_id: contextData.contextId,\n        }).then((_) => undefined);\n    }\n    calculateContextDeltaV1(from, to) {\n        const delta = { added: {}, updated: {}, removed: [], reset: undefined };\n        if (from) {\n            for (const x of Object.keys(from)) {\n                if (Object.keys(to).indexOf(x) !== -1\n                    && to[x] !== null\n                    && !deepEqual(from[x], to[x])) {\n                    delta.updated[x] = to[x];\n                }\n            }\n        }\n        for (const x of Object.keys(to)) {\n            if (!from || (Object.keys(from).indexOf(x) === -1)) {\n                if (to[x] !== null) {\n                    delta.added[x] = to[x];\n                }\n            }\n            else if (to[x] === null) {\n                delta.removed.push(x);\n            }\n        }\n        return delta;\n    }\n    calculateContextDeltaV2(from, to) {\n        const delta = { added: {}, updated: {}, removed: [], reset: undefined, commands: [] };\n        for (const x of Object.keys(to)) {\n            if (to[x] !== null) {\n                const fromX = from ? from[x] : null;\n                if (!deepEqual(fromX, to[x])) {\n                    delta.commands?.push({ type: \"set\", path: x, value: to[x] });\n                }\n            }\n            else {\n                delta.commands?.push({ type: \"remove\", path: x });\n            }\n        }\n        return delta;\n    }\n    resetState() {\n        for (const sub of this._gw3Subscriptions) {\n            this._connection.off(sub);\n        }\n        if (this._systemContextsSubKey) {\n            this.unsubscribe(this._systemContextsSubKey);\n            delete this._systemContextsSubKey;\n        }\n        this._gw3Subscriptions = [];\n        this._contextNameToId = {};\n        this._contextIdToName = {};\n        delete this._protocolVersion;\n        this._contextsTempCache = Object.keys(this._contextNameToData).reduce((cacheSoFar, ctxName) => {\n            cacheSoFar[ctxName] = this._contextNameToData[ctxName].context;\n            return cacheSoFar;\n        }, {});\n        this._contextNameToData = {};\n    }\n    async reInitiateState() {\n        this.subscribeToContextCreatedMessages();\n        this.subscribeToContextUpdatedMessages();\n        this.subscribeToContextDestroyedMessages();\n        this._connection.replayer?.drain(ContextMessageReplaySpec.name, (message) => {\n            const type = message.type;\n            if (!type) {\n                return;\n            }\n            if (type === GW_MESSAGE_CONTEXT_CREATED ||\n                type === GW_MESSAGE_CONTEXT_ADDED ||\n                type === GW_MESSAGE_ACTIVITY_CREATED) {\n                this.handleContextCreatedMessage(message);\n            }\n            else if (type === GW_MESSAGE_SUBSCRIBED_CONTEXT ||\n                type === GW_MESSAGE_CONTEXT_UPDATED ||\n                type === GW_MESSAGE_JOINED_ACTIVITY) {\n                this.handleContextUpdatedMessage(message);\n            }\n            else if (type === GW_MESSAGE_CONTEXT_DESTROYED ||\n                type === GW_MESSAGE_ACTIVITY_DESTROYED) {\n                this.handleContextDestroyedMessage(message);\n            }\n        });\n        await Promise.all(this._contextsSubscriptionsCache.map((subscription) => this.subscribe(subscription.contextName, subscription.callback, subscription.subKey)));\n        await this.flushQueue();\n        for (const ctxName in this._contextsTempCache) {\n            if (typeof this._contextsTempCache[ctxName] !== \"object\" || Object.keys(this._contextsTempCache[ctxName]).length === 0) {\n                continue;\n            }\n            const lastKnownData = this._contextsTempCache[ctxName];\n            this._logger.info(`Re-announcing known context: ${ctxName}`);\n            await this.flushQueue();\n            await this.update(ctxName, lastKnownData);\n        }\n        this._contextsTempCache = {};\n        this._logger.info(\"Contexts are re-announced\");\n    }\n    flushQueue() {\n        return new Promise((resolve) => setTimeout(() => resolve(), 0));\n    }\n};\n\nclass ContextsModule {\n    initTime;\n    initStartTime;\n    initEndTime;\n    _bridge;\n    constructor(config) {\n        this._bridge = new GW3Bridge$1(config);\n    }\n    all() {\n        return this._bridge.all();\n    }\n    update(name, data) {\n        this.checkName(name);\n        this.checkData(data);\n        return this._bridge.update(name, data);\n    }\n    set(name, data) {\n        this.checkName(name);\n        this.checkData(data);\n        return this._bridge.set(name, data);\n    }\n    setPath(name, path, data) {\n        this.checkName(name);\n        this.checkPath(path);\n        const isTopLevelPath = path === \"\";\n        if (isTopLevelPath) {\n            this.checkData(data);\n            return this.set(name, data);\n        }\n        return this._bridge.setPath(name, path, data);\n    }\n    setPaths(name, paths) {\n        this.checkName(name);\n        if (!Array.isArray(paths)) {\n            throw new Error(\"Please provide the paths as an array of PathValues!\");\n        }\n        for (const { path, value } of paths) {\n            this.checkPath(path);\n            const isTopLevelPath = path === \"\";\n            if (isTopLevelPath) {\n                this.checkData(value);\n            }\n        }\n        return this._bridge.setPaths(name, paths);\n    }\n    subscribe(name, callback) {\n        this.checkName(name);\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n        return this._bridge\n            .subscribe(name, (data, delta, removed, key, extraData) => callback(data, delta, removed, () => this._bridge.unsubscribe(key), extraData))\n            .then((key) => () => {\n            this._bridge.unsubscribe(key);\n        });\n    }\n    get(name) {\n        this.checkName(name);\n        return this._bridge.get(name);\n    }\n    ready() {\n        return Promise.resolve(this);\n    }\n    destroy(name) {\n        this.checkName(name);\n        return this._bridge.destroy(name);\n    }\n    get setPathSupported() {\n        return this._bridge.setPathSupported;\n    }\n    checkName(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n            throw new Error(\"Please provide the name as a non-empty string!\");\n        }\n    }\n    checkPath(path) {\n        if (typeof path !== \"string\") {\n            throw new Error(\"Please provide the path as a dot delimited string!\");\n        }\n    }\n    checkData(data) {\n        if (typeof data !== \"object\") {\n            throw new Error(\"Please provide the data as an object!\");\n        }\n    }\n}\n\nfunction promisify$2 (promise, successCallback, errorCallback) {\n    if (typeof successCallback !== \"function\" && typeof errorCallback !== \"function\") {\n        return promise;\n    }\n    if (typeof successCallback !== \"function\") {\n        successCallback = () => { };\n    }\n    else if (typeof errorCallback !== \"function\") {\n        errorCallback = () => { };\n    }\n    return promise.then(successCallback, errorCallback);\n}\n\nfunction rejectAfter(ms = 0, promise, error) {\n    let timeout;\n    const clearTimeoutIfThere = () => {\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n    };\n    promise\n        .then(() => {\n        clearTimeoutIfThere();\n    })\n        .catch(() => {\n        clearTimeoutIfThere();\n    });\n    return new Promise((resolve, reject) => {\n        timeout = setTimeout(() => reject(error), ms);\n    });\n}\n\nvar InvokeStatus;\n(function (InvokeStatus) {\n    InvokeStatus[InvokeStatus[\"Success\"] = 0] = \"Success\";\n    InvokeStatus[InvokeStatus[\"Error\"] = 1] = \"Error\";\n})(InvokeStatus || (InvokeStatus = {}));\nclass Client {\n    protocol;\n    repo;\n    instance;\n    configuration;\n    constructor(protocol, repo, instance, configuration) {\n        this.protocol = protocol;\n        this.repo = repo;\n        this.instance = instance;\n        this.configuration = configuration;\n    }\n    subscribe(method, options, successCallback, errorCallback, existingSub) {\n        const callProtocolSubscribe = (targetServers, stream, successProxy, errorProxy) => {\n            options.methodResponseTimeout = options.methodResponseTimeout ?? options.waitTimeoutMs;\n            this.protocol.client.subscribe(stream, options, targetServers, successProxy, errorProxy, existingSub);\n        };\n        const promise = new Promise((resolve, reject) => {\n            const successProxy = (sub) => {\n                resolve(sub);\n            };\n            const errorProxy = (err) => {\n                reject(err);\n            };\n            if (!method) {\n                reject(`Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.`);\n                return;\n            }\n            let methodDef;\n            if (typeof method === \"string\") {\n                methodDef = { name: method };\n            }\n            else {\n                methodDef = method;\n            }\n            if (!methodDef.name) {\n                reject(`Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.`);\n                return;\n            }\n            if (options === undefined) {\n                options = {};\n            }\n            let target = options.target;\n            if (target === undefined) {\n                target = \"best\";\n            }\n            if (typeof target === \"string\" && target !== \"all\" && target !== \"best\") {\n                reject(new Error(`\"${target}\" is not a valid target. Valid targets are \"all\", \"best\", or an instance.`));\n                return;\n            }\n            if (options.methodResponseTimeout === undefined) {\n                options.methodResponseTimeout = options.method_response_timeout;\n                if (options.methodResponseTimeout === undefined) {\n                    options.methodResponseTimeout = this.configuration.methodResponseTimeout;\n                }\n            }\n            if (options.waitTimeoutMs === undefined) {\n                options.waitTimeoutMs = options.wait_for_method_timeout;\n                if (options.waitTimeoutMs === undefined) {\n                    options.waitTimeoutMs = this.configuration.waitTimeoutMs;\n                }\n            }\n            const delayStep = 500;\n            let delayTillNow = 0;\n            let currentServers = this.getServerMethodsByFilterAndTarget(methodDef, target);\n            if (currentServers.length > 0) {\n                callProtocolSubscribe(currentServers, currentServers[0].methods[0], successProxy, errorProxy);\n            }\n            else {\n                const retry = () => {\n                    if (!target || !(options.waitTimeoutMs)) {\n                        return;\n                    }\n                    delayTillNow += delayStep;\n                    currentServers = this.getServerMethodsByFilterAndTarget(methodDef, target);\n                    if (currentServers.length > 0) {\n                        const streamInfo = currentServers[0].methods[0];\n                        callProtocolSubscribe(currentServers, streamInfo, successProxy, errorProxy);\n                    }\n                    else if (delayTillNow >= options.waitTimeoutMs) {\n                        const def = typeof method === \"string\" ? { name: method } : method;\n                        callProtocolSubscribe(currentServers, def, successProxy, errorProxy);\n                    }\n                    else {\n                        setTimeout(retry, delayStep);\n                    }\n                };\n                setTimeout(retry, delayStep);\n            }\n        });\n        return promisify$2(promise, successCallback, errorCallback);\n    }\n    servers(methodFilter) {\n        const filterCopy = methodFilter === undefined\n            ? undefined\n            : { ...methodFilter };\n        return this.getServers(filterCopy).map((serverMethodMap) => {\n            return serverMethodMap.server.instance;\n        });\n    }\n    methods(methodFilter) {\n        if (typeof methodFilter === \"string\") {\n            methodFilter = { name: methodFilter };\n        }\n        else {\n            methodFilter = { ...methodFilter };\n        }\n        return this.getMethods(methodFilter);\n    }\n    methodsForInstance(instance) {\n        return this.getMethodsForInstance(instance);\n    }\n    methodAdded(callback) {\n        return this.repo.onMethodAdded(callback);\n    }\n    methodRemoved(callback) {\n        return this.repo.onMethodRemoved(callback);\n    }\n    serverAdded(callback) {\n        return this.repo.onServerAdded(callback);\n    }\n    serverRemoved(callback) {\n        return this.repo.onServerRemoved((server, reason) => {\n            callback(server, reason);\n        });\n    }\n    serverMethodAdded(callback) {\n        return this.repo.onServerMethodAdded((server, method) => {\n            callback({ server, method });\n        });\n    }\n    serverMethodRemoved(callback) {\n        return this.repo.onServerMethodRemoved((server, method) => {\n            callback({ server, method });\n        });\n    }\n    async invoke(methodFilter, argumentObj, target, additionalOptions, success, error) {\n        const getInvokePromise = async () => {\n            let methodDefinition;\n            if (typeof methodFilter === \"string\") {\n                methodDefinition = { name: methodFilter };\n            }\n            else {\n                methodDefinition = { ...methodFilter };\n            }\n            if (!methodDefinition.name) {\n                return Promise.reject(`Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.`);\n            }\n            if (!argumentObj) {\n                argumentObj = {};\n            }\n            if (!target) {\n                target = \"best\";\n            }\n            if (typeof target === \"string\" && target !== \"all\" && target !== \"best\" && target !== \"skipMine\") {\n                return Promise.reject(new Error(`\"${target}\" is not a valid target. Valid targets are \"all\" and \"best\".`));\n            }\n            if (!additionalOptions) {\n                additionalOptions = {};\n            }\n            if (additionalOptions.methodResponseTimeoutMs === undefined) {\n                additionalOptions.methodResponseTimeoutMs = additionalOptions.method_response_timeout;\n                if (additionalOptions.methodResponseTimeoutMs === undefined) {\n                    additionalOptions.methodResponseTimeoutMs = this.configuration.methodResponseTimeout;\n                }\n            }\n            if (additionalOptions.waitTimeoutMs === undefined) {\n                additionalOptions.waitTimeoutMs = additionalOptions.wait_for_method_timeout;\n                if (additionalOptions.waitTimeoutMs === undefined) {\n                    additionalOptions.waitTimeoutMs = this.configuration.waitTimeoutMs;\n                }\n            }\n            if (additionalOptions.waitTimeoutMs !== undefined && typeof additionalOptions.waitTimeoutMs !== \"number\") {\n                return Promise.reject(new Error(`\"${additionalOptions.waitTimeoutMs}\" is not a valid number for \"waitTimeoutMs\" `));\n            }\n            if (typeof argumentObj !== \"object\") {\n                return Promise.reject(new Error(`The method arguments must be an object. method: ${methodDefinition.name}`));\n            }\n            let serversMethodMap = this.getServerMethodsByFilterAndTarget(methodDefinition, target);\n            if (serversMethodMap.length === 0) {\n                try {\n                    serversMethodMap = await this.tryToAwaitForMethods(methodDefinition, target, additionalOptions);\n                }\n                catch (err) {\n                    const method = {\n                        ...methodDefinition,\n                        getServers: () => [],\n                        supportsStreaming: false,\n                        objectTypes: methodDefinition.objectTypes ?? [],\n                        flags: methodDefinition.flags?.metadata ?? {}\n                    };\n                    const errorObj = {\n                        method,\n                        called_with: argumentObj,\n                        message: `Can not find a method matching ${JSON.stringify(methodFilter)} with server filter ${JSON.stringify(target)}`,\n                        executed_by: undefined,\n                        returned: undefined,\n                        status: undefined,\n                    };\n                    return Promise.reject(errorObj);\n                }\n            }\n            const timeout = additionalOptions.methodResponseTimeoutMs;\n            const additionalOptionsCopy = additionalOptions;\n            const invokePromises = serversMethodMap.map((serversMethodPair) => {\n                const invId = nanoid$1(10);\n                const method = serversMethodPair.methods[0];\n                const server = serversMethodPair.server;\n                const invokePromise = this.protocol.client.invoke(invId, method, argumentObj, server, additionalOptionsCopy);\n                return Promise.race([\n                    invokePromise,\n                    rejectAfter(timeout, invokePromise, {\n                        invocationId: invId,\n                        message: `Invocation timeout (${timeout} ms) reached for method name: ${method?.name}, target instance: ${JSON.stringify(server.instance)}, options: ${JSON.stringify(additionalOptionsCopy)}`,\n                        status: InvokeStatus.Error,\n                    })\n                ]);\n            });\n            const invocationMessages = await Promise.all(invokePromises);\n            const results = this.getInvocationResultObj(invocationMessages, methodDefinition, argumentObj);\n            const allRejected = invocationMessages.every((result) => result.status === InvokeStatus.Error);\n            if (allRejected) {\n                return Promise.reject(results);\n            }\n            return results;\n        };\n        return promisify$2(getInvokePromise(), success, error);\n    }\n    getInvocationResultObj(invocationResults, method, calledWith) {\n        const all_return_values = invocationResults\n            .filter((invokeMessage) => invokeMessage.status === InvokeStatus.Success)\n            .reduce((allValues, currentValue) => {\n            allValues = [\n                ...allValues,\n                {\n                    executed_by: currentValue.instance,\n                    returned: currentValue.result,\n                    called_with: calledWith,\n                    method,\n                    message: currentValue.message,\n                    status: currentValue.status,\n                }\n            ];\n            return allValues;\n        }, []);\n        const all_errors = invocationResults\n            .filter((invokeMessage) => invokeMessage.status === InvokeStatus.Error)\n            .reduce((allErrors, currError) => {\n            allErrors = [\n                ...allErrors,\n                {\n                    executed_by: currError.instance,\n                    called_with: calledWith,\n                    name: method.name,\n                    message: currError.message,\n                }\n            ];\n            return allErrors;\n        }, []);\n        const invResult = invocationResults[0];\n        const result = {\n            method,\n            called_with: calledWith,\n            returned: invResult.result,\n            executed_by: invResult.instance,\n            all_return_values,\n            all_errors,\n            message: invResult.message,\n            status: invResult.status\n        };\n        return result;\n    }\n    tryToAwaitForMethods(methodDefinition, target, additionalOptions) {\n        return new Promise((resolve, reject) => {\n            if (additionalOptions.waitTimeoutMs === 0) {\n                reject();\n                return;\n            }\n            const delayStep = 500;\n            let delayTillNow = 0;\n            const retry = () => {\n                delayTillNow += delayStep;\n                const serversMethodMap = this.getServerMethodsByFilterAndTarget(methodDefinition, target);\n                if (serversMethodMap.length > 0) {\n                    clearInterval(interval);\n                    resolve(serversMethodMap);\n                }\n                else if (delayTillNow >= (additionalOptions.waitTimeoutMs || 10000)) {\n                    clearInterval(interval);\n                    reject();\n                    return;\n                }\n            };\n            const interval = setInterval(retry, delayStep);\n        });\n    }\n    filterByTarget(target, serverMethodMap) {\n        if (typeof target === \"string\") {\n            if (target === \"all\") {\n                return [...serverMethodMap];\n            }\n            else if (target === \"best\") {\n                const localMachine = serverMethodMap\n                    .find((s) => s.server.instance.isLocal);\n                if (localMachine) {\n                    return [localMachine];\n                }\n                if (serverMethodMap[0] !== undefined) {\n                    return [serverMethodMap[0]];\n                }\n            }\n            else if (target === \"skipMine\") {\n                return serverMethodMap.filter(({ server }) => server.instance.peerId !== this.instance.peerId);\n            }\n        }\n        else {\n            let targetArray;\n            if (!Array.isArray(target)) {\n                targetArray = [target];\n            }\n            else {\n                targetArray = target;\n            }\n            const allServersMatching = targetArray.reduce((matches, filter) => {\n                const myMatches = serverMethodMap.filter((serverMethodPair) => {\n                    return this.instanceMatch(filter, serverMethodPair.server.instance);\n                });\n                return matches.concat(myMatches);\n            }, []);\n            return allServersMatching;\n        }\n        return [];\n    }\n    instanceMatch(instanceFilter, instanceDefinition) {\n        return this.containsProps(instanceFilter, instanceDefinition);\n    }\n    methodMatch(methodFilter, methodDefinition) {\n        return this.containsProps(methodFilter, methodDefinition);\n    }\n    containsProps(filter, repoMethod) {\n        const filterProps = Object.keys(filter)\n            .filter((prop) => {\n            return filter[prop] !== undefined\n                && filter[prop] !== null\n                && typeof filter[prop] !== \"function\"\n                && prop !== \"object_types\"\n                && prop !== \"display_name\"\n                && prop !== \"id\"\n                && prop !== \"gatewayId\"\n                && prop !== \"identifier\"\n                && prop[0] !== \"_\";\n        });\n        return filterProps.every((prop) => {\n            let isMatch;\n            const filterValue = filter[prop];\n            const repoMethodValue = repoMethod[prop];\n            switch (prop) {\n                case \"objectTypes\":\n                    isMatch = (filterValue || []).every((filterValueEl) => {\n                        return (repoMethodValue || []).includes(filterValueEl);\n                    });\n                    break;\n                case \"flags\":\n                    isMatch = isSubset(repoMethodValue || {}, filterValue || {});\n                    break;\n                default:\n                    isMatch = String(filterValue).toLowerCase() === String(repoMethodValue).toLowerCase();\n            }\n            return isMatch;\n        });\n    }\n    getMethods(methodFilter) {\n        if (methodFilter === undefined) {\n            return this.repo.getMethods();\n        }\n        const methods = this.repo.getMethods().filter((method) => {\n            return this.methodMatch(methodFilter, method);\n        });\n        return methods;\n    }\n    getMethodsForInstance(instanceFilter) {\n        const allServers = this.repo.getServers();\n        const matchingServers = allServers.filter((server) => {\n            return this.instanceMatch(instanceFilter, server.instance);\n        });\n        if (matchingServers.length === 0) {\n            return [];\n        }\n        let resultMethodsObject = {};\n        if (matchingServers.length === 1) {\n            resultMethodsObject = matchingServers[0].methods;\n        }\n        else {\n            matchingServers.forEach((server) => {\n                Object.keys(server.methods).forEach((methodKey) => {\n                    const method = server.methods[methodKey];\n                    resultMethodsObject[method.identifier] = method;\n                });\n            });\n        }\n        return Object.keys(resultMethodsObject)\n            .map((key) => {\n            return resultMethodsObject[key];\n        });\n    }\n    getServers(methodFilter) {\n        const servers = this.repo.getServers();\n        if (methodFilter === undefined) {\n            return servers.map((server) => {\n                return { server, methods: [] };\n            });\n        }\n        return servers.reduce((prev, current) => {\n            const methodsForServer = Object.values(current.methods);\n            const matchingMethods = methodsForServer.filter((method) => {\n                return this.methodMatch(methodFilter, method);\n            });\n            if (matchingMethods.length > 0) {\n                prev.push({ server: current, methods: matchingMethods });\n            }\n            return prev;\n        }, []);\n    }\n    getServerMethodsByFilterAndTarget(methodFilter, target) {\n        const serversMethodMap = this.getServers(methodFilter);\n        return this.filterByTarget(target, serversMethodMap);\n    }\n}\n\nclass ServerSubscription {\n    protocol;\n    repoMethod;\n    subscription;\n    constructor(protocol, repoMethod, subscription) {\n        this.protocol = protocol;\n        this.repoMethod = repoMethod;\n        this.subscription = subscription;\n    }\n    get stream() {\n        if (!this.repoMethod.stream) {\n            throw new Error(\"no stream\");\n        }\n        return this.repoMethod.stream;\n    }\n    get arguments() { return this.subscription.arguments || {}; }\n    get branchKey() { return this.subscription.branchKey; }\n    get instance() {\n        if (!this.subscription.instance) {\n            throw new Error(\"no instance\");\n        }\n        return this.subscription.instance;\n    }\n    close() {\n        this.protocol.server.closeSingleSubscription(this.repoMethod, this.subscription);\n    }\n    push(data) {\n        this.protocol.server.pushDataToSingle(this.repoMethod, this.subscription, data);\n    }\n}\n\nclass Request {\n    protocol;\n    repoMethod;\n    requestContext;\n    arguments;\n    instance;\n    constructor(protocol, repoMethod, requestContext) {\n        this.protocol = protocol;\n        this.repoMethod = repoMethod;\n        this.requestContext = requestContext;\n        this.arguments = requestContext.arguments;\n        this.instance = requestContext.instance;\n    }\n    accept() {\n        this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, \"\");\n    }\n    acceptOnBranch(branch) {\n        this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, branch);\n    }\n    reject(reason) {\n        this.protocol.server.rejectRequest(this.requestContext, this.repoMethod, reason);\n    }\n}\n\nlet ServerStreaming$1 = class ServerStreaming {\n    protocol;\n    server;\n    constructor(protocol, server) {\n        this.protocol = protocol;\n        this.server = server;\n        protocol.server.onSubRequest((rc, rm) => this.handleSubRequest(rc, rm));\n        protocol.server.onSubAdded((sub, rm) => this.handleSubAdded(sub, rm));\n        protocol.server.onSubRemoved((sub, rm) => this.handleSubRemoved(sub, rm));\n    }\n    handleSubRequest(requestContext, repoMethod) {\n        if (!(repoMethod &&\n            repoMethod.streamCallbacks &&\n            typeof repoMethod.streamCallbacks.subscriptionRequestHandler === \"function\")) {\n            return;\n        }\n        const request = new Request(this.protocol, repoMethod, requestContext);\n        repoMethod.streamCallbacks.subscriptionRequestHandler(request);\n    }\n    handleSubAdded(subscription, repoMethod) {\n        if (!(repoMethod &&\n            repoMethod.streamCallbacks &&\n            typeof repoMethod.streamCallbacks.subscriptionAddedHandler === \"function\")) {\n            return;\n        }\n        const sub = new ServerSubscription(this.protocol, repoMethod, subscription);\n        repoMethod.streamCallbacks.subscriptionAddedHandler(sub);\n    }\n    handleSubRemoved(subscription, repoMethod) {\n        if (!(repoMethod &&\n            repoMethod.streamCallbacks &&\n            typeof repoMethod.streamCallbacks.subscriptionRemovedHandler === \"function\")) {\n            return;\n        }\n        const sub = new ServerSubscription(this.protocol, repoMethod, subscription);\n        repoMethod.streamCallbacks.subscriptionRemovedHandler(sub);\n    }\n};\n\nclass ServerBranch {\n    key;\n    protocol;\n    repoMethod;\n    constructor(key, protocol, repoMethod) {\n        this.key = key;\n        this.protocol = protocol;\n        this.repoMethod = repoMethod;\n    }\n    subscriptions() {\n        const subList = this.protocol.server.getSubscriptionList(this.repoMethod, this.key);\n        return subList.map((sub) => {\n            return new ServerSubscription(this.protocol, this.repoMethod, sub);\n        });\n    }\n    close() {\n        this.protocol.server.closeAllSubscriptions(this.repoMethod, this.key);\n    }\n    push(data) {\n        this.protocol.server.pushData(this.repoMethod, data, [this.key]);\n    }\n}\n\nclass ServerStream {\n    _protocol;\n    _repoMethod;\n    _server;\n    name;\n    constructor(_protocol, _repoMethod, _server) {\n        this._protocol = _protocol;\n        this._repoMethod = _repoMethod;\n        this._server = _server;\n        this.name = this._repoMethod.definition.name;\n    }\n    branches(key) {\n        const bList = this._protocol.server.getBranchList(this._repoMethod);\n        if (key) {\n            if (bList.indexOf(key) > -1) {\n                return new ServerBranch(key, this._protocol, this._repoMethod);\n            }\n            return undefined;\n        }\n        else {\n            return bList.map((branchKey) => {\n                return new ServerBranch(branchKey, this._protocol, this._repoMethod);\n            });\n        }\n    }\n    branch(key) {\n        return this.branches(key);\n    }\n    subscriptions() {\n        const subList = this._protocol.server.getSubscriptionList(this._repoMethod);\n        return subList.map((sub) => {\n            return new ServerSubscription(this._protocol, this._repoMethod, sub);\n        });\n    }\n    get definition() {\n        const def2 = this._repoMethod.definition;\n        return {\n            accepts: def2.accepts,\n            description: def2.description,\n            displayName: def2.displayName,\n            name: def2.name,\n            objectTypes: def2.objectTypes,\n            returns: def2.returns,\n            supportsStreaming: def2.supportsStreaming,\n            flags: def2.flags?.metadata,\n        };\n    }\n    close() {\n        this._protocol.server.closeAllSubscriptions(this._repoMethod);\n        this._server.unregister(this._repoMethod.definition, true);\n    }\n    push(data, branches) {\n        if (typeof branches !== \"string\" && !Array.isArray(branches) && branches !== undefined) {\n            throw new Error(\"invalid branches should be string or string array\");\n        }\n        if (typeof data !== \"object\") {\n            throw new Error(\"Invalid arguments. Data must be an object.\");\n        }\n        this._protocol.server.pushData(this._repoMethod, data, branches);\n    }\n    updateRepoMethod(repoMethod) {\n        this._repoMethod = repoMethod;\n    }\n}\n\nclass Server {\n    protocol;\n    serverRepository;\n    streaming;\n    invocations = 0;\n    currentlyUnregistering = {};\n    constructor(protocol, serverRepository) {\n        this.protocol = protocol;\n        this.serverRepository = serverRepository;\n        this.streaming = new ServerStreaming$1(protocol, this);\n        this.protocol.server.onInvoked(this.onMethodInvoked.bind(this));\n    }\n    createStream(streamDef, callbacks, successCallback, errorCallback, existingStream) {\n        const promise = new Promise((resolve, reject) => {\n            if (!streamDef) {\n                reject(\"The stream name must be unique! Please, provide either a unique string for a stream name to “glue.interop.createStream()” or a “methodDefinition” object with a unique “name” property for the stream.\");\n                return;\n            }\n            let streamMethodDefinition;\n            if (typeof streamDef === \"string\") {\n                streamMethodDefinition = { name: \"\" + streamDef };\n            }\n            else {\n                streamMethodDefinition = { ...streamDef };\n            }\n            if (!streamMethodDefinition.name) {\n                return reject(`The “name” property is required for the “streamDefinition” object and must be unique. Stream definition: ${JSON.stringify(streamMethodDefinition)}`);\n            }\n            const nameAlreadyExists = this.serverRepository.getList()\n                .some((serverMethod) => serverMethod.definition.name === streamMethodDefinition.name);\n            if (nameAlreadyExists) {\n                return reject(`A stream with the name \"${streamMethodDefinition.name}\" already exists! Please, provide a unique name for the stream.`);\n            }\n            streamMethodDefinition.supportsStreaming = true;\n            if (!callbacks) {\n                callbacks = {};\n            }\n            if (typeof callbacks.subscriptionRequestHandler !== \"function\") {\n                callbacks.subscriptionRequestHandler = (request) => {\n                    request.accept();\n                };\n            }\n            const repoMethod = this.serverRepository.add({\n                definition: streamMethodDefinition,\n                streamCallbacks: callbacks,\n                protocolState: {},\n            });\n            this.protocol.server.createStream(repoMethod)\n                .then(() => {\n                let streamUserObject;\n                if (existingStream) {\n                    streamUserObject = existingStream;\n                    existingStream.updateRepoMethod(repoMethod);\n                }\n                else {\n                    streamUserObject = new ServerStream(this.protocol, repoMethod, this);\n                }\n                repoMethod.stream = streamUserObject;\n                resolve(streamUserObject);\n            })\n                .catch((err) => {\n                if (repoMethod.repoId) {\n                    this.serverRepository.remove(repoMethod.repoId);\n                }\n                reject(err);\n            });\n        });\n        return promisify$2(promise, successCallback, errorCallback);\n    }\n    register(methodDefinition, callback) {\n        if (!methodDefinition) {\n            return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.\");\n        }\n        if (typeof callback !== \"function\") {\n            return Promise.reject(`The second parameter must be a callback function. Method: ${typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name}`);\n        }\n        const wrappedCallbackFunction = async (context, resultCallback) => {\n            try {\n                const result = callback(context.args, context.instance);\n                if (result && typeof result.then === \"function\") {\n                    const resultValue = await result;\n                    resultCallback(undefined, resultValue);\n                }\n                else {\n                    resultCallback(undefined, result);\n                }\n            }\n            catch (e) {\n                resultCallback(e ?? \"\", e ?? \"\");\n            }\n        };\n        wrappedCallbackFunction.userCallback = callback;\n        return this.registerCore(methodDefinition, wrappedCallbackFunction);\n    }\n    registerAsync(methodDefinition, callback) {\n        if (!methodDefinition) {\n            return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a “methodDefinition” object with a required “name” property.\");\n        }\n        if (typeof callback !== \"function\") {\n            return Promise.reject(`The second parameter must be a callback function. Method: ${typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name}`);\n        }\n        const wrappedCallback = async (context, resultCallback) => {\n            try {\n                let resultCalled = false;\n                const success = (result) => {\n                    if (!resultCalled) {\n                        resultCallback(undefined, result);\n                    }\n                    resultCalled = true;\n                };\n                const error = (e) => {\n                    if (!resultCalled) {\n                        if (!e) {\n                            e = \"\";\n                        }\n                        resultCallback(e, e);\n                    }\n                    resultCalled = true;\n                };\n                const methodResult = callback(context.args, context.instance, success, error);\n                if (methodResult && typeof methodResult.then === \"function\") {\n                    methodResult\n                        .then(success)\n                        .catch(error);\n                }\n            }\n            catch (e) {\n                resultCallback(e, undefined);\n            }\n        };\n        wrappedCallback.userCallbackAsync = callback;\n        return this.registerCore(methodDefinition, wrappedCallback);\n    }\n    async unregister(methodFilter, forStream = false) {\n        if (methodFilter === undefined) {\n            return Promise.reject(\"Please, provide either a unique string for a name or an object containing a “name” property.\");\n        }\n        if (typeof methodFilter === \"function\") {\n            await this.unregisterWithPredicate(methodFilter, forStream);\n            return;\n        }\n        let methodDefinition;\n        if (typeof methodFilter === \"string\") {\n            methodDefinition = { name: methodFilter };\n        }\n        else {\n            methodDefinition = methodFilter;\n        }\n        if (methodDefinition.name === undefined) {\n            return Promise.reject(\"Method name is required. Cannot find a method if the method name is undefined!\");\n        }\n        const methodToBeRemoved = this.serverRepository.getList().find((serverMethod) => {\n            return serverMethod.definition.name === methodDefinition.name\n                && (serverMethod.definition.supportsStreaming || false) === forStream;\n        });\n        if (!methodToBeRemoved) {\n            return Promise.reject(`Method with a name \"${methodDefinition.name}\" does not exist or is not registered by your application!`);\n        }\n        await this.removeMethodsOrStreams([methodToBeRemoved]);\n    }\n    async unregisterWithPredicate(filterPredicate, forStream) {\n        const methodsOrStreamsToRemove = this.serverRepository.getList()\n            .filter((sm) => filterPredicate(sm.definition))\n            .filter((serverMethod) => (serverMethod.definition.supportsStreaming || false) === forStream);\n        if (!methodsOrStreamsToRemove || methodsOrStreamsToRemove.length === 0) {\n            return Promise.reject(`Could not find a ${forStream ? \"stream\" : \"method\"} matching the specified condition!`);\n        }\n        await this.removeMethodsOrStreams(methodsOrStreamsToRemove);\n    }\n    removeMethodsOrStreams(methodsToRemove) {\n        const methodUnregPromises = [];\n        methodsToRemove.forEach((method) => {\n            const promise = this.protocol.server.unregister(method)\n                .then(() => {\n                if (method.repoId) {\n                    this.serverRepository.remove(method.repoId);\n                }\n            });\n            methodUnregPromises.push(promise);\n            this.addAsCurrentlyUnregistering(method.definition.name, promise);\n        });\n        return Promise.all(methodUnregPromises);\n    }\n    async addAsCurrentlyUnregistering(methodName, promise) {\n        const timeout = new Promise((resolve) => setTimeout(resolve, 5000));\n        this.currentlyUnregistering[methodName] = Promise.race([promise, timeout]).then(() => {\n            delete this.currentlyUnregistering[methodName];\n        });\n    }\n    async registerCore(method, theFunction) {\n        let methodDefinition;\n        if (typeof method === \"string\") {\n            methodDefinition = { name: \"\" + method };\n        }\n        else {\n            methodDefinition = { ...method };\n        }\n        if (!methodDefinition.name) {\n            return Promise.reject(`Please, provide a (unique) string value for the “name” property in the “methodDefinition” object: ${JSON.stringify(method)}`);\n        }\n        const unregisterInProgress = this.currentlyUnregistering[methodDefinition.name];\n        if (typeof unregisterInProgress !== \"undefined\") {\n            await unregisterInProgress;\n        }\n        const nameAlreadyExists = this.serverRepository.getList()\n            .some((serverMethod) => serverMethod.definition.name === methodDefinition.name);\n        if (nameAlreadyExists) {\n            return Promise.reject(`A method with the name \"${methodDefinition.name}\" already exists! Please, provide a unique name for the method.`);\n        }\n        if (methodDefinition.supportsStreaming) {\n            return Promise.reject(`When you create methods with “glue.interop.register()” or “glue.interop.registerAsync()” the property “supportsStreaming” cannot be “true”. If you want “${methodDefinition.name}” to be a stream, please use the “glue.interop.createStream()” method.`);\n        }\n        const repoMethod = this.serverRepository.add({\n            definition: methodDefinition,\n            theFunction,\n            protocolState: {},\n        });\n        return this.protocol.server.register(repoMethod)\n            .catch((err) => {\n            if (repoMethod?.repoId) {\n                this.serverRepository.remove(repoMethod.repoId);\n            }\n            throw err;\n        });\n    }\n    onMethodInvoked(methodToExecute, invocationId, invocationArgs) {\n        if (!methodToExecute || !methodToExecute.theFunction) {\n            return;\n        }\n        methodToExecute.theFunction(invocationArgs, (err, result) => {\n            if (err !== undefined && err !== null) {\n                if (err.message && typeof err.message === \"string\") {\n                    err = err.message;\n                }\n                else if (typeof err !== \"string\") {\n                    try {\n                        err = JSON.stringify(err);\n                    }\n                    catch (unStrException) {\n                        err = `un-stringifyable error in onMethodInvoked! Top level prop names: ${Object.keys(err)}`;\n                    }\n                }\n            }\n            if (!result) {\n                result = {};\n            }\n            else if (typeof result !== \"object\" || Array.isArray(result)) {\n                result = { _value: result };\n            }\n            this.protocol.server.methodInvocationResult(methodToExecute, invocationId, err, result);\n        });\n    }\n}\n\nclass InstanceWrapper {\n    wrapped = {};\n    constructor(API, instance, connection) {\n        this.wrapped.getMethods = function () {\n            return API.methodsForInstance(this);\n        };\n        this.wrapped.getStreams = function () {\n            return API.methodsForInstance(this).filter((m) => m.supportsStreaming);\n        };\n        if (instance) {\n            this.refreshWrappedObject(instance);\n        }\n        if (connection) {\n            connection.loggedIn(() => {\n                this.refresh(connection);\n            });\n            this.refresh(connection);\n        }\n    }\n    unwrap() {\n        return this.wrapped;\n    }\n    refresh(connection) {\n        if (!connection) {\n            return;\n        }\n        const resolvedIdentity = connection?.resolvedIdentity;\n        const instance = Object.assign({}, resolvedIdentity ?? {}, { peerId: connection?.peerId });\n        this.refreshWrappedObject(instance);\n    }\n    refreshWrappedObject(resolvedIdentity) {\n        Object.keys(resolvedIdentity).forEach((key) => {\n            this.wrapped[key] = resolvedIdentity[key];\n        });\n        this.wrapped.user = resolvedIdentity.user;\n        this.wrapped.instance = resolvedIdentity.instance;\n        this.wrapped.application = resolvedIdentity.application ?? nanoid$1(10);\n        this.wrapped.applicationName = resolvedIdentity.applicationName;\n        this.wrapped.pid = resolvedIdentity.pid ?? resolvedIdentity.process ?? Math.floor(Math.random() * 10000000000);\n        this.wrapped.machine = resolvedIdentity.machine;\n        this.wrapped.environment = resolvedIdentity.environment;\n        this.wrapped.region = resolvedIdentity.region;\n        this.wrapped.windowId = resolvedIdentity.windowId;\n        this.wrapped.isLocal = resolvedIdentity.isLocal ?? true;\n        this.wrapped.api = resolvedIdentity.api;\n        this.wrapped.service = resolvedIdentity.service;\n        this.wrapped.peerId = resolvedIdentity.peerId;\n    }\n}\n\nconst hideMethodSystemFlags = (method) => {\n    return {\n        ...method,\n        flags: method.flags.metadata || {}\n    };\n};\nclass ClientRepository {\n    logger;\n    API;\n    servers = {};\n    myServer;\n    methodsCount = {};\n    callbacks = CallbackRegistryFactory$1();\n    constructor(logger, API) {\n        this.logger = logger;\n        this.API = API;\n        const peerId = this.API.instance.peerId;\n        this.myServer = {\n            id: peerId,\n            methods: {},\n            instance: this.API.instance,\n            wrapper: this.API.unwrappedInstance,\n        };\n        this.servers[peerId] = this.myServer;\n    }\n    addServer(info, serverId) {\n        this.logger.debug(`adding server ${serverId}`);\n        const current = this.servers[serverId];\n        if (current) {\n            return current.id;\n        }\n        const wrapper = new InstanceWrapper(this.API, info);\n        const serverEntry = {\n            id: serverId,\n            methods: {},\n            instance: wrapper.unwrap(),\n            wrapper,\n        };\n        this.servers[serverId] = serverEntry;\n        this.callbacks.execute(\"onServerAdded\", serverEntry.instance);\n        return serverId;\n    }\n    removeServerById(id, reason) {\n        const server = this.servers[id];\n        if (!server) {\n            this.logger.warn(`not aware of server ${id}, my state ${JSON.stringify(Object.keys(this.servers))}`);\n            return;\n        }\n        else {\n            this.logger.debug(`removing server ${id}`);\n        }\n        Object.keys(server.methods).forEach((methodId) => {\n            this.removeServerMethod(id, methodId);\n        });\n        delete this.servers[id];\n        this.callbacks.execute(\"onServerRemoved\", server.instance, reason);\n    }\n    addServerMethod(serverId, method) {\n        const server = this.servers[serverId];\n        if (!server) {\n            throw new Error(\"server does not exists\");\n        }\n        if (server.methods[method.id]) {\n            return;\n        }\n        const identifier = this.createMethodIdentifier(method);\n        const that = this;\n        const methodDefinition = {\n            identifier,\n            gatewayId: method.id,\n            name: method.name,\n            displayName: method.display_name,\n            description: method.description,\n            version: method.version,\n            objectTypes: method.object_types || [],\n            accepts: method.input_signature,\n            returns: method.result_signature,\n            supportsStreaming: typeof method.flags !== \"undefined\" ? method.flags.streaming : false,\n            flags: method.flags ?? {},\n            getServers: () => {\n                return that.getServersByMethod(identifier);\n            }\n        };\n        methodDefinition.object_types = methodDefinition.objectTypes;\n        methodDefinition.display_name = methodDefinition.displayName;\n        methodDefinition.version = methodDefinition.version;\n        server.methods[method.id] = methodDefinition;\n        const clientMethodDefinition = hideMethodSystemFlags(methodDefinition);\n        if (!this.methodsCount[identifier]) {\n            this.methodsCount[identifier] = 0;\n            this.callbacks.execute(\"onMethodAdded\", clientMethodDefinition);\n        }\n        this.methodsCount[identifier] = this.methodsCount[identifier] + 1;\n        this.callbacks.execute(\"onServerMethodAdded\", server.instance, clientMethodDefinition);\n        return methodDefinition;\n    }\n    removeServerMethod(serverId, methodId) {\n        const server = this.servers[serverId];\n        if (!server) {\n            throw new Error(\"server does not exists\");\n        }\n        const method = server.methods[methodId];\n        delete server.methods[methodId];\n        const clientMethodDefinition = hideMethodSystemFlags(method);\n        this.methodsCount[method.identifier] = this.methodsCount[method.identifier] - 1;\n        if (this.methodsCount[method.identifier] === 0) {\n            this.callbacks.execute(\"onMethodRemoved\", clientMethodDefinition);\n        }\n        this.callbacks.execute(\"onServerMethodRemoved\", server.instance, clientMethodDefinition);\n    }\n    getMethods() {\n        return this.extractMethodsFromServers(Object.values(this.servers)).map(hideMethodSystemFlags);\n    }\n    getServers() {\n        return Object.values(this.servers).map(this.hideServerMethodSystemFlags);\n    }\n    onServerAdded(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onServerAdded\", callback);\n        const serversWithMethodsToReplay = this.getServers().map((s) => s.instance);\n        return this.returnUnsubWithDelayedReplay(unsubscribeFunc, serversWithMethodsToReplay, callback);\n    }\n    onMethodAdded(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onMethodAdded\", callback);\n        const methodsToReplay = this.getMethods();\n        return this.returnUnsubWithDelayedReplay(unsubscribeFunc, methodsToReplay, callback);\n    }\n    onServerMethodAdded(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onServerMethodAdded\", callback);\n        let unsubCalled = false;\n        const servers = this.getServers();\n        setTimeout(() => {\n            servers.forEach((server) => {\n                const methods = server.methods;\n                Object.keys(methods).forEach((methodId) => {\n                    if (!unsubCalled) {\n                        callback(server.instance, methods[methodId]);\n                    }\n                });\n            });\n        }, 0);\n        return () => {\n            unsubCalled = true;\n            unsubscribeFunc();\n        };\n    }\n    onMethodRemoved(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onMethodRemoved\", callback);\n        return unsubscribeFunc;\n    }\n    onServerRemoved(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onServerRemoved\", callback);\n        return unsubscribeFunc;\n    }\n    onServerMethodRemoved(callback) {\n        const unsubscribeFunc = this.callbacks.add(\"onServerMethodRemoved\", callback);\n        return unsubscribeFunc;\n    }\n    getServerById(id) {\n        const server = this.servers[id];\n        if (!server) {\n            return undefined;\n        }\n        return this.hideServerMethodSystemFlags(this.servers[id]);\n    }\n    reset() {\n        Object.keys(this.servers).forEach((key) => {\n            this.removeServerById(key, \"reset\");\n        });\n        this.servers = {\n            [this.myServer.id]: this.myServer\n        };\n        this.methodsCount = {};\n    }\n    createMethodIdentifier(methodInfo) {\n        const accepts = methodInfo.input_signature ?? \"\";\n        const returns = methodInfo.result_signature ?? \"\";\n        return (methodInfo.name + accepts + returns).toLowerCase();\n    }\n    getServersByMethod(identifier) {\n        const allServers = [];\n        Object.values(this.servers).forEach((server) => {\n            Object.values(server.methods).forEach((method) => {\n                if (method.identifier === identifier) {\n                    allServers.push(server.instance);\n                }\n            });\n        });\n        return allServers;\n    }\n    returnUnsubWithDelayedReplay(unsubscribeFunc, collectionToReplay, callback) {\n        let unsubCalled = false;\n        setTimeout(() => {\n            collectionToReplay.forEach((item) => {\n                if (!unsubCalled) {\n                    callback(item);\n                }\n            });\n        }, 0);\n        return () => {\n            unsubCalled = true;\n            unsubscribeFunc();\n        };\n    }\n    hideServerMethodSystemFlags(server) {\n        const clientMethods = {};\n        Object.entries(server.methods).forEach(([name, method]) => {\n            clientMethods[name] = hideMethodSystemFlags(method);\n        });\n        return {\n            ...server,\n            methods: clientMethods\n        };\n    }\n    extractMethodsFromServers(servers) {\n        const methods = Object.values(servers).reduce((clientMethods, server) => {\n            return [...clientMethods, ...Object.values(server.methods)];\n        }, []);\n        return methods;\n    }\n}\n\nclass ServerRepository {\n    nextId = 0;\n    methods = [];\n    add(method) {\n        method.repoId = String(this.nextId);\n        this.nextId += 1;\n        this.methods.push(method);\n        return method;\n    }\n    remove(repoId) {\n        if (typeof repoId !== \"string\") {\n            return new TypeError(\"Expecting a string\");\n        }\n        this.methods = this.methods.filter((m) => {\n            return m.repoId !== repoId;\n        });\n    }\n    getById(id) {\n        if (typeof id !== \"string\") {\n            return undefined;\n        }\n        return this.methods.find((m) => {\n            return m.repoId === id;\n        });\n    }\n    getList() {\n        return this.methods.map((m) => m);\n    }\n    length() {\n        return this.methods.length;\n    }\n    reset() {\n        this.methods = [];\n    }\n}\n\nconst SUBSCRIPTION_REQUEST = \"onSubscriptionRequest\";\nconst SUBSCRIPTION_ADDED = \"onSubscriptionAdded\";\nconst SUBSCRIPTION_REMOVED = \"onSubscriptionRemoved\";\nclass ServerStreaming {\n    session;\n    repository;\n    serverRepository;\n    ERR_URI_SUBSCRIPTION_FAILED = \"com.tick42.agm.errors.subscription.failure\";\n    callbacks = CallbackRegistryFactory$1();\n    nextStreamId = 0;\n    constructor(session, repository, serverRepository) {\n        this.session = session;\n        this.repository = repository;\n        this.serverRepository = serverRepository;\n        session.on(\"add-interest\", (msg) => {\n            this.handleAddInterest(msg);\n        });\n        session.on(\"remove-interest\", (msg) => {\n            this.handleRemoveInterest(msg);\n        });\n    }\n    acceptRequestOnBranch(requestContext, streamingMethod, branch) {\n        if (typeof branch !== \"string\") {\n            branch = \"\";\n        }\n        if (typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\n            throw new TypeError(\"The streaming method is missing its subscriptions.\");\n        }\n        if (!Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\n            throw new TypeError(\"The streaming method is missing its branches.\");\n        }\n        const streamId = this.getStreamId(streamingMethod, branch);\n        const key = requestContext.msg.subscription_id;\n        const subscription = {\n            id: key,\n            arguments: requestContext.arguments,\n            instance: requestContext.instance,\n            branchKey: branch,\n            streamId,\n            subscribeMsg: requestContext.msg,\n        };\n        streamingMethod.protocolState.subscriptionsMap[key] = subscription;\n        this.session.sendFireAndForget({\n            type: \"accepted\",\n            subscription_id: key,\n            stream_id: streamId,\n        });\n        this.callbacks.execute(SUBSCRIPTION_ADDED, subscription, streamingMethod);\n    }\n    rejectRequest(requestContext, streamingMethod, reason) {\n        if (typeof reason !== \"string\") {\n            reason = \"\";\n        }\n        this.sendSubscriptionFailed(\"Subscription rejected by user. \" + reason, requestContext.msg.subscription_id);\n    }\n    pushData(streamingMethod, data, branches) {\n        if (typeof streamingMethod !== \"object\" || !Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\n            return;\n        }\n        if (typeof data !== \"object\") {\n            throw new Error(\"Invalid arguments. Data must be an object.\");\n        }\n        if (typeof branches === \"string\") {\n            branches = [branches];\n        }\n        else if (!Array.isArray(branches) || branches.length <= 0) {\n            branches = [];\n        }\n        const streamIdList = streamingMethod.protocolState.branchKeyToStreamIdMap\n            .filter((br) => {\n            if (!branches || branches.length === 0) {\n                return true;\n            }\n            return branches.indexOf(br.key) >= 0;\n        }).map((br) => {\n            return br.streamId;\n        });\n        streamIdList.forEach((streamId) => {\n            const publishMessage = {\n                type: \"publish\",\n                stream_id: streamId,\n                data,\n            };\n            this.session.sendFireAndForget(publishMessage);\n        });\n    }\n    pushDataToSingle(method, subscription, data) {\n        if (typeof data !== \"object\") {\n            throw new Error(\"Invalid arguments. Data must be an object.\");\n        }\n        const postMessage = {\n            type: \"post\",\n            subscription_id: subscription.id,\n            data,\n        };\n        this.session.sendFireAndForget(postMessage);\n    }\n    closeSingleSubscription(streamingMethod, subscription) {\n        if (streamingMethod.protocolState.subscriptionsMap) {\n            delete streamingMethod.protocolState.subscriptionsMap[subscription.id];\n        }\n        const dropSubscriptionMessage = {\n            type: \"drop-subscription\",\n            subscription_id: subscription.id,\n            reason: \"Server dropping a single subscription\",\n        };\n        this.session.sendFireAndForget(dropSubscriptionMessage);\n        subscription.instance;\n        this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\n    }\n    closeMultipleSubscriptions(streamingMethod, branchKey) {\n        if (typeof streamingMethod !== \"object\" || typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\n            return;\n        }\n        if (!streamingMethod.protocolState.subscriptionsMap) {\n            return;\n        }\n        const subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\n        let subscriptionsToClose = Object.keys(subscriptionsMap)\n            .map((key) => {\n            return subscriptionsMap[key];\n        });\n        if (typeof branchKey === \"string\") {\n            subscriptionsToClose = subscriptionsToClose.filter((sub) => {\n                return sub.branchKey === branchKey;\n            });\n        }\n        subscriptionsToClose.forEach((subscription) => {\n            delete subscriptionsMap[subscription.id];\n            const drop = {\n                type: \"drop-subscription\",\n                subscription_id: subscription.id,\n                reason: \"Server dropping all subscriptions on stream_id: \" + subscription.streamId,\n            };\n            this.session.sendFireAndForget(drop);\n        });\n    }\n    getSubscriptionList(streamingMethod, branchKey) {\n        if (typeof streamingMethod !== \"object\") {\n            return [];\n        }\n        let subscriptions = [];\n        if (!streamingMethod.protocolState.subscriptionsMap) {\n            return [];\n        }\n        const subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\n        const allSubscriptions = Object.keys(subscriptionsMap)\n            .map((key) => {\n            return subscriptionsMap[key];\n        });\n        if (typeof branchKey !== \"string\") {\n            subscriptions = allSubscriptions;\n        }\n        else {\n            subscriptions = allSubscriptions.filter((sub) => {\n                return sub.branchKey === branchKey;\n            });\n        }\n        return subscriptions;\n    }\n    getBranchList(streamingMethod) {\n        if (typeof streamingMethod !== \"object\") {\n            return [];\n        }\n        if (!streamingMethod.protocolState.subscriptionsMap) {\n            return [];\n        }\n        const subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\n        const allSubscriptions = Object.keys(subscriptionsMap)\n            .map((key) => {\n            return subscriptionsMap[key];\n        });\n        const result = [];\n        allSubscriptions.forEach((sub) => {\n            let branch = \"\";\n            if (typeof sub === \"object\" && typeof sub.branchKey === \"string\") {\n                branch = sub.branchKey;\n            }\n            if (result.indexOf(branch) === -1) {\n                result.push(branch);\n            }\n        });\n        return result;\n    }\n    onSubAdded(callback) {\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_ADDED, callback);\n    }\n    onSubRequest(callback) {\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REQUEST, callback);\n    }\n    onSubRemoved(callback) {\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REMOVED, callback);\n    }\n    handleRemoveInterest(msg) {\n        const streamingMethod = this.serverRepository.getById(msg.method_id);\n        if (typeof msg.subscription_id !== \"string\" ||\n            typeof streamingMethod !== \"object\") {\n            return;\n        }\n        if (!streamingMethod.protocolState.subscriptionsMap) {\n            return;\n        }\n        if (typeof streamingMethod.protocolState.subscriptionsMap[msg.subscription_id] !== \"object\") {\n            return;\n        }\n        const subscription = streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\n        delete streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\n        this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\n    }\n    onSubscriptionLifetimeEvent(eventName, handlerFunc) {\n        this.callbacks.add(eventName, handlerFunc);\n    }\n    getNextStreamId() {\n        return this.nextStreamId++ + \"\";\n    }\n    handleAddInterest(msg) {\n        const caller = this.repository.getServerById(msg.caller_id);\n        const instance = caller?.instance ?? {};\n        const requestContext = {\n            msg,\n            arguments: msg.arguments_kv || {},\n            instance,\n        };\n        const streamingMethod = this.serverRepository.getById(msg.method_id);\n        if (streamingMethod === undefined) {\n            const errorMsg = \"No method with id \" + msg.method_id + \" on this server.\";\n            this.sendSubscriptionFailed(errorMsg, msg.subscription_id);\n            return;\n        }\n        if (streamingMethod.protocolState.subscriptionsMap &&\n            streamingMethod.protocolState.subscriptionsMap[msg.subscription_id]) {\n            this.sendSubscriptionFailed(\"A subscription with id \" + msg.subscription_id + \" already exists.\", msg.subscription_id);\n            return;\n        }\n        this.callbacks.execute(SUBSCRIPTION_REQUEST, requestContext, streamingMethod);\n    }\n    sendSubscriptionFailed(reason, subscriptionId) {\n        const errorMessage = {\n            type: \"error\",\n            reason_uri: this.ERR_URI_SUBSCRIPTION_FAILED,\n            reason,\n            request_id: subscriptionId,\n        };\n        this.session.sendFireAndForget(errorMessage);\n    }\n    getStreamId(streamingMethod, branchKey) {\n        if (typeof branchKey !== \"string\") {\n            branchKey = \"\";\n        }\n        if (!streamingMethod.protocolState.branchKeyToStreamIdMap) {\n            throw new Error(`streaming ${streamingMethod.definition.name} method without protocol state`);\n        }\n        const needleBranch = streamingMethod.protocolState.branchKeyToStreamIdMap.filter((branch) => {\n            return branch.key === branchKey;\n        })[0];\n        let streamId = (needleBranch ? needleBranch.streamId : undefined);\n        if (typeof streamId !== \"string\" || streamId === \"\") {\n            streamId = this.getNextStreamId();\n            streamingMethod.protocolState.branchKeyToStreamIdMap.push({ key: branchKey, streamId });\n        }\n        return streamId;\n    }\n}\n\nclass ServerProtocol {\n    session;\n    clientRepository;\n    serverRepository;\n    logger;\n    callbacks = CallbackRegistryFactory$1();\n    streaming;\n    constructor(session, clientRepository, serverRepository, logger) {\n        this.session = session;\n        this.clientRepository = clientRepository;\n        this.serverRepository = serverRepository;\n        this.logger = logger;\n        this.streaming = new ServerStreaming(session, clientRepository, serverRepository);\n        this.session.on(\"invoke\", (msg) => this.handleInvokeMessage(msg));\n    }\n    createStream(repoMethod) {\n        repoMethod.protocolState.subscriptionsMap = {};\n        repoMethod.protocolState.branchKeyToStreamIdMap = [];\n        return this.register(repoMethod, true);\n    }\n    register(repoMethod, isStreaming) {\n        const methodDef = repoMethod.definition;\n        const flags = Object.assign({}, { metadata: methodDef.flags ?? {} }, { streaming: isStreaming || false });\n        const registerMsg = {\n            type: \"register\",\n            methods: [{\n                    id: repoMethod.repoId,\n                    name: methodDef.name,\n                    display_name: methodDef.displayName,\n                    description: methodDef.description,\n                    version: methodDef.version,\n                    flags,\n                    object_types: methodDef.objectTypes || methodDef.object_types,\n                    input_signature: methodDef.accepts,\n                    result_signature: methodDef.returns,\n                    restrictions: undefined,\n                }],\n        };\n        return this.session.send(registerMsg, { methodId: repoMethod.repoId })\n            .then(() => {\n            this.logger.debug(\"registered method \" + repoMethod.definition.name + \" with id \" + repoMethod.repoId);\n        })\n            .catch((msg) => {\n            this.logger.warn(`failed to register method ${repoMethod.definition.name} with id ${repoMethod.repoId} - ${JSON.stringify(msg)}`);\n            throw msg;\n        });\n    }\n    onInvoked(callback) {\n        this.callbacks.add(\"onInvoked\", callback);\n    }\n    methodInvocationResult(method, invocationId, err, result) {\n        let msg;\n        if (err || err === \"\") {\n            msg = {\n                type: \"error\",\n                request_id: invocationId,\n                reason_uri: \"agm.errors.client_error\",\n                reason: err,\n                context: result,\n                peer_id: undefined,\n            };\n        }\n        else {\n            msg = {\n                type: \"yield\",\n                invocation_id: invocationId,\n                peer_id: this.session.peerId,\n                result,\n                request_id: undefined,\n            };\n        }\n        this.session.sendFireAndForget(msg);\n    }\n    async unregister(method) {\n        const msg = {\n            type: \"unregister\",\n            methods: [method.repoId],\n        };\n        await this.session.send(msg);\n    }\n    getBranchList(method) {\n        return this.streaming.getBranchList(method);\n    }\n    getSubscriptionList(method, branchKey) {\n        return this.streaming.getSubscriptionList(method, branchKey);\n    }\n    closeAllSubscriptions(method, branchKey) {\n        this.streaming.closeMultipleSubscriptions(method, branchKey);\n    }\n    pushData(method, data, branches) {\n        this.streaming.pushData(method, data, branches);\n    }\n    pushDataToSingle(method, subscription, data) {\n        this.streaming.pushDataToSingle(method, subscription, data);\n    }\n    closeSingleSubscription(method, subscription) {\n        this.streaming.closeSingleSubscription(method, subscription);\n    }\n    acceptRequestOnBranch(requestContext, method, branch) {\n        this.streaming.acceptRequestOnBranch(requestContext, method, branch);\n    }\n    rejectRequest(requestContext, method, reason) {\n        this.streaming.rejectRequest(requestContext, method, reason);\n    }\n    onSubRequest(callback) {\n        this.streaming.onSubRequest(callback);\n    }\n    onSubAdded(callback) {\n        this.streaming.onSubAdded(callback);\n    }\n    onSubRemoved(callback) {\n        this.streaming.onSubRemoved(callback);\n    }\n    handleInvokeMessage(msg) {\n        const invocationId = msg.invocation_id;\n        const callerId = msg.caller_id;\n        const methodId = msg.method_id;\n        const args = msg.arguments_kv;\n        const methodList = this.serverRepository.getList();\n        const method = methodList.filter((m) => {\n            return m.repoId === methodId;\n        })[0];\n        if (method === undefined) {\n            return;\n        }\n        const client = this.clientRepository.getServerById(callerId)?.instance;\n        const invocationArgs = { args, instance: client };\n        this.callbacks.execute(\"onInvoked\", method, invocationId, invocationArgs);\n    }\n}\n\nclass UserSubscription {\n    repository;\n    subscriptionData;\n    get requestArguments() {\n        return this.subscriptionData.params.arguments || {};\n    }\n    get servers() {\n        return this.subscriptionData.trackedServers.reduce((servers, pair) => {\n            if (pair.subscriptionId) {\n                const server = this.repository.getServerById(pair.serverId)?.instance;\n                if (server) {\n                    servers.push(server);\n                }\n            }\n            return servers;\n        }, []);\n    }\n    get serverInstance() {\n        return this.servers[0];\n    }\n    get stream() {\n        return this.subscriptionData.method;\n    }\n    constructor(repository, subscriptionData) {\n        this.repository = repository;\n        this.subscriptionData = subscriptionData;\n    }\n    onData(dataCallback) {\n        if (typeof dataCallback !== \"function\") {\n            throw new TypeError(\"The data callback must be a function.\");\n        }\n        this.subscriptionData.handlers.onData.push(dataCallback);\n        if (this.subscriptionData.handlers.onData.length === 1 && this.subscriptionData.queued.data.length > 0) {\n            this.subscriptionData.queued.data.forEach((dataItem) => {\n                dataCallback(dataItem);\n            });\n        }\n    }\n    onClosed(closedCallback) {\n        if (typeof closedCallback !== \"function\") {\n            throw new TypeError(\"The callback must be a function.\");\n        }\n        this.subscriptionData.handlers.onClosed.push(closedCallback);\n    }\n    onFailed(callback) {\n    }\n    onConnected(callback) {\n        if (typeof callback !== \"function\") {\n            throw new TypeError(\"The callback must be a function.\");\n        }\n        this.subscriptionData.handlers.onConnected.push(callback);\n    }\n    close() {\n        this.subscriptionData.close();\n    }\n    setNewSubscription(newSub) {\n        this.subscriptionData = newSub;\n    }\n}\n\nclass TimedCache {\n    config;\n    cache = [];\n    timeoutIds = [];\n    constructor(config) {\n        this.config = config;\n    }\n    add(element) {\n        const id = nanoid$1(10);\n        this.cache.push({ id, element });\n        const timeoutId = setTimeout(() => {\n            const elementIdx = this.cache.findIndex((entry) => entry.id === id);\n            if (elementIdx < 0) {\n                return;\n            }\n            this.cache.splice(elementIdx, 1);\n        }, this.config.ELEMENT_TTL_MS);\n        this.timeoutIds.push(timeoutId);\n    }\n    flush() {\n        const elements = this.cache.map((entry) => entry.element);\n        this.timeoutIds.forEach((id) => clearInterval(id));\n        this.cache = [];\n        this.timeoutIds = [];\n        return elements;\n    }\n}\n\nconst STATUS_AWAITING_ACCEPT = \"awaitingAccept\";\nconst STATUS_SUBSCRIBED = \"subscribed\";\nconst ERR_MSG_SUB_FAILED = \"Subscription failed.\";\nconst ERR_MSG_SUB_REJECTED = \"Subscription rejected.\";\nconst ON_CLOSE_MSG_SERVER_INIT = \"ServerInitiated\";\nconst ON_CLOSE_MSG_CLIENT_INIT = \"ClientInitiated\";\nclass ClientStreaming {\n    session;\n    repository;\n    logger;\n    subscriptionsList = {};\n    timedCache = new TimedCache({ ELEMENT_TTL_MS: 10000 });\n    subscriptionIdToLocalKeyMap = {};\n    nextSubLocalKey = 0;\n    constructor(session, repository, logger) {\n        this.session = session;\n        this.repository = repository;\n        this.logger = logger;\n        session.on(\"subscribed\", this.handleSubscribed);\n        session.on(\"event\", this.handleEventData);\n        session.on(\"subscription-cancelled\", this.handleSubscriptionCancelled);\n    }\n    subscribe(streamingMethod, params, targetServers, success, error, existingSub) {\n        if (targetServers.length === 0) {\n            error({\n                method: streamingMethod,\n                called_with: params.arguments,\n                message: ERR_MSG_SUB_FAILED + \" No available servers matched the target params.\",\n            });\n            return;\n        }\n        const subLocalKey = this.getNextSubscriptionLocalKey();\n        const pendingSub = this.registerSubscription(subLocalKey, streamingMethod, params, success, error, params.methodResponseTimeout || 10000, existingSub);\n        if (typeof pendingSub !== \"object\") {\n            error({\n                method: streamingMethod,\n                called_with: params.arguments,\n                message: ERR_MSG_SUB_FAILED + \" Unable to register the user callbacks.\",\n            });\n            return;\n        }\n        targetServers.forEach((target) => {\n            const serverId = target.server.id;\n            const method = target.methods.find((m) => m.name === streamingMethod.name);\n            if (!method) {\n                this.logger.error(`can not find method ${streamingMethod.name} for target ${target.server.id}`);\n                return;\n            }\n            pendingSub.trackedServers.push({\n                serverId,\n                subscriptionId: undefined,\n            });\n            const msg = {\n                type: \"subscribe\",\n                server_id: serverId,\n                method_id: method.gatewayId,\n                arguments_kv: params.arguments,\n            };\n            this.session.send(msg, { serverId, subLocalKey })\n                .then((m) => this.handleSubscribed(m))\n                .catch((err) => this.handleErrorSubscribing(err));\n        });\n    }\n    drainSubscriptions() {\n        const existing = Object.values(this.subscriptionsList);\n        this.subscriptionsList = {};\n        this.subscriptionIdToLocalKeyMap = {};\n        return existing;\n    }\n    drainSubscriptionsCache() {\n        return this.timedCache.flush();\n    }\n    getNextSubscriptionLocalKey() {\n        const current = this.nextSubLocalKey;\n        this.nextSubLocalKey += 1;\n        return current;\n    }\n    registerSubscription(subLocalKey, method, params, success, error, timeout, existingSub) {\n        const subsInfo = {\n            localKey: subLocalKey,\n            status: STATUS_AWAITING_ACCEPT,\n            method,\n            params,\n            success,\n            error,\n            trackedServers: [],\n            handlers: {\n                onData: existingSub?.handlers.onData || [],\n                onClosed: existingSub?.handlers.onClosed || [],\n                onConnected: existingSub?.handlers.onConnected || [],\n            },\n            queued: {\n                data: [],\n                closers: [],\n            },\n            timeoutId: undefined,\n            close: () => this.closeSubscription(subLocalKey),\n            subscription: existingSub?.subscription\n        };\n        if (!existingSub) {\n            if (params.onData) {\n                subsInfo.handlers.onData.push(params.onData);\n            }\n            if (params.onClosed) {\n                subsInfo.handlers.onClosed.push(params.onClosed);\n            }\n            if (params.onConnected) {\n                subsInfo.handlers.onConnected.push(params.onConnected);\n            }\n        }\n        this.subscriptionsList[subLocalKey] = subsInfo;\n        subsInfo.timeoutId = setTimeout(() => {\n            if (this.subscriptionsList[subLocalKey] === undefined) {\n                return;\n            }\n            const pendingSub = this.subscriptionsList[subLocalKey];\n            if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\n                error({\n                    method,\n                    called_with: params.arguments,\n                    message: ERR_MSG_SUB_FAILED + \" Subscription attempt timed out after \" + timeout + \" ms.\",\n                });\n                delete this.subscriptionsList[subLocalKey];\n            }\n            else if (pendingSub.status === STATUS_SUBSCRIBED && pendingSub.trackedServers.length > 0) {\n                pendingSub.trackedServers = pendingSub.trackedServers.filter((server) => {\n                    return (typeof server.subscriptionId !== \"undefined\");\n                });\n                delete pendingSub.timeoutId;\n                if (pendingSub.trackedServers.length <= 0) {\n                    this.callOnClosedHandlers(pendingSub);\n                    delete this.subscriptionsList[subLocalKey];\n                }\n            }\n        }, timeout);\n        return subsInfo;\n    }\n    handleErrorSubscribing = (errorResponse) => {\n        const tag = errorResponse._tag;\n        const subLocalKey = tag.subLocalKey;\n        const pendingSub = this.subscriptionsList[subLocalKey];\n        if (typeof pendingSub !== \"object\") {\n            return;\n        }\n        pendingSub.trackedServers = pendingSub.trackedServers.filter((server) => {\n            return server.serverId !== tag.serverId;\n        });\n        if (pendingSub.trackedServers.length <= 0) {\n            clearTimeout(pendingSub.timeoutId);\n            if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\n                const reason = (typeof errorResponse.reason === \"string\" && errorResponse.reason !== \"\") ?\n                    ' Publisher said \"' + errorResponse.reason + '\".' :\n                    \" No reason given.\";\n                const callArgs = typeof pendingSub.params.arguments === \"object\" ?\n                    JSON.stringify(pendingSub.params.arguments) :\n                    \"{}\";\n                pendingSub.error({\n                    message: ERR_MSG_SUB_REJECTED + reason + \" Called with:\" + callArgs,\n                    called_with: pendingSub.params.arguments,\n                    method: pendingSub.method,\n                });\n            }\n            else if (pendingSub.status === STATUS_SUBSCRIBED) {\n                this.callOnClosedHandlers(pendingSub);\n            }\n            delete this.subscriptionsList[subLocalKey];\n        }\n    };\n    handleSubscribed = (msg) => {\n        const subLocalKey = msg._tag.subLocalKey;\n        const pendingSub = this.subscriptionsList[subLocalKey];\n        if (typeof pendingSub !== \"object\") {\n            return;\n        }\n        const serverId = msg._tag.serverId;\n        const acceptingServer = pendingSub.trackedServers\n            .filter((server) => {\n            return server.serverId === serverId;\n        })[0];\n        if (typeof acceptingServer !== \"object\") {\n            return;\n        }\n        acceptingServer.subscriptionId = msg.subscription_id;\n        this.subscriptionIdToLocalKeyMap[msg.subscription_id] = subLocalKey;\n        const isFirstResponse = (pendingSub.status === STATUS_AWAITING_ACCEPT);\n        pendingSub.status = STATUS_SUBSCRIBED;\n        if (isFirstResponse) {\n            let reconnect = false;\n            let sub = pendingSub.subscription;\n            if (sub) {\n                sub.setNewSubscription(pendingSub);\n                pendingSub.success(sub);\n                reconnect = true;\n            }\n            else {\n                sub = new UserSubscription(this.repository, pendingSub);\n                pendingSub.subscription = sub;\n                pendingSub.success(sub);\n            }\n            for (const handler of pendingSub.handlers.onConnected) {\n                try {\n                    handler(sub.serverInstance, reconnect);\n                }\n                catch (e) {\n                }\n            }\n        }\n    };\n    handleEventData = (msg) => {\n        const subLocalKey = this.subscriptionIdToLocalKeyMap[msg.subscription_id];\n        if (typeof subLocalKey === \"undefined\") {\n            return;\n        }\n        const subscription = this.subscriptionsList[subLocalKey];\n        if (typeof subscription !== \"object\") {\n            return;\n        }\n        const trackedServersFound = subscription.trackedServers.filter((s) => {\n            return s.subscriptionId === msg.subscription_id;\n        });\n        if (trackedServersFound.length !== 1) {\n            return;\n        }\n        const isPrivateData = msg.oob;\n        const sendingServerId = trackedServersFound[0].serverId;\n        const server = this.repository.getServerById(sendingServerId);\n        const receivedStreamData = () => {\n            return {\n                data: msg.data,\n                server: server?.instance ?? {},\n                requestArguments: subscription.params.arguments,\n                message: undefined,\n                private: isPrivateData,\n            };\n        };\n        const onDataHandlers = subscription.handlers.onData;\n        const queuedData = subscription.queued.data;\n        if (onDataHandlers.length > 0) {\n            onDataHandlers.forEach((callback) => {\n                if (typeof callback === \"function\") {\n                    callback(receivedStreamData());\n                }\n            });\n        }\n        else {\n            queuedData.push(receivedStreamData());\n        }\n    };\n    handleSubscriptionCancelled = (msg) => {\n        const subLocalKey = this.subscriptionIdToLocalKeyMap[msg.subscription_id];\n        if (typeof subLocalKey === \"undefined\") {\n            return;\n        }\n        const subscription = this.subscriptionsList[subLocalKey];\n        if (typeof subscription !== \"object\") {\n            return;\n        }\n        const expectedNewLength = subscription.trackedServers.length - 1;\n        subscription.trackedServers = subscription.trackedServers.filter((server) => {\n            if (server.subscriptionId === msg.subscription_id) {\n                subscription.queued.closers.push(server.serverId);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n        if (subscription.trackedServers.length !== expectedNewLength) {\n            return;\n        }\n        if (subscription.trackedServers.length <= 0) {\n            this.timedCache.add(subscription);\n            clearTimeout(subscription.timeoutId);\n            this.callOnClosedHandlers(subscription);\n            delete this.subscriptionsList[subLocalKey];\n        }\n        delete this.subscriptionIdToLocalKeyMap[msg.subscription_id];\n    };\n    callOnClosedHandlers(subscription, reason) {\n        const closersCount = subscription.queued.closers.length;\n        const closingServerId = (closersCount > 0) ? subscription.queued.closers[closersCount - 1] : null;\n        let closingServer;\n        if (closingServerId !== undefined && typeof closingServerId === \"string\") {\n            closingServer = this.repository.getServerById(closingServerId)?.instance ?? {};\n        }\n        subscription.handlers.onClosed.forEach((callback) => {\n            if (typeof callback !== \"function\") {\n                return;\n            }\n            callback({\n                message: reason || ON_CLOSE_MSG_SERVER_INIT,\n                requestArguments: subscription.params.arguments || {},\n                server: closingServer,\n                stream: subscription.method,\n            });\n        });\n    }\n    closeSubscription(subLocalKey) {\n        const subscription = this.subscriptionsList[subLocalKey];\n        if (typeof subscription !== \"object\") {\n            return;\n        }\n        subscription.trackedServers.forEach((server) => {\n            if (typeof server.subscriptionId === \"undefined\") {\n                return;\n            }\n            subscription.queued.closers.push(server.serverId);\n            this.session.sendFireAndForget({\n                type: \"unsubscribe\",\n                subscription_id: server.subscriptionId,\n                reason_uri: \"\",\n                reason: ON_CLOSE_MSG_CLIENT_INIT,\n            });\n            delete this.subscriptionIdToLocalKeyMap[server.subscriptionId];\n        });\n        subscription.trackedServers = [];\n        this.callOnClosedHandlers(subscription, ON_CLOSE_MSG_CLIENT_INIT);\n        delete this.subscriptionsList[subLocalKey];\n    }\n}\n\nclass ClientProtocol {\n    session;\n    repository;\n    logger;\n    streaming;\n    constructor(session, repository, logger) {\n        this.session = session;\n        this.repository = repository;\n        this.logger = logger;\n        session.on(\"peer-added\", (msg) => this.handlePeerAdded(msg));\n        session.on(\"peer-removed\", (msg) => this.handlePeerRemoved(msg));\n        session.on(\"methods-added\", (msg) => this.handleMethodsAddedMessage(msg));\n        session.on(\"methods-removed\", (msg) => this.handleMethodsRemovedMessage(msg));\n        this.streaming = new ClientStreaming(session, repository, logger);\n    }\n    subscribe(stream, options, targetServers, success, error, existingSub) {\n        this.streaming.subscribe(stream, options, targetServers, success, error, existingSub);\n    }\n    invoke(id, method, args, target) {\n        const serverId = target.id;\n        const methodId = method.gatewayId;\n        const msg = {\n            type: \"call\",\n            server_id: serverId,\n            method_id: methodId,\n            arguments_kv: args,\n        };\n        return this.session.send(msg, { invocationId: id, serverId })\n            .then((m) => this.handleResultMessage(m))\n            .catch((err) => this.handleInvocationError(err));\n    }\n    drainSubscriptions() {\n        return this.streaming.drainSubscriptions();\n    }\n    drainSubscriptionsCache() {\n        return this.streaming.drainSubscriptionsCache();\n    }\n    handlePeerAdded(msg) {\n        const newPeerId = msg.new_peer_id;\n        const remoteId = msg.identity;\n        const isLocal = msg.meta ? msg.meta.local : true;\n        const pid = Number(remoteId.process);\n        const serverInfo = {\n            machine: remoteId.machine,\n            pid: isNaN(pid) ? remoteId.process : pid,\n            instance: remoteId.instance,\n            application: remoteId.application,\n            applicationName: remoteId.applicationName,\n            environment: remoteId.environment,\n            region: remoteId.region,\n            user: remoteId.user,\n            windowId: remoteId.windowId,\n            peerId: newPeerId,\n            api: remoteId.api,\n            isLocal\n        };\n        this.repository.addServer(serverInfo, newPeerId);\n    }\n    handlePeerRemoved(msg) {\n        const removedPeerId = msg.removed_id;\n        const reason = msg.reason;\n        this.repository.removeServerById(removedPeerId, reason);\n    }\n    handleMethodsAddedMessage(msg) {\n        const serverId = msg.server_id;\n        const methods = msg.methods;\n        methods.forEach((method) => {\n            this.repository.addServerMethod(serverId, method);\n        });\n    }\n    handleMethodsRemovedMessage(msg) {\n        const serverId = msg.server_id;\n        const methodIdList = msg.methods;\n        const server = this.repository.getServerById(serverId);\n        if (server) {\n            const serverMethodKeys = Object.keys(server.methods);\n            serverMethodKeys.forEach((methodKey) => {\n                const method = server.methods[methodKey];\n                if (methodIdList.indexOf(method.gatewayId) > -1) {\n                    this.repository.removeServerMethod(serverId, methodKey);\n                }\n            });\n        }\n    }\n    handleResultMessage(msg) {\n        const invocationId = msg._tag.invocationId;\n        const result = msg.result;\n        const serverId = msg._tag.serverId;\n        const server = this.repository.getServerById(serverId);\n        return {\n            invocationId,\n            result,\n            instance: server?.instance,\n            status: InvokeStatus.Success,\n            message: \"\"\n        };\n    }\n    handleInvocationError(msg) {\n        this.logger.debug(`handle invocation error ${JSON.stringify(msg)}`);\n        if (\"_tag\" in msg) {\n            const invocationId = msg._tag.invocationId;\n            const serverId = msg._tag.serverId;\n            const server = this.repository.getServerById(serverId);\n            const message = msg.reason;\n            const context = msg.context;\n            return {\n                invocationId,\n                result: context,\n                instance: server?.instance,\n                status: InvokeStatus.Error,\n                message\n            };\n        }\n        else {\n            return {\n                invocationId: \"\",\n                message: msg.message,\n                status: InvokeStatus.Error,\n                error: msg\n            };\n        }\n    }\n}\n\nfunction gW3ProtocolFactory (instance, connection, clientRepository, serverRepository, libConfig, interop) {\n    const logger = libConfig.logger.subLogger(\"gw3-protocol\");\n    let resolveReadyPromise;\n    const readyPromise = new Promise((resolve) => {\n        resolveReadyPromise = resolve;\n    });\n    const session = connection.domain(\"agm\", [\"subscribed\"]);\n    const server = new ServerProtocol(session, clientRepository, serverRepository, logger.subLogger(\"server\"));\n    const client = new ClientProtocol(session, clientRepository, logger.subLogger(\"client\"));\n    async function handleReconnect() {\n        logger.info(\"reconnected - will replay registered methods and subscriptions\");\n        client.drainSubscriptionsCache().forEach((sub) => {\n            const methodInfo = sub.method;\n            const params = Object.assign({}, sub.params);\n            logger.info(`trying to soft-re-subscribe to method ${methodInfo.name}, with params: ${JSON.stringify(params)}`);\n            interop.client.subscribe(methodInfo, params, undefined, undefined, sub).then(() => logger.info(`soft-subscribing to method ${methodInfo.name} DONE`)).catch((error) => logger.warn(`subscribing to method ${methodInfo.name} failed: ${JSON.stringify(error)}}`));\n        });\n        const reconnectionPromises = [];\n        const existingSubscriptions = client.drainSubscriptions();\n        for (const sub of existingSubscriptions) {\n            const methodInfo = sub.method;\n            const params = Object.assign({}, sub.params);\n            logger.info(`trying to re-subscribe to method ${methodInfo.name}, with params: ${JSON.stringify(params)}`);\n            reconnectionPromises.push(interop.client.subscribe(methodInfo, params, undefined, undefined, sub).then(() => logger.info(`subscribing to method ${methodInfo.name} DONE`)));\n        }\n        const registeredMethods = serverRepository.getList();\n        serverRepository.reset();\n        for (const method of registeredMethods) {\n            const def = method.definition;\n            if (method.stream) {\n                reconnectionPromises.push(interop.server.createStream(def, method.streamCallbacks, undefined, undefined, method.stream)\n                    .then(() => logger.info(`subscribing to method ${def.name} DONE`))\n                    .catch(() => logger.warn(`subscribing to method ${def.name} FAILED`)));\n            }\n            else if (method?.theFunction?.userCallback) {\n                reconnectionPromises.push(interop.register(def, method.theFunction.userCallback)\n                    .then(() => logger.info(`registering method ${def.name} DONE`))\n                    .catch(() => logger.warn(`registering method ${def.name} FAILED`)));\n            }\n            else if (method?.theFunction?.userCallbackAsync) {\n                reconnectionPromises.push(interop.registerAsync(def, method.theFunction.userCallbackAsync)\n                    .then(() => logger.info(`registering method ${def.name} DONE`))\n                    .catch(() => logger.warn(`registering method ${def.name} FAILED`)));\n            }\n        }\n        await Promise.all(reconnectionPromises);\n        logger.info(\"Interop is re-announced\");\n    }\n    function handleInitialJoin() {\n        if (resolveReadyPromise) {\n            resolveReadyPromise({\n                client,\n                server,\n            });\n            resolveReadyPromise = undefined;\n        }\n    }\n    session.onJoined((reconnect) => {\n        clientRepository.addServer(instance, connection.peerId);\n        if (reconnect) {\n            handleReconnect().then(() => connection.setLibReAnnounced({ name: \"interop\" })).catch((error) => logger.warn(`Error while re-announcing interop: ${JSON.stringify(error)}`));\n        }\n        else {\n            handleInitialJoin();\n        }\n    });\n    session.onLeft(() => {\n        clientRepository.reset();\n    });\n    session.join();\n    return readyPromise;\n}\n\nclass Interop {\n    instance;\n    readyPromise;\n    client;\n    server;\n    unwrappedInstance;\n    protocol;\n    clientRepository;\n    serverRepository;\n    constructor(configuration) {\n        if (typeof configuration === \"undefined\") {\n            throw new Error(\"configuration is required\");\n        }\n        if (typeof configuration.connection === \"undefined\") {\n            throw new Error(\"configuration.connections is required\");\n        }\n        const connection = configuration.connection;\n        if (typeof configuration.methodResponseTimeout !== \"number\") {\n            configuration.methodResponseTimeout = 30 * 1000;\n        }\n        if (typeof configuration.waitTimeoutMs !== \"number\") {\n            configuration.waitTimeoutMs = 30 * 1000;\n        }\n        this.unwrappedInstance = new InstanceWrapper(this, undefined, connection);\n        this.instance = this.unwrappedInstance.unwrap();\n        this.clientRepository = new ClientRepository(configuration.logger.subLogger(\"cRep\"), this);\n        this.serverRepository = new ServerRepository();\n        let protocolPromise;\n        if (connection.protocolVersion === 3) {\n            protocolPromise = gW3ProtocolFactory(this.instance, connection, this.clientRepository, this.serverRepository, configuration, this);\n        }\n        else {\n            throw new Error(`protocol ${connection.protocolVersion} not supported`);\n        }\n        this.readyPromise = protocolPromise.then((protocol) => {\n            this.protocol = protocol;\n            this.client = new Client(this.protocol, this.clientRepository, this.instance, configuration);\n            this.server = new Server(this.protocol, this.serverRepository);\n            return this;\n        });\n    }\n    ready() {\n        return this.readyPromise;\n    }\n    serverRemoved(callback) {\n        return this.client.serverRemoved(callback);\n    }\n    serverAdded(callback) {\n        return this.client.serverAdded(callback);\n    }\n    serverMethodRemoved(callback) {\n        return this.client.serverMethodRemoved(callback);\n    }\n    serverMethodAdded(callback) {\n        return this.client.serverMethodAdded(callback);\n    }\n    methodRemoved(callback) {\n        return this.client.methodRemoved(callback);\n    }\n    methodAdded(callback) {\n        return this.client.methodAdded(callback);\n    }\n    methodsForInstance(instance) {\n        return this.client.methodsForInstance(instance);\n    }\n    methods(methodFilter) {\n        return this.client.methods(methodFilter);\n    }\n    servers(methodFilter) {\n        return this.client.servers(methodFilter);\n    }\n    subscribe(method, options, successCallback, errorCallback) {\n        return this.client.subscribe(method, options, successCallback, errorCallback);\n    }\n    createStream(streamDef, callbacks, successCallback, errorCallback) {\n        return this.server.createStream(streamDef, callbacks, successCallback, errorCallback);\n    }\n    unregister(methodFilter) {\n        return this.server.unregister(methodFilter);\n    }\n    registerAsync(methodDefinition, callback) {\n        return this.server.registerAsync(methodDefinition, callback);\n    }\n    register(methodDefinition, callback) {\n        return this.server.register(methodDefinition, callback);\n    }\n    invoke(methodFilter, argumentObj, target, additionalOptions, success, error) {\n        return this.client.invoke(methodFilter, argumentObj, target, additionalOptions, success, error);\n    }\n    waitForMethod(name) {\n        const pw = new PromiseWrapper();\n        const unsubscribe = this.client.methodAdded((m) => {\n            if (m.name === name) {\n                unsubscribe();\n                pw.resolve(m);\n            }\n        });\n        return pw.promise;\n    }\n}\n\nconst successMessages = [\"subscribed\", \"success\"];\nclass MessageBus {\n    connection;\n    logger;\n    peerId;\n    session;\n    subscriptions;\n    readyPromise;\n    constructor(connection, logger) {\n        this.connection = connection;\n        this.logger = logger;\n        this.peerId = connection.peerId;\n        this.subscriptions = [];\n        this.session = connection.domain(\"bus\", successMessages);\n        this.readyPromise = this.session.join();\n        this.readyPromise.then(() => {\n            this.watchOnEvent();\n        });\n    }\n    ready() {\n        return this.readyPromise;\n    }\n    publish = (topic, data, options) => {\n        const { routingKey, target } = options || {};\n        const args = this.removeEmptyValues({\n            type: \"publish\",\n            topic,\n            data,\n            peer_id: this.peerId,\n            routing_key: routingKey,\n            target_identity: target\n        });\n        this.session.send(args);\n    };\n    subscribe = (topic, callback, options) => {\n        return new Promise((resolve, reject) => {\n            const { routingKey, target } = options || {};\n            const args = this.removeEmptyValues({\n                type: \"subscribe\",\n                topic,\n                peer_id: this.peerId,\n                routing_key: routingKey,\n                source: target\n            });\n            this.session.send(args)\n                .then((response) => {\n                const { subscription_id } = response;\n                this.subscriptions.push({ subscription_id, topic, callback, source: target });\n                resolve({\n                    unsubscribe: () => {\n                        this.session.send({ type: \"unsubscribe\", subscription_id, peer_id: this.peerId });\n                        this.subscriptions = this.subscriptions.filter((s) => s.subscription_id !== subscription_id);\n                        return Promise.resolve();\n                    }\n                });\n            })\n                .catch((error) => reject(error));\n        });\n    };\n    watchOnEvent = () => {\n        this.session.on(\"event\", (args) => {\n            const { data, subscription_id } = args;\n            const source = args[\"publisher-identity\"];\n            const subscription = this.subscriptions.find((s) => s.subscription_id === subscription_id);\n            if (subscription) {\n                if (!subscription.source) {\n                    subscription.callback(data, subscription.topic, source);\n                }\n                else {\n                    if (this.keysMatch(subscription.source, source)) {\n                        subscription.callback(data, subscription.topic, source);\n                    }\n                }\n            }\n        });\n    };\n    removeEmptyValues(obj) {\n        const cleaned = {};\n        Object.keys(obj).forEach((key) => {\n            if (obj[key] !== undefined && obj[key] !== null) {\n                cleaned[key] = obj[key];\n            }\n        });\n        return cleaned;\n    }\n    keysMatch(obj1, obj2) {\n        const keysObj1 = Object.keys(obj1);\n        let allMatch = true;\n        keysObj1.forEach((key) => {\n            if (obj1[key] !== obj2[key]) {\n                allMatch = false;\n            }\n        });\n        return allMatch;\n    }\n}\n\nconst IOConnectCoreFactory = (userConfig, ext) => {\n    const iodesktop = typeof window === \"object\" ? (window.iodesktop ?? window.glue42gd) : undefined;\n    const preloadPromise = typeof window === \"object\" ? (window.gdPreloadPromise ?? Promise.resolve()) : Promise.resolve();\n    const glueInitTimer = timer(\"glue\");\n    userConfig = userConfig || {};\n    ext = ext || {};\n    const internalConfig = prepareConfig$1(userConfig, ext, iodesktop);\n    let _connection;\n    let _interop;\n    let _logger;\n    let _metrics;\n    let _contexts;\n    let _bus;\n    let _allowTrace;\n    const libs = {};\n    function registerLib(name, inner, t) {\n        _allowTrace = _logger.canPublish(\"trace\");\n        if (_allowTrace) {\n            _logger.trace(`registering ${name} module`);\n        }\n        const done = () => {\n            inner.initTime = t.stop();\n            inner.initEndTime = t.endTime;\n            inner.marks = t.marks;\n            if (_allowTrace) {\n                _logger.trace(`${name} is ready - ${t.endTime - t.startTime}`);\n            }\n        };\n        inner.initStartTime = t.startTime;\n        if (inner.ready) {\n            inner.ready().then(() => {\n                done();\n            });\n        }\n        else {\n            done();\n        }\n        if (!Array.isArray(name)) {\n            name = [name];\n        }\n        name.forEach((n) => {\n            libs[n] = inner;\n            IOConnectCoreFactory[n] = inner;\n        });\n    }\n    function setupConnection() {\n        const initTimer = timer(\"connection\");\n        _connection = new Connection(internalConfig.connection, _logger.subLogger(\"connection\"));\n        let authPromise = Promise.resolve(internalConfig.auth);\n        if (internalConfig.connection && !internalConfig.auth) {\n            if (iodesktop) {\n                authPromise = iodesktop.getGWToken()\n                    .then((token) => {\n                    return {\n                        gatewayToken: token\n                    };\n                });\n            }\n            else if (typeof window !== \"undefined\" && window?.glue42electron) {\n                if (typeof window.glue42electron.gwToken === \"string\") {\n                    authPromise = Promise.resolve({\n                        gatewayToken: window.glue42electron.gwToken\n                    });\n                }\n            }\n            else {\n                authPromise = Promise.reject(\"You need to provide auth information\");\n            }\n        }\n        return authPromise\n            .then((authConfig) => {\n            initTimer.mark(\"auth-promise-resolved\");\n            let authRequest;\n            if (Object.prototype.toString.call(authConfig) === \"[object Object]\") {\n                authRequest = authConfig;\n            }\n            else {\n                throw new Error(\"Invalid auth object - \" + JSON.stringify(authConfig));\n            }\n            return _connection.login(authRequest);\n        })\n            .then(() => {\n            registerLib(\"connection\", _connection, initTimer);\n            return internalConfig;\n        })\n            .catch((e) => {\n            if (_connection) {\n                _connection.logout();\n            }\n            throw e;\n        });\n    }\n    function setupLogger() {\n        const initTimer = timer(\"logger\");\n        _logger = new Logger$1(`${internalConfig.connection.identity?.application}`, undefined, internalConfig.customLogger);\n        _logger.consoleLevel(internalConfig.logger.console);\n        _logger.publishLevel(internalConfig.logger.publish);\n        if (_logger.canPublish(\"debug\")) {\n            _logger.debug(\"initializing glue...\");\n        }\n        registerLib(\"logger\", _logger, initTimer);\n        return Promise.resolve(undefined);\n    }\n    function setupMetrics() {\n        const initTimer = timer(\"metrics\");\n        const config = internalConfig.metrics;\n        const metricsPublishingEnabledFunc = iodesktop?.getMetricsPublishingEnabled;\n        const identity = internalConfig.connection.identity;\n        const canUpdateMetric = metricsPublishingEnabledFunc ? metricsPublishingEnabledFunc : () => true;\n        const disableAutoAppSystem = (typeof config !== \"boolean\" && config.disableAutoAppSystem) ?? false;\n        _metrics = metrics({\n            connection: config ? _connection : undefined,\n            logger: _logger.subLogger(\"metrics\"),\n            canUpdateMetric,\n            system: \"Glue42\",\n            service: identity?.service ?? iodesktop?.applicationName ?? internalConfig.application,\n            instance: identity?.instance ?? identity?.windowId ?? nanoid$1(10),\n            disableAutoAppSystem,\n            pagePerformanceMetrics: typeof config !== \"boolean\" ? config?.pagePerformanceMetrics : undefined\n        });\n        registerLib(\"metrics\", _metrics, initTimer);\n        return Promise.resolve();\n    }\n    function setupInterop() {\n        const initTimer = timer(\"interop\");\n        const agmConfig = {\n            connection: _connection,\n            logger: _logger.subLogger(\"interop\"),\n        };\n        _interop = new Interop(agmConfig);\n        Logger$1.Interop = _interop;\n        registerLib([\"interop\", \"agm\"], _interop, initTimer);\n        return Promise.resolve();\n    }\n    function setupContexts() {\n        const hasActivities = (internalConfig.activities && _connection.protocolVersion === 3);\n        const needsContexts = internalConfig.contexts || hasActivities;\n        if (needsContexts) {\n            const initTimer = timer(\"contexts\");\n            _contexts = new ContextsModule({\n                connection: _connection,\n                logger: _logger.subLogger(\"contexts\"),\n                trackAllContexts: typeof internalConfig.contexts === \"object\" ? internalConfig.contexts.trackAllContexts : false,\n                reAnnounceKnownContexts: typeof internalConfig.contexts === \"object\" ? internalConfig.contexts.reAnnounceKnownContexts : false\n            });\n            registerLib(\"contexts\", _contexts, initTimer);\n            return _contexts;\n        }\n        else {\n            const replayer = _connection.replayer;\n            if (replayer) {\n                replayer.drain(ContextMessageReplaySpec.name);\n            }\n        }\n    }\n    async function setupBus() {\n        if (!internalConfig.bus) {\n            return Promise.resolve();\n        }\n        const initTimer = timer(\"bus\");\n        _bus = new MessageBus(_connection, _logger.subLogger(\"bus\"));\n        registerLib(\"bus\", _bus, initTimer);\n        return Promise.resolve();\n    }\n    function setupExternalLibs(externalLibs) {\n        try {\n            externalLibs.forEach((lib) => {\n                setupExternalLib(lib.name, lib.create);\n            });\n            return Promise.resolve();\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    function setupExternalLib(name, createCallback) {\n        const initTimer = timer(name);\n        const lib = createCallback(libs);\n        if (lib) {\n            registerLib(name, lib, initTimer);\n        }\n    }\n    function waitForLibs() {\n        const libsReadyPromises = Object.keys(libs).map((key) => {\n            const lib = libs[key];\n            return lib.ready ?\n                lib.ready() : Promise.resolve();\n        });\n        return Promise.all(libsReadyPromises);\n    }\n    function constructGlueObject() {\n        const feedbackFunc = (feedbackInfo) => {\n            if (!_interop) {\n                return;\n            }\n            _interop.invoke(\"T42.ACS.Feedback\", feedbackInfo, \"best\");\n        };\n        const info = {\n            coreVersion: version$1,\n            version: internalConfig.version\n        };\n        glueInitTimer.stop();\n        const glue = {\n            feedback: feedbackFunc,\n            info,\n            logger: _logger,\n            interop: _interop,\n            agm: _interop,\n            connection: _connection,\n            metrics: _metrics,\n            contexts: _contexts,\n            bus: _bus,\n            version: internalConfig.version,\n            userConfig,\n            done: () => {\n                _logger?.info(\"done called by user...\");\n                return _connection.logout();\n            }\n        };\n        glue.performance = {\n            get glueVer() {\n                return internalConfig.version;\n            },\n            get glueConfig() {\n                return JSON.stringify(userConfig);\n            },\n            get browser() {\n                return window.performance.timing.toJSON();\n            },\n            get memory() {\n                return window.performance.memory;\n            },\n            get initTimes() {\n                const all = getAllTimers();\n                return Object.keys(all).map((key) => {\n                    const t = all[key];\n                    return {\n                        name: key,\n                        duration: t.endTime - t.startTime,\n                        marks: t.marks,\n                        startTime: t.startTime,\n                        endTime: t.endTime\n                    };\n                });\n            }\n        };\n        Object.keys(libs).forEach((key) => {\n            const lib = libs[key];\n            glue[key] = lib;\n        });\n        glue.config = {};\n        Object.keys(internalConfig).forEach((k) => {\n            glue.config[k] = internalConfig[k];\n        });\n        if (ext && ext.extOptions) {\n            Object.keys(ext.extOptions).forEach((k) => {\n                glue.config[k] = ext?.extOptions[k];\n            });\n        }\n        if (ext?.enrichGlue) {\n            ext.enrichGlue(glue);\n        }\n        if (iodesktop && iodesktop.updatePerfData) {\n            iodesktop.updatePerfData(glue.performance);\n        }\n        if (glue.agm) {\n            const deprecatedDecorator = (fn, wrong, proper) => {\n                return function () {\n                    glue.logger.warn(`glue.js - 'glue.agm.${wrong}' method is deprecated, use 'glue.interop.${proper}' instead.`);\n                    return fn.apply(glue.agm, arguments);\n                };\n            };\n            const agmAny = glue.agm;\n            agmAny.method_added = deprecatedDecorator(glue.agm.methodAdded, \"method_added\", \"methodAdded\");\n            agmAny.method_removed = deprecatedDecorator(glue.agm.methodRemoved, \"method_removed\", \"methodRemoved\");\n            agmAny.server_added = deprecatedDecorator(glue.agm.serverAdded, \"server_added\", \"serverAdded\");\n            agmAny.server_method_aded = deprecatedDecorator(glue.agm.serverMethodAdded, \"server_method_aded\", \"serverMethodAdded\");\n            agmAny.server_method_removed = deprecatedDecorator(glue.agm.serverMethodRemoved, \"server_method_removed\", \"serverMethodRemoved\");\n        }\n        return glue;\n    }\n    async function registerInstanceIfNeeded() {\n        const RegisterInstanceMethodName = \"T42.ACS.RegisterInstance\";\n        if (Utils$1.isNode() && typeof process.env._GD_STARTING_CONTEXT_ === \"undefined\" && typeof userConfig?.application !== \"undefined\") {\n            const isMethodAvailable = _interop.methods({ name: RegisterInstanceMethodName }).length > 0;\n            if (isMethodAvailable) {\n                try {\n                    await _interop.invoke(RegisterInstanceMethodName, { appName: userConfig?.application, pid: process.pid });\n                }\n                catch (error) {\n                    const typedError = error;\n                    _logger.error(`Cannot register as an instance: ${JSON.stringify(typedError.message)}`);\n                }\n            }\n        }\n    }\n    return preloadPromise\n        .then(setupLogger)\n        .then(setupConnection)\n        .then(() => Promise.all([setupMetrics(), setupInterop(), setupContexts(), setupBus()]))\n        .then(() => _interop.readyPromise)\n        .then(() => registerInstanceIfNeeded())\n        .then(() => {\n        return setupExternalLibs(internalConfig.libs || []);\n    })\n        .then(waitForLibs)\n        .then(constructGlueObject)\n        .catch((err) => {\n        return Promise.reject({\n            err,\n            libs\n        });\n    });\n};\nif (typeof window !== \"undefined\") {\n    window.IOConnectCore = IOConnectCoreFactory;\n}\nIOConnectCoreFactory.version = version$1;\nIOConnectCoreFactory.default = IOConnectCoreFactory;\n\nclass ActivityEntity {\n    constructor(id) {\n        this._id = id;\n    }\n    get id() {\n        return this._id;\n    }\n    _update(other) {\n        if (other._id !== this._id) {\n            throw Error(\"Can not update from entity with different id.\");\n        }\n        this._updateCore(other);\n    }\n    _updateCore(other) {\n        return;\n    }\n    _beforeDelete(other) {\n        return;\n    }\n}\n\nfunction isNumber(arg) {\n    return typeof arg === \"number\";\n}\nfunction isString(arg) {\n    return typeof arg === \"string\";\n}\nfunction isObject(arg) {\n    return typeof arg === \"object\" && arg !== null;\n}\nfunction isArray(arg) {\n    if (Array.isArray) {\n        return Array.isArray(arg);\n    }\n    return toString.call(arg) === \"[object Array]\";\n}\nfunction isUndefined(arg) {\n    return typeof arg === \"undefined\";\n}\nfunction isUndefinedOrNull(arg) {\n    return arg === null || typeof arg === \"undefined\";\n}\nfunction isNullOrWhiteSpace(str) {\n    return (typeof str !== \"string\" || !str || str.length === 0 || /^\\s*$/.test(str));\n}\nfunction isBoolean(obj) {\n    return obj === true || obj === false || toString.call(obj) === \"[object Boolean]\";\n}\nfunction isFunction(arg) {\n    return !!(arg && arg.constructor && arg.call && arg.apply);\n}\nfunction some(array, predicate) {\n    for (let index = 0; index < array.length; index++) {\n        if (predicate(array[index], index)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction ifNotUndefined(what, doWithIt) {\n    if (typeof what !== \"undefined\") {\n        doWithIt(what);\n    }\n}\nfunction promisify$1(promise, successCallback, errorCallback) {\n    if (typeof successCallback !== \"function\" && typeof errorCallback !== \"function\") {\n        return promise;\n    }\n    if (typeof successCallback !== \"function\") {\n        successCallback = () => { return; };\n    }\n    else if (typeof errorCallback !== \"function\") {\n        errorCallback = () => { return; };\n    }\n    promise.then(successCallback, errorCallback);\n}\n\nclass ActivityType extends ActivityEntity {\n    constructor(name, ownerWindow, helperWindows, description) {\n        super(name);\n        this._name = name;\n        this._description = description;\n        this._ownerWindow = ownerWindow;\n        this._helperWindows = helperWindows || [];\n    }\n    get name() {\n        return this._name;\n    }\n    get description() {\n        return this._description;\n    }\n    get helperWindows() {\n        return this._helperWindows.map((hw) => this.covertToWindowDef(hw));\n    }\n    get ownerWindow() {\n        return this.covertToWindowDef(this._ownerWindow);\n    }\n    initiate(context, callback, configuration) {\n        return this._manager.initiate(this._name, context, callback, configuration);\n    }\n    _updateCore(other) {\n        super._updateCore(other);\n        ifNotUndefined(other._description, (x) => this._description = x);\n        ifNotUndefined(other._ownerWindow, (x) => this._ownerWindow = x);\n        ifNotUndefined(other._helperWindows, (x) => this._helperWindows = x);\n    }\n    covertToWindowDef(windowType) {\n        var _a, _b;\n        return {\n            type: (_a = windowType === null || windowType === void 0 ? void 0 : windowType.id) === null || _a === void 0 ? void 0 : _a.type,\n            name: (_b = windowType === null || windowType === void 0 ? void 0 : windowType.id) === null || _b === void 0 ? void 0 : _b.name\n        };\n    }\n}\n\nclass WindowType extends ActivityEntity {\n    constructor(name, appByWindowTypeGetter) {\n        super(name);\n        this._name = name;\n        this._appByWindowTypeGetter = appByWindowTypeGetter;\n    }\n    get name() {\n        return this._name;\n    }\n    get config() {\n        return this._appByWindowTypeGetter(this._name);\n    }\n    get windows() {\n        return this._manager.getWindows({ type: this._name });\n    }\n    create(activity, configuration) {\n        const definition = Object.assign({ type: this.name, name: this.name, isIndependent: false }, configuration);\n        return this._manager.createWindow(activity, definition);\n    }\n}\n\nclass EntityEvent {\n    constructor(entitiy, context) {\n        this.entity = entitiy;\n        this.context = context;\n    }\n}\nclass EntityEventContext {\n    constructor(eventType) {\n        this.type = eventType;\n    }\n}\nclass ActivityStatusChangeEventContext extends EntityEventContext {\n    constructor(newStatus, oldStatus) {\n        super(EntityEventType.StatusChange);\n        this.newStatus = newStatus;\n        this.oldStatus = oldStatus;\n    }\n}\nclass ActivityContextChangedEventContext extends EntityEventContext {\n    constructor(context, updated, removed) {\n        super(EntityEventType.ActivityContextChange);\n        this.context = typeof context === \"string\" ? JSON.parse(context) : context;\n        this.updated = updated;\n        this.removed = removed;\n    }\n}\nclass EntityEventType {\n}\nEntityEventType.Added = \"added\";\nEntityEventType.Removed = \"removed\";\nEntityEventType.Updated = \"updated\";\nEntityEventType.Closed = \"closed\";\nEntityEventType.StatusChange = \"statusChange\";\nEntityEventType.ActivityContextChange = \"activityContextUpdate\";\nEntityEventType.ActivityWindowEvent = \"activityWindowEvent\";\nEntityEventType.ActivityWindowJoinedActivity = \"joined\";\nEntityEventType.ActivityWindowLeftActivity = \"left\";\nclass ActivityState {\n}\nActivityState.Created = \"created\";\nActivityState.Started = \"started\";\nActivityState.Destroyed = \"destroyed\";\n\nclass ActivityAGM {\n    constructor(activity) {\n        this._activity = activity;\n    }\n    register(definition, handler) {\n        this._ensureHasAgm();\n        ActivityAGM.AGM.register(definition, handler);\n    }\n    servers() {\n        this._ensureHasAgm();\n        if (isUndefinedOrNull(this._activity)) {\n            return [];\n        }\n        return this._activity.windows.map((w) => {\n            return w.instance;\n        });\n    }\n    methods() {\n        this._ensureHasAgm();\n        if (isUndefinedOrNull(this._activity)) {\n            return [];\n        }\n        const windows = this._activity.windows;\n        const methodNames = [];\n        const methods = [];\n        windows.forEach((window) => {\n            const windowMethods = this.methodsForWindow(window);\n            windowMethods.forEach((currentWindowMethod) => {\n                if (methodNames.indexOf(currentWindowMethod.name) === -1) {\n                    methodNames.push(currentWindowMethod.name);\n                    methods.push(currentWindowMethod);\n                }\n            });\n        });\n        return methods;\n    }\n    methodsForWindow(window) {\n        this._ensureHasAgm();\n        if (!window.instance) {\n            return [];\n        }\n        return ActivityAGM.AGM.methodsForInstance(window.instance);\n    }\n    invoke(methodName, arg, target, options, success, error) {\n        this._ensureHasAgm();\n        const activityServers = this.servers();\n        if (isUndefinedOrNull(target)) {\n            target = \"activity.all\";\n        }\n        if (isString(target)) {\n            if (target === \"activity.all\") ;\n            else if (target === \"activity.best\") {\n                const potentialTargets = activityServers.filter((server) => {\n                    const methods = ActivityAGM.AGM.methodsForInstance(server);\n                    return methods.filter((m) => {\n                        return m.name === methodName;\n                    }).length > 0;\n                });\n                if (potentialTargets.length > 0) {\n                    [potentialTargets[0]];\n                }\n            }\n            else if (target === \"all\" || target === \"best\") {\n                return promisify$1(ActivityAGM.AGM.invoke(methodName, arg, target, options), success, error);\n            }\n            else {\n                throw new Error(\"Invalid invoke target \" + target);\n            }\n        }\n        else if (isArray(target)) {\n            if (target.length >= 0) {\n                const firstElem = target[0];\n                if (this._isInstance(firstElem)) {\n                    target.map((instance) => instance);\n                }\n                else if (this._isActivityWindow(firstElem)) {\n                    target.map((win) => win.instance);\n                }\n                else {\n                    throw new Error(\"Unknown target object\");\n                }\n            }\n        }\n        else {\n            if (this._isInstance(target)) ;\n            else if (this._isActivityWindow(target)) {\n                [target.instance];\n            }\n            else {\n                throw new Error(\"Unknown target object\");\n            }\n        }\n        throw new Error(\"Not implemented\");\n    }\n    unregister(definition) {\n        this._ensureHasAgm();\n        return ActivityAGM.AGM.unregister(definition);\n    }\n    createStream(methodDefinition, subscriptionAddedHandler, subscriptionRemovedHandler) {\n        this._ensureHasAgm();\n        ActivityAGM.AGM.createStream(methodDefinition, {\n            subscriptionAddedHandler,\n            subscriptionRemovedHandler,\n            subscriptionRequestHandler: undefined\n        });\n    }\n    subscribe(methodDefinition, parameters, target) {\n        this._ensureHasAgm();\n        return ActivityAGM.AGM.subscribe(methodDefinition, parameters);\n    }\n    _ensureHasAgm() {\n        if (isUndefinedOrNull(ActivityAGM.AGM)) {\n            throw new Error(\"Agm should be configured to be used in activity\");\n        }\n    }\n    _isInstance(obj) {\n        return obj.application !== undefined;\n    }\n    _isActivityWindow(obj) {\n        return obj.instance !== undefined;\n    }\n}\n\nclass AttachedActivityDescriptor {\n    constructor(manager, ownerActivityId, state) {\n        this._manager = manager;\n        this._ownerActivityId = ownerActivityId;\n        this._state = state;\n    }\n    get ownerId() {\n        return this._state.ownerId;\n    }\n    get windowIds() {\n        return this._state.windowIds;\n    }\n    get frameColor() {\n        return this._state.frameColor;\n    }\n    get context() {\n        return this._state.context;\n    }\n    get tag() {\n        return this._state.tag;\n    }\n    detach(descriptor) {\n        descriptor = descriptor || {};\n        const merged = {};\n        Object.keys(this._state).forEach((prop) => {\n            merged[prop] = this._state[prop];\n        });\n        merged.context = descriptor.context || merged.context;\n        merged.frameColor = descriptor.frameColor || merged.frameColor;\n        return this._manager.detachActivities(this._ownerActivityId, merged);\n    }\n}\n\nconst nextTick = (cb) => {\n    setTimeout(cb, 0);\n};\nfunction nodeify(promise, callback) {\n    if (!isFunction(callback)) {\n        return promise;\n    }\n    promise.then((resp) => {\n        nextTick(() => {\n            callback(null, resp);\n        });\n    }, (err) => {\n        nextTick(() => {\n            callback(err, null);\n        });\n    });\n}\n\nclass Activity extends ActivityEntity {\n    constructor(id, actType, status, context, ownerId) {\n        super(id);\n        this._id = id;\n        this._actType = actType;\n        this._status = status;\n        this._context = context;\n        this._ownerId = ownerId;\n        this._agm = new ActivityAGM(this);\n    }\n    get type() {\n        if (this._manager) {\n            return this._manager.getActivityType(this._actType);\n        }\n        return undefined;\n    }\n    get context() {\n        return this._context;\n    }\n    get status() {\n        return this._status;\n    }\n    get owner() {\n        if (!this._ownerId) {\n            return null;\n        }\n        return this._manager.getWindows({ id: this._ownerId })[0];\n    }\n    get windows() {\n        return this._manager.getWindows({ activityId: this._id });\n    }\n    get agm() {\n        return this._agm;\n    }\n    addWindow(window, callback) {\n        return this._manager.addWindowToActivity(this, window, callback);\n    }\n    createWindow(windowType, callback) {\n        return this._manager.createWindow(this, windowType, callback);\n    }\n    createStackedWindows(windowTypes, timeout, callback) {\n        return this._manager.createStackedWindows(this, windowTypes, timeout, callback);\n    }\n    leave(window, callback) {\n        return this._manager.leaveWindowFromActivity(this, window, callback);\n    }\n    getWindowsByType(windowType) {\n        const filter = { activityId: this._id, type: windowType };\n        return this._manager.getWindows(filter);\n    }\n    setContext(context, callback) {\n        return this._manager.setActivityContext(this, context, callback);\n    }\n    updateContext(context, callback) {\n        return this._manager.updateActivityContext(this, context, callback);\n    }\n    onStatusChange(handler) {\n        return this._manager.subscribeActivityEvents((a, ns, os) => {\n            if (a.id === this.id) {\n                handler(a, ns, os);\n            }\n        });\n    }\n    onWindowEvent(handler) {\n        return this._manager.subscribeWindowEvents((a, w, e) => {\n            if (a.id === this.id) {\n                handler(a, w, e);\n            }\n        });\n    }\n    onContextChanged(handler) {\n        this._manager.subscribeActivityContextChanged((act, context, updated, removed) => {\n            if (act.id === this.id) {\n                handler(context, updated, removed, act);\n            }\n        });\n        try {\n            handler(this.context, this.context, [], this);\n        }\n        catch (e) {\n            return;\n        }\n    }\n    stop() {\n        this._manager.stopActivity(this);\n    }\n    clone(options) {\n        return this._manager.clone(this, options);\n    }\n    attach(activity, tag) {\n        let activityId;\n        if (typeof activity === \"string\") {\n            activityId = activity;\n        }\n        else {\n            activityId = activity.id;\n        }\n        return this._manager.attachActivities(activityId, this.id, tag);\n    }\n    onActivityAttached(callback) {\n        this._manager.subscribeActivitiesAttached((newActId, oldActId, descriptor) => {\n            if (newActId !== this._id) {\n                return;\n            }\n            callback(descriptor);\n        });\n    }\n    onDetached(callback) {\n        this._manager.subscribeActivitiesDetached((newAct, originalActivity, state) => {\n            if (originalActivity.id !== this._id) {\n                return;\n            }\n            callback(newAct, state);\n        });\n    }\n    _updateCore(other) {\n        super._updateCore(other);\n        ifNotUndefined(other._actType, (x) => this._actType = x);\n        ifNotUndefined(other._context, (x) => this._context = x);\n        ifNotUndefined(other._ownerId, (x) => this._ownerId = x);\n        if (other._status && (!this._status || (this._status.state !== other._status.state))) {\n            this._status = other._status;\n        }\n    }\n    _updateDescriptors(allStates) {\n        this._attached = allStates.map((s) => {\n            return new AttachedActivityDescriptor(this._manager, this._id, s);\n        });\n    }\n    get attached() {\n        return this._attached;\n    }\n    setFrameColor(color, callback) {\n        const promise = new Promise((resolve, reject) => {\n            let callbacksToWait = this.windows.length;\n            if (callbacksToWait === 0) {\n                resolve(this);\n            }\n            this.windows.forEach((w) => {\n                w.underlyingWindow.setFrameColor(color, () => {\n                    callbacksToWait--;\n                    if (callbacksToWait <= 0) {\n                        resolve(this);\n                    }\n                });\n            });\n            setTimeout(() => {\n                if (callbacksToWait > 0) {\n                    reject(this.id + \" - timed out waiting for setFrameColor with\" + color);\n                }\n            }, 5000);\n        });\n        return nodeify(promise, callback);\n    }\n    getFrameColor() {\n        if (!this.windows || this.windows.length === 0) {\n            return \"\";\n        }\n        return this.windows[0].underlyingWindow.frameColor;\n    }\n}\n\nclass LogLevel {\n}\nLogLevel.Trace = \"trace\";\nLogLevel.Debug = \"debug\";\nLogLevel.Info = \"info\";\nLogLevel.Warn = \"warn\";\nLogLevel.Error = \"error\";\nclass Logger {\n    static GetNamed(name) {\n        return new Logger(name);\n    }\n    static Get(owner) {\n        return new Logger(Logger.GetTypeName(owner));\n    }\n    constructor(name) {\n        this._name = name;\n        if (!isUndefinedOrNull(Logger.GlueLogger)) {\n            this._glueLogger = Logger.GlueLogger.subLogger(name);\n        }\n    }\n    trace(message) {\n        if (!isUndefinedOrNull(this._glueLogger)) {\n            this._glueLogger.trace(message);\n        }\n        else {\n            if (Logger.Level === LogLevel.Trace) {\n                console.info(this._getMessage(message, LogLevel.Trace));\n            }\n        }\n    }\n    debug(message) {\n        if (!isUndefinedOrNull(this._glueLogger)) {\n            this._glueLogger.debug(message);\n        }\n        else {\n            if (Logger.Level === LogLevel.Debug ||\n                Logger.Level === LogLevel.Trace) {\n                console.info(this._getMessage(message, LogLevel.Debug));\n            }\n        }\n    }\n    info(message) {\n        if (!isUndefinedOrNull(this._glueLogger)) {\n            this._glueLogger.info(message);\n        }\n        else {\n            if (Logger.Level === LogLevel.Debug ||\n                Logger.Level === LogLevel.Trace ||\n                Logger.Level === LogLevel.Info) {\n                console.info(this._getMessage(message, LogLevel.Info));\n            }\n        }\n    }\n    warn(message) {\n        if (!isUndefinedOrNull(this._glueLogger)) {\n            this._glueLogger.warn(message);\n        }\n        else {\n            if (Logger.Level === LogLevel.Debug ||\n                Logger.Level === LogLevel.Trace ||\n                Logger.Level === LogLevel.Info ||\n                Logger.Level === LogLevel.Warn) {\n                console.info(this._getMessage(message, LogLevel.Info));\n            }\n        }\n    }\n    error(message) {\n        if (!isUndefinedOrNull(this._glueLogger)) {\n            this._glueLogger.error(message);\n        }\n        else {\n            console.error(this._getMessage(message, LogLevel.Error));\n            console.trace();\n        }\n    }\n    _getMessage(message, level) {\n        return \"[\" + level + \"] \" + this._name + \" - \" + message;\n    }\n    static GetTypeName(object) {\n        const funcNameRegex = /function (.{1,})\\(/;\n        const results = (funcNameRegex).exec(object.constructor.toString());\n        return (results && results.length > 1) ? results[1] : \"\";\n    }\n}\nLogger.Level = LogLevel.Info;\n\nclass ActivityWindow extends ActivityEntity {\n    constructor(id, name, type, activityId, instance, isIndependent, windowGetter, hcWindowId) {\n        super(id);\n        this._logger = Logger.Get(\"window\");\n        this._type = type;\n        this._activityId = activityId;\n        this._name = name;\n        this._instance = instance;\n        this._isIndependent = isIndependent;\n        this._windowGetter = windowGetter;\n        this._hcWindowId = hcWindowId;\n    }\n    getBounds() {\n        return this._manager.getWindowBounds(this.id);\n    }\n    get name() {\n        return this._name;\n    }\n    get isIndependent() {\n        return this._isIndependent;\n    }\n    get type() {\n        if (this._manager) {\n            return this._manager.getWindowType(this._type);\n        }\n        return undefined;\n    }\n    get activity() {\n        if (isUndefined(this._activityId)) {\n            return undefined;\n        }\n        return this._manager.getActivityById(this._activityId);\n    }\n    get isOwner() {\n        const act = this.activity;\n        if (isUndefined(act)) {\n            return false;\n        }\n        return act.owner.id === this.id;\n    }\n    setVisible(isVisible, callback) {\n        return this._manager.setWindowVisibility(this.id, isVisible);\n    }\n    activate(focus) {\n        return this._manager.activateWindow(this.id, focus);\n    }\n    setBounds(bounds, callback) {\n        return this._manager.setWindowBounds(this.id, bounds, callback);\n    }\n    close() {\n        return this._manager.closeWindow(this.id);\n    }\n    get instance() {\n        return this._instance;\n    }\n    get underlyingWindow() {\n        const window = this._windowGetter();\n        if (!window) {\n            return {\n                id: this._hcWindowId\n            };\n        }\n        return window;\n    }\n    onActivityJoined(callback) {\n        this._subscribeForActivityWindowEvent(EntityEventType.ActivityWindowJoinedActivity, callback);\n    }\n    onActivityRemoved(callback) {\n        this._subscribeForActivityWindowEvent(EntityEventType.ActivityWindowLeftActivity, callback);\n    }\n    _updateCore(other) {\n        ifNotUndefined(other._activityId, (x) => this._activityId = x);\n        ifNotUndefined(other._isIndependent, (x) => this._isIndependent = x);\n        ifNotUndefined(other._hcWindowId, (x) => this._hcWindowId = x);\n        ifNotUndefined(other._type, (x) => this._type = x);\n        ifNotUndefined(other._name, (x) => this._name = x);\n        if (!isUndefinedOrNull(other._instance)) {\n            this._instance = other._instance;\n        }\n    }\n    _subscribeForActivityWindowEvent(eventName, callback) {\n        this._manager.subscribeWindowEvents((activity, window, event) => {\n            if (window.id !== this.id) {\n                return;\n            }\n            if (event === eventName) {\n                callback(activity);\n            }\n        });\n    }\n    _beforeDelete(other) {\n        this._hcWindowId = other._hcWindowId;\n    }\n}\n\nclass ActivityStatus {\n    constructor(state, message, time) {\n        this.state = state;\n        this.message = message;\n        this.time = time;\n    }\n    getState() {\n        return this.state;\n    }\n    getMessage() {\n        return this.message;\n    }\n    getTime() {\n        return this.time;\n    }\n}\n\nconst gwMmessageError = \"error\";\nconst gwMessageAddActivityTypes = \"add-types\";\nconst gwMmessageActivityTypesAdded = \"types-added\";\nconst gwMessageRemoveActivityTypes = \"remove-types\";\nconst gwMessageActivityTypesRemoved = \"types-removed\";\nconst gwMessageActivityCreated = \"created\";\nconst gwMessageActivityDestroyed = \"destroyed\";\nconst gwMessageActivityInitiated = \"initiated\";\nconst gwMmessageJoinActivity = \"join-activity\";\nconst gwMessageJoinedActivity = \"joined\";\nconst gwMessageActivityJoined = \"activity-joined\";\nconst gwMessageLeaveActivity = \"leave-activity\";\nconst gwMessageActivityLeft = \"left\";\nconst gwNmessageMergeActivities = \"merge\";\nconst gwMessageSplitActivities = \"split\";\nconst gwMessageOwnerChanged = \"owner-changed\";\nconst gwMessageAddPeerFactories = \"add-peer-factories\";\nconst gwMessagePeerFactoriesAdded = \"peer-factories-added\";\nconst gwMessageRemovePeerFactories = \"remove-peer-factories\";\nconst gwMessagePeerFactoriesRemoved = \"peer-factories-removed\";\nconst gwMessageCreateActivity = \"create\";\nconst gwMessageCreatePeer = \"create-peer\";\nconst gwMessagePeerRequested = \"peer-requested\";\nconst gwMessageReady = \"ready\";\nconst gwMessagePeerCreated = \"peer-created\";\nconst gwMessageDestroyActivity = \"destroy\";\nconst gwMessageDisposePeer = \"dispose-peer\";\nconst gwMessageDestroyPeer = \"destroy-peer\";\nclass GW3Bridge {\n    static activityTypeGwMessageEntityToActivityType(entity, description) {\n        const nameToWindowType = (windowName) => new WindowType(windowName, undefined);\n        return new ActivityType(entity.name, entity.owner_type && nameToWindowType(entity.owner_type), entity.helper_types && entity.helper_types.map(nameToWindowType), description);\n    }\n    static peerFactoryGwMessageEntityToWindowType(entity) {\n        return new WindowType(entity.peer_type, (_) => undefined);\n    }\n    static activityGwMessageToActivity(msg, status) {\n        const ownerId = msg.owner !== undefined ? msg.owner.peer_id : msg.owner_id;\n        return new Activity(msg.activity_id, msg.activity_type, status, msg.context_snapshot, ownerId);\n    }\n    static activityToActivityStatusChangeEvent(act) {\n        return new EntityEvent(act, new ActivityStatusChangeEventContext(act.status, undefined));\n    }\n    constructor(config) {\n        this._activityChangeCallbacks = [];\n        this._activityTypeStatusChangeCallbacks = [];\n        this._activityWindowChangeCallbacks = [];\n        this._windowTypeStatusChangeCallbacks = [];\n        this._peerIdAndFactoryIdToPeerType = {};\n        this._peerFactoriesRegisteredByUs = {};\n        this._gw3Subscriptions = [];\n        this._contextSubscriptions = {};\n        this._activityTypesInitiatedFromMe = {};\n        this._config = config;\n        this._connection = config.connection;\n        this._logger = config.logger;\n        this._contexts = config.contexts;\n        this._windows = config.windows;\n        this._sessionJoinedPromise = new Promise((resolve) => {\n            this._sessionJoinedPromiseResolve = resolve;\n        });\n        this._activityJoinedPromise = new Promise((resolve) => {\n            this._activityJoinedPromiseResolve = resolve;\n        });\n        if (!this._config.activityId) {\n            this._activityJoinedPromiseResolve({});\n        }\n        this._gw3Session = this._connection.domain(\"activity\", [\"joined\", \"initiated\", \"peer-created\", \"token\"]);\n        if (typeof window !== \"undefined\") {\n            const glue42gd = (window).glue42gd;\n            if (glue42gd && glue42gd.activityInfo) {\n                if (typeof glue42gd.addRefreshHandler === \"function\") {\n                    glue42gd.addRefreshHandler((success, error) => {\n                        this._gw3Session\n                            .send({\n                            type: \"reload\"\n                        })\n                            .then((msg) => {\n                            if (!msg.token) {\n                                error(\"Expected gateway token for refreshing.\");\n                                return;\n                            }\n                            try {\n                                glue42gd.setGWToken(msg.token);\n                            }\n                            catch (e) {\n                                error(e.message || e);\n                                return;\n                            }\n                            success();\n                        }, error);\n                    });\n                }\n                if (glue42gd && typeof glue42gd.addWillNavigateHandler === \"function\") {\n                    glue42gd.addWillNavigateHandler((success, error) => {\n                        this._gw3Session\n                            .send({\n                            type: \"reload\"\n                        })\n                            .then((msg) => {\n                            if (!msg.token) {\n                                error(\"Expected gateway token for refreshing.\");\n                                return;\n                            }\n                            try {\n                                glue42gd.setGWToken(msg.token);\n                            }\n                            catch (e) {\n                                error(e.message || e);\n                                return;\n                            }\n                            success();\n                        }, error);\n                    });\n                }\n            }\n        }\n    }\n    get bridgeType() {\n        return \"GW3\";\n    }\n    init() {\n        this.forwardActivityTypeMessagesToStatusEventHandlers();\n        this.subscribe(gwMessageActivityCreated, this.handleActivityCreatedMessage);\n        this.subscribe(gwMessageActivityDestroyed, this.handleActivityDestroyedMessage);\n        this.forwardActivityMessagesToStatusEventHandlers();\n        this.forwardActivityCreatedAndJoinedActivityToActivityWindowEventHandlers();\n        this.forwardPeerFactoryMessagesToStatusEventHandlers();\n        this.forwardPeerFactoryMessagesToPeerFactoryRequests();\n        this.subscribe(gwMessagePeerFactoriesAdded, this.handlePeerFactoriesAdded);\n        this.subscribe(gwMessagePeerFactoriesRemoved, this.handlePeerFactoriesRemoved);\n        this.forwardActivityWindowMessagesToEventHandlers();\n        this.subscribe(gwMessageDisposePeer, () => {\n            if (this._config.disposeRequestHandling === \"dispose\") {\n                this.dispose();\n                return;\n            }\n            if (this._config.disposeRequestHandling === \"exit\") {\n                if (this._windows && typeof this._windows.my() !== \"undefined\") {\n                    this._windows.my().close();\n                    return;\n                }\n                if (typeof window !== \"undefined\" && typeof (window).close === \"function\") {\n                    window.close();\n                    return;\n                }\n                if (typeof process !== \"undefined\" && typeof (process).exit === \"function\") {\n                    process.exit();\n                    return;\n                }\n            }\n        });\n        this._gw3Session.onJoined(() => {\n            if (this._config.mode === \"trackMyOnly\" ||\n                this._config.mode === \"trackMyTypeAndInitiatedFromMe\") {\n                this._sessionJoinedPromiseResolve(this);\n            }\n            else {\n                this._gw3Session\n                    .send({\n                    type: \"subscribe\",\n                    activity_types: (this._config.mode === \"trackAll\" ? [] :\n                        this._config.mode === \"trackTypes\" ? this._config.typesToTrack : [])\n                })\n                    .then(() => {\n                    this._sessionJoinedPromiseResolve(this);\n                });\n            }\n        });\n        this._gw3Session.join();\n    }\n    dispose() {\n        this._gw3Subscriptions.forEach((sub) => sub && this._connection.off(sub));\n        this._gw3Subscriptions.length = 0;\n    }\n    ready() {\n        return Promise.all([this._sessionJoinedPromise, this._activityJoinedPromise]);\n    }\n    initReady() {\n        return this._sessionJoinedPromise;\n    }\n    onActivityTypeStatusChange(callback) {\n        this._activityTypeStatusChangeCallbacks.push(callback);\n    }\n    registerActivityType(activityTypeName, ownerWindow, helperWindows, config, description) {\n        const entity = {};\n        entity.name = activityTypeName;\n        const toActivityPeerConfig = (windowDefinition) => ({ type: windowDefinition.type, name: windowDefinition.name, configuration: windowDefinition });\n        entity.owner_type = toActivityPeerConfig(ownerWindow);\n        entity.helper_types = helperWindows.map(toActivityPeerConfig);\n        return this._gw3Session\n            .send({\n            type: gwMessageAddActivityTypes,\n            types: [entity]\n        })\n            .then(() => {\n            const activityType = GW3Bridge.activityTypeGwMessageEntityToActivityType(entity, description);\n            this.invokeCallbacks(this._activityTypeStatusChangeCallbacks, new EntityEvent(activityType, new EntityEventContext(EntityEventType.Added)), gwMessageAddActivityTypes);\n            return activityType;\n        });\n    }\n    unregisterActivityType(activityTypeName) {\n        return this._gw3Session\n            .send({\n            type: gwMessageRemoveActivityTypes,\n            types: [activityTypeName]\n        })\n            .then(() => {\n            const activityType = new ActivityType(activityTypeName, undefined, undefined, undefined);\n            this.invokeCallbacks(this._activityTypeStatusChangeCallbacks, new EntityEvent(activityType, new EntityEventContext(EntityEventType.Removed)), gwMessageAddActivityTypes);\n        });\n    }\n    onWindowTypeStatusChange(callback) {\n        this._windowTypeStatusChangeCallbacks.push(callback);\n    }\n    registerWindowFactory(windowType, factory, parameters) {\n        if (this._peerFactoriesRegisteredByUs[windowType]) {\n            return Promise.reject(new Error(`Factory for windowType ${windowType} already registered.`));\n        }\n        this._peerFactoriesRegisteredByUs[windowType] = factory;\n        const entity = {\n            id: windowType,\n            peer_type: windowType,\n            configuration: parameters\n        };\n        return this._gw3Session.send({\n            type: gwMessageAddPeerFactories,\n            factories: [entity]\n        })\n            .then(() => {\n            this.invokeCallbacks(this._windowTypeStatusChangeCallbacks, new EntityEvent(GW3Bridge.peerFactoryGwMessageEntityToWindowType(entity), new EntityEventContext(EntityEventType.Added)), gwMessageAddPeerFactories);\n        })\n            .catch(() => {\n            delete this._peerFactoriesRegisteredByUs[windowType];\n        });\n    }\n    unregisterWindowFactory(windowType) {\n        const factory = this._peerFactoriesRegisteredByUs[windowType];\n        if (!factory) {\n            return Promise.reject(new Error(`Factory for windowType ${windowType} not registered.`));\n        }\n        delete this._peerFactoriesRegisteredByUs[windowType];\n        return this._gw3Session.send({\n            type: gwMessageRemovePeerFactories,\n            factory_ids: [windowType]\n        }).then(() => {\n            this.invokeCallbacks(this._windowTypeStatusChangeCallbacks, new EntityEvent(new WindowType(windowType, undefined), new EntityEventContext(EntityEventType.Removed)), gwMessageAddPeerFactories);\n        });\n    }\n    onActivityStatusChange(callback) {\n        this._activityChangeCallbacks.push(callback);\n    }\n    initiateActivity(activityType, context, configuration) {\n        const initiateMsg = {\n            type: gwMessageCreateActivity,\n            activity_type: activityType,\n            initial_context: context,\n        };\n        if (this.isOverrideTypeDefinition(configuration)) {\n            initiateMsg.types_override = {\n                owner_type: { type: configuration.owner.type, name: configuration.owner.name, configuration: configuration.owner },\n                helper_types: configuration.helpers && configuration.helpers.map((wd) => ({ type: wd.type, name: wd.name, configuration: wd }))\n            };\n        }\n        else {\n            initiateMsg.configuration = configuration && configuration.map((wd) => ({ type: wd.type, name: wd.name, configuration: wd }));\n        }\n        return this.sendCreateAndMapResultingMessagesToPromise(initiateMsg, gwMessageActivityInitiated, (msg, requestId) => msg.request_id === requestId, gwMessageActivityCreated, (msg, requestId, initMsg) => msg.activity_id === initMsg.activity_id, gwMessageActivityDestroyed, (msg, requestId, initMsg) => msg.activity_id === initMsg.activity_id, (msg) => msg.activity_id, null).then((id) => {\n            if (this._config.mode === \"trackMyTypeAndInitiatedFromMe\") {\n                if (!this._activityTypesInitiatedFromMe[activityType]) {\n                    this._activityTypesInitiatedFromMe[activityType] = true;\n                    return this._gw3Session\n                        .send({\n                        type: \"subscribe\",\n                        activity_types: [activityType]\n                    })\n                        .then(() => {\n                        return id;\n                    });\n                }\n            }\n            return id;\n        });\n    }\n    stopActivity(activity) {\n        return this._gw3Session.send({\n            type: gwMessageDestroyActivity,\n            activity_id: activity.id,\n            reason_uri: \"com.tick42.glue.activity.constants.destroyReason.general\",\n            reason: \"Destroying activity\"\n        }).then((_) => true);\n    }\n    updateActivityContext(activity, context, fullReplace, removedKeys) {\n        if (fullReplace) {\n            return this._contexts.set(activity.id, context);\n        }\n        else {\n            removedKeys = removedKeys || [];\n            for (const x of removedKeys) {\n                context[x] = null;\n            }\n            return this._contexts.update(activity.id, context);\n        }\n    }\n    announceWindow(windowType, activityWindowId) {\n        throw new Error(\"Invalid operation 'announceWindow' for GW3 protocol\");\n    }\n    registerWindow(type, name, independent) {\n        let shouldSendReady = typeof this._connection.gatewayToken !== \"undefined\";\n        const peerId = this._connection.peerId;\n        if (typeof window !== \"undefined\") {\n            const glue42gd = window.glue42gd;\n            if (glue42gd) {\n                shouldSendReady = typeof glue42gd.activityInfo !== \"undefined\";\n            }\n        }\n        if (shouldSendReady) {\n            this._gw3Session.send({\n                type: gwMessageReady,\n            });\n        }\n        this.invokeCallbacks(this._activityWindowChangeCallbacks, new EntityEvent(new ActivityWindow(peerId, name, type, undefined, this.getAgmInstance(peerId), independent, this.generateWindowGetter(peerId), undefined), new EntityEventContext(EntityEventType.Added)), \"register window\");\n        return Promise.resolve(peerId);\n    }\n    onActivityWindowChange(callback) {\n        this._activityWindowChangeCallbacks.push(callback);\n    }\n    createWindow(activityId, windowDefinition) {\n        if (!windowDefinition.layout) {\n            if (windowDefinition.left || windowDefinition.width || windowDefinition.height || windowDefinition.top) {\n                windowDefinition.layout = {\n                    mode: \"pixels\",\n                    cellSize: 1,\n                };\n            }\n        }\n        const joinPeer = (id) => {\n            if (!activityId) {\n                return;\n            }\n            return this.joinActivity(activityId, id, windowDefinition.name)\n                .then(() => {\n                return id;\n            });\n        };\n        return this.sendCreateAndMapResultingMessagesToPromise({\n            type: gwMessageCreatePeer,\n            peer_type: windowDefinition.type,\n            peer_name: windowDefinition.name || windowDefinition.type,\n            configuration: windowDefinition,\n            activity_id: activityId,\n        }, undefined, undefined, gwMessagePeerCreated, (msg, requestId) => msg.request_id === requestId, undefined, undefined, (msg) => msg.created_id, joinPeer)\n            .then(joinPeer);\n    }\n    closeWindow(id) {\n        return this._gw3Session.send({\n            type: gwMessageDestroyPeer,\n            destroy_peer_id: id\n        }).then((_) => undefined);\n    }\n    getAnnouncementInfo() {\n        let activityId = this._config.activityId || (this._config.announcementInfo && this._config.announcementInfo.activityId);\n        let activityWindowType = (this._config.announcementInfo && this._config.announcementInfo.activityWindowType);\n        let activityWindowIndependent = (this._config.announcementInfo && this._config.announcementInfo.activityWindowIndependent);\n        let activityWindowName = (this._config.announcementInfo && this._config.announcementInfo.activityWindowName);\n        if (typeof window !== \"undefined\" &&\n            typeof window.location !== \"undefined\" &&\n            window.location.search &&\n            typeof URLSearchParams === \"function\") {\n            const searchParams = new URLSearchParams(location.search.slice(1));\n            activityWindowType = activityWindowType || searchParams.get(\"t42PeerType\");\n            activityWindowType = activityWindowType || searchParams.get(\"t42ActivityWindowType\");\n            if (typeof activityWindowIndependent === \"undefined\") {\n                activityWindowIndependent = searchParams.get(\"t42ActivityWindowIndependent\");\n            }\n            activityWindowName = activityWindowName || searchParams.get(\"t42ActivityWindowName\");\n            activityId = activityId || searchParams.get(\"t42ActivityId\");\n        }\n        activityWindowType = activityWindowType || \"unknown\";\n        activityWindowIndependent = activityWindowIndependent || false;\n        activityWindowName = activityWindowName || this._connection.peerId;\n        return {\n            activityWindowId: undefined,\n            activityId,\n            activityWindowType,\n            activityWindowIndependent,\n            activityWindowName,\n        };\n    }\n    joinActivity(activityId, windowId, name) {\n        const maybeName = (name && { name }) || {};\n        return this._gw3Session.send({\n            type: gwMmessageJoinActivity,\n            target_id: windowId,\n            activity_id: activityId,\n            ...maybeName\n        }).then(() => {\n            this.invokeCallbacks(this._activityWindowChangeCallbacks, new EntityEvent(new ActivityWindow(windowId, undefined, undefined, activityId, this.getAgmInstance(windowId), undefined, this.generateWindowGetter(windowId), undefined), new EntityEventContext(EntityEventType.ActivityWindowJoinedActivity)), \"activity joined - ActivityWindow\");\n            this.invokeCallbacks(this._activityChangeCallbacks, new EntityEvent(new Activity(activityId, undefined, new ActivityStatus(\"created\", undefined, undefined), undefined, undefined), new EntityEventContext(EntityEventType.Updated)), \"activity joined - Activity\");\n        });\n    }\n    leaveActivity(activityId, windowId) {\n        return this._gw3Session.send({\n            type: gwMessageLeaveActivity,\n            target_id: windowId,\n            activity_id: activityId\n        }).then(() => {\n            this.invokeCallbacks(this._activityWindowChangeCallbacks, new EntityEvent(new ActivityWindow(windowId, undefined, undefined, null, this.getAgmInstance(windowId), undefined, this.generateWindowGetter(windowId), undefined), new EntityEventContext(EntityEventType.ActivityWindowLeftActivity)), \"activity left - ActivityWindow\");\n            this.invokeCallbacks(this._activityChangeCallbacks, new EntityEvent(new Activity(activityId, undefined, new ActivityStatus(\"created\", undefined, undefined), undefined, undefined), new EntityEventContext(EntityEventType.Updated)), \"activity left - Activity\");\n        });\n    }\n    getActivityTypes() {\n        return Promise.resolve([]);\n    }\n    getWindowTypes() {\n        return Promise.resolve([]);\n    }\n    getActivities() {\n        return Promise.resolve([]);\n    }\n    getActivityWindows() {\n        return Promise.resolve([]);\n    }\n    createStackedWindows(id, windowDefinitions, timeout) {\n        return undefined;\n    }\n    getWindowBounds(id) {\n        return undefined;\n    }\n    setWindowBounds(id, bounds) {\n        return undefined;\n    }\n    activateWindow(id, focus) {\n        return undefined;\n    }\n    setWindowVisibility(id, visible) {\n        return undefined;\n    }\n    cloneActivity(id, cloneOptions) {\n        return undefined;\n    }\n    attachActivities(from, to, tag) {\n        return this._gw3Session.send({\n            type: gwNmessageMergeActivities,\n            into: to,\n            merge: from\n        });\n    }\n    detachActivities(activityId, newActivityInfo) {\n        return this._gw3Session.send({\n            type: gwMessageSplitActivities,\n            from: activityId,\n        }).then(() => \"\");\n    }\n    onActivitiesAttached(callback) {\n    }\n    onActivitiesDetached(callback) {\n    }\n    onActivityAttachedDescriptorsRefreshed(callback) {\n    }\n    getAttachedDescriptors() {\n        return Promise.resolve([]);\n    }\n    getRandomRequestId() {\n        return this._connection.peerId + \":\" + Math.floor(Math.random() * 1e9) + \"\";\n    }\n    forwardAddedAndRemovedMessagesToEventHandler(addedMessageType, removedMessageType, mapper, handlers) {\n        const getGetEntityEvent = (isAdded) => (entity) => new EntityEvent(entity, new EntityEventContext(isAdded ?\n            EntityEventType.Added :\n            EntityEventType.Removed));\n        const sub1 = addedMessageType && this.forwardMessageToEventHandler(addedMessageType, (msg) => mapper(msg, true), getGetEntityEvent(true), handlers);\n        const sub2 = removedMessageType && this.forwardMessageToEventHandler(removedMessageType, (msg) => mapper(msg, false), getGetEntityEvent(false), handlers);\n        return [sub1, sub2].filter((x) => x);\n    }\n    forwardMessageToEventHandler(messageType, mapper, getEntityEvent, handler) {\n        return this.subscribe(messageType, (msg) => {\n            mapper(msg)\n                .forEach((ent) => handler.forEach((h) => h(getEntityEvent(ent, msg))));\n        });\n    }\n    sendCreateAndMapResultingMessagesToPromise(msg, initiatedMessageType, initiatedMessageFilter, createdMessageType, createdMessageFilter, cancelledMessageType, cancelledMessageFilter, createdMessageToPromiseResolution, listenForRecreates) {\n        const reqId = this.getRandomRequestId();\n        let resolveCreatedPromise;\n        let rejectCreatedPromise;\n        const createdPromise = new Promise((resolve, reject) => {\n            resolveCreatedPromise = resolve;\n            rejectCreatedPromise = reject;\n        });\n        let initiatedMessageAck = null;\n        let initiatedSubscription;\n        let createdSubscription;\n        let cancelledSubscription;\n        let errorSubscription;\n        const dropSubscriptions = () => {\n            this.dropSubscription(initiatedSubscription);\n            if (!listenForRecreates) {\n                this.dropSubscription(createdSubscription);\n            }\n            this.dropSubscription(cancelledSubscription);\n            this.dropSubscription(errorSubscription);\n        };\n        initiatedSubscription = initiatedMessageType &&\n            this.subscribe(initiatedMessageType, (msg4) => {\n                if (!initiatedMessageFilter(msg4, reqId)) {\n                    return;\n                }\n                initiatedMessageAck = msg4;\n                this.dropSubscription(initiatedSubscription);\n            });\n        let recreated = false;\n        createdSubscription =\n            this.subscribe(createdMessageType, (msg1) => {\n                if (!createdMessageFilter(msg1, reqId, initiatedMessageAck)) {\n                    return;\n                }\n                if (recreated) {\n                    if (listenForRecreates) {\n                        listenForRecreates(createdMessageToPromiseResolution(msg1));\n                    }\n                }\n                else {\n                    recreated = true;\n                    resolveCreatedPromise(createdMessageToPromiseResolution(msg1));\n                }\n            });\n        cancelledSubscription = cancelledMessageType &&\n            this.subscribe(cancelledMessageType, (msg2) => {\n                if (!cancelledMessageFilter(msg2, reqId, initiatedMessageAck)) {\n                    return;\n                }\n                rejectCreatedPromise(msg2);\n            });\n        errorSubscription = cancelledMessageType &&\n            this.subscribe(gwMmessageError, (msg3) => {\n                if (msg3.request_id !== reqId) {\n                    return;\n                }\n                rejectCreatedPromise(msg3);\n            });\n        msg.request_id = reqId;\n        const toReturn = this._gw3Session\n            .send(msg)\n            .then(() => {\n            return createdPromise;\n        });\n        toReturn.then(dropSubscriptions, dropSubscriptions);\n        return toReturn;\n    }\n    peerFactoryIdAndOwnerIdToWindowType(factoryId, ownerId) {\n        const peerType = this._peerIdAndFactoryIdToPeerType[ownerId + \":\" + factoryId];\n        if (!peerType) {\n            return null;\n        }\n        else {\n            return new WindowType(peerType, undefined);\n        }\n    }\n    subscribe(messageType, handler) {\n        const sub = this._connection.on(messageType, (msg) => handler.bind(this)(msg));\n        this._gw3Subscriptions.push(sub);\n        return sub;\n    }\n    dropSubscription(subscription) {\n        if (subscription) {\n            this._connection.off(subscription);\n            delete this._gw3Subscriptions[this._gw3Subscriptions.indexOf(subscription)];\n        }\n    }\n    invokeCallbacks(callbacks, event, description) {\n        callbacks.forEach((cb) => {\n            try {\n                cb(event);\n            }\n            catch (err) {\n                this._logger.error(`Error in ${description || event.context.type} callback: ` + JSON.stringify(err));\n            }\n        });\n    }\n    handleActivityCreatedMessage(msg) {\n        if (!msg.context_id) {\n            this._logger.error(\"Activity created with unknown context_id: \" + msg.activity_id);\n        }\n        else {\n            if (!this._contextSubscriptions[msg.activity_id]) {\n                this.subscribeToContext(msg);\n            }\n        }\n    }\n    async subscribeToContext(msg) {\n        const activityId = msg.activity_id;\n        this._contextSubscriptions[activityId] =\n            await this._contexts.subscribe(activityId, (data, updated, removed) => {\n                const event = new EntityEvent(new Activity(activityId, undefined, undefined, data, undefined), new ActivityContextChangedEventContext(data, updated, removed));\n                this.invokeCallbacks(this._activityChangeCallbacks, event, \"context updated\");\n            });\n    }\n    handleActivityDestroyedMessage(msg) {\n        const unsubscribeContext = this._contextSubscriptions[msg.activity_id];\n        if (typeof unsubscribeContext === \"function\") {\n            unsubscribeContext();\n        }\n        delete this._contextSubscriptions[msg.activity_id];\n    }\n    handlePeerFactoriesAdded(msg) {\n        msg.factories.forEach((entity) => {\n            this._peerIdAndFactoryIdToPeerType[msg.owner_id + \":\" + entity.id] = entity.peer_type;\n        });\n    }\n    handlePeerFactoriesRemoved(msg) {\n        msg.factory_ids.forEach((factoryId) => {\n            delete this._peerIdAndFactoryIdToPeerType[msg.owner_id + \":\" + factoryId];\n        });\n    }\n    forwardActivityTypeMessagesToStatusEventHandlers() {\n        this.forwardAddedAndRemovedMessagesToEventHandler(gwMmessageActivityTypesAdded, gwMessageActivityTypesRemoved, (msg, isAdded) => isAdded\n            ? msg.types.map((t) => GW3Bridge.activityTypeGwMessageEntityToActivityType(t, undefined))\n            : msg.types.map((t) => new ActivityType(t.name, undefined, undefined, undefined)), this._activityTypeStatusChangeCallbacks);\n    }\n    forwardActivityCreatedAndJoinedActivityToActivityWindowEventHandlers() {\n        for (const activityCreatedMessage of [gwMessageActivityCreated, gwMessageJoinedActivity, gwMessageOwnerChanged]) {\n            this.forwardMessageToEventHandler(activityCreatedMessage, (msg) => ([msg.owner || { ...msg, type: msg.peer_type, name: msg.peer_name, peer_id: msg.owner_id }])\n                .concat(msg.participants || [])\n                .map((info) => new ActivityWindow(info.peer_id, info.name, info.type, msg.activity_id, this.getAgmInstance(info.peer_id), undefined, this.generateWindowGetter(info.peer_id), undefined)), (ent, msg) => new EntityEvent(ent, new EntityEventContext(EntityEventType.ActivityWindowJoinedActivity)), this._activityWindowChangeCallbacks);\n        }\n    }\n    forwardActivityMessagesToStatusEventHandlers() {\n        for (const createdMessage of [gwMessageActivityCreated, gwMessageJoinedActivity]) {\n            this.forwardMessageToEventHandler(createdMessage, (msg) => [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"started\", \"\", new Date()))], (ent, msg) => GW3Bridge.activityToActivityStatusChangeEvent(ent), this._activityChangeCallbacks);\n        }\n        this.forwardMessageToEventHandler(gwMessageActivityDestroyed, (msg) => [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"destroyed\", msg.reason, new Date()))], (ent, msg) => GW3Bridge.activityToActivityStatusChangeEvent(ent), this._activityChangeCallbacks);\n        this.forwardMessageToEventHandler(gwMessageActivityInitiated, (msg) => [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"created\", \"\", new Date()))], (ent, msg) => GW3Bridge.activityToActivityStatusChangeEvent(ent), this._activityChangeCallbacks);\n        this.forwardMessageToEventHandler(gwMessageOwnerChanged, (msg) => [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"created\", \"\", new Date()))], (ent, msg) => GW3Bridge.activityToActivityStatusChangeEvent(ent), this._activityChangeCallbacks);\n    }\n    forwardPeerFactoryMessagesToStatusEventHandlers() {\n        this.forwardAddedAndRemovedMessagesToEventHandler(gwMessagePeerFactoriesAdded, gwMessagePeerFactoriesRemoved, (msg, isAdded) => isAdded\n            ? msg.factories.map(GW3Bridge.peerFactoryGwMessageEntityToWindowType)\n            : msg.factory_ids.map((id) => this.peerFactoryIdAndOwnerIdToWindowType(id, msg.owner_id)).filter((x) => x != null), this._windowTypeStatusChangeCallbacks);\n    }\n    forwardPeerFactoryMessagesToPeerFactoryRequests() {\n        this.subscribe(gwMessagePeerRequested, (msg) => {\n            const factory = this._peerFactoriesRegisteredByUs[msg.peer_factory];\n            if (!factory) {\n                this._gw3Session.send({\n                    type: gwMmessageError,\n                    request_id: msg.request_id,\n                    reason: `Unknown peer factory ${msg.peer_factory}`\n                });\n                return;\n            }\n            try {\n                const configuration = msg.configuration || {};\n                configuration.gateway_token = configuration.gateway_token || msg.gateway_token;\n                configuration.peer_factory = configuration.peer_factory || msg.peer_factory;\n                const promise = factory({\n                    activityId: msg.activity && msg.activity.id,\n                    activityType: msg.activity && msg.activity.type,\n                    type: msg.configuration && msg.configuration.type,\n                    gwToken: configuration.gateway_token,\n                    configuration\n                });\n                if (promise && promise.then && promise.catch) {\n                    promise.catch((err) => this._gw3Session.send({\n                        type: gwMmessageError,\n                        request_id: msg.request_id,\n                        reason: err && (err.message || JSON.stringify(err))\n                    }));\n                }\n            }\n            catch (err) {\n                this._gw3Session.send({\n                    type: gwMmessageError,\n                    request_id: msg.request_id,\n                    reason: err && (err.message || JSON.stringify(err))\n                });\n            }\n        });\n    }\n    forwardActivityWindowMessagesToEventHandlers() {\n        for (const joinedMessage of [gwMessageActivityJoined, gwMessageJoinedActivity]) {\n            this.subscribe(joinedMessage, (msg) => {\n                const joinedId = (joinedMessage === gwMessageActivityJoined) ? msg.joined_id : msg.peer_id;\n                const joinedType = (joinedMessage === gwMessageActivityJoined) ? msg.joined_type : msg.peer_type;\n                const joinedName = (joinedMessage === gwMessageActivityJoined) ? msg.joined_name : msg.peer_name;\n                const entity = new ActivityWindow(joinedId, joinedName, joinedType, msg.activity_id, this.getAgmInstance(joinedId), undefined, this.generateWindowGetter(joinedId), undefined);\n                if (!this._contextSubscriptions[msg.activity_id]) {\n                    this.subscribeToContext(msg).then(() => {\n                        if (joinedMessage === gwMessageJoinedActivity) {\n                            this._activityJoinedPromiseResolve({});\n                        }\n                    });\n                }\n                else if (joinedMessage === gwMessageJoinedActivity) {\n                    this._activityJoinedPromiseResolve({});\n                }\n                this.invokeCallbacks(this._activityWindowChangeCallbacks, new EntityEvent(entity, new EntityEventContext(EntityEventType.ActivityWindowJoinedActivity)), joinedMessage);\n            });\n        }\n        this.subscribe(gwMessageActivityLeft, (msg) => {\n            const entity = new ActivityWindow(msg.left_id, undefined, undefined, null, this.getAgmInstance(msg.left_id), undefined, this.generateWindowGetter(msg.left_id), undefined);\n            this.invokeCallbacks(this._activityWindowChangeCallbacks, new EntityEvent(entity, new EntityEventContext(EntityEventType.ActivityWindowLeftActivity)), gwMessageActivityLeft);\n        });\n        this.forwardAddedAndRemovedMessagesToEventHandler(gwMessagePeerCreated, undefined, (msg) => [\n            new ActivityWindow(msg.created_id, undefined, undefined, undefined, undefined, undefined, this.generateWindowGetter(msg.created_id), undefined)\n        ], this._activityWindowChangeCallbacks);\n    }\n    getAgmInstance(id) {\n        return this._config.agm.servers().find((s) => s.peerId === id || s.windowId === id);\n    }\n    generateWindowGetter(peerId) {\n        return () => {\n            const server = this.getAgmInstance(peerId);\n            if (!server) {\n                return;\n            }\n            const windowId = server.windowId;\n            return this._config.windows.list().filter((w) => w.id === windowId)[0];\n        };\n    }\n    isOverrideTypeDefinition(value) {\n        if (typeof value === \"undefined\") {\n            return false;\n        }\n        if (value.owner) {\n            return true;\n        }\n        return false;\n    }\n}\n\nclass ActivityMy {\n    constructor(manager, windows) {\n        this._myAttached = [];\n        this._myDetached = [];\n        this._myAttachedTo = [];\n        this._myDetachedFrom = [];\n        this._myActivityFrameColorChanged = [];\n        this._myActivityJoinedCallbacks = [];\n        this._myActivityRemovedCallbacks = [];\n        this._myContextUpdateCallbacks = [];\n        this._logger = Logger.Get(this);\n        this._m = manager;\n        manager.ready()\n            .then((am) => {\n            am.subscribeActivityContextChanged(this._subscribeMyContextChanged.bind(this));\n            am.subscribeWindowEvents(this._subscribeMyWindowEvent.bind(this));\n            am.subscribeActivitiesAttached(this._subscribeActivitiesAttached.bind(this));\n            am.subscribeActivitiesDetached(this._subscribeActivitiesDetached.bind(this));\n            if (windows) {\n                windows.onWindowFrameColorChanged(this._subscribeWindowFrameColorChanged.bind(this));\n            }\n        });\n    }\n    get window() {\n        if (isUndefinedOrNull(this._w)) {\n            const announcedWindows = this._m.announcedWindows;\n            if (announcedWindows.length > 0) {\n                this._w = announcedWindows[0];\n            }\n        }\n        return this._w;\n    }\n    get activity() {\n        const myWin = this.window;\n        if (isUndefinedOrNull(myWin)) {\n            return undefined;\n        }\n        return myWin.activity;\n    }\n    createWindow(windowType) {\n        return this._m.createWindow(this.activity, windowType);\n    }\n    createStackedWindows(windowTypes, timeout) {\n        return this._m.createStackedWindows(this.activity, windowTypes, timeout);\n    }\n    get context() {\n        const activity = this.activity;\n        if (isUndefined(activity)) {\n            return {};\n        }\n        return activity.context;\n    }\n    updateContext(context, callback) {\n        const activity = this.activity;\n        if (isUndefined(activity)) {\n            return new Promise((resolve, reject) => {\n                reject(\"Not in activity\");\n            });\n        }\n        return activity.updateContext(context, callback);\n    }\n    setContext(context, callback) {\n        const activity = this.activity;\n        if (isUndefined(activity)) {\n            return new Promise((resolve, reject) => {\n                reject(\"Not in activity\");\n            });\n        }\n        return activity.setContext(context, callback);\n    }\n    onActivityJoined(callback) {\n        this._myActivityJoinedCallbacks.push(callback);\n        const myWin = this.window;\n        if (!isUndefinedOrNull(myWin) && !isUndefinedOrNull(myWin.activity)) {\n            callback(myWin.activity);\n        }\n    }\n    onActivityLeft(callback) {\n        this._myActivityRemovedCallbacks.push(callback);\n    }\n    onContextChanged(callback) {\n        this._myContextUpdateCallbacks.push(callback);\n        const myWin = this.window;\n        if (isUndefinedOrNull(myWin)) {\n            return;\n        }\n        const activity = myWin.activity;\n        if (isUndefinedOrNull(activity)) {\n            return;\n        }\n        callback(activity.context, activity.context, [], activity);\n    }\n    clone(options, callback) {\n        const act = this.activity;\n        return this._m.clone(act, options, callback);\n    }\n    attach(activity, tag) {\n        let activityId;\n        if (typeof activity === \"string\") {\n            activityId = activity;\n        }\n        else {\n            activityId = activity.id;\n        }\n        return this._m.attachActivities(activityId, this.activity.id, tag);\n    }\n    onActivityAttached(callback) {\n        this._myAttached.push(callback);\n    }\n    onActivityDetached(callback) {\n        this._myDetached.push(callback);\n    }\n    onAttachedToActivity(callback) {\n        this._myAttachedTo.push(callback);\n    }\n    onDetachedFromActivity(callback) {\n        this._myDetachedFrom.push(callback);\n    }\n    get attached() {\n        if (!this.activity) {\n            return [];\n        }\n        return this.activity.attached;\n    }\n    setFrameColor(color, callback) {\n        if (this.activity) {\n            return this.activity.setFrameColor(color, callback);\n        }\n        else {\n            return Promise.resolve(null);\n        }\n    }\n    getFrameColor() {\n        if (this.activity) {\n            return this.activity.getFrameColor();\n        }\n        return \"\";\n    }\n    onFrameColorChanged(callback) {\n        this._myActivityFrameColorChanged.push(callback);\n    }\n    _subscribeMyContextChanged(activity, context, delta, removed) {\n        const myWin = this.window;\n        if (isUndefinedOrNull(myWin)) {\n            return;\n        }\n        const myActivity = myWin.activity;\n        if (isUndefinedOrNull(myActivity)) {\n            return;\n        }\n        if (activity.id !== myActivity.id) {\n            return;\n        }\n        this._notifyMyContextChanged(activity, context, delta, removed);\n    }\n    _subscribeMyWindowEvent(activity, window, event) {\n        if (isUndefinedOrNull(this.window)) {\n            return;\n        }\n        if (this.window.id !== window.id) {\n            return;\n        }\n        if (event === EntityEventType.ActivityWindowJoinedActivity) {\n            this._notifyMyWindowEvent(activity, this._myActivityJoinedCallbacks);\n            this._notifyMyContextChanged(activity, activity.context, null, null);\n        }\n        else if (event === EntityEventType.ActivityWindowLeftActivity) {\n            this._notifyMyWindowEvent(activity, this._myActivityRemovedCallbacks);\n        }\n    }\n    _notifyMyWindowEvent(activity, callbackStore) {\n        callbackStore.forEach((element) => {\n            try {\n                element(activity, event);\n            }\n            catch (e) {\n                this._logger.warn(\"error in user callback \" + e);\n            }\n        });\n    }\n    _notifyMyContextChanged(activity, context, delta, removed) {\n        delta = delta || {};\n        removed = removed || [];\n        this._myContextUpdateCallbacks.forEach((element) => {\n            try {\n                element(context, delta, removed, activity);\n            }\n            catch (e) {\n                this._logger.warn(\"error in user callback \" + e);\n            }\n        });\n    }\n    _notifyAttached(state) {\n        this._myAttached.forEach((cb) => {\n            try {\n                cb(state);\n            }\n            catch (e) {\n                this._logger.warn(\"error in user callback \" + e);\n            }\n        });\n    }\n    _notifyDetached(state) {\n        this._myDetached.forEach((cb) => {\n            try {\n                cb(state);\n            }\n            catch (e) {\n                this._logger.warn(\"error in user callback \" + e);\n            }\n        });\n    }\n    _notifyAttachedTo(state) {\n        this._myAttachedTo.forEach((cb) => {\n            try {\n                cb(this.activity, state);\n            }\n            catch (e) {\n                this._logger.warn(\"error in user callback \" + e);\n            }\n        });\n    }\n    _notifyDetachedFrom(detached, existing, state) {\n        this._myDetachedFrom.forEach((cb) => {\n            try {\n                cb(detached, existing, state);\n            }\n            catch (e) {\n                this._logger.warn(\"error in user callback \" + e);\n            }\n        });\n    }\n    _subscribeActivitiesAttached(newAct, state) {\n        const myWin = this.window;\n        if (isUndefinedOrNull(myWin)) {\n            return;\n        }\n        const myActivity = myWin.activity;\n        if (isUndefinedOrNull(myActivity)) {\n            return;\n        }\n        if (newAct.id !== myActivity.id) {\n            return;\n        }\n        if (state.windowIds.indexOf(myWin.id) >= 0) {\n            this._notifyAttachedTo(state);\n            return;\n        }\n        this._notifyAttached(state);\n    }\n    _subscribeActivitiesDetached(newAct, oldAct, state) {\n        const myWin = this.window;\n        if (isUndefinedOrNull(myWin)) {\n            return;\n        }\n        const myActivity = myWin.activity;\n        if (isUndefinedOrNull(myActivity)) {\n            return;\n        }\n        if (oldAct.id === myActivity.id) {\n            this._notifyDetached(state);\n        }\n        if (newAct.id === myActivity.id) {\n            this._notifyDetachedFrom(newAct, oldAct, state);\n        }\n    }\n    _subscribeWindowFrameColorChanged(window) {\n        const act = this.activity;\n        if (!act) {\n            return;\n        }\n        if (!act.owner) {\n            return;\n        }\n        if (act.owner.underlyingWindow.id === window.id) {\n            this._myActivityFrameColorChanged.forEach((callback) => {\n                callback(window.frameColor);\n            });\n        }\n    }\n}\n\nclass ReadyMarker {\n    constructor(name, signalsToWait) {\n        this._logger = Logger.Get(\"ReadyMarker [\" + name + \"]\");\n        this._logger.debug(\"Initializing ready marker for '\" + name + \"' with \" + signalsToWait + \" signals to wait\");\n        if (signalsToWait <= 0) {\n            throw new Error(\"Invalid signal number. Should be > 0\");\n        }\n        this._signals = signalsToWait;\n        this._callbacks = [];\n        this._name = name;\n    }\n    setCallback(callback) {\n        if (this.isSet()) {\n            callback(undefined);\n            return;\n        }\n        else if (this.isError()) {\n            callback(this._error);\n            return;\n        }\n        this._callbacks.push(callback);\n    }\n    signal(message) {\n        this._logger.debug(\"Signaled - \" + message + \" - signals left \" + (this._signals - 1));\n        this._signals--;\n        if (this._signals < 0) {\n            throw new Error(\"Error in ready marker '\" + this._name + \" - signals are \" + this._signals);\n        }\n        if (this.isSet()) {\n            this._callbacks.forEach((callback) => {\n                callback(undefined);\n            });\n        }\n    }\n    error(error) {\n        this._error = error;\n        this._callbacks.forEach((errorCallback) => {\n            errorCallback(error);\n        });\n    }\n    isSet() {\n        if (this.isError()) {\n            return false;\n        }\n        return this._signals === 0;\n    }\n    isError() {\n        return !isUndefined(this._error);\n    }\n    getError() {\n        return this._error;\n    }\n}\n\nclass EntityObservableCollection {\n    constructor(processNew) {\n        this._items = {};\n        this._listeners = [];\n        this._processNew = processNew;\n    }\n    addOne(item) {\n        this.add([item]);\n    }\n    add(items) {\n        items.forEach((element) => {\n            this.process(new EntityEvent(element, new EntityEventContext(EntityEventType.Added)));\n        });\n    }\n    process(event) {\n        const context = event.context;\n        const type = context.type;\n        const entity = event.entity;\n        if (type === EntityEventType.StatusChange &&\n            !context.oldStatus) {\n            const act = this._items[entity.id];\n            if (act) {\n                context.oldStatus = act.status;\n            }\n        }\n        if (type === EntityEventType.StatusChange &&\n            context.oldStatus &&\n            context.newStatus &&\n            context.oldStatus.state ===\n                context.newStatus.state) {\n            context.type = EntityEventType.Updated;\n        }\n        if (typeof htmlContainer === \"undefined\") {\n            if (type === EntityEventType.ActivityWindowJoinedActivity &&\n                this._items[entity.id] &&\n                this._items[entity.id].activity) {\n                context.type = EntityEventType.Updated;\n            }\n            if (type === EntityEventType.ActivityWindowLeftActivity &&\n                this._items[entity.id] &&\n                !this._items[entity.id].activity) {\n                context.type = EntityEventType.Updated;\n            }\n        }\n        const internalEntity = this._updateInternalCollections(entity, type, context);\n        this._notifyListeners(internalEntity, context);\n        return internalEntity;\n    }\n    get() {\n        const result = [];\n        for (const key in this._items) {\n            if (this._items.hasOwnProperty(key)) {\n                const element = this._items[key];\n                result.push(element);\n            }\n        }\n        return result;\n    }\n    getByName(name) {\n        for (const key in this._items) {\n            if (key === name) {\n                return this._items[key];\n            }\n        }\n        return undefined;\n    }\n    getOrWait(name) {\n        return new Promise((resolve) => {\n            const entityAddedHandler = (entity) => {\n                if (entity.id !== name) {\n                    return;\n                }\n                resolve(entity);\n                this.unsubscribe(entityAddedHandler);\n            };\n            this.subscribe(entityAddedHandler);\n            const window = this.getByName(name);\n            if (window) {\n                this.unsubscribe(entityAddedHandler);\n                resolve(window);\n                return;\n            }\n        });\n    }\n    subscribe(handler) {\n        this._listeners.push(handler);\n        Object.keys(this._items).forEach((key) => {\n            const element = this._items[key];\n            handler(element, new EntityEventContext(EntityEventType.Added.toString()));\n        });\n        return () => {\n            this.unsubscribe(handler);\n        };\n    }\n    unsubscribe(handler) {\n        const index = this._listeners.indexOf(handler);\n        if (index !== -1) {\n            this._listeners.splice(index, 1);\n        }\n    }\n    _notifyListeners(entity, context) {\n        this._listeners.forEach((listener) => {\n            try {\n                listener(entity, context);\n            }\n            catch (e) {\n                return;\n            }\n        });\n    }\n    _updateInternalCollections(entity, type, context) {\n        const entityAsAny = entity;\n        const isActivityDestroy = (type === EntityEventType.StatusChange &&\n            entityAsAny.status &&\n            entityAsAny.status.state === ActivityState.Destroyed) ||\n            (type === EntityEventType.StatusChange &&\n                context &&\n                context.newStatus &&\n                context.newStatus.state === ActivityState.Destroyed);\n        const isWindowClose = type === EntityEventType.Closed;\n        const isTypeRemove = type === EntityEventType.Removed && typeof entityAsAny.isIndependent === \"undefined\";\n        if (isTypeRemove || isWindowClose || isActivityDestroy) {\n            const oldEntity = this._items[entity.id];\n            delete this._items[entity.id];\n            this._processNew(entity);\n            if (oldEntity) {\n                entity._beforeDelete(oldEntity);\n            }\n            return entity;\n        }\n        else {\n            const key = entity.id;\n            if (!this._items.hasOwnProperty(key)) {\n                this._processNew(entity);\n                this._items[entity.id] = entity;\n            }\n            else {\n                this._items[entity.id]._update(entity);\n            }\n        }\n        return this._items[entity.id];\n    }\n}\n\nclass ActivityManager {\n    get usingHc() {\n        return this._bridge.bridgeType === \"HC\";\n    }\n    get announcedWindows() {\n        return this._announcedWindows;\n    }\n    set announcedWindows(v) {\n        throw new Error(\"not allowed\");\n    }\n    constructor(bridge, autoAnnounce, windows) {\n        this._logger = Logger.Get(\"activityManager\");\n        this._announcedWindows = [];\n        this._attachedCallbacks = [];\n        this._detachedCallbacks = [];\n        this._frameColorChangesCallbacks = [];\n        this._windowHandlers = [];\n        this._bridge = bridge;\n        this._activityTypes = new EntityObservableCollection((e) => this._grabEntity(e));\n        this._windowTypes = new EntityObservableCollection((e) => this._grabEntity(e));\n        this._activities = new EntityObservableCollection((e) => this._grabEntity(e));\n        this._windows = new EntityObservableCollection((e) => this._grabEntity(e));\n        this._dataReadyMarker = new ReadyMarker(\"Activity Manager Data\", [\"GetActivityTypes\", \"GetWindowTypes\", \"GetActivities\", \"GetWindows\"].length);\n        this._descriptorsMarker = new ReadyMarker(\"Attached Activities Descriptors\", [\"GetDescriptors\"].length);\n        if (autoAnnounce) {\n            this._readyMarker = new ReadyMarker(\"Activity Manager Announce\", [\"Announcement\"].length);\n            this._dataReadyMarker.setCallback((dataErr) => {\n                if (dataErr) {\n                    this._readyMarker.error(dataErr);\n                }\n                this._descriptorsMarker.setCallback((err) => {\n                    if (err) {\n                        this._readyMarker.error(err);\n                    }\n                    this._logger.debug(\"Auto announcing window\");\n                    this.announceWindow()\n                        .then((w) => {\n                        this._announcedWindows.push(w);\n                        this._readyMarker.signal(\"Successfully announced window with id '\" + w.id + \"'\");\n                    })\n                        .catch((errCatch) => {\n                        this._logger.debug(\"Will not announce window - \" + errCatch);\n                        this._readyMarker.signal();\n                    });\n                });\n                this.refreshDescriptors();\n            });\n        }\n        else {\n            this._readyMarker = this._dataReadyMarker;\n        }\n        this._bridge.onActivitiesAttached((e) => {\n            this._handleActivitiesAttached(e);\n        });\n        this._bridge.onActivitiesDetached((e) => {\n            this._handleActivitiesDetached(e);\n        });\n        this._bridge.onActivityAttachedDescriptorsRefreshed((e) => {\n            this._handleActivityDescriptorsRefreshed(e);\n        });\n        if (windows) {\n            windows.onWindowFrameColorChanged(this._handleWindowFrameColorChanged.bind(this));\n        }\n        this._bridge.init();\n        this._subscribeForData();\n        this._bridge\n            .initReady()\n            .then((aw) => {\n            this._getInitialData();\n        })\n            .catch((error) => {\n            console.log(error);\n        });\n    }\n    ready(callback) {\n        const promise = new Promise((resolve, reject) => {\n            this._readyMarker.setCallback((err) => {\n                if (!err) {\n                    resolve(this);\n                }\n                else {\n                    reject(this._readyMarker.getError());\n                }\n            });\n        });\n        return nodeify(Promise.all([this._bridge.ready(), promise]).then(() => this), callback);\n    }\n    getActivityTypes() {\n        return this._activityTypes.get();\n    }\n    getActivityType(name) {\n        return this._activityTypes.getByName(name);\n    }\n    registerActivityType(activityTypeName, ownerWindowType, helperWindowTypes, config, description, callback) {\n        const promise = new Promise((resolve, reject) => {\n            if (isUndefinedOrNull(activityTypeName)) {\n                reject(\"activityTypeName argument can not be undefined\");\n                return;\n            }\n            if (!isString(activityTypeName)) {\n                reject(\"activityTypeName should be string\");\n                return;\n            }\n            const actType = this.getActivityType(activityTypeName);\n            if (!isUndefinedOrNull(actType)) {\n                reject(\"Activity type '\" + activityTypeName + \"' already exists\");\n                return;\n            }\n            let ownerDefinition;\n            if (isUndefined(ownerWindowType)) {\n                reject(\"Owner window type can not be undefined\");\n                return;\n            }\n            if (isString(ownerWindowType)) {\n                ownerDefinition = { type: ownerWindowType, name: \"\", isIndependent: false, arguments: {} };\n            }\n            else {\n                ownerDefinition = ownerWindowType;\n            }\n            const helperDefinitions = [];\n            if (!isUndefined(helperWindowTypes) && isArray(helperWindowTypes)) {\n                for (const index in helperWindowTypes) {\n                    const item = helperWindowTypes[index];\n                    if (isString(item)) {\n                        const definition = {\n                            type: item,\n                            name: \"\",\n                            isIndependent: false,\n                            arguments: {},\n                            relativeTo: \"\",\n                            relativeDirection: \"\",\n                            windowStyleAttributes: {}\n                        };\n                        helperDefinitions.push(definition);\n                    }\n                    else {\n                        helperDefinitions.push(item);\n                    }\n                }\n            }\n            this._bridge\n                .registerActivityType(activityTypeName, ownerDefinition, helperDefinitions, config, description)\n                .then((activityType) => {\n                this._grabEntity(activityType);\n                resolve(activityType);\n            })\n                .catch((error) => {\n                reject(error);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    unregisterActivityType(type, callback) {\n        const promise = new Promise((resolve, reject) => {\n            const actType = this.getActivityType(type);\n            if (isUndefined(actType)) {\n                reject(\"Activity type '\" + type + \"' does not exists\");\n                return;\n            }\n            this._bridge.unregisterActivityType(type).then(() => resolve(actType), reject);\n        });\n        return nodeify(promise, callback);\n    }\n    initiate(activityType, context, callback, configuration) {\n        const promise = new Promise((resolve, reject) => {\n            const actType = this.getActivityType(activityType);\n            if (isUndefined(actType)) {\n                reject(\"Activity type '\" + activityType + \"' does not exists\");\n                return;\n            }\n            this._bridge\n                .initiateActivity(activityType, context, configuration)\n                .then((actId) => {\n                this._activities\n                    .getOrWait(actId)\n                    .then((act) => {\n                    resolve(act);\n                })\n                    .catch((err) => reject(err));\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    subscribeActivityTypeEvents(handler) {\n        this._activityTypes.subscribe((at, context) => {\n            handler(at, context.type);\n        });\n    }\n    getWindowTypes() {\n        return this._windowTypes.get();\n    }\n    getWindowType(name) {\n        return this._windowTypes.getByName(name);\n    }\n    registerWindowFactory(windowType, factoryMethod, callback) {\n        const promise = new Promise((resolve, reject) => {\n            if (isUndefinedOrNull(windowType)) {\n                reject(\"no windowType specified\");\n                return;\n            }\n            if (isObject(windowType)) {\n                windowType = windowType.getName();\n            }\n            else if (!isString(windowType)) {\n                reject(\"windowType should be string or object that has getName method\");\n                return;\n            }\n            this._bridge\n                .registerWindowFactory(windowType, factoryMethod)\n                .then((v) => {\n                resolve(v);\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    unregisterWindowFactory(windowType, callback) {\n        const promise = new Promise((resolve, reject) => {\n            if (isUndefinedOrNull(windowType)) {\n                reject(\"no windowType specified\");\n                return;\n            }\n            if (!isString(windowType)) {\n                reject(\"windowType should be a string\");\n                return;\n            }\n            this._bridge\n                .unregisterWindowFactory(windowType)\n                .then((v) => {\n                resolve(v);\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    getActivities(activityType) {\n        let act = this._activities.get();\n        act = act.filter((a) => a._ownerId);\n        if (!activityType) {\n            return act;\n        }\n        let types = activityType;\n        if (isString(activityType)) {\n            types = [activityType];\n        }\n        else if (activityType instanceof ActivityType) {\n            types = [activityType.name];\n        }\n        else if (activityType instanceof Array) ;\n        else {\n            throw new Error(\"Invalid input argument 'activityType' = \" + activityType);\n        }\n        return act.filter((at) => {\n            const type = at.type;\n            return some(types, (t) => {\n                return type.id === t.id;\n            });\n        });\n    }\n    getActivityById(id) {\n        return this._activities.getByName(id);\n    }\n    announceWindow(activityWindowId, windowType) {\n        const promise = new Promise((resolve, reject) => {\n            const announcementInfo = this._bridge.getAnnouncementInfo();\n            if (isUndefined(activityWindowId)) {\n                activityWindowId = announcementInfo.activityWindowId;\n            }\n            if (isUndefined(windowType)) {\n                windowType = announcementInfo.activityWindowType;\n            }\n            if (isUndefinedOrNull(windowType)) {\n                throw new Error(\"Can not announce - unknown windowType\");\n            }\n            const activityId = announcementInfo && announcementInfo.activityId;\n            if (isUndefinedOrNull(activityWindowId)) {\n                this._logger.debug(\"Registering window with type:'\" + windowType + \"', name:'\" + announcementInfo.activityWindowName + \"', ind.:'\" + announcementInfo.activityWindowIndependent + \"'\");\n                this._bridge.registerWindow(windowType, announcementInfo.activityWindowName, announcementInfo.activityWindowIndependent)\n                    .then(this._windows.getOrWait.bind(this._windows))\n                    .then((w) => {\n                    if (activityId) {\n                        return this._activities.getOrWait(activityId).then((_) => w);\n                    }\n                    else {\n                        return w;\n                    }\n                })\n                    .then((w) => {\n                    resolve(w);\n                })\n                    .catch((err) => {\n                    this._logger.error(err);\n                });\n            }\n            else {\n                this._logger.debug(\"Announcing window with id '\" + activityWindowId + \"' and type '\" + windowType + \"'\");\n                const currentWindow = this._windows.getByName(activityWindowId);\n                if (!isUndefinedOrNull(currentWindow)) {\n                    this._logger.debug(\"Window with id '\" + activityWindowId + \"' already announced - reusing the window\");\n                    resolve(currentWindow);\n                    return;\n                }\n                const windowEventHandler = (a, w, e) => {\n                    if (activityWindowId === w.id) {\n                        if (e === EntityEventType.ActivityWindowJoinedActivity) {\n                            const activity = w.activity;\n                            if (isUndefined(activity)) {\n                                reject(\"UNDEFINED ACTIVITY\");\n                            }\n                            this._logger.trace(\"Got joined event for id '\" + activityWindowId + \"'\");\n                            resolve(w);\n                            this.unsubscribeWindowEvents(windowEventHandler);\n                        }\n                    }\n                };\n                this.subscribeWindowEvents(windowEventHandler);\n                this._logger.trace(\"Waiting for joined event for id '\" + activityWindowId + \"'\");\n                this._bridge.announceWindow(windowType, activityWindowId);\n            }\n        });\n        return promise;\n    }\n    subscribeWindowTypeEvents(handler) {\n        this._windowTypes.subscribe((wt, context) => {\n            handler(wt, context.type);\n        });\n    }\n    subscribeActivityEvents(handler) {\n        return this._activities.subscribe((act, context) => {\n            if (context.type === EntityEventType.StatusChange) {\n                const p = context;\n                handler(act, p.newStatus, p.oldStatus);\n            }\n            if (context.type === EntityEventType.Removed ||\n                (context.type === EntityEventType.StatusChange &&\n                    context.newStatus.getState() === ActivityState.Destroyed)) {\n                for (const window of this._windows.get()) {\n                    if (window.activity && window.activity.id === act.id) {\n                        this._windows.process(new EntityEvent(window, new EntityEventContext(EntityEventType.ActivityWindowLeftActivity)));\n                    }\n                }\n            }\n        });\n    }\n    subscribeWindowEvents(handler) {\n        const wrappingHandler = (window, context) => {\n            let eventType = context.type;\n            if (eventType === EntityEventType.Added) {\n                eventType = \"opened\";\n            }\n            handler(window.activity, window, eventType);\n        };\n        this._windowHandlers.push([handler, wrappingHandler]);\n        return this._windows.subscribe(wrappingHandler);\n    }\n    unsubscribeWindowEvents(handler) {\n        const found = this._windowHandlers.find((pair) => pair[0] === handler);\n        if (found) {\n            this._windowHandlers.splice(this._windowHandlers.indexOf(found), 1);\n            this._windows.unsubscribe(found[1]);\n        }\n    }\n    createWindow(activity, windowTypeOrConfiguration, callback) {\n        const promise = new Promise((resolve, reject) => {\n            if (isUndefinedOrNull(windowTypeOrConfiguration)) {\n                reject(\"windowType is undefined\");\n            }\n            let windowDefinition;\n            if (isString(windowTypeOrConfiguration)) {\n                windowDefinition = { type: windowTypeOrConfiguration, name: \"\", isIndependent: false, arguments: {} };\n            }\n            else if (windowTypeOrConfiguration instanceof WindowType) {\n                windowDefinition = {\n                    type: windowTypeOrConfiguration.type || windowTypeOrConfiguration.id,\n                    name: windowTypeOrConfiguration.name || windowTypeOrConfiguration.type || windowTypeOrConfiguration.id,\n                    isIndependent: false\n                };\n            }\n            else {\n                const invalidKeys = [\"url\"];\n                const filteredWindowTypeOrConfiguration = {};\n                Object.keys(windowTypeOrConfiguration).forEach((key) => {\n                    if (invalidKeys.indexOf(key) === -1) {\n                        filteredWindowTypeOrConfiguration[key] = windowTypeOrConfiguration[key];\n                    }\n                });\n                windowDefinition = filteredWindowTypeOrConfiguration;\n            }\n            let relativeToWindow;\n            if (!isUndefinedOrNull(windowDefinition.relativeTo)) {\n                relativeToWindow = windowDefinition.relativeTo;\n                if (typeof relativeToWindow === \"string\") {\n                    const windows = this.getWindows({ type: relativeToWindow });\n                    if (!isUndefinedOrNull(windows) && windows.length > 0) {\n                        windowDefinition.relativeTo = windows[0].id;\n                    }\n                }\n                else if (!isUndefinedOrNull(relativeToWindow.type)) {\n                    const windows = this.getWindows({ type: relativeToWindow.type });\n                    if (!isUndefinedOrNull(windows) && windows.length > 0) {\n                        windowDefinition.relativeTo = windows[0].id;\n                    }\n                }\n                else if (!isUndefinedOrNull(relativeToWindow.windowId)) {\n                    windowDefinition.relativeTo = relativeToWindow.windowId;\n                }\n            }\n            this._bridge.createWindow(activity && activity.id, windowDefinition)\n                .then((wid) => {\n                this._logger.debug(\"Window created, waiting for window entity with id \" + wid);\n                const handler = (window, context) => {\n                    if (window.id === wid && (!activity || window.activity)) {\n                        this._logger.debug(\"Got entity window with id \" + wid);\n                        resolve(window);\n                        this._windows.unsubscribe(handler);\n                    }\n                };\n                this._windows.subscribe(handler);\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    createStackedWindows(activity, relativeWindowTypes, timeout, callback) {\n        const promise = new Promise((resolve, reject) => {\n            if (isUndefinedOrNull(activity)) {\n                reject(\"activity is undefined\");\n            }\n            if (isUndefinedOrNull(relativeWindowTypes)) {\n                reject(\"relativeWindowTypes is undefined\");\n            }\n            if (!Array.isArray(relativeWindowTypes)) {\n                reject(\"relativeWindowTypes has to be an array\");\n            }\n            if (isUndefinedOrNull(timeout)) {\n                timeout = 20000;\n            }\n            const windowDefinitions = [];\n            relativeWindowTypes.forEach((element) => {\n                let windowDefinition;\n                if (isString(element)) {\n                    windowDefinition = { type: element, name: \"\", isIndependent: false, arguments: {} };\n                }\n                else {\n                    windowDefinition = element;\n                }\n                windowDefinition.stackedWindow = true;\n                windowDefinition.timeout = timeout;\n                let relativeToWindow;\n                if (!isUndefinedOrNull(windowDefinition.relativeTo)) {\n                    relativeToWindow = windowDefinition.relativeTo;\n                    if (!isUndefinedOrNull(relativeToWindow.type)) {\n                        windowDefinition.relativeTo = relativeToWindow.type;\n                    }\n                    else if (!isUndefinedOrNull(relativeToWindow.windowId)) {\n                        const windows = this.getWindows({ id: relativeToWindow.windowId });\n                        if (!isUndefinedOrNull(windows) && windows.length > 0) {\n                            windowDefinition.relativeTo = windows[0].type.name;\n                        }\n                    }\n                }\n                windowDefinitions.push(windowDefinition);\n            });\n            const tasks = [];\n            windowDefinitions.forEach((wd) => tasks.push(this.createWindow(activity, wd)));\n            Promise.all(tasks).then(resolve).catch(reject);\n        });\n        return nodeify(promise, callback);\n    }\n    addWindowToActivity(activity, window, callback) {\n        const toReturn = this._bridge.joinActivity(activity.id, window.id)\n            .then(() => window);\n        nodeify(toReturn, callback);\n        return toReturn;\n    }\n    leaveWindowFromActivity(activity, window, callback) {\n        const toReturn = this._bridge.leaveActivity(activity.id, window.id)\n            .then(() => window);\n        nodeify(toReturn, callback);\n        return toReturn;\n    }\n    setActivityContext(activity, context, callback) {\n        const promise = new Promise((resolve, reject) => {\n            if (isUndefinedOrNull(activity)) {\n                reject(\"activity can not be null\");\n            }\n            this._bridge\n                .updateActivityContext(activity, context, true)\n                .then((_) => {\n                resolve(activity);\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    updateActivityContext(activity, context, callback) {\n        const promise = new Promise((resolve, reject) => {\n            if (isUndefinedOrNull(activity)) {\n                reject(\"activity can not be null\");\n            }\n            const removedKeys = [];\n            for (const key in context) {\n                if (context.hasOwnProperty(key) && context[key] === null) {\n                    removedKeys.push(key);\n                }\n            }\n            for (const removedKey of removedKeys) {\n                delete context[removedKey];\n            }\n            this._bridge\n                .updateActivityContext(activity, context, false, removedKeys)\n                .then((_) => {\n                resolve(activity);\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    subscribeActivityContextChanged(handler) {\n        this._activities.subscribe((act, context) => {\n            if (context.type === EntityEventType.ActivityContextChange) {\n                const updateContext = context;\n                handler(act, updateContext.context, updateContext.updated, updateContext.removed);\n            }\n        });\n    }\n    stopActivity(activity, callback) {\n        const promise = this._bridge.stopActivity(activity);\n        return nodeify(promise, callback);\n    }\n    getWindows(filter) {\n        if (isUndefined(filter)) {\n            return this._windows.get();\n        }\n        if (!isUndefined(filter.id)) {\n            return [this._windows.getByName(filter.id)];\n        }\n        const allWindows = this._windows.get();\n        return allWindows.filter((w) => {\n            if (!isUndefined(filter.type) && w.type.id !== filter.type) {\n                return false;\n            }\n            if (!isUndefined(filter.name) && w.name !== filter.name) {\n                return false;\n            }\n            if (!isUndefined(filter.activityId)) {\n                if (isUndefinedOrNull(w.activity)) {\n                    return false;\n                }\n                if (w.activity.id !== filter.activityId) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n    getWindowBounds(id) {\n        return this._bridge.getWindowBounds(id);\n    }\n    setWindowBounds(id, bounds, callback) {\n        const promise = new Promise((resolve, reject) => {\n            this._bridge.setWindowBounds(id, bounds)\n                .then(() => resolve())\n                .catch((err) => reject(err));\n        });\n        return nodeify(promise, callback);\n    }\n    closeWindow(id) {\n        return this._bridge.closeWindow(id);\n    }\n    activateWindow(id, focus) {\n        return this._bridge.activateWindow(id, focus);\n    }\n    setWindowVisibility(id, visible) {\n        return this._bridge.setWindowVisibility(id, visible);\n    }\n    clone(activity, cloneOptions, callback) {\n        const promise = new Promise((resolve, reject) => {\n            if (!activity) {\n                reject(\"activity can not be null\");\n            }\n            this._bridge.cloneActivity(activity.id, cloneOptions)\n                .then((activityId) => {\n                this._activities\n                    .getOrWait(activityId)\n                    .then((act) => {\n                    resolve(act);\n                })\n                    .catch((err) => reject(err));\n            })\n                .catch((err) => reject(err));\n        });\n        return nodeify(promise, callback);\n    }\n    attachActivities(from, to, tag, callback) {\n        tag = tag || {};\n        const promise = new Promise((resolve, reject) => {\n            const fromActivity = this._activities.getByName(from);\n            if (!fromActivity) {\n                reject(\"can not find activity with id \" + from);\n                return;\n            }\n            const toActivity = this._activities.getByName(to);\n            if (!toActivity) {\n                reject(\"can not find activity with id \" + to);\n                return;\n            }\n            return this._bridge.attachActivities(from, to, tag)\n                .then((data) => {\n                const newActId = data.to;\n                const state = data.descriptor;\n                const allStates = data.descriptors;\n                this._activities.getOrWait(newActId).then((act) => {\n                    act._updateDescriptors(allStates);\n                    const stateWrapped = act.attached.filter((u) => u.ownerId === state.ownerId)[0];\n                    resolve(stateWrapped);\n                });\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    detachActivities(activityId, descriptor, callback) {\n        const promise = new Promise((resolve, reject) => {\n            return this._bridge.detachActivities(activityId, descriptor)\n                .then(() => {\n                const oldActId = undefined;\n                const newActId = undefined;\n                const descriptors = undefined;\n                this._activities\n                    .getOrWait(oldActId)\n                    .then((oldAct) => {\n                    oldAct._updateDescriptors(descriptors);\n                    this._activities\n                        .getOrWait(newActId)\n                        .then((newAct) => {\n                        resolve(newAct);\n                    });\n                })\n                    .catch((err) => reject(err));\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    subscribeActivitiesAttached(callback) {\n        this._attachedCallbacks.push(callback);\n    }\n    subscribeActivitiesDetached(callback) {\n        this._detachedCallbacks.push(callback);\n    }\n    subscribeActivityFrameColorChanged(callback) {\n        this._frameColorChangesCallbacks.push(callback);\n    }\n    _grabEntity(entity) {\n        entity._manager = this;\n    }\n    _getInitialData() {\n        this._logger.debug(\"Request initial data...\");\n        this._bridge.getActivityTypes()\n            .then((at) => {\n            this._activityTypes.add(at);\n            this._dataReadyMarker.signal(\"Got act types\");\n        })\n            .catch((error) => {\n            this._logger.error(error);\n            this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting activity types -\" + error);\n        });\n        this._bridge.getWindowTypes()\n            .then((wt) => {\n            this._windowTypes.add(wt);\n            this._dataReadyMarker.signal(\"Got window types\");\n        })\n            .catch((error) => {\n            this._logger.error(error);\n            this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting window types  \" + error);\n        });\n        this._bridge.getActivities()\n            .then((ac) => {\n            this._activities.add(ac);\n            this._dataReadyMarker.signal(\"Got activities\");\n        })\n            .catch((error) => {\n            this._logger.error(error);\n            this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting activity instances -\" + error);\n        });\n        this._bridge.getActivityWindows()\n            .then((aw) => {\n            this._windows.add(aw);\n            this._dataReadyMarker.signal(\"Got windows\");\n        })\n            .catch((error) => {\n            this._logger.error(error);\n            this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting activity windows -\" + error);\n        });\n    }\n    _subscribeForData() {\n        this._logger.debug(\"Subscribe for data...\");\n        this._bridge.onActivityTypeStatusChange((event) => {\n            this._activityTypes.process(event);\n        });\n        this._bridge.onWindowTypeStatusChange((event) => {\n            this._windowTypes.process(event);\n        });\n        this._bridge.onActivityWindowChange((event) => {\n            this._windows.process(event);\n        });\n        this._bridge.onActivityStatusChange((event) => {\n            this._activities.process(event);\n        });\n    }\n    _handleActivitiesAttached(data) {\n        const newActId = data.to;\n        const descriptor = data.descriptor;\n        const descriptors = data.descriptors;\n        this._activities.getOrWait(newActId).then((act) => {\n            act._updateDescriptors(descriptors);\n            const descriptorAsObjectFromAPI = act.attached.filter((u) => u.ownerId === descriptor.ownerId)[0];\n            this._attachedCallbacks.forEach((callback) => {\n                try {\n                    callback(act, descriptorAsObjectFromAPI);\n                }\n                catch (err) {\n                    return;\n                }\n            });\n        });\n    }\n    _handleActivitiesDetached(data) {\n        const oldActId = data.oldActivityId;\n        const newActId = data.newActivityId;\n        const descriptors = data.descriptors;\n        const descriptor = data.descriptor;\n        this._activities.getOrWait(oldActId).then((oldAct) => {\n            oldAct._updateDescriptors(descriptors);\n            this._activities.getOrWait(newActId).then((newAct) => {\n                this._detachedCallbacks.forEach((callback) => {\n                    try {\n                        callback(newAct, oldAct, descriptor);\n                    }\n                    catch (err) {\n                        return;\n                    }\n                });\n            });\n        });\n    }\n    _handleActivityDescriptorsRefreshed(data) {\n        const id = data.id;\n        const descriptors = data.descriptors;\n        const act = this._activities.getByName(id);\n        if (act) {\n            act._updateDescriptors(descriptors);\n        }\n    }\n    refreshDescriptors() {\n        this._bridge.getAttachedDescriptors()\n            .then((map) => {\n            if (map) {\n                Object.keys(map).forEach((key) => {\n                    const actId = key;\n                    const descriptors = map[key];\n                    const act = this._activities.getByName(actId);\n                    if (act) {\n                        act._updateDescriptors(descriptors);\n                    }\n                });\n            }\n            this._descriptorsMarker.signal(\"Successfully got descriptors\");\n        })\n            .catch((err) => {\n            this._descriptorsMarker.error(\"failed to get descriptors - \" + err);\n        });\n    }\n    _handleWindowFrameColorChanged(win) {\n        if (!win.activityId) {\n            return;\n        }\n        const act = this._activities.getByName(win.activityId);\n        if (!act) {\n            return;\n        }\n        if (!act.owner) {\n            return;\n        }\n        if (act.owner.underlyingWindow.id !== win.id) {\n            return;\n        }\n        this._frameColorChangesCallbacks.forEach((callback) => {\n            try {\n                callback(act, win.frameColor);\n            }\n            catch (e) {\n                return;\n            }\n        });\n    }\n}\n\nclass ActivityManagementAPI {\n    constructor(manager, my) {\n        this._m = manager;\n        this._my = my;\n        this.activityTypes = {\n            get: this._getActivityTypesWrapper.bind(this),\n            register: this._m.registerActivityType.bind(this._m),\n            unregister: this._m.unregisterActivityType.bind(this._m),\n            subscribe: this._m.subscribeActivityTypeEvents.bind(this._m),\n            unsubscribe: undefined,\n            initiate: this._m.initiate.bind(this._m)\n        };\n        this.windowTypes = {\n            get: this._getWindowTypesWrapper.bind(this),\n            registerFactory: this._m.registerWindowFactory.bind(this._m),\n            unregisterFactory: this._m.unregisterWindowFactory.bind(this._m),\n            subscribe: this._m.subscribeWindowTypeEvents.bind(this._m),\n            unsubscribe: undefined\n        };\n        this.windows = {\n            get: this._m.getWindows.bind(this._m),\n            subscribe: this._m.subscribeWindowEvents.bind(this._m),\n            announce: this._m.announceWindow.bind(this._m),\n            unsubscribe: undefined,\n            create: this._m.createWindow.bind(this._m)\n        };\n        this.instances = {\n            get: this._m.getActivities.bind(this._m),\n            subscribe: this._m.subscribeActivityEvents.bind(this._m),\n            unsubscribe: undefined\n        };\n    }\n    onAttached(callback) {\n        this._m.subscribeActivitiesAttached(callback);\n    }\n    onDetached(callback) {\n        this._m.subscribeActivitiesDetached(callback);\n    }\n    onActivityFrameColorChanged(callback) {\n        this._m.subscribeActivityFrameColorChanged(callback);\n    }\n    _getActivityTypesWrapper(name) {\n        if (isUndefined(name)) {\n            return this._m.getActivityTypes();\n        }\n        return this._m.getActivityType(name);\n    }\n    _getWindowTypesWrapper(name) {\n        if (isUndefined(name)) {\n            return this._m.getWindowTypes();\n        }\n        return this._m.getWindowType(name);\n    }\n}\n\nclass ActivityAPI {\n    constructor(manager, my) {\n        this._mgr = manager;\n        this._my = my;\n        this.all = new ActivityManagementAPI(manager, my);\n    }\n    ready(callback) {\n        const promise = new Promise((resolve, reject) => {\n            this._mgr.ready()\n                .then(() => {\n                resolve(this);\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        });\n        return nodeify(promise, callback);\n    }\n    get my() {\n        return this._my;\n    }\n    get aware() {\n        return this._my.window !== undefined;\n    }\n    get inActivity() {\n        return this.aware && this._my.activity !== undefined;\n    }\n    get agm() {\n        if (!this.aware) {\n            return undefined;\n        }\n        if (!this.inActivity) {\n            return new ActivityAGM(null);\n        }\n        return this._my.activity.agm;\n    }\n    getAvailableFrameColors() {\n        return [];\n    }\n}\n\nclass ActivityModule {\n    static checkIsUsingGW3Implementation(connection) {\n        return connection.protocolVersion === 3;\n    }\n    get api() {\n        return this._api;\n    }\n    set api(value) {\n        this._api = value;\n    }\n    constructor(config) {\n        if (!config) {\n            throw new Error(\"config can not be null\");\n        }\n        if (!isUndefined(config.logLevel)) {\n            Logger.Level = config.logLevel;\n        }\n        if (!isUndefinedOrNull(config.logger)) {\n            Logger.GlueLogger = config.logger;\n        }\n        let bridge;\n        this._isUsingHCImplementation = config.gdMajorVersion === 2;\n        this._isUsingGW3Implementation = ActivityModule.checkIsUsingGW3Implementation(config.connection);\n        if (this._isUsingHCImplementation) {\n            throw new Error(\"GD2 not supported\");\n        }\n        else if (this._isUsingGW3Implementation) {\n            bridge = new GW3Bridge(config);\n        }\n        else {\n            throw new Error(\"Unable to instantiate activity bridge implementation\");\n        }\n        if (!bridge) {\n            throw new Error(\"A bridge to native activity is needed to create activity lib.\");\n        }\n        ActivityAGM.AGM = config.agm;\n        const activityManager = new ActivityManager(bridge, !config.disableAutoAnnounce, config.windows);\n        const my = new ActivityMy(activityManager, config.windows);\n        this._api = new ActivityAPI(activityManager, my);\n        this._readyPromise = activityManager.ready().then((_) => this);\n    }\n    get isUsingHCImplementation() {\n        return this._isUsingHCImplementation;\n    }\n    get isUsingGW3Implementation() {\n        return this._isUsingGW3Implementation;\n    }\n    ready(callback) {\n        return nodeify(this._readyPromise, callback);\n    }\n}\n\nconst ShutdownMethodName = \"T42.ACS.Shutdown\";\nconst OnGDShutdownMethodName = \"T42.ACS.OnGDShutdown\";\nconst RestartMethodName = \"T42.ACS.Restart\";\nconst GetConfigurationRegionMethodName = \"T42.ACS.GetConfigurationRegion\";\nconst SetConfigurationRegionMethodName = \"T42.ACS.SetConfigurationRegion\";\nconst GetUserMethodName = \"T42.ACS.GetUser\";\nconst GetBranchesMethodName = \"T42.ACS.GetBranches\";\nconst GetCurrentBranchMethodName = \"T42.ACS.GetCurrentBranch\";\nconst SetCurrentBranchMethodName = \"T42.ACS.SetCurrentBranch\";\nconst GetFunctionalEntitlementMethodName = \"T42.ACS.GetFunctionalEntitlement\";\nconst CanIMethodName = \"T42.ACS.CanI\";\nconst StartApplicationMethodName = \"T42.ACS.StartApplication\";\nconst StopApplicationMethodName = \"T42.ACS.StopApplication\";\nconst ActivateApplicationMethodName = \"T42.ACS.ActivateApplication\";\nconst ACSExecute = \"T42.ACS.Execute\";\nconst OnEventMethodName = \"T42.ACS.OnEvent\";\nconst GetApplicationsMethodName = \"T42.ACS.GetApplications\";\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createRegistry(options) {\n    if (options && options.errorHandling\n        && typeof options.errorHandling !== \"function\"\n        && options.errorHandling !== \"log\"\n        && options.errorHandling !== \"silent\"\n        && options.errorHandling !== \"throw\") {\n        throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\n    }\n    var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\n    var callbacks = {};\n    function add(key, callback, replayArgumentsArr) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            callbacksForKey = [];\n            callbacks[key] = callbacksForKey;\n        }\n        callbacksForKey.push(callback);\n        if (replayArgumentsArr) {\n            setTimeout(function () {\n                replayArgumentsArr.forEach(function (replayArgument) {\n                    var _a;\n                    if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\n                        try {\n                            if (Array.isArray(replayArgument)) {\n                                callback.apply(undefined, replayArgument);\n                            }\n                            else {\n                                callback.apply(undefined, [replayArgument]);\n                            }\n                        }\n                        catch (err) {\n                            _handleError(err, key);\n                        }\n                    }\n                });\n            }, 0);\n        }\n        return function () {\n            var allForKey = callbacks[key];\n            if (!allForKey) {\n                return;\n            }\n            allForKey = allForKey.reduce(function (acc, element, index) {\n                if (!(element === callback && acc.length === index)) {\n                    acc.push(element);\n                }\n                return acc;\n            }, []);\n            if (allForKey.length === 0) {\n                delete callbacks[key];\n            }\n            else {\n                callbacks[key] = allForKey;\n            }\n        };\n    }\n    function execute(key) {\n        var argumentsArr = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            argumentsArr[_i - 1] = arguments[_i];\n        }\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey || callbacksForKey.length === 0) {\n            return [];\n        }\n        var results = [];\n        callbacksForKey.forEach(function (callback) {\n            try {\n                var result = callback.apply(undefined, argumentsArr);\n                results.push(result);\n            }\n            catch (err) {\n                results.push(undefined);\n                _handleError(err, key);\n            }\n        });\n        return results;\n    }\n    function _handleError(exceptionArtifact, key) {\n        var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\n        if (_userErrorHandler) {\n            _userErrorHandler(errParam);\n            return;\n        }\n        var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\n        if (options) {\n            switch (options.errorHandling) {\n                case \"log\":\n                    return console.error(msg);\n                case \"silent\":\n                    return;\n                case \"throw\":\n                    throw new Error(msg);\n            }\n        }\n        console.error(msg);\n    }\n    function clear() {\n        callbacks = {};\n    }\n    function clearKey(key) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            return;\n        }\n        delete callbacks[key];\n    }\n    return {\n        add: add,\n        execute: execute,\n        clear: clear,\n        clearKey: clearKey\n    };\n}\ncreateRegistry.default = createRegistry;\nvar lib = createRegistry;\n\n\nvar CallbackRegistryFactory = /*@__PURE__*/getDefaultExportFromCjs(lib);\n\nfunction objectValues(source) {\n    if (!source) {\n        return [];\n    }\n    return Object.keys(source).map((key) => source[key]);\n}\nfunction objectClone(obj) {\n    let result;\n    try {\n        result = JSON.parse(JSON.stringify(obj || {}));\n    }\n    catch (error) {\n        result = {};\n    }\n    return result;\n}\nfunction validate(callback, configuration) {\n    if (configuration.throwErrors) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n    }\n}\n\nclass ApplicationImpl {\n    constructor(_appManager, _name, _agm, _configuration) {\n        this._appManager = _appManager;\n        this._name = _name;\n        this._agm = _agm;\n        this._configuration = _configuration;\n        this._registry = CallbackRegistryFactory();\n        _appManager.onInstanceStarted((instance) => {\n            if (instance.application && instance.application.name !== this._name) {\n                return;\n            }\n            this._registry.execute(\"instanceStarted\", instance);\n        });\n        _appManager.onInstanceStopped((instance) => {\n            if (instance.application && instance.application.name !== this._name) {\n                return;\n            }\n            this._registry.execute(\"instanceStopped\", instance);\n        });\n        _appManager.onAppRemoved((app) => {\n            if (app.name !== this._name) {\n                return;\n            }\n            this._registry.execute(\"appRemoved\", app);\n        });\n        _appManager.onAppChanged((app) => {\n            if (app.name !== this._name) {\n                return;\n            }\n            this._registry.execute(\"appChanged\", app);\n        });\n        _appManager.onAppAvailable((app) => {\n            if (app.name !== this._name) {\n                return;\n            }\n            this._props.IsReady = true;\n            this._registry.execute(\"appAvailable\", app);\n        });\n        _appManager.onAppUnavailable((app) => {\n            if (app.name !== this._name) {\n                return;\n            }\n            this._props.IsReady = false;\n            this._registry.execute(\"appUnavailable\", app);\n        });\n    }\n    get name() { return this._name; }\n    get title() { return this._props.Title; }\n    get version() { return this._props.Version; }\n    get autoStart() { return this._props.AutoStart; }\n    get isShell() { return this._props.IsShell; }\n    get caption() { return this._props.Caption; }\n    get hidden() { return this._props.IsHidden; }\n    get container() { return this._props.ApplicationName; }\n    get activityType() { return this._props.ActivityType; }\n    get activityWindowType() { return this._props.ActivityWindowType; }\n    get windowSettings() {\n        if (!this._props.Arguments) {\n            return {};\n        }\n        return objectClone(this._props.Arguments);\n    }\n    get allowMultiple() { return this._props.AllowMultiple; }\n    get available() { return this._props.IsReady || true; }\n    get icon() { return this._props.Icon; }\n    get iconURL() { return this._props.IconUrl; }\n    get sortOrder() { return this._props.SortOrder; }\n    get userProperties() {\n        if (!this._props.UserProperties) {\n            return {};\n        }\n        return objectClone(this._props.UserProperties);\n    }\n    get keywords() {\n        if (!this._props.Keywords) {\n            return [];\n        }\n        return this._props.Keywords;\n    }\n    get isActivity() {\n        return this._props.ActivityType !== undefined && this._props.ActivityType !== \"\";\n    }\n    get configuration() {\n        return {\n            autoStart: this._props.AutoStart,\n            caption: this._props.Caption,\n            hidden: this._props.IsHidden,\n            container: this._props.ApplicationName,\n            activityType: this._props.ActivityType,\n            allowMultiple: this._props.AllowMultiple\n        };\n    }\n    get instances() {\n        return this._appManager.instances().filter((instance) => instance.application.name === this._name);\n    }\n    get type() {\n        return this._props.Type;\n    }\n    get mode() {\n        if (!this._props) {\n            return \"unknown\";\n        }\n        if (this._props.Mode && typeof this._props.Mode === \"string\") {\n            return this._props.Mode.toLowerCase();\n        }\n        if (this.isActivity) {\n            return \"unknown\";\n        }\n        if (this._props.Arguments && this._props.Arguments.mode && typeof this._props.Arguments.mode === \"string\") {\n            return this._props.Arguments.mode.toLowerCase();\n        }\n        let styleAttributes = this._props.WindowStyleAttributes;\n        if (styleAttributes) {\n            styleAttributes = styleAttributes.split(\" \").join(\"\");\n            const searchFor = \"mode:\\\"\";\n            const modeIndex = styleAttributes.indexOf(searchFor);\n            if (modeIndex !== -1) {\n                const startModeIndex = modeIndex + searchFor.length;\n                const stopModeIndex = styleAttributes.indexOf(\"\\\"\", startModeIndex);\n                const style = styleAttributes.substr(startModeIndex, stopModeIndex - startModeIndex);\n                if (style && typeof style === \"string\") {\n                    return style.toLowerCase();\n                }\n            }\n        }\n        return \"flat\";\n    }\n    async getConfiguration() {\n        const result = await this._agm.invoke(GetApplicationsMethodName, { v2: { apps: [this._name] } });\n        const config = result.returned.applications[0];\n        return config;\n    }\n    updateFromProps(props) {\n        if (!this._props) {\n            this._props = { Name: props.Name };\n        }\n        Object.keys(props).forEach((key) => {\n            this._props[key] = props[key];\n        });\n    }\n    start(context, options) {\n        return new Promise(async (resolve, reject) => {\n            var _a, _b, _c, _d, _e;\n            if (isUndefinedOrNull(context)) {\n                context = {};\n            }\n            else if (((_a = this._configuration()) === null || _a === void 0 ? void 0 : _a.throwErrors) && typeof context !== \"object\" || Array.isArray(context)) {\n                return reject(new Error(`Invalid \"context\" parameter - must be an object.`));\n            }\n            if (isUndefinedOrNull(options)) {\n                options = {};\n            }\n            else if (((_b = this._configuration()) === null || _b === void 0 ? void 0 : _b.throwErrors) && typeof options !== \"object\") {\n                return reject(new Error(`Invalid \"options\" parameter - must be an object.`));\n            }\n            const name = this._name;\n            let waitForAGMInstance = (_d = ((_c = options.awaitInterop) !== null && _c !== void 0 ? _c : options.waitForAGMReady)) !== null && _d !== void 0 ? _d : true;\n            let startTimeout = 60000;\n            if (typeof options.timeout === \"number\") {\n                startTimeout = options.timeout * 1000;\n            }\n            const waitForApplicationInstance = (id) => {\n                let unsub;\n                const timeout = setTimeout(() => {\n                    if (unsub) {\n                        unsub();\n                    }\n                    reject(`timed out while waiting for instance id ${id} for app ${this.name}`);\n                }, startTimeout);\n                const waitFunc = (i) => {\n                    if (i.id !== id) {\n                        return;\n                    }\n                    if (unsub) {\n                        unsub();\n                        unsub = undefined;\n                    }\n                    clearTimeout(timeout);\n                    resolve(i);\n                };\n                if (waitForAGMInstance) {\n                    unsub = this._appManager.onInstanceAgmServerReady(waitFunc);\n                }\n                else {\n                    unsub = this._appManager.onInstanceStarted(waitFunc);\n                }\n            };\n            try {\n                const result = await this._agm.invoke(StartApplicationMethodName, {\n                    Name: name,\n                    Context: context,\n                    Options: options\n                }, \"best\", {\n                    methodResponseTimeoutMs: startTimeout\n                });\n                const acsResult = result.returned;\n                if (typeof acsResult.timeout !== \"undefined\" && typeof options.timeout === \"undefined\") {\n                    startTimeout = acsResult.timeout * 1000;\n                }\n                if (typeof acsResult.waitForInterop !== \"undefined\" && (typeof options.waitForAGMReady === \"undefined\" && typeof options.awaitInterop === \"undefined\")) {\n                    waitForAGMInstance = acsResult.waitForInterop;\n                }\n                if (acsResult && acsResult.Id) {\n                    if (this._appManager.mode === \"startOnly\") {\n                        const instance = this._appManager.handleInstanceStarted({\n                            ActivityId: undefined,\n                            IsActivityOwner: undefined,\n                            Context: undefined,\n                            Title: undefined,\n                            AgmServers: undefined,\n                            Id: acsResult.Id,\n                            Name: acsResult.Name,\n                        });\n                        resolve(instance);\n                    }\n                    else {\n                        waitForApplicationInstance(acsResult.Id);\n                    }\n                }\n                else {\n                    resolve(undefined);\n                }\n            }\n            catch (error) {\n                reject((_e = error.message) !== null && _e !== void 0 ? _e : error);\n            }\n        });\n    }\n    onInstanceStarted(callback) {\n        validate(callback, this._configuration());\n        return this._registry.add(\"instanceStarted\", callback);\n    }\n    onInstanceStopped(callback) {\n        validate(callback, this._configuration());\n        return this._registry.add(\"instanceStopped\", callback);\n    }\n    onAvailable(callback) {\n        validate(callback, this._configuration());\n        if (this._props.IsReady) {\n            setTimeout(() => {\n                this._registry.execute(\"appAvailable\", this);\n            }, 0);\n        }\n        return this._registry.add(\"appAvailable\", callback);\n    }\n    onUnavailable(callback) {\n        validate(callback, this._configuration());\n        if (this._props.IsReady === false) {\n            setTimeout(() => {\n                this._registry.execute(\"appUnavailable\", this);\n            }, 0);\n        }\n        return this._registry.add(\"appUnavailable\", callback);\n    }\n    onChanged(callback) {\n        validate(callback, this._configuration());\n        this._registry.add(\"appChanged\", callback);\n    }\n    onRemoved(callback) {\n        validate(callback, this._configuration());\n        this._registry.add(\"appRemoved\", callback);\n    }\n}\n\nclass InstanceImpl {\n    constructor(_id, _appName, _appManager, _agm, _activities, _windows, startFailed, _configuration) {\n        this._id = _id;\n        this._appName = _appName;\n        this._appManager = _appManager;\n        this._agm = _agm;\n        this._activities = _activities;\n        this._windows = _windows;\n        this._configuration = _configuration;\n        this._registry = CallbackRegistryFactory();\n        if (startFailed) {\n            return;\n        }\n        this._unsubscribeInstanceStopped = this._appManager.onInstanceStopped((instance) => {\n            if (instance.id !== this._id) {\n                return;\n            }\n            this._registry.execute(\"stopped\", instance);\n        });\n        this._unsubscribeInstanceAgmServerReady = this._appManager.onInstanceAgmServerReady((instance) => {\n            if (instance.id !== this._id) {\n                return;\n            }\n            this._registry.execute(\"agmReady\", instance);\n        });\n    }\n    get id() { return this._id; }\n    get application() { return this._appManager.application(this._appName); }\n    get activity() {\n        if (!this._activities) {\n            throw new Error(\"This method requires glue.activities library to be enabled.\");\n        }\n        return this._activities.all.instances.get()\n            .filter((activityInstance) => activityInstance.id === this._activityId)[0];\n    }\n    get isActivityOwner() { return this._isActivityOwner; }\n    get activityInstances() {\n        return this._appManager.instances().filter((i) => i.application.type !== \"activity\" &&\n            i.activityId &&\n            i.activityId === this._activityId);\n    }\n    get activityOwnerInstance() {\n        if (!this._activityId) {\n            return undefined;\n        }\n        return this.activityInstances.filter((inst) => inst === null || inst === void 0 ? void 0 : inst.isActivityOwner)[0];\n    }\n    get window() {\n        if (!this._windows) {\n            throw new Error(\"This method requires glue.windows library to be enabled.\");\n        }\n        let win = this._windows.list().filter((w) => w.id === this._id)[0];\n        if (!win && this._activities && this.activity && this.activityOwnerInstance) {\n            win = this.activityOwnerInstance.window;\n        }\n        return win;\n    }\n    get context() {\n        var _a, _b, _c;\n        return (_c = (_a = this._startUpContext) !== null && _a !== void 0 ? _a : (_b = this.window) === null || _b === void 0 ? void 0 : _b.context) !== null && _c !== void 0 ? _c : {};\n    }\n    get title() { return this._title; }\n    get isActivityInstance() { return this._isActivityInstance; }\n    get activityId() { return this._activityId; }\n    get inActivity() { return this._inActivity; }\n    get isSingleWindowApp() { return !this._inActivity; }\n    get agm() {\n        return this._agmInstance;\n    }\n    get interopInstance() {\n        return this._agmInstance;\n    }\n    onInteropReady(callback) {\n        validate(callback, this._configuration());\n        if (this._agmInstance) {\n            setTimeout(() => {\n                this._registry.execute(\"agmReady\", this);\n            }, 0);\n        }\n        return this._registry.add(\"agmReady\", callback);\n    }\n    onAgmReady(callback) {\n        return this.onInteropReady(callback);\n    }\n    onStopped(callback) {\n        validate(callback, this._configuration());\n        return this._registry.add(\"stopped\", callback);\n    }\n    getWindow() {\n        return new Promise((resolve, reject) => {\n            const result = this.window;\n            if (result) {\n                resolve(result);\n                return;\n            }\n            const done = (error, window) => {\n                if (error) {\n                    reject(error);\n                }\n                if (window) {\n                    resolve(window);\n                }\n                setTimeout(() => {\n                    clearTimeout(timeout);\n                    unsub();\n                }, 0);\n            };\n            const timeout = setTimeout(() => {\n                done(new Error(`can not find a window with id ${this._id}`));\n            }, 30000);\n            const unsub = this._windows.onWindowAdded((w) => {\n                if (w.id === this._id) {\n                    done(undefined, w);\n                }\n            });\n        });\n    }\n    updateFromProps(props) {\n        this._startUpContext = props.Context;\n        this._title = props.Title;\n        this._isActivityInstance = false;\n        if (props.ActivityId && props.ActivityId !== \"\") {\n            this._activityId = props.ActivityId;\n            this._isActivityInstance = true;\n        }\n        this._isActivityOwner = props.IsActivityOwner;\n        if (!this._activityId && this._startUpContext && this._startUpContext.activityId) {\n            this._activityId = this._startUpContext.activityId;\n        }\n        this._inActivity = Boolean(this._activityId);\n        this.updateAgmInstanceFromProps(props);\n    }\n    updateAgmInstanceFromProps(props) {\n        if (!props.AgmServers) {\n            return;\n        }\n        const agmInstances = props.AgmServers;\n        if (agmInstances && agmInstances.length > 0 && !isUndefinedOrNull(agmInstances[0])) {\n            this._agmInstance = agmInstances[0];\n        }\n    }\n    stop() {\n        return new Promise((resolve, reject) => {\n            let idToResolve = this._id;\n            if (this.isActivityOwner) {\n                idToResolve = this.activityId;\n            }\n            const unsubscribe = this._appManager.onInstanceStopped((instance) => {\n                if (instance.id === idToResolve) {\n                    unsubscribe();\n                    resolve();\n                }\n            });\n            this._agm.invoke(StopApplicationMethodName, {\n                Name: this._appName,\n                Id: this._id\n            })\n                .then(() => {\n                if (this._appManager.mode === \"startOnly\") {\n                    this._appManager.handleInstanceStopped({\n                        Name: this._appName,\n                        Id: this.id\n                    });\n                    resolve();\n                }\n            })\n                .catch((err) => reject(err));\n        });\n    }\n    activate() {\n        return this._agm.invoke(ActivateApplicationMethodName, { Name: this._appName, Id: this._id });\n    }\n    done() {\n        this._registry.clear();\n        this._unsubscribeInstanceAgmServerReady();\n        this._unsubscribeInstanceStopped();\n    }\n    getContext() {\n        return Promise.resolve(this.context);\n    }\n    async startedBy() {\n        const result = await this._agm.invoke(ACSExecute, { command: \"getStartedBy\", Name: this._appName, Id: this._id });\n        return result.returned;\n    }\n}\n\nclass AppManagerImpl {\n    constructor(mode, _agm, _activities, _windows, _logger, _gdMajorVersion, _configuration) {\n        this.mode = mode;\n        this._agm = _agm;\n        this._activities = _activities;\n        this._windows = _windows;\n        this._logger = _logger;\n        this._gdMajorVersion = _gdMajorVersion;\n        this._configuration = _configuration;\n        this._apps = {};\n        this._instances = [];\n        this._registry = CallbackRegistryFactory();\n        this.getConfigurations = async (apps) => {\n            const args = {\n                v2: {\n                    apps: undefined\n                }\n            };\n            if (Array.isArray(apps)) {\n                args.v2 = {\n                    apps\n                };\n            }\n            const result = await this._agm.invoke(GetApplicationsMethodName, args);\n            return result.returned.applications;\n        };\n        this.application = (name) => {\n            var _a;\n            if (((_a = this._configuration()) === null || _a === void 0 ? void 0 : _a.throwErrors) && typeof name !== \"string\") {\n                throw new Error(`\"name\" must be string`);\n            }\n            return this._apps[name];\n        };\n        this.applications = () => {\n            return Object.keys(this._apps).map((k) => this._apps[k]);\n        };\n        this.instances = () => {\n            return this._instances.map((i) => i);\n        };\n        this.getMyInstance = () => {\n            const glue42gd = typeof window !== \"undefined\" && window.glue42gd;\n            if (glue42gd) {\n                if (this._gdMajorVersion >= 3) {\n                    const instanceId = glue42gd.appInstanceId;\n                    return this._instances.find((i) => i.id === instanceId);\n                }\n            }\n            else {\n                const instanceId = this._agm.instance.instance;\n                return this._instances.find((i) => i.id === instanceId);\n            }\n            return undefined;\n        };\n        this.getMyApplication = () => {\n            var _a;\n            if (this._agm.instance) {\n                return (_a = this.application(this._agm.instance.applicationName)) !== null && _a !== void 0 ? _a : this.application(this._agm.instance.application);\n            }\n        };\n        this.handleSnapshotAppsAdded = (newApps) => {\n            const currentApps = this.applications();\n            if (currentApps.length > 0) {\n                currentApps.forEach((item) => {\n                    const name = item.name;\n                    const alreadyExists = newApps.find((i) => i.Name === item.name);\n                    if (!alreadyExists) {\n                        this.handleAppRemoved({ Name: name });\n                    }\n                });\n            }\n            newApps.forEach((item) => {\n                const alreadyExists = currentApps.find((i) => i.name === item.Name);\n                if (!alreadyExists) {\n                    this.handleAppAdded(item);\n                }\n            });\n        };\n        this.handleSnapshotInstanceStarted = (newInstances) => {\n            const currentInstances = this.instances();\n            if (currentInstances.length > 0) {\n                currentInstances.forEach((item) => {\n                    const id = item.id;\n                    const alreadyExists = newInstances.find((i) => i.Id === id);\n                    if (!alreadyExists) {\n                        this.handleInstanceStopped({ Name: item.application.name, Id: id });\n                    }\n                });\n            }\n            newInstances.forEach((item) => {\n                const alreadyExists = currentInstances.find((i) => i.id === item.Id);\n                if (!alreadyExists) {\n                    this.handleInstanceStarted(item);\n                }\n            });\n        };\n        this.handleAppAdded = (props) => {\n            const id = this._getAppId(props);\n            this._logger.trace(`adding app ${id}`);\n            this._apps[id] = new ApplicationImpl(this, id, this._agm, this._configuration);\n            const app = this._updateAppFromProps(props);\n            this._registry.execute(\"appAdded\", app);\n            this._registry.execute(\"appAvailable\", app);\n        };\n        this.handleAppUpdated = (props) => {\n            const app = this._updateAppFromProps(props);\n            this._registry.execute(\"appChanged\", app);\n        };\n        this.handleAppRemoved = (props) => {\n            const id = this._getAppId(props);\n            this._logger.trace(`removing app ${id}`);\n            const app = this.application(id);\n            this._instances = this._instances.filter((i) => i.application.name !== app.name);\n            delete this._apps[id];\n            this._registry.execute(\"appRemoved\", app);\n        };\n        this.handleAppReady = (props) => {\n            const id = this._getAppId(props);\n            const app = this._getAppOrThrow(id);\n            app.updateFromProps(props);\n            if (app.available) {\n                this._registry.execute(\"appAvailable\", app);\n            }\n            else {\n                this._registry.execute(\"appUnavailable\", app);\n            }\n        };\n        this.handleInstanceStarted = (props) => {\n            this._logger.trace(`started app ${props.Name} ${props.Id}`);\n            const id = this._getInstanceId(props);\n            const appName = this._getInstanceAppName(props);\n            const instance = new InstanceImpl(id, appName, this, this._agm, this._activities, this._windows, false, this._configuration);\n            this._updateInstanceFromProps(instance, props);\n            this._instances.push(instance);\n            this._registry.execute(\"instanceStarted\", instance);\n            return instance;\n        };\n        this.handleInstanceStopped = (props) => {\n            this._logger.trace(`failed to start app ${props.Name} ${props.Id}`);\n            const id = this._getInstanceId(props);\n            const appName = this._getInstanceAppName(props);\n            const instance = this._getInstanceOrThrow(id, appName);\n            this._instances = this._instances.filter((i) => !this._matchInstance(i, id, appName));\n            this._registry.execute(\"instanceStopped\", instance);\n            instance.done();\n        };\n        this.handleInstanceAgmServerReady = (props) => {\n            const id = this._getInstanceId(props);\n            const appName = this._getInstanceAppName(props);\n            const instance = this._getInstanceOrThrow(id, appName);\n            instance.updateAgmInstanceFromProps(props);\n            this._registry.execute(\"instanceAgmServerReady\", instance);\n        };\n        this.handleInstanceStartFailed = (props) => {\n            const id = this._getInstanceId(props);\n            const appName = this._getInstanceAppName(props);\n            const startFailed = true;\n            const instance = new InstanceImpl(id, appName, undefined, undefined, undefined, undefined, startFailed, this._configuration);\n            this._updateInstanceFromProps(instance, props);\n            this._registry.execute(\"instanceStartFailed\", instance);\n        };\n        this.handleInstanceUpdated = (props) => {\n            const id = this._getInstanceId(props);\n            const app = this._getInstanceAppName(props);\n            const instance = this._getInstanceOrThrow(id, app);\n            this._updateInstanceFromProps(instance, props);\n        };\n        this.onInstanceStarted = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"instanceStarted\", callback, this._instances);\n        };\n        this.onInstanceStartFailed = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"instanceStartFailed\", callback);\n        };\n        this.onInstanceStopped = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"instanceStopped\", callback);\n        };\n        this.onInstanceUpdated = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"instanceChanged\", callback);\n        };\n        this.onInstanceAgmServerReady = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"instanceAgmServerReady\", callback);\n        };\n        this.onAppAdded = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"appAdded\", callback, Object.values(this._apps));\n        };\n        this.onAppRemoved = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"appRemoved\", callback);\n        };\n        this.onAppAvailable = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"appAvailable\", callback);\n        };\n        this.onAppUnavailable = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"appUnavailable\", callback);\n        };\n        this.onAppChanged = (callback) => {\n            validate(callback, this._configuration());\n            return this._registry.add(\"appChanged\", callback);\n        };\n    }\n    _getAppOrThrow(id) {\n        const result = this.application(id);\n        if (!result) {\n            throw Error(`app with id ${id} not found`);\n        }\n        return result;\n    }\n    _getAppId(props) {\n        return props.Name;\n    }\n    _matchInstance(instance, id, appName) {\n        return instance.id === id && instance.application.name === appName;\n    }\n    _getInstanceByIdAndName(id, appName) {\n        return this._instances.filter((i) => this._matchInstance(i, id, appName))[0];\n    }\n    _getInstanceOrThrow(id, appName) {\n        const result = this._getInstanceByIdAndName(id, appName);\n        if (!result) {\n            throw Error(`instance with id ${id} not found`);\n        }\n        return result;\n    }\n    _getInstanceId(props) {\n        return props.Id;\n    }\n    _getInstanceAppName(props) {\n        return props.Name;\n    }\n    _updateAppFromProps(props) {\n        const id = this._getAppId(props);\n        this._logger.trace(`updating app with  + ${id}, ${JSON.stringify(props)}`);\n        const app = this._getAppOrThrow(id);\n        app.updateFromProps(props);\n        return app;\n    }\n    _updateInstanceFromProps(instance, props) {\n        this._logger.trace(\"updating instance with \" + this._getInstanceId(props) + \" for app \" + this._getInstanceAppName(props));\n        instance.updateFromProps(props);\n    }\n}\n\nfunction promisify(promise, successCallback, errorCallback) {\n    const isFunction = (arg) => {\n        return !!(arg && arg.constructor && arg.call && arg.apply);\n    };\n    if (!isFunction(successCallback) && !isFunction(errorCallback)) {\n        return promise;\n    }\n    if (!isFunction(successCallback)) {\n        successCallback = () => {\n        };\n    }\n    else if (!isFunction(errorCallback)) {\n        errorCallback = () => {\n        };\n    }\n    return promise.then(successCallback, errorCallback);\n}\nclass EntitlementsImpl {\n    constructor(_agm) {\n        this._agm = _agm;\n        this._registry = CallbackRegistryFactory();\n        this._isMethodRegistered = false;\n        this.handleBranchModified = (branch) => {\n            this._registry.execute(\"branchChanged\", branch);\n        };\n        this.handleBranchesModified = (branches) => {\n            this._registry.execute(\"branchesChanged\", branches);\n        };\n        this.getRegion = (success, error) => {\n            return promisify(this._agmInvoke(GetConfigurationRegionMethodName, (e) => e.returned.Region), success, error);\n        };\n        this.getBranches = (success, error) => {\n            const promise = this._agmInvoke(GetBranchesMethodName, (e) => {\n                const obj = e.returned.Branches;\n                return Object.keys(obj).map((key) => obj[key]);\n            });\n            return promisify(promise, success, error);\n        };\n        this.getCurrentBranch = (success, error) => {\n            const promise = this._agmInvoke(GetCurrentBranchMethodName, (e) => e.returned.Branch, undefined);\n            return promisify(promise, success, error);\n        };\n        this.setRegion = (region, success, error) => {\n            const promise = this._agmInvoke(SetConfigurationRegionMethodName, (e) => e.returned.ResultMessage, { Region: region });\n            return promisify(promise, success, error);\n        };\n        this.setCurrentBranch = (branch, success, error) => {\n            const promise = this._agmInvoke(SetCurrentBranchMethodName, (e) => e.returned.ResultMessage, { Branch: branch });\n            return promisify(promise, success, error);\n        };\n        this.currentUser = (success, error) => {\n            const promise = this._agmInvoke(GetUserMethodName);\n            return promisify(promise, success, error);\n        };\n        this.getFunctionalEntitlement = (funct, success, error) => {\n            const promise = this._agmInvoke(GetFunctionalEntitlementMethodName, (e) => e.returned.Entitlement, { Function: funct });\n            return promisify(promise, success, error);\n        };\n        this.getFunctionalEntitlementBranch = (funct, branch, success, error) => {\n            const promise = this._agmInvoke(GetFunctionalEntitlementMethodName, (e) => e.returned.Entitlement, { Function: funct, Branch: branch });\n            return promisify(promise, success, error);\n        };\n        this.canI = (func, success, error) => {\n            const promise = this._agmInvoke(CanIMethodName, (e) => e.returned.Result, { Function: func });\n            return promisify(promise, success, error);\n        };\n        this.canIBranch = (func, branch, success, error) => {\n            const promise = this._agmInvoke(CanIMethodName, (e) => e.returned.Result, { Function: func, Branch: branch });\n            return promisify(promise, success, error);\n        };\n        this.onBranchesChanged = (callback) => {\n            return this._registry.add(\"branchesChanged\", callback);\n        };\n        this.onBranchChanged = (callback) => {\n            return this._registry.add(\"branchChanged\", callback);\n        };\n        this.exit = (options) => {\n            return this._agmInvoke(ShutdownMethodName, null, options);\n        };\n        this.onShuttingDown = (callback) => {\n            this.registerMethod();\n            return this._registry.add(\"onShuttingDown\", callback);\n        };\n        this.restart = (options) => {\n            return this._agmInvoke(RestartMethodName, null, options);\n        };\n        this._agmInvoke = (method, transformFunction, args) => {\n            args = args || {};\n            return new Promise((resolve, reject) => {\n                const errHandler = (error) => reject(error);\n                this._agm.invoke(method, args)\n                    .then((result) => {\n                    if (!transformFunction) {\n                        transformFunction = (d) => d.returned;\n                    }\n                    resolve(transformFunction(result));\n                })\n                    .catch(errHandler);\n            });\n        };\n    }\n    registerMethod() {\n        if (!this._isMethodRegistered) {\n            this._agm.register(OnGDShutdownMethodName, async (args) => {\n                try {\n                    const results = await Promise.all(this._registry.execute(\"onShuttingDown\", args));\n                    const prevent = results.some((r) => r.prevent);\n                    return { prevent };\n                }\n                catch (error) {\n                }\n            });\n            this._isMethodRegistered = true;\n        }\n    }\n}\n\nfunction snapshot(interop, appManager) {\n    return new Promise((resolve, reject) => {\n        interop.invoke(GetApplicationsMethodName, { skipIcon: true })\n            .then((response) => {\n            var _a;\n            const data = response.returned;\n            const configuration = (_a = response.returned.configuration) !== null && _a !== void 0 ? _a : {};\n            if (!data) {\n                resolve(configuration);\n            }\n            const applications = data.applications;\n            if (!applications) {\n                resolve(configuration);\n            }\n            objectValues(applications).map((item) => appManager.handleAppAdded(item));\n            resolve(configuration);\n        })\n            .catch((err) => reject(`Error getting application snapshot: ${err.message}`));\n    });\n}\n\nconst OnBranchChangedEvent = \"OnBranchChanged\";\nconst OnBranchesModifiedEvent = \"OnBranchesModified\";\nconst OnApplicationAddedEvent = \"OnApplicationAdded\";\nconst OnApplicationRemovedEvent = \"OnApplicationRemoved\";\nconst OnApplicationChangedEvent = \"OnApplicationChanged\";\nconst OnApplicationReadyEvent = \"OnApplicationReady\";\nconst OnApplicationStartedEvent = \"OnApplicationStarted\";\nconst OnApplicationAgmServerReadyEvent = \"OnApplicationAgmServerReady\";\nconst OnApplicationUpdatedEvent = \"OnApplicationUpdated\";\nconst OnApplicationStoppedEvent = \"OnApplicationStopped\";\nconst OnApplicationStartFailedEvent = \"OnApplicationStartFailed\";\n\nfunction createDataSubscription(agm, applications, entitlements, skipIcons) {\n    let subscription;\n    let initiated = false;\n    const start = () => {\n        let resolveFunc;\n        let rejectFunc;\n        const resultPromise = new Promise((resolve, reject) => {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n        agm.subscribe(OnEventMethodName, { arguments: { skipIcon: skipIcons }, waitTimeoutMs: 10000 })\n            .then((s) => {\n            subscription = s;\n            subscription.onData((streamData) => {\n                var _a;\n                const events = streamData.data;\n                const configuration = (_a = events.configuration) !== null && _a !== void 0 ? _a : {};\n                const onApplicationAddedEventArgs = objectValues(events[OnApplicationAddedEvent]);\n                if (streamData.data.isSnapshot) {\n                    applications.handleSnapshotAppsAdded(onApplicationAddedEventArgs);\n                }\n                else {\n                    onApplicationAddedEventArgs.forEach((item) => applications.handleAppAdded(item));\n                }\n                objectValues(events[OnApplicationChangedEvent])\n                    .forEach((item) => applications.handleAppUpdated(item));\n                objectValues(events[OnApplicationRemovedEvent])\n                    .forEach((item) => applications.handleAppRemoved(item));\n                objectValues(events[OnApplicationReadyEvent])\n                    .forEach((item) => applications.handleAppReady(item));\n                const onApplicationStartedEventArgs = objectValues(events[OnApplicationStartedEvent]);\n                if (streamData.data.isSnapshot) {\n                    applications.handleSnapshotInstanceStarted(onApplicationStartedEventArgs);\n                }\n                else {\n                    onApplicationStartedEventArgs.forEach((item) => applications.handleInstanceStarted(item));\n                }\n                objectValues(events[OnApplicationStartFailedEvent])\n                    .forEach((item) => applications.handleInstanceStartFailed(item));\n                objectValues(events[OnApplicationStoppedEvent])\n                    .forEach((item) => applications.handleInstanceStopped(item));\n                objectValues(events[OnApplicationUpdatedEvent])\n                    .forEach((item) => applications.handleInstanceUpdated(item));\n                objectValues(events[OnApplicationAgmServerReadyEvent])\n                    .forEach((item) => applications.handleInstanceAgmServerReady(item));\n                objectValues(events[OnBranchChangedEvent])\n                    .forEach((item) => entitlements.handleBranchModified(item));\n                objectValues(events[OnBranchesModifiedEvent])\n                    .forEach((item) => entitlements.handleBranchesModified(item));\n                if (!initiated) {\n                    initiated = true;\n                    const hasMyAppInSnapShot = onApplicationAddedEventArgs.some((a) => a.Name === agm.instance.application);\n                    const hasMyInstanceInSnapShot = onApplicationStartedEventArgs.some((i) => i.Id === agm.instance.instance);\n                    if (hasMyAppInSnapShot) {\n                        if (hasMyInstanceInSnapShot) {\n                            resolveFunc(configuration);\n                        }\n                        else {\n                            const un = applications.onInstanceStarted((i) => {\n                                if (i.id === agm.instance.instance) {\n                                    un();\n                                    resolveFunc(configuration);\n                                }\n                            });\n                        }\n                    }\n                    else {\n                        resolveFunc(configuration);\n                    }\n                }\n            });\n            subscription.onFailed((err) => rejectFunc(err));\n        })\n            .catch((err) => { var _a; return rejectFunc(`Error subscribing for ${OnEventMethodName} stream. Err: ${(_a = err.message) !== null && _a !== void 0 ? _a : JSON.stringify(err)}`); });\n        return resultPromise;\n    };\n    const stop = () => {\n        if (subscription) {\n            subscription.close();\n        }\n    };\n    return {\n        start,\n        stop\n    };\n}\n\nconst InMemoryStoreCommandMethodName = \"T42.ACS.InMemoryStoreCommand\";\nclass InMemoryStore {\n    constructor(interop) {\n        this.interop = interop;\n    }\n    import(apps, mode) {\n        if (!apps || !Array.isArray(apps)) {\n            return Promise.reject(\"invalid apps argument - should be an array of application definitions\");\n        }\n        if (mode && mode !== \"replace\" && mode !== \"merge\") {\n            return Promise.reject(\"invalid mode argument - should be 'replace' or 'merge'\");\n        }\n        mode = mode !== null && mode !== void 0 ? mode : \"replace\";\n        const command = {\n            command: \"import\",\n            args: {\n                apps,\n                mode\n            }\n        };\n        return this.interop.invoke(InMemoryStoreCommandMethodName, command)\n            .then((r) => r.returned);\n    }\n    export() {\n        return this.interop.invoke(InMemoryStoreCommandMethodName, { command: \"export\" })\n            .then((r) => r.returned.apps);\n    }\n    remove(app) {\n        if (!app || typeof app !== \"string\") {\n            return Promise.reject(\"invalid app name, should be a string value\");\n        }\n        const command = {\n            command: \"remove\",\n            args: {\n                apps: [app]\n            }\n        };\n        return this.interop.invoke(InMemoryStoreCommandMethodName, command).then((r) => r.returned);\n    }\n    clear() {\n        const command = {\n            command: \"clear\"\n        };\n        return this.interop.invoke(InMemoryStoreCommandMethodName, command).then((r) => r.returned);\n    }\n    createAppDef(name, url) {\n        if (!url) {\n            url = \"https://google.com\";\n        }\n        return {\n            name,\n            type: \"window\",\n            title: name,\n            details: {\n                url\n            }\n        };\n    }\n}\n\nvar AppManagerFactory = (config) => {\n    if (!config) {\n        throw Error(\"config not set\");\n    }\n    if (!config.agm) {\n        throw Error(\"config.agm is missing\");\n    }\n    const START_ONLY = \"startOnly\";\n    const SKIP_ICONS = \"skipIcons\";\n    const FULL = \"full\";\n    const mode = config.mode || START_ONLY;\n    if (mode !== START_ONLY && mode !== SKIP_ICONS && mode !== FULL) {\n        throw new Error(`Invalid mode for appManager lib - ${mode} is not supported`);\n    }\n    const activities = config.activities;\n    const agm = config.agm;\n    const logger = config.logger;\n    const windows = config.windows;\n    let configuration = {};\n    const appManager = new AppManagerImpl(mode, agm, activities, windows, logger.subLogger(\"applications\"), config.gdMajorVersion, () => configuration);\n    const entitlements = new EntitlementsImpl(agm);\n    let readyPromise;\n    if (mode === START_ONLY) {\n        readyPromise = snapshot(agm, appManager);\n    }\n    else {\n        const subscription = createDataSubscription(agm, appManager, entitlements, mode === SKIP_ICONS);\n        readyPromise = subscription.start();\n    }\n    const api = {\n        ready: () => readyPromise.then((c) => { configuration = c; }),\n        applications: appManager.applications,\n        application: appManager.application,\n        getConfigurations: appManager.getConfigurations,\n        onAppAdded: appManager.onAppAdded,\n        onAppRemoved: appManager.onAppRemoved,\n        onAppChanged: appManager.onAppChanged,\n        onAppAvailable: appManager.onAppAvailable,\n        onAppUnavailable: appManager.onAppUnavailable,\n        instances: appManager.instances,\n        get myInstance() {\n            return appManager.getMyInstance();\n        },\n        get myApplication() {\n            return appManager.getMyApplication();\n        },\n        onInstanceStarted: appManager.onInstanceStarted,\n        onInstanceStopped: appManager.onInstanceStopped,\n        onInstanceUpdated: appManager.onInstanceUpdated,\n        onInstanceStartFailed: appManager.onInstanceStartFailed,\n        getRegion: entitlements.getRegion,\n        getBranches: entitlements.getBranches,\n        getCurrentBranch: entitlements.getCurrentBranch,\n        getFunctionalEntitlement: entitlements.getFunctionalEntitlement,\n        getFunctionalEntitlementBranch: entitlements.getFunctionalEntitlementBranch,\n        setCurrentBranch: entitlements.setCurrentBranch,\n        setRegion: entitlements.setRegion,\n        currentUser: entitlements.currentUser,\n        canI: entitlements.canI,\n        canIBranch: entitlements.canIBranch,\n        onBranchesChanged: entitlements.onBranchesChanged,\n        exit: entitlements.exit,\n        restart: entitlements.restart,\n        onShuttingDown: entitlements.onShuttingDown,\n        inMemory: new InMemoryStore(agm)\n    };\n    return api;\n};\n\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict';\nlet nanoid = (size = 21) => {\n  let id = '';\n  let i = size;\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0];\n  }\n  return id\n};\n\nclass Utils {\n    static getGDMajorVersion() {\n        if (typeof window === \"undefined\") {\n            return -1;\n        }\n        if (!window.glueDesktop) {\n            return -1;\n        }\n        if (!window.glueDesktop.version) {\n            return -1;\n        }\n        const ver = Number(window.glueDesktop.version.substr(0, 1));\n        return isNaN(ver) ? -1 : ver;\n    }\n    static callbackifyPromise(action, successCallback, errorCallback) {\n        const fail = (error) => {\n            let msg = error;\n            if (error instanceof Error) {\n                msg = error.message;\n            }\n            if (typeof errorCallback === \"function\") {\n                errorCallback(msg);\n                return;\n            }\n            return Promise.reject(msg);\n        };\n        try {\n            return action()\n                .then((result) => {\n                if (typeof successCallback === \"function\") {\n                    successCallback(result);\n                }\n                return result;\n            })\n                .catch((error) => {\n                return fail(error);\n            });\n        }\n        catch (err) {\n            return fail(err);\n        }\n    }\n    static getMonitor(bounds, displays) {\n        const monitorsSortedByOverlap = displays.map((m) => {\n            const { left, top, workingAreaWidth: width, workingAreaHeight: height } = m;\n            const overlap = this.calculateTotalOverlap({ left, top, width, height }, bounds);\n            return {\n                monitor: m,\n                totalOverlap: overlap\n            };\n        }).sort((a, b) => b.totalOverlap - a.totalOverlap);\n        return monitorsSortedByOverlap[0].monitor;\n    }\n    static getDisplayCenterOfScreen(a, currentDisplay, primaryDisplay) {\n        const physicalWidth = a.width / currentDisplay.scaleFactor;\n        const physicalHeight = a.height / currentDisplay.scaleFactor;\n        const physicalDisplayLeft = currentDisplay.workArea.left / primaryDisplay.scaleFactor;\n        const physicalDisplayTop = currentDisplay.workArea.top / primaryDisplay.scaleFactor;\n        const physicalDisplayWidth = currentDisplay.workArea.width / currentDisplay.scaleFactor;\n        const physicalDisplayHeight = currentDisplay.workArea.height / currentDisplay.scaleFactor;\n        const physicalHOffset = Math.max((physicalDisplayWidth - physicalWidth) / 2, 0);\n        const physicalVOffset = Math.max((physicalDisplayHeight - physicalHeight) / 2, 0);\n        const centeredPhysicalLeft = Math.floor(physicalDisplayLeft + physicalHOffset);\n        const centeredPhysicalTop = Math.floor(physicalDisplayTop + physicalVOffset);\n        const left = centeredPhysicalLeft * primaryDisplay.scaleFactor;\n        const top = centeredPhysicalTop * primaryDisplay.scaleFactor;\n        return {\n            left,\n            top,\n            width: a.width,\n            height: a.height\n        };\n    }\n    static isNode() {\n        if (typeof Utils._isNode !== \"undefined\") {\n            return Utils._isNode;\n        }\n        if (typeof window !== \"undefined\") {\n            Utils._isNode = false;\n            return false;\n        }\n        try {\n            Utils._isNode = Object.prototype.toString.call(global.process) === \"[object process]\";\n        }\n        catch (e) {\n            Utils._isNode = false;\n        }\n        return Utils._isNode;\n    }\n    static generateId() {\n        return nanoid(10);\n    }\n    static calculateTotalOverlap(r1, r2) {\n        const r1x = r1.left;\n        const r1y = r1.top;\n        const r1xMax = r1x + r1.width;\n        const r1yMax = r1y + r1.height;\n        const r2x = r2.left;\n        const r2y = r2.top;\n        const r2xMax = r2x + r2.width;\n        const r2yMax = r2y + r2.height;\n        const xOverlap = Math.max(0, Math.min(r1xMax, r2xMax) - Math.max(r1x, r2x));\n        const yOverlap = Math.max(0, Math.min(r1yMax, r2yMax) - Math.max(r1y, r2y));\n        return xOverlap * yOverlap;\n    }\n}\n\nconst T42JumpListAction = \"T42.JumpList.Action\";\nclass JumpListManager {\n    constructor() {\n        this._groupActionCallbacks = new Map();\n        this._registered = false;\n    }\n    init(executor, agm, logger) {\n        this._executor = executor;\n        this._agm = agm;\n        this._logger = logger;\n        this.registerCallbackMethod();\n    }\n    setEnabled(windowId, enabled) {\n        const settings = {\n            enabled\n        };\n        return this._executor.updateJumpList(windowId, settings);\n    }\n    createCategory(windowId, title, actions) {\n        this.validateActions(title, actions);\n        const settings = {\n            category: {\n                title,\n                operation: \"create\",\n                actions: this.toUpdateActions(windowId, \"create\", title, actions)\n            }\n        };\n        return this._executor.updateJumpList(windowId, settings);\n    }\n    removeCategory(windowId, title) {\n        const settings = {\n            category: {\n                title,\n                operation: \"remove\",\n                actions: []\n            }\n        };\n        this.manageActionCallback(windowId, settings.category.operation, title);\n        return this._executor.updateJumpList(windowId, settings);\n    }\n    createActions(windowId, categoryTitle, actions) {\n        this.validateActions(categoryTitle, actions);\n        const settings = {\n            category: {\n                title: categoryTitle,\n                operation: \"update\",\n                actions: this.toUpdateActions(windowId, \"create\", categoryTitle, actions)\n            }\n        };\n        return this._executor.updateJumpList(windowId, settings);\n    }\n    removeActions(windowId, categoryTitle, actions) {\n        const settings = {\n            category: {\n                title: categoryTitle,\n                operation: \"update\",\n                actions: this.toUpdateActions(windowId, \"remove\", categoryTitle, actions)\n            }\n        };\n        return this._executor.updateJumpList(windowId, settings);\n    }\n    async getActions(windowId, catgoryTitle) {\n        const actions = [];\n        const configuration = await this.getJumpListSettings(windowId);\n        const currentCategory = configuration.categories.find((category) => category.title === catgoryTitle);\n        if (currentCategory) {\n            currentCategory.actions.forEach((action) => {\n                const actionCallback = this.getActionCallback(action.callbackId);\n                if (actionCallback) {\n                    action.callback = actionCallback.callback;\n                }\n                actions.push({\n                    icon: action.icon,\n                    callback: action.callback,\n                    singleInstanceTitle: action.singleInstanceTitle,\n                    multiInstanceTitle: action.multiInstanceTitle\n                });\n            });\n        }\n        return Promise.resolve(actions);\n    }\n    getJumpListSettings(windowId) {\n        return this._executor.getJumpList(windowId);\n    }\n    toUpdateActions(windowId, operation, categoryTitle, actions) {\n        return actions.map((action) => {\n            const updateAction = {\n                icon: action.icon,\n                callback: action.callback,\n                callbackId: Utils.generateId(),\n                singleInstanceTitle: action.singleInstanceTitle,\n                multiInstanceTitle: action.multiInstanceTitle,\n                operation\n            };\n            this.manageActionCallback(windowId, operation, categoryTitle, updateAction);\n            return updateAction;\n        });\n    }\n    manageActionCallback(windowId, operation, categoryTitle, updateAction) {\n        var _a;\n        const groupCallbacksKey = `${categoryTitle}-${windowId}`;\n        if (operation === \"create\") {\n            if (!this._groupActionCallbacks.has(groupCallbacksKey)) {\n                this._groupActionCallbacks.set(groupCallbacksKey, []);\n            }\n            const categoryActionCallbacks = this._groupActionCallbacks.get(groupCallbacksKey);\n            categoryActionCallbacks.push({\n                callbackId: updateAction.callbackId,\n                callback: updateAction.callback\n            });\n        }\n        else if (operation === \"remove\") {\n            if (updateAction) {\n                let categoryActionCallbacks = (_a = this._groupActionCallbacks.get(groupCallbacksKey)) !== null && _a !== void 0 ? _a : [];\n                categoryActionCallbacks = categoryActionCallbacks.filter((accCal) => accCal.callbackId !== updateAction.callbackId);\n                if (categoryActionCallbacks.length === 0) {\n                    this._groupActionCallbacks.delete(groupCallbacksKey);\n                }\n                else {\n                    this._groupActionCallbacks.set(groupCallbacksKey, categoryActionCallbacks);\n                }\n            }\n            else {\n                this._groupActionCallbacks.delete(groupCallbacksKey);\n            }\n        }\n    }\n    registerCallbackMethod() {\n        if (this._registered) {\n            return;\n        }\n        this._registered = true;\n        try {\n            this._agm.register(T42JumpListAction, (args, caller) => {\n                const actionCallback = this.getActionCallback(args.callbackId);\n                if (actionCallback) {\n                    try {\n                        actionCallback.callback();\n                    }\n                    catch (e) {\n                        this._logger.error(\"Unable to execute user callback for jump list action!\", e);\n                    }\n                }\n            });\n        }\n        catch (e) {\n            this._logger.error(`Unable to register method ${T42JumpListAction} for invoking jump list action callbacks!`, e);\n            return Promise.reject(e);\n        }\n    }\n    getActionCallback(callbackId) {\n        let callbackAction;\n        [...this._groupActionCallbacks.values()].forEach((callbacks) => {\n            const callback = callbacks.find((cal) => cal.callbackId === callbackId);\n            if (callback) {\n                callbackAction = callback;\n            }\n        });\n        return callbackAction;\n    }\n    validateActions(category, actions) {\n        if (!(actions && actions.length > 0)) {\n            throw new Error(`Category '${category}' doesn't contain any actions!`);\n        }\n        actions.forEach((action) => {\n            if (!action.singleInstanceTitle) {\n                throw new Error(`Category '${category}' contains an action with undefined singleInstanceTitle!`);\n            }\n            if (!action.multiInstanceTitle) {\n                throw new Error(`Category '${category}' contains an action with undefined multiInstanceTitle!`);\n            }\n            if (!action.callback) {\n                throw new Error(`Category '${category}' contains an action with undefined callback function!`);\n            }\n        });\n    }\n}\nvar jumpListManager = new JumpListManager();\n\nclass WindowStore {\n    constructor() {\n        this.waitForTimeoutInMilliseconds = 60000;\n        this._windows = {};\n        this._pendingWindows = {};\n        this._pendingWindowsStates = {};\n        this._registry = CallbackRegistryFactory();\n    }\n    init(logger) {\n        this._logger = logger;\n    }\n    get(id) {\n        return this._windows[id] || this._pendingWindows[id];\n    }\n    getIfReady(id) {\n        return this._windows[id];\n    }\n    get list() {\n        return this._windows;\n    }\n    add(window) {\n        const isExist = this._pendingWindows[window.API.id] ? true : false;\n        if (isExist) {\n            this._logger.error(`trying to add window with id ${window.API.id} from windowStore, which already exists`);\n            return;\n        }\n        const remote = window.API.windowType === \"remote\";\n        this._pendingWindows[window.API.id] = window;\n        this._pendingWindowsStates[window.API.id] = {\n            ready: false,\n            urlChanged: remote,\n        };\n        this._registry.execute(\"on-added\", window);\n    }\n    remove(window) {\n        delete this._windows[window.API.id];\n        delete this._pendingWindows[window.API.id];\n        delete this._pendingWindowsStates[window.API.id];\n        this._registry.execute(\"on-removed\", window);\n    }\n    setReadyState(windowId) {\n        const targetWindowState = this._pendingWindowsStates[windowId];\n        if (typeof targetWindowState === \"undefined\") {\n            return;\n        }\n        targetWindowState.ready = true;\n        if (targetWindowState.urlChanged) {\n            this.markReadyToShow(windowId);\n        }\n    }\n    setUrlChangedState(windowId) {\n        const targetWindowState = this._pendingWindowsStates[windowId];\n        if (typeof targetWindowState === \"undefined\") {\n            return;\n        }\n        targetWindowState.urlChanged = true;\n        if (targetWindowState.ready) {\n            this.markReadyToShow(windowId);\n        }\n    }\n    setCompositionChangedState(windowId, windowAvailableOnURLChanged) {\n        const targetWindowState = this._pendingWindowsStates[windowId];\n        if (typeof targetWindowState === \"undefined\") {\n            return;\n        }\n        if (windowAvailableOnURLChanged === false) {\n            this.markReadyToShow(windowId);\n        }\n    }\n    waitFor(id) {\n        return new Promise((resolve, reject) => {\n            let unReady;\n            let unRemoved;\n            const timeout = setTimeout(() => {\n                unReady();\n                unRemoved();\n                reject(`Window with id \"${id}\" was not ready within ${this.waitForTimeoutInMilliseconds} milliseconds.`);\n            }, this.waitForTimeoutInMilliseconds);\n            const win = this._windows[id];\n            if (win) {\n                clearTimeout(timeout);\n                resolve(win);\n            }\n            else {\n                const cleanup = () => {\n                    clearTimeout(timeout);\n                    unReady();\n                    unRemoved();\n                };\n                unReady = this.onReadyWindow((w) => {\n                    if (w.API.id !== id) {\n                        return;\n                    }\n                    cleanup();\n                    resolve(w);\n                });\n                unRemoved = this.onRemoved((w) => {\n                    if (w.API.id !== id) {\n                        return;\n                    }\n                    cleanup();\n                    reject(`Window with id \"${id}\" was removed before it became ready.`);\n                });\n            }\n        });\n    }\n    onReadyWindow(callback) {\n        return this._registry.add(\"on-ready\", callback);\n    }\n    onAdded(callback) {\n        return this._registry.add(\"on-added\", callback);\n    }\n    onRemoved(callback) {\n        return this._registry.add(\"on-removed\", callback);\n    }\n    markReadyToShow(windowId) {\n        if (this._pendingWindows[windowId]) {\n            this._windows[windowId] = this._pendingWindows[windowId];\n            delete this._pendingWindows[windowId];\n            delete this._pendingWindowsStates[windowId];\n        }\n        this._registry.execute(\"on-ready\", this._windows[windowId]);\n    }\n}\nvar windowStore = new WindowStore();\n\nclass JumpListActions {\n    constructor(windowId, configuration) {\n        this.windowId = windowId;\n        this._categoryTitle = configuration.title;\n    }\n    list() {\n        return jumpListManager.getActions(this.windowId, this._categoryTitle);\n    }\n    create(actions) {\n        return jumpListManager.createActions(this.windowId, this._categoryTitle, actions);\n    }\n    remove(actions) {\n        return jumpListManager.removeActions(this.windowId, this._categoryTitle, actions);\n    }\n}\n\nclass JumpListCategories {\n    constructor(windowId) {\n        this.windowId = windowId;\n    }\n    list() {\n        return this.getCategories();\n    }\n    create(title, actions) {\n        return jumpListManager.createCategory(this.windowId, title, actions);\n    }\n    remove(title) {\n        return jumpListManager.removeCategory(this.windowId, title);\n    }\n    async find(title) {\n        const categories = await this.getCategories();\n        return categories.find((cat) => cat.title === title);\n    }\n    async getCategories() {\n        const result = [];\n        const configuration = await jumpListManager.getJumpListSettings(this.windowId);\n        configuration.categories.forEach((category) => {\n            result.push({\n                title: category.title,\n                actions: new JumpListActions(this.windowId, category)\n            });\n        });\n        return result;\n    }\n}\n\nclass JumpList {\n    constructor(windowId) {\n        this.windowId = windowId;\n        this._categories = new JumpListCategories(windowId);\n    }\n    get categories() {\n        return this._categories;\n    }\n    async isEnabled() {\n        const configuration = await jumpListManager.getJumpListSettings(this.windowId);\n        return configuration.enabled;\n    }\n    setEnabled(enabled) {\n        return jumpListManager.setEnabled(this.windowId, enabled);\n    }\n}\n\nvar windowFactory = (id, options, executor, logger, appManagerGetter, displayAPIGetter, channelsAPIGetter, agm) => {\n    var _a, _b, _c, _d;\n    const _registry = CallbackRegistryFactory();\n    const getChannels = () => {\n        const channels = channelsAPIGetter();\n        if (!channels) {\n            throw new Error(`To use this method you need to enable channels API - set the channels property to true when initializing the Glue42 library`);\n        }\n        return channels;\n    };\n    const _id = id;\n    const _name = options.name;\n    const _mode = options.mode;\n    let _bounds = options.bounds;\n    let _url = options.url;\n    let _title = options.title;\n    let _context = (_a = options.context) !== null && _a !== void 0 ? _a : {};\n    let _frameColor = options.frameColor;\n    let _focus = options.focus;\n    let _neighbours = (_b = options.neighbours) !== null && _b !== void 0 ? _b : {};\n    let _groupId = options.groupId;\n    let _isGroupHeaderVisible = options.isGroupHeaderVisible;\n    let _isTabHeaderVisible = options.isTabHeaderVisible;\n    let _isGroupHibernated = options.isGroupHibernated;\n    let _isGroupVisible = options.isGroupVisible;\n    let _isTabSelected = (_c = options.isTabSelected) !== null && _c !== void 0 ? _c : false;\n    let _settings = options.settings;\n    const _applicationName = options.applicationName;\n    let _isVisible = options.isVisible;\n    let _isSticky = options.isSticky;\n    let _isCollapsed = options.isCollapsed;\n    let _windowState = options.state;\n    let _tabGroupId = options.tabGroupId;\n    let _tabIndex = options.tabIndex;\n    let _frameId = options.frameId;\n    let _isLocked = options.isLocked;\n    let _allowWorkspaceDrop = options.allowWorkspaceDrop;\n    let _group;\n    let _frameButtons = (_d = options.frameButtons) !== null && _d !== void 0 ? _d : [];\n    let _zoomFactor = options.zoomFactor;\n    let _placementSettings = options.placementSettings;\n    const _jumpList = new JumpList(id);\n    function close(cbOrOptions, error) {\n        if (typeof cbOrOptions === \"undefined\" || typeof cbOrOptions === \"function\") {\n            return Utils.callbackifyPromise(() => {\n                if (!id) {\n                    throw new Error(\"The window is already closed.\");\n                }\n                return executor.close(resultWindow);\n            }, cbOrOptions, error);\n        }\n        else {\n            return executor.close(resultWindow, cbOrOptions);\n        }\n    }\n    function navigate(newUrl, optionsOrCallback, error) {\n        if (typeof optionsOrCallback === \"function\") {\n            return Utils.callbackifyPromise(() => {\n                if (isNullOrWhiteSpace(newUrl)) {\n                    throw new Error(\"The new URL must be a non-empty string.\");\n                }\n                return executor.navigate(resultWindow, newUrl);\n            }, optionsOrCallback, error);\n        }\n        if (isNullOrWhiteSpace(newUrl)) {\n            throw new Error(\"The new URL must be a non-empty string.\");\n        }\n        return executor.navigate(resultWindow, newUrl, optionsOrCallback);\n    }\n    function setStyle(style, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (!style || Object.keys(style).length === 0 || Object.keys(style).every((key) => !key)) {\n                throw new Error(\"Invalid style arguments: \" + JSON.stringify(style));\n            }\n            if (style && style.focus !== undefined) {\n                if (typeof style.focus !== \"boolean\") {\n                    throw new Error(\"Focus must be a boolean value. Currently, only `focus: true` is supported.\");\n                }\n                else if (style.focus === false) {\n                    console.warn(\"`focus: false` is not supported!\");\n                }\n            }\n            if (style && style.hidden !== undefined && typeof style.hidden !== \"boolean\") {\n                throw new Error(\"The `hidden` property must hold a boolean value.\");\n            }\n            for (const prop of [\"minHeight\", \"maxHeight\", \"minWidth\", \"maxWidth\"]) {\n                const styleAsAny = style;\n                const value = styleAsAny[prop];\n                if (prop in style) {\n                    if (isUndefinedOrNull(value)) {\n                        delete styleAsAny[prop];\n                        continue;\n                    }\n                    if (!isNumber(styleAsAny[prop])) {\n                        throw new Error(`\"${prop}\" must be a number`);\n                    }\n                }\n            }\n            return executor.setStyle(resultWindow, style);\n        }, success, error);\n    }\n    function resetButtons(buttons, success, error) {\n        return Utils.callbackifyPromise(() => executor.resetButtons(resultWindow, buttons), success, error);\n    }\n    function getButtons() {\n        return executor.getButtons(resultWindow);\n    }\n    function setOnTop(onTop, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (typeof onTop === \"string\") {\n                if (onTop !== \"always\") {\n                    throw new Error(\"`onTop` must hold a `always` value.\");\n                }\n            }\n            else if (typeof onTop !== \"boolean\") {\n                throw new Error(\"`onTop` must hold a boolean or `always` value.\");\n            }\n            return executor.setOnTop(resultWindow, onTop);\n        }, success, error);\n    }\n    function setSizeConstraints(constraints, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (!constraints || Object.keys(constraints).every((value) => value === undefined)) {\n                throw new Error(\"The properties of `constraints` cannot be null or undefined.\");\n            }\n            return executor.setSizeConstraints(resultWindow, constraints);\n        }, success, error);\n    }\n    function getSizeConstraints() {\n        return executor.getSizeConstraints(resultWindow);\n    }\n    function setTitle(newTitle, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (isUndefinedOrNull(newTitle)) {\n                throw new Error(\"`newTitle` must not be null or undefined.\");\n            }\n            if (newTitle === _title) {\n                return Promise.resolve(resultWindow);\n            }\n            return executor.setTitle(resultWindow, newTitle);\n        }, success, error);\n    }\n    function setSticky(isSticky, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (typeof isSticky !== \"boolean\") {\n                throw new Error(\"`isSticky` must hold a boolean value.\");\n            }\n            return executor.setSticky(resultWindow, isSticky);\n        }, success, error);\n    }\n    function setAllowWorkspaceDrop(allowWorkspaceDrop) {\n        if (typeof allowWorkspaceDrop !== \"boolean\") {\n            throw new Error(\"`allowWorkspaceDrop` must hold a boolean value.\");\n        }\n        return executor.setAllowWorkspaceDrop(resultWindow, allowWorkspaceDrop);\n    }\n    function moveResize(bounds, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (isUndefinedOrNull(bounds)) {\n                throw new Error(\"The properties of `bounds` cannot be null or undefined.\");\n            }\n            return executor.moveResize(resultWindow, bounds);\n        }, success, error);\n    }\n    function addFrameButton(buttonInfo, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (typeof buttonInfo === \"undefined\" || Object.keys(buttonInfo).length === 0) {\n                throw new Error(\"Button info is not available.\");\n            }\n            if (isNullOrWhiteSpace(buttonInfo.buttonId)) {\n                throw new Error(\"`buttonId` must not be null or undefined.\");\n            }\n            if (isNullOrWhiteSpace(buttonInfo.imageBase64)) {\n                throw new Error(\"`imageBase64` must not be null or undefined.\");\n            }\n            return executor.addFrameButton(resultWindow, buttonInfo);\n        }, success, error);\n    }\n    function removeFrameButton(buttonId, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (isNullOrWhiteSpace(buttonId)) {\n                throw new Error(\"`buttonId` must not be null or undefined.\");\n            }\n            return executor.removeFrameButton(resultWindow, buttonId);\n        }, success, error);\n    }\n    function activate(success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (_focus) {\n                return Promise.resolve(resultWindow);\n            }\n            return executor.activate(resultWindow);\n        }, success, error);\n    }\n    function focus(success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (_focus) {\n                return Promise.resolve(resultWindow);\n            }\n            return executor.focus(resultWindow);\n        }, success, error);\n    }\n    function maximizeRestore(success, error) {\n        return Utils.callbackifyPromise(() => {\n            return executor.maximizeRestore(resultWindow);\n        }, success, error);\n    }\n    function maximize(success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (_windowState === \"maximized\") {\n                return Promise.resolve(resultWindow);\n            }\n            return executor.maximize(resultWindow);\n        }, success, error);\n    }\n    function restore(success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (_windowState === \"normal\") {\n                return Promise.resolve(resultWindow);\n            }\n            return executor.restore(resultWindow);\n        }, success, error);\n    }\n    function minimize(success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (_windowState === \"minimized\") {\n                return Promise.resolve(resultWindow);\n            }\n            return executor.minimize(resultWindow);\n        }, success, error);\n    }\n    function collapse(success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (_isCollapsed) {\n                return Promise.resolve(resultWindow);\n            }\n            return executor.collapse(resultWindow);\n        }, success, error);\n    }\n    function expand(success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (!_isCollapsed) {\n                return Promise.resolve(resultWindow);\n            }\n            return executor.expand(resultWindow);\n        }, success, error);\n    }\n    function toggleCollapse(success, error) {\n        return Utils.callbackifyPromise(() => {\n            return executor.toggleCollapse(resultWindow);\n        }, success, error);\n    }\n    function snap(target, direction, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (isUndefinedOrNull(target)) {\n                throw new Error(`A target window is not specified - ${typeof target === \"string\" ? target : JSON.stringify(target)}`);\n            }\n            if (typeof target === \"string\") {\n                const win = windowStore.get(target);\n                if (!win) {\n                    throw new Error(`Invalid \"target\" parameter or no such window. Invoked with: ${target}`);\n                }\n                target = win.API;\n            }\n            if (typeof direction === \"string\") {\n                direction = {\n                    direction,\n                    autoAlign: true\n                };\n            }\n            return executor.snap(resultWindow, target, direction);\n        }, success, error);\n    }\n    function attachTab(tab, opt, success, error) {\n        return Utils.callbackifyPromise(() => {\n            var _a;\n            const errorMessage = `Invalid \"tab\" parameter - must be an object with an \"id\" property or a string. Invoked for source window with ID:`;\n            if (isUndefinedOrNull(tab)) {\n                const errMsg = `${errorMessage} ${typeof tab === \"string\" ? tab : JSON.stringify(tab)}`;\n                throw new Error(errMsg);\n            }\n            let sourceWindow;\n            if (typeof tab === \"string\") {\n                sourceWindow = (_a = windowStore.get(tab)) === null || _a === void 0 ? void 0 : _a.API;\n                if (isUndefinedOrNull(sourceWindow)) {\n                    const errMsg = `${errorMessage} ${typeof sourceWindow === \"string\" ? sourceWindow : JSON.stringify(sourceWindow)}`;\n                    throw new Error(errMsg);\n                }\n            }\n            else if (!isUndefinedOrNull(tab.id)) {\n                sourceWindow = tab;\n            }\n            else {\n                throw new Error(errorMessage);\n            }\n            const attachOptions = {};\n            if (!isUndefinedOrNull(opt)) {\n                if (typeof opt === \"number\") {\n                    attachOptions.index = opt;\n                }\n                else {\n                    attachOptions.selected = opt.selected;\n                    attachOptions.index = opt.index;\n                }\n            }\n            return executor.attachTab(resultWindow, sourceWindow, attachOptions);\n        }, success, error);\n    }\n    function detachTab(opt = {}, success, error) {\n        return Utils.callbackifyPromise(() => {\n            const argsForSend = {};\n            function isDetachRelative(o) {\n                return o.relativeTo !== undefined;\n            }\n            if (isDetachRelative(opt)) {\n                if (typeof opt.relativeTo === \"string\") {\n                    argsForSend.relativeTo = opt.relativeTo;\n                }\n                else if (!isUndefinedOrNull(opt.relativeTo.id)) {\n                    argsForSend.relativeTo = opt.relativeTo.id;\n                }\n                if (!isUndefinedOrNull(opt.relativeDirection)) {\n                    argsForSend.relativeDirection = opt.relativeDirection;\n                }\n                if (!isUndefinedOrNull(opt.width)) {\n                    argsForSend.width = opt.width;\n                }\n                if (!isUndefinedOrNull(opt.height)) {\n                    argsForSend.height = opt.height;\n                }\n            }\n            else {\n                if (!isUndefinedOrNull(opt.bounds)) {\n                    argsForSend.bounds = opt.bounds;\n                }\n            }\n            if (!isUndefinedOrNull(opt.hideTabHeader)) {\n                argsForSend.hideTabHeader = opt.hideTabHeader;\n            }\n            return executor.detachTab(resultWindow, argsForSend);\n        }, success, error);\n    }\n    function setVisible(toBeVisible, success, error) {\n        return Utils.callbackifyPromise(() => {\n            return executor.setVisible(resultWindow, toBeVisible);\n        }, success, error);\n    }\n    async function center(display) {\n        if (display) {\n            validateCenterArguments(display);\n        }\n        return executor.center(resultWindow, display);\n    }\n    function validateCenterArguments(display) {\n        if (typeof display !== \"object\") {\n            throw Error(\"display argument must be a valid display object\");\n        }\n        if (!display.workArea || !display.scaleFactor) {\n            throw Error(\"display argument is not a valid display object\");\n        }\n    }\n    function showLoader(loader) {\n        return executor.showLoader(resultWindow, loader);\n    }\n    function hideLoader() {\n        return executor.hideLoader(resultWindow);\n    }\n    function updateContext(context, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (isUndefinedOrNull(context)) {\n                throw new Error(`\"context\" must not be null or undefined.`);\n            }\n            return executor.updateContext(resultWindow, context, false);\n        }, success, error);\n    }\n    function lock(success, error) {\n        return Utils.callbackifyPromise(() => {\n            return executor.lock(resultWindow);\n        }, success, error);\n    }\n    function unlock(success, error) {\n        return Utils.callbackifyPromise(() => {\n            return executor.unlock(resultWindow);\n        }, success, error);\n    }\n    function getIcon(success, error) {\n        return Utils.callbackifyPromise(() => {\n            return executor.getIcon(resultWindow);\n        }, success, error);\n    }\n    function setIcon(base64Image, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (isNullOrWhiteSpace(base64Image)) {\n                throw new Error(`\"base64Image\" must be a non-empty string.`);\n            }\n            return executor.setIcon(resultWindow, base64Image);\n        }, success, error);\n    }\n    function setFrameColor(frameColor, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (isNullOrWhiteSpace(frameColor)) {\n                throw new Error(`\"frameColor\" must be a non-empty string`);\n            }\n            return executor.setFrameColor(resultWindow, frameColor);\n        }, success, error);\n    }\n    function setTabHeaderVisible(toBeTabHeaderVisible, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (typeof toBeTabHeaderVisible !== \"boolean\") {\n                throw new Error(`\"toBeTabHeaderVisible\" must hold a boolean value.`);\n            }\n            return executor.setTabHeaderVisible(resultWindow, toBeTabHeaderVisible);\n        }, success, error);\n    }\n    async function setTabTooltip(tooltip) {\n        if (isNullOrWhiteSpace(tooltip)) {\n            throw new Error(`\"${tooltip}\" must not be null or undefined`);\n        }\n        return executor.setTabTooltip(resultWindow, tooltip);\n    }\n    async function getTabTooltip() {\n        return executor.getTabTooltip(resultWindow);\n    }\n    function showPopup(config) {\n        return executor.showPopup(resultWindow, config);\n    }\n    function createFlydown(config) {\n        return executor.createFlydown(resultWindow.id, config);\n    }\n    function setModalState(isModal) {\n        return executor.setModalState(resultWindow.id, isModal || false);\n    }\n    function zoomIn(success, error) {\n        return Utils.callbackifyPromise(() => {\n            return executor.zoomIn(resultWindow);\n        }, success, error);\n    }\n    function zoomOut(success, error) {\n        return Utils.callbackifyPromise(() => {\n            return executor.zoomOut(resultWindow);\n        }, success, error);\n    }\n    function setZoomFactor(zoomFactor, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (isNaN(zoomFactor)) {\n                throw new Error(`zoomFactor is not a number`);\n            }\n            return executor.setZoomFactor(resultWindow, zoomFactor);\n        }, success, error);\n    }\n    function showDevTools() {\n        return executor.showDevTools(resultWindow);\n    }\n    function capture(captureOptions) {\n        return executor.capture(resultWindow, captureOptions);\n    }\n    function flash(suppliedOptions, mode) {\n        const flashOptions = {\n            shouldFlash: true,\n            mode: \"auto\"\n        };\n        if (typeof suppliedOptions === \"boolean\") {\n            flashOptions.shouldFlash = suppliedOptions;\n        }\n        if (typeof mode !== \"undefined\") {\n            flashOptions.mode = mode;\n        }\n        return executor.flash(resultWindow, flashOptions);\n    }\n    function flashTab(suppliedOptions) {\n        const flashOptions = {\n            shouldFlash: true,\n        };\n        if (typeof suppliedOptions === \"boolean\") {\n            flashOptions.shouldFlash = suppliedOptions;\n        }\n        return executor.flashTab(resultWindow, flashOptions);\n    }\n    function print(printOptions) {\n        return executor.print(resultWindow, printOptions);\n    }\n    function printToPDF(printToPDFOptions) {\n        return executor.printToPDF(resultWindow, printToPDFOptions);\n    }\n    function ungroup(ungroupOptions) {\n        return new Promise((resolve, reject) => {\n            const unGroupChanged = onGroupChanged((win, newGroup, oldGroup) => {\n                if (id === win.id) {\n                    unGroupChanged();\n                    resolve(resultWindow);\n                }\n            });\n            executor.ungroup(resultWindow, ungroupOptions)\n                .catch((e) => {\n                unGroupChanged();\n                reject(e);\n            });\n        });\n    }\n    function place(placementSettings) {\n        return executor.place(resultWindow, placementSettings);\n    }\n    function refresh(ignoreCache) {\n        return executor.refresh(resultWindow, ignoreCache);\n    }\n    function download(url, opts) {\n        return executor.download(resultWindow, url, opts);\n    }\n    function configure(settings) {\n        return executor.configureWindow(resultWindow, settings);\n    }\n    function getConfiguration() {\n        return executor.getWindowConfiguration(resultWindow);\n    }\n    function getDockingPlacement() {\n        return executor.getDockingPlacement(resultWindow);\n    }\n    function dock(opts) {\n        return executor.dock(resultWindow, opts);\n    }\n    async function clone(cloneOptions) {\n        return executor.clone(resultWindow, cloneOptions);\n    }\n    function onTitleChanged(callback) {\n        if (!isFunction(callback)) {\n            throw new Error(\"callback should be a function\");\n        }\n        callback(resultWindow.title, resultWindow);\n        return onEventCore(\"onTitleChanged\", callback);\n    }\n    function onClose(callback) {\n        if (!isFunction(callback)) {\n            throw new Error(\"callback should be a function\");\n        }\n        if (id === undefined) {\n            callback(resultWindow);\n        }\n        return _registry.add(\"onClose\", callback);\n    }\n    function onUrlChanged(callback) {\n        return onEventCore(\"onUrlChanged\", callback);\n    }\n    function onFrameButtonAdded(callback) {\n        return onEventCore(\"onFrameButtonAdded\", callback);\n    }\n    function onFrameButtonRemoved(callback) {\n        return onEventCore(\"onFrameButtonRemoved\", callback);\n    }\n    function onFrameButtonClicked(callback) {\n        return onEventCore(\"onFrameButtonClicked\", callback);\n    }\n    function onCollapsed(callback) {\n        if (!isFunction(callback)) {\n            throw new Error(\"callback should be a function\");\n        }\n        if (_isCollapsed) {\n            callback(resultWindow);\n        }\n        return _registry.add(\"collapsed\", callback);\n    }\n    function onExpanded(callback) {\n        if (!isFunction(callback)) {\n            throw new Error(\"callback should be a function\");\n        }\n        if (!_isCollapsed) {\n            callback(resultWindow);\n        }\n        return _registry.add(\"expanded\", callback);\n    }\n    function onMaximized(callback) {\n        if (_windowState === \"maximized\") {\n            return onEventCore(\"maximized\", callback, [resultWindow]);\n        }\n        else {\n            return onEventCore(\"maximized\", callback);\n        }\n    }\n    function onMinimized(callback) {\n        if (_windowState === \"minimized\") {\n            return onEventCore(\"minimized\", callback, [resultWindow]);\n        }\n        else {\n            return onEventCore(\"minimized\", callback);\n        }\n    }\n    function onNormal(callback) {\n        if (_windowState === \"normal\") {\n            return onEventCore(\"normal\", callback, [resultWindow]);\n        }\n        else {\n            return onEventCore(\"normal\", callback);\n        }\n    }\n    function onAttached(callback) {\n        return onEventCore(\"attached\", callback);\n    }\n    function onDetached(callback) {\n        return onEventCore(\"detached\", callback);\n    }\n    function onVisibilityChanged(callback) {\n        return onEventCore(\"visibility-changed\", callback);\n    }\n    function onContextUpdated(callback) {\n        return onEventCore(\"context-updated\", callback);\n    }\n    function onLockingChanged(callback) {\n        return onEventCore(\"lock-changed\", callback);\n    }\n    function onBoundsChanged(callback) {\n        return onEventCore(\"bounds-changed\", callback);\n    }\n    function onFocusChanged(callback) {\n        return onEventCore(\"focus-changed\", callback);\n    }\n    function onStickyChanged(callback) {\n        return onEventCore(\"sticky-changed\", callback);\n    }\n    function onFrameColorChanged(callback) {\n        return onEventCore(\"frame-color-changed\", callback);\n    }\n    function onTabHeaderVisibilityChanged(callback) {\n        return onEventCore(\"tab-header-visibility-changed\", callback);\n    }\n    function onWindowAttached(callback) {\n        return onEventCore(\"window-attached\", callback);\n    }\n    function onWindowDetached(callback) {\n        return onEventCore(\"window-detached\", callback);\n    }\n    function onGroupChanged(callback) {\n        return onEventCore(\"group-changed\", callback);\n    }\n    function onTabSelectionChanged(callback) {\n        return onEventCore(\"tab-selection-changed\", callback);\n    }\n    function onClosing(callback) {\n        if (!isFunction(callback)) {\n            throw new Error(\"callback must be a function\");\n        }\n        const callbackWrap = (success, error, prevent) => {\n            const promise = callback(prevent);\n            if (promise === null || promise === void 0 ? void 0 : promise.then) {\n                promise.then(success).catch(error);\n            }\n            else {\n                success();\n            }\n        };\n        return executor.onClosing(callbackWrap, resultWindow);\n    }\n    function onRefreshing(callback) {\n        if (!isFunction(callback)) {\n            throw new Error(\"callback must be a function\");\n        }\n        const callbackWrap = (success, error, prevent) => {\n            const promise = callback(prevent);\n            if (promise === null || promise === void 0 ? void 0 : promise.then) {\n                promise.then(success).catch(error);\n            }\n            else {\n                success();\n            }\n        };\n        return executor.onRefreshing(callbackWrap, resultWindow);\n    }\n    function onNavigating(callback) {\n        if (!isFunction(callback)) {\n            throw new Error(\"callback must be a function\");\n        }\n        const callbackWrap = (success, error, prevent, args) => {\n            const promise = callback(args);\n            if (promise === null || promise === void 0 ? void 0 : promise.then) {\n                promise.then(success).catch(error);\n            }\n            else {\n                success();\n            }\n        };\n        return executor.onNavigating(callbackWrap, resultWindow);\n    }\n    function onZoomFactorChanged(callback) {\n        return onEventCore(\"zoom-factor-changed\", callback);\n    }\n    function onPlacementSettingsChanged(callback) {\n        return onEventCore(\"placementSettingsChanged\", callback);\n    }\n    function onNeighboursChanged(callback) {\n        return onEventCore(\"neighbours-changed\", callback);\n    }\n    function onDockingChanged(callback) {\n        return onEventCore(\"docking-changed\", callback);\n    }\n    function onEventCore(key, callback, replayArguments) {\n        if (!isFunction(callback)) {\n            throw new Error(\"callback must be a function\");\n        }\n        return _registry.add(key, callback, replayArguments);\n    }\n    function goBack() {\n        return executor.goBack(resultWindow);\n    }\n    function goForward() {\n        return executor.goForward(resultWindow);\n    }\n    function startDrag(option) {\n        return executor.startDrag(resultWindow, option);\n    }\n    function showDialog(dialogOptions) {\n        if ((dialogOptions === null || dialogOptions === void 0 ? void 0 : dialogOptions.timerDuration) && isNaN(dialogOptions === null || dialogOptions === void 0 ? void 0 : dialogOptions.timerDuration)) {\n            throw new Error(\"timerDuration must be a number\");\n        }\n        if ((dialogOptions === null || dialogOptions === void 0 ? void 0 : dialogOptions.showTimer) && typeof (dialogOptions === null || dialogOptions === void 0 ? void 0 : dialogOptions.showTimer) !== \"boolean\") {\n            throw new Error(\"showTimer must be a boolean\");\n        }\n        return executor.showDialog(resultWindow, dialogOptions);\n    }\n    function handleUpdate(updated) {\n        _url = updated.url;\n        _title = updated.title;\n        _context = updated.context || {};\n        _bounds = updated.bounds;\n        _frameColor = updated.frameColor;\n        _focus = updated.focus;\n        _neighbours = updated.neighbours || {};\n        _groupId = updated.groupId;\n        _isGroupHeaderVisible = updated.isGroupHeaderVisible;\n        _isTabHeaderVisible = updated.isTabHeaderVisible;\n        _isGroupHibernated = updated.isGroupHibernated;\n        _isGroupVisible = updated.isGroupVisible;\n        _isTabSelected = updated.isTabSelected;\n        _settings = updated.settings;\n        _isVisible = updated.isVisible;\n        _isSticky = updated.isSticky;\n        _isCollapsed = updated.isCollapsed;\n        _windowState = updated.state;\n        _tabGroupId = updated.tabGroupId;\n        _frameId = updated.frameId;\n        _isLocked = updated.isLocked;\n        _allowWorkspaceDrop = updated.allowWorkspaceDrop;\n        _zoomFactor = updated.zoomFactor;\n        _placementSettings = updated.placementSettings;\n    }\n    function handleTitleChanged(newTitle) {\n        _title = newTitle;\n        executor.finished\n            .finally(() => {\n            _registry.execute(\"onTitleChanged\", newTitle, resultWindow);\n        });\n    }\n    function handleUrlChanged(newUrl) {\n        _url = newUrl;\n        _registry.execute(\"onUrlChanged\", newUrl, resultWindow);\n    }\n    function handleVisibilityChanged(isVisible) {\n        if (isVisible === _isVisible) {\n            return;\n        }\n        _isVisible = isVisible;\n        _registry.execute(\"visibility-changed\", resultWindow);\n    }\n    function handleWindowSettingsChanged(settings) {\n        _settings = settings;\n        _registry.execute(\"settings-changed\", resultWindow);\n    }\n    function handleContextUpdated(context) {\n        _context = context;\n        _registry.execute(\"context-updated\", _context, resultWindow);\n    }\n    function handleWindowClose() {\n        if (id === undefined) {\n            return;\n        }\n        _registry.execute(\"onClose\", resultWindow);\n        id = undefined;\n    }\n    function handleFrameButtonAdded(frameButton) {\n        const buttonObj = [\"buttonId\", \"imageBase64\", \"order\", \"tooltip\"].reduce((memo, k) => {\n            memo[k] = frameButton[k];\n            return memo;\n        }, {});\n        const frameButtonsIds = _frameButtons.map((btn) => {\n            return btn.buttonId;\n        });\n        if (frameButtonsIds.indexOf(frameButton.buttonId) === -1) {\n            _frameButtons.push(buttonObj);\n        }\n        _registry.execute(\"onFrameButtonAdded\", buttonObj, resultWindow);\n    }\n    function handleFrameButtonRemoved(frameButtonId) {\n        let button;\n        _frameButtons = _frameButtons.reduce((memo, btn) => {\n            if (btn.buttonId === frameButtonId) {\n                button = btn;\n            }\n            else {\n                memo.push(btn);\n            }\n            return memo;\n        }, []);\n        if (button !== undefined) {\n            _registry.execute(\"onFrameButtonRemoved\", button, resultWindow);\n        }\n    }\n    function handleFrameButtonClicked(frameButton) {\n        const button = _frameButtons.filter((btn) => {\n            return btn.buttonId === frameButton.buttonId;\n        });\n        if (button.length > 0) {\n            _registry.execute(\"onFrameButtonClicked\", button[0], resultWindow);\n        }\n    }\n    async function handleWindowChangeState(state) {\n        if (state === \"collapsed\") {\n            _isCollapsed = true;\n        }\n        else if (state === \"expanded\") {\n            _isCollapsed = false;\n        }\n        else {\n            _windowState = state;\n        }\n        await executor.finished;\n        _registry.execute(state, resultWindow);\n    }\n    function handleFrameIsLockedChanged(isLocked) {\n        _isLocked = isLocked;\n        _registry.execute(\"lock-changed\", resultWindow);\n    }\n    function handleBoundsChanged(bounds) {\n        if (_bounds.top === bounds.top && _bounds.left === bounds.left && _bounds.width === bounds.width && _bounds.height === bounds.height) {\n            return;\n        }\n        _bounds = bounds;\n        _registry.execute(\"bounds-changed\", resultWindow);\n    }\n    function handleFocusChanged(isFocused) {\n        _focus = isFocused;\n        _registry.execute(\"focus-changed\", resultWindow);\n    }\n    function handleIsStickyChanged(isSticky) {\n        _isSticky = isSticky;\n        _registry.execute(\"sticky-changed\", isSticky, resultWindow);\n    }\n    function handleFrameColorChanged(frameColor) {\n        _frameColor = frameColor;\n        _registry.execute(\"frame-color-changed\", resultWindow);\n    }\n    function handleFrameAttached(tabGroupId, frameId, isTabHeaderVisible) {\n        _tabGroupId = tabGroupId;\n        _frameId = frameId;\n        _isTabHeaderVisible = isTabHeaderVisible;\n        _registry.execute(\"frame-attached\", resultWindow);\n    }\n    function handleCompositionChanged(state) {\n        _neighbours = state.neighbors || {};\n        _tabIndex = state.index;\n        _registry.execute(\"neighbours-changed\", _neighbours, resultWindow);\n    }\n    function handleAllowWorkspaceDropChanged(allowWorkspaceDrop) {\n        _allowWorkspaceDrop = allowWorkspaceDrop;\n        _registry.execute(\"allow-workspace-drop-changed\", resultWindow);\n    }\n    function handleGroupHeaderVisibilityChanged(isGroupHeaderVisible) {\n        _isGroupHeaderVisible = isGroupHeaderVisible;\n    }\n    function handleTabHeaderVisibilityChanged(isTabHeaderVisible) {\n        if (_isTabHeaderVisible !== isTabHeaderVisible) {\n            _isTabHeaderVisible = isTabHeaderVisible;\n            _registry.execute(\"tab-header-visibility-changed\", resultWindow);\n        }\n    }\n    async function handleFrameSelectionChanged(newWindow, prevWindow) {\n        let selectedWindow;\n        if (newWindow === id) {\n            _isTabSelected = true;\n            selectedWindow = resultWindow;\n        }\n        else {\n            _isTabSelected = false;\n            selectedWindow = windowStore.get(newWindow) ? windowStore.get(newWindow).API : undefined;\n        }\n        const previousWindow = windowStore.get(prevWindow) ? windowStore.get(prevWindow).API : undefined;\n        await executor.finished;\n        _registry.execute(\"tab-selection-changed\", selectedWindow, previousWindow, resultWindow);\n    }\n    async function handleAttached(newTabGroupId, newFrameId, tabHeaderVisible, isLocked, winsToBeNotified) {\n        _tabGroupId = newTabGroupId;\n        _isTabHeaderVisible = tabHeaderVisible;\n        _frameId = newFrameId;\n        if (typeof isLocked !== \"undefined\") {\n            _isLocked = isLocked;\n        }\n        await executor.finished;\n        winsToBeNotified.forEach((w) => {\n            w.Events.handleWindowAttached(resultWindow);\n        });\n        _registry.execute(\"attached\", resultWindow);\n    }\n    function handleWindowAttached(win) {\n        _registry.execute(\"window-attached\", win);\n    }\n    async function handleDetached(isLocked, winsToBeNotified) {\n        _tabGroupId = undefined;\n        _isTabSelected = false;\n        if (typeof isLocked !== \"undefined\") {\n            _isLocked = isLocked;\n        }\n        await executor.finished;\n        winsToBeNotified.forEach((w) => {\n            w.Events.handleWindowDetached(resultWindow);\n        });\n        _registry.execute(\"detached\", resultWindow);\n    }\n    function handleWindowDetached(win) {\n        _registry.execute(\"window-detached\", win);\n    }\n    function handleZoomFactorChanged(zoomFactor) {\n        _zoomFactor = zoomFactor;\n        _registry.execute(\"zoom-factor-changed\", resultWindow);\n    }\n    function handlePlacementSettingsChanged(placementSettings) {\n        let promise;\n        const copy = placementSettings;\n        if (!copy.display) {\n            promise = Promise.resolve(undefined);\n        }\n        else {\n            const displayAPI = displayAPIGetter();\n            if (!displayAPI) {\n                promise = Promise.resolve(undefined);\n            }\n            else {\n                const index = copy.display - 1;\n                promise = new Promise((resolve, reject) => {\n                    displayAPI.all().then((displays) => {\n                        const display = displays.find((d) => d.index === index);\n                        resolve(display);\n                    }).catch(reject);\n                });\n            }\n        }\n        void promise.then((d) => {\n            copy.display = d;\n            _placementSettings = copy;\n            _registry.execute(\"placementSettingsChanged\", resultWindow);\n        });\n    }\n    function handleDockingChanged(data) {\n        _registry.execute(\"docking-changed\", resultWindow, {\n            docked: data.docked,\n            position: data.position,\n            claimScreenArea: data.claimScreenArea\n        });\n    }\n    function handleGroupChanged(newGroup, oldGroup) {\n        _group = newGroup;\n        _groupId = newGroup === null || newGroup === void 0 ? void 0 : newGroup.id;\n        if (!isUndefinedOrNull(newGroup) && !isUndefinedOrNull(oldGroup)) {\n            _registry.execute(\"group-changed\", resultWindow, newGroup, oldGroup);\n        }\n    }\n    function getAllTabs() {\n        const allWindows = windowStore.list;\n        if (_mode.toLowerCase() !== \"tab\") {\n            return [];\n        }\n        const tabs = Object.keys(allWindows).reduce((memo, win) => {\n            const window = allWindows[win];\n            if (window\n                && window.API.tabGroupId\n                && typeof window.API.tabGroupId !== \"undefined\"\n                && typeof resultWindow.tabGroupId !== \"undefined\"\n                && window.API.tabGroupId === resultWindow.tabGroupId) {\n                memo.push(window.API);\n            }\n            return memo;\n        }, []);\n        return tabs.sort((w1, w2) => {\n            if (w1.tabIndex !== w2.tabIndex) {\n                if (w1.tabIndex === -1) {\n                    return Number.MAX_SAFE_INTEGER;\n                }\n                if (w2.tabIndex === -1) {\n                    return Number.MIN_SAFE_INTEGER;\n                }\n            }\n            return w1.tabIndex - w2.tabIndex;\n        });\n    }\n    function mapWindowIdsToWindowObjects(windowIdArr) {\n        return windowIdArr.reduce((memo, winId) => {\n            const window = windowStore.get(winId);\n            if (window) {\n                memo.push(window.API);\n            }\n            return memo;\n        }, []);\n    }\n    function getNeighboursByDirection(direction) {\n        const windowIds = _neighbours[direction];\n        if (typeof windowIds !== \"undefined\") {\n            return mapWindowIdsToWindowObjects(windowIds);\n        }\n    }\n    function getApplicationName() {\n        var _a;\n        if (_applicationName) {\n            return _applicationName;\n        }\n        if (_context._APPLICATION_NAME) {\n            return _context._APPLICATION_NAME;\n        }\n        if (_context && _context._t42 && _context._t42.application) {\n            return _context._t42.application;\n        }\n        const info = getWindowInfo();\n        if (info && info.applicationName) {\n            return info.applicationName;\n        }\n        const appManager = appManagerGetter();\n        if (appManager) {\n            const instance = appManager.instances().find((i) => id === i.id);\n            if (instance) {\n                return (_a = instance.application) === null || _a === void 0 ? void 0 : _a.name;\n            }\n        }\n        return undefined;\n    }\n    function getWindowInfo() {\n        if (typeof window !== \"undefined\" && window.glue42gd && window.glue42gd.getWindowInfo) {\n            const info = window.glue42gd.getWindowInfo(id);\n            if (!info) {\n                return undefined;\n            }\n            else {\n                return info;\n            }\n        }\n    }\n    const resultWindow = {\n        get id() {\n            return _id;\n        },\n        get name() {\n            return _name;\n        },\n        get application() {\n            const appManager = appManagerGetter();\n            const appName = getApplicationName();\n            if (appName && appManager) {\n                return appManager.application(appName);\n            }\n        },\n        get hostInstance() {\n            return executor.hostInstance;\n        },\n        get interopInstance() {\n            const instance = agm.servers().find((s) => s.windowId === this.id);\n            if (instance) {\n                return instance;\n            }\n            else {\n                const appName = getApplicationName();\n                if (appName) {\n                    return { application: appName };\n                }\n            }\n        },\n        get agmInstance() {\n            return resultWindow.interopInstance;\n        },\n        get url() {\n            return _url;\n        },\n        get title() {\n            return _title;\n        },\n        get windowStyleAttributes() {\n            return _settings;\n        },\n        get settings() {\n            return _settings;\n        },\n        get tabGroupId() {\n            return _mode.toLowerCase() === \"tab\" ? _tabGroupId : undefined;\n        },\n        get tabIndex() {\n            return _mode.toLowerCase() === \"tab\" ? _tabIndex : undefined;\n        },\n        get frameId() {\n            return _frameId;\n        },\n        get frameButtons() {\n            return _frameButtons.sort((b1, b2) => b1.order - b2.order);\n        },\n        get mode() {\n            return _mode;\n        },\n        get state() {\n            return _windowState;\n        },\n        get isCollapsed() {\n            return _isCollapsed;\n        },\n        get isVisible() {\n            return _isVisible;\n        },\n        get isLocked() {\n            return _isLocked;\n        },\n        get context() {\n            return _context;\n        },\n        get bounds() {\n            return _bounds;\n        },\n        get minHeight() {\n            return _settings.minHeight;\n        },\n        get maxHeight() {\n            return _settings.maxHeight;\n        },\n        get minWidth() {\n            return _settings.minWidth;\n        },\n        get maxWidth() {\n            return _settings.maxWidth;\n        },\n        get isFocused() {\n            return _focus;\n        },\n        get frameColor() {\n            return _frameColor;\n        },\n        get opened() {\n            return resultWindow.id !== undefined;\n        },\n        get group() {\n            return _group;\n        },\n        get groupId() {\n            return _groupId;\n        },\n        get isSticky() {\n            return _isSticky;\n        },\n        get topNeighbours() {\n            return getNeighboursByDirection(\"top\");\n        },\n        get leftNeighbours() {\n            return getNeighboursByDirection(\"left\");\n        },\n        get rightNeighbours() {\n            return getNeighboursByDirection(\"right\");\n        },\n        get bottomNeighbours() {\n            return getNeighboursByDirection(\"bottom\");\n        },\n        get isGroupHeaderVisible() {\n            return _isGroupHeaderVisible;\n        },\n        get activityId() {\n            if (_context._t42) {\n                return _context._t42.activityId;\n            }\n            const info = getWindowInfo();\n            if (!info) {\n                return undefined;\n            }\n            return info.activityId;\n        },\n        get activityWindowId() {\n            if (_context._t42) {\n                return _context._t42.activityWindowId;\n            }\n            const info = getWindowInfo();\n            if (!info) {\n                return undefined;\n            }\n            return info.activityWindowId;\n        },\n        get windowType() {\n            return options.windowType || \"electron\";\n        },\n        get zoomFactor() {\n            return _zoomFactor;\n        },\n        get screen() {\n            if (typeof window !== \"undefined\" && window.glue42gd) {\n                return Utils.getMonitor(resultWindow.bounds, window.glue42gd.monitors);\n            }\n            return undefined;\n        },\n        get placementSettings() {\n            return Object.assign({}, _placementSettings);\n        },\n        get jumpList() {\n            return _jumpList;\n        },\n        get allowWorkspaceDrop() {\n            return _allowWorkspaceDrop;\n        },\n        maximize,\n        restore,\n        minimize,\n        maximizeRestore,\n        collapse,\n        expand,\n        toggleCollapse,\n        focus,\n        activate,\n        moveResize,\n        setTitle,\n        setStyle,\n        setOnTop,\n        resetButtons,\n        getButtons,\n        setSizeConstraints,\n        getSizeConstraints,\n        navigate,\n        addFrameButton,\n        removeFrameButton,\n        setVisible,\n        show: () => setVisible(true),\n        hide: () => setVisible(false),\n        center,\n        close,\n        snap,\n        showLoader,\n        hideLoader,\n        updateContext,\n        lock,\n        unlock,\n        getIcon,\n        setIcon,\n        setFrameColor,\n        setTabTooltip,\n        getTabTooltip,\n        attachTab,\n        detachTab,\n        setTabHeaderVisible,\n        showPopup,\n        createFlydown,\n        setModalState,\n        setZoomFactor,\n        zoomIn,\n        zoomOut,\n        showDevTools,\n        capture,\n        flash,\n        flashTab,\n        setSticky,\n        setAllowWorkspaceDrop,\n        print,\n        printToPDF,\n        place,\n        ungroup,\n        refresh,\n        goBack,\n        goForward,\n        download,\n        configure,\n        getConfiguration,\n        getDockingPlacement,\n        dock,\n        clone,\n        getChannel: async () => {\n            var _a;\n            const wins = await getChannels().getWindowsWithChannels({ windowIds: [_id] });\n            return (_a = wins[0]) === null || _a === void 0 ? void 0 : _a.channel;\n        },\n        startDrag,\n        showDialog,\n        onClose,\n        onUrlChanged,\n        onTitleChanged,\n        onFrameButtonAdded,\n        onFrameButtonRemoved,\n        onFrameButtonClicked,\n        onCollapsed,\n        onExpanded,\n        onMinimized,\n        onMaximized,\n        onNormal,\n        onAttached,\n        onDetached,\n        onVisibilityChanged,\n        onContextUpdated,\n        onLockingChanged,\n        onBoundsChanged,\n        onFrameColorChanged,\n        onFocusChanged,\n        onStickyChanged,\n        onGroupChanged,\n        onWindowAttached,\n        onWindowDetached,\n        onTabSelectionChanged,\n        onTabHeaderVisibilityChanged,\n        onClosing,\n        onRefreshing,\n        onZoomFactorChanged,\n        onPlacementSettingsChanged,\n        onNeighboursChanged,\n        onDockingChanged,\n        onNavigating,\n        get tabs() {\n            return getAllTabs();\n        },\n        get isTabHeaderVisible() {\n            return _isTabHeaderVisible;\n        },\n        get isTabSelected() {\n            return _isTabSelected;\n        },\n        getURL() {\n            return Promise.resolve(_url);\n        },\n        getTitle() {\n            return Promise.resolve(_title);\n        },\n        getBounds() {\n            return Promise.resolve(_bounds);\n        },\n        getContext() {\n            return Promise.resolve(_context);\n        },\n        setContext(context) {\n            if (isUndefinedOrNull(context)) {\n                throw new Error(`\"context\" must not be null or undefined, set to empty object if you want to clear it out.`);\n            }\n            return executor.updateContext(resultWindow, context, true);\n        },\n        getDisplay() {\n            const displayAPI = displayAPIGetter();\n            return displayAPI.getByWindowId(id);\n        },\n        resizeTo(width, height) {\n            return moveResize({ width, height });\n        },\n        moveTo(top, left) {\n            return moveResize({ top, left });\n        },\n        async getParentWindow() {\n            var _a;\n            const myParentId = _settings.parentInstanceId;\n            if (!myParentId) {\n                return undefined;\n            }\n            return (_a = windowStore.list[myParentId]) === null || _a === void 0 ? void 0 : _a.API;\n        },\n        async getChildWindows() {\n            return Object.keys(windowStore.list)\n                .map((key) => windowStore.list[key].API)\n                .filter((w) => {\n                const parentId = w.settings.parentInstanceId;\n                return parentId === id;\n            });\n        },\n        joinChannel: (name) => {\n            return getChannels().join(name, id);\n        },\n        leaveChannel: () => {\n            return getChannels().leave(id);\n        }\n    };\n    const events = {\n        handleUpdate,\n        handleWindowClose,\n        handleWindowChangeState,\n        handleTitleChanged,\n        handleVisibilityChanged,\n        handleUrlChanged,\n        handleWindowSettingsChanged,\n        handleContextUpdated,\n        handleFrameIsLockedChanged,\n        handleBoundsChanged,\n        handleFocusChanged,\n        handleFrameButtonAdded,\n        handleFrameButtonRemoved,\n        handleFrameButtonClicked,\n        handleFrameColorChanged,\n        handleFrameAttached,\n        handleFrameSelectionChanged,\n        handleCompositionChanged,\n        handleAllowWorkspaceDropChanged,\n        handleGroupHeaderVisibilityChanged,\n        handleTabHeaderVisibilityChanged,\n        handleGroupChanged,\n        handleAttached,\n        handleDetached,\n        handleWindowAttached,\n        handleWindowDetached,\n        handleZoomFactorChanged,\n        handleIsStickyChanged,\n        handlePlacementSettingsChanged,\n        handleDockingChanged\n    };\n    const groupArgs = {\n        get isGroupHibernated() {\n            return _isGroupHibernated;\n        },\n        get isGroupVisible() {\n            return _isGroupVisible;\n        },\n    };\n    return {\n        API: resultWindow,\n        Events: events,\n        GroupCreationArgs: groupArgs\n    };\n};\n\nfunction getWindowsByTabGroupId(windowId, tabGroupId) {\n    const windows = windowStore.list;\n    return Object.keys(windows).reduce((memo, id) => {\n        const win = windows[id];\n        if (win.API.tabGroupId === tabGroupId && win.API.id !== windowId) {\n            memo.push(win);\n        }\n        return memo;\n    }, []);\n}\nfunction isEmpty(object) {\n    if (!object || Object.keys(object).every((value) => object[value] === undefined)) {\n        return true;\n    }\n    return false;\n}\n\nclass GDExecutor {\n    constructor() {\n        this.GroupMethodName = \"T42.Group.Execute\";\n        this.WndMethodName = \"T42.Wnd.Execute\";\n        this._registry = CallbackRegistryFactory();\n        this._finished = Promise.resolve();\n        this.unsubCallbacks = {};\n    }\n    get hostInstance() {\n        return this.agmTarget;\n    }\n    get finished() {\n        return this._finished;\n    }\n    get configuration() {\n        return this._configuration;\n    }\n    init(agm, instance) {\n        this.agm = agm;\n        this.agmTarget = instance;\n        this._registry.add(\"event\", (data) => {\n            if (data.type === \"Closed\") {\n                const keys = Object.keys(this.unsubCallbacks);\n                keys.forEach((key) => {\n                    const isSameWindow = key.startsWith(data.windowId);\n                    if (isSameWindow) {\n                        delete this.unsubCallbacks[key];\n                    }\n                });\n            }\n        });\n    }\n    setConfiguration(config) {\n        this._configuration = config;\n    }\n    handleEvent(data) {\n        this._registry.execute(\"event\", data);\n    }\n    async open(options) {\n        let finishedResolve;\n        this._finished = new Promise((resolve) => {\n            finishedResolve = resolve;\n        });\n        try {\n            const result = await this.agm.invoke(\"T42.Wnd.Create\", options, this.agmTarget);\n            if (result.returned === undefined) {\n                throw new Error(\"failed to execute T42.Wnd.Create - unknown reason\");\n            }\n            const id = result.returned.id;\n            const win = await windowStore.waitFor(id);\n            if (!this.configuration || this.configuration.windowAvailableOnURLChanged) {\n                setTimeout(() => {\n                    if (win.API.windowType === \"electron\") {\n                        win.Events.handleUrlChanged(win.API.url);\n                    }\n                }, 0);\n            }\n            return win.API;\n        }\n        finally {\n            finishedResolve();\n        }\n    }\n    async close(w, options) {\n        const result = await this.execute(\"close\", { windowId: w.id, options }, `Closed`);\n        if (options) {\n            return result.closed;\n        }\n        return w;\n    }\n    async navigate(w, newUrl, urlLoadOptions) {\n        await this.execute(\"navigate\", { windowId: w.id, options: { url: newUrl, urlLoadOptions } }, \"UrlChanged\");\n        return w;\n    }\n    async setStyle(w, style) {\n        var _a;\n        const stylePromises = [];\n        const wait = (promise) => stylePromises.push(promise);\n        if (!isUndefinedOrNull(style.focus) && !w.isFocused) {\n            wait(w.focus());\n        }\n        if (!isUndefinedOrNull(style.hidden)) {\n            const toBeVisible = !style.hidden;\n            wait(w.setVisible(toBeVisible));\n        }\n        if (!isUndefinedOrNull(style.onTop)) {\n            wait(w.setOnTop(style.onTop));\n        }\n        if (!isNullOrWhiteSpace(style.tabTooltip) || !isNullOrWhiteSpace(style.tabToolTip)) {\n            const toolTip = (_a = style.tabTooltip) !== null && _a !== void 0 ? _a : style.tabToolTip;\n            wait(w.setTabTooltip(toolTip));\n        }\n        if (!isNullOrWhiteSpace(style.tabTitle)) {\n            wait(this.execute(\"setTabTitle\", { windowId: w.id, options: { tabTitle: style.tabTitle } }));\n        }\n        const constraints = {\n            minHeight: style.minHeight,\n            minWidth: style.minWidth,\n            maxHeight: style.maxHeight,\n            maxWidth: style.maxWidth,\n        };\n        const hasConstraints = !isEmpty(constraints);\n        if (hasConstraints) {\n            wait(w.setSizeConstraints(constraints));\n        }\n        const buttons = {\n            allowClose: style.allowClose,\n            allowCollapse: style.allowCollapse,\n            allowLockUnlock: style.allowLockUnlock,\n            allowMaximize: style.allowMaximize,\n            allowMinimize: style.allowMinimize\n        };\n        const hasButtons = !isEmpty(buttons);\n        if (hasButtons) {\n            wait(w.resetButtons(buttons));\n        }\n        await Promise.all(stylePromises);\n        return w;\n    }\n    async setSizeConstraints(w, constraints) {\n        await this.execute(\"setSizeConstraints\", { windowId: w.id, options: constraints });\n        return w;\n    }\n    async getSizeConstraints(w) {\n        const sizeConstraint = await this.execute(\"getSizeConstraints\", { windowId: w.id });\n        return sizeConstraint;\n    }\n    async setTabTooltip(w, tabTooltip) {\n        await this.execute(\"setTabTooltip\", { windowId: w.id, options: { tabTooltip } });\n        return w;\n    }\n    async getTabTooltip(w) {\n        const result = await this.execute(\"getTabTooltip\", { windowId: w.id });\n        return result.tabTooltip;\n    }\n    async resetButtons(w, buttonsConfig) {\n        await this.execute(\"resetButtons\", { windowId: w.id, options: buttonsConfig });\n        return w;\n    }\n    async getButtons(w) {\n        const buttons = await this.execute(\"getButtons\", { windowId: w.id });\n        return buttons;\n    }\n    async setOnTop(w, onTop) {\n        await this.execute(\"setOnTop\", { windowId: w.id, options: { onTop } });\n        return w;\n    }\n    async setTitle(w, newTitle) {\n        const options = {\n            windowId: w.id,\n            options: {\n                title: newTitle\n            }\n        };\n        await this.execute(\"setTitle\", options, \"TitleChanged\");\n        return w;\n    }\n    async setSticky(w, isSticky) {\n        const options = {\n            windowId: w.id,\n            options: {\n                isSticky\n            }\n        };\n        await this.execute(\"setSticky\", options);\n        return w;\n    }\n    async setAllowWorkspaceDrop(w, allowWorkspaceDrop) {\n        const options = {\n            windowId: w.id,\n            options: {\n                allowWorkspaceDrop\n            }\n        };\n        await this.execute(\"setAllowWorkspaceDrop\", options);\n        return w;\n    }\n    async moveResize(w, bounds) {\n        if (typeof window !== \"undefined\" && window.glueDesktop.versionNum < 31200) {\n            return new Promise(async (res, rej) => {\n                const resolveImmediately = this.areBoundsEqual(bounds, w);\n                let isDone = false;\n                const done = () => {\n                    if (isDone) {\n                        return;\n                    }\n                    isDone = true;\n                    if (unsubscribeBoundsChanged) {\n                        unsubscribeBoundsChanged();\n                        unsubscribeBoundsChanged = undefined;\n                    }\n                    res(w);\n                    if (resolveTimeout) {\n                        clearTimeout(resolveTimeout);\n                        resolveTimeout = undefined;\n                    }\n                };\n                let resolveTimeout;\n                let unsubscribeBoundsChanged;\n                if (!resolveImmediately) {\n                    unsubscribeBoundsChanged = w.onBoundsChanged((win) => {\n                        if (!this.areBoundsEqual(bounds, win)) {\n                            return;\n                        }\n                        done();\n                    });\n                }\n                try {\n                    await this.execute(\"moveResize\", { windowId: w.id, options: { bounds } });\n                }\n                catch (error) {\n                    rej(error);\n                    return;\n                }\n                if (resolveImmediately) {\n                    done();\n                    return;\n                }\n                resolveTimeout = setTimeout(() => {\n                    done();\n                }, 1000);\n            });\n        }\n        else {\n            await this.execute(\"moveResize\", { windowId: w.id, options: { bounds } });\n        }\n        return w;\n    }\n    async addFrameButton(w, buttonInfo) {\n        await this.execute(\"addButton\", { windowId: w.id, options: buttonInfo }, \"ButtonAdded\");\n        return w;\n    }\n    async removeFrameButton(w, buttonId) {\n        await this.execute(\"removeButton\", { windowId: w.id, options: buttonId }, \"ButtonRemoved\");\n        return w;\n    }\n    async activate(w) {\n        let unFocusChanged;\n        let unClosed;\n        try {\n            const done = new Promise((resolve, reject) => {\n                unFocusChanged = w.onFocusChanged(() => {\n                    resolve();\n                });\n                unClosed = w.onClose(() => {\n                    reject(new Error(\"Window was closed\"));\n                });\n            });\n            await Promise.all([this.execute(\"activate\", { windowId: w.id }, \"FocusChanged\"), done]);\n            return w;\n        }\n        finally {\n            if (unFocusChanged) {\n                unFocusChanged();\n            }\n            if (unClosed) {\n                unClosed();\n            }\n        }\n    }\n    async focus(w) {\n        let unFocusChanged;\n        let unClosed;\n        try {\n            const done = new Promise((resolve, reject) => {\n                unFocusChanged = w.onFocusChanged(() => {\n                    resolve();\n                });\n                unClosed = w.onClose(() => {\n                    reject(new Error(\"Window was closed\"));\n                });\n            });\n            await Promise.all([this.execute(\"focus\", { windowId: w.id }, \"FocusChanged\"), done]);\n            return w;\n        }\n        finally {\n            if (unFocusChanged) {\n                unFocusChanged();\n            }\n            if (unClosed) {\n                unClosed();\n            }\n        }\n    }\n    async maximizeRestore(w) {\n        await this.execute(\"maximizeRestore\", { windowId: w.id }, \"StateChanged\");\n        return w;\n    }\n    async maximize(w) {\n        await this.execute(\"maximize\", { windowId: w.id }, \"StateChanged\");\n        return w;\n    }\n    async restore(w) {\n        await this.execute(\"restore\", { windowId: w.id }, \"StateChanged\");\n        return w;\n    }\n    async minimize(w) {\n        await this.execute(\"minimize\", { windowId: w.id }, \"StateChanged\");\n        return w;\n    }\n    async collapse(w) {\n        await this.execute(\"collapse\", { windowId: w.id }, \"StateChanged\");\n        return w;\n    }\n    async expand(w) {\n        await this.execute(\"expand\", { windowId: w.id }, \"StateChanged\");\n        return w;\n    }\n    async toggleCollapse(w) {\n        await this.execute(\"toggleCollapse\", { windowId: w.id }, \"StateChanged\");\n        return w;\n    }\n    async snap(w, targetWindow, options) {\n        const args = {\n            targetWindowId: targetWindow.id\n        };\n        args.snappingEdge = options.direction;\n        args.autoAlign = options.autoAlign;\n        await this.execute(\"snap\", { windowId: w.id, options: args }, \"CompositionChanged\", `CompositionChanged-${targetWindow.id}`);\n        return w;\n    }\n    async attachTab(w, sourceWindow, options) {\n        await this.execute(\"attachTab\", {\n            windowId: w.id,\n            options: {\n                index: options,\n                sourceWindowId: sourceWindow.id,\n                targetWindowId: w.id,\n            }\n        }, `WindowFrameAdded-${sourceWindow.id}`, `WindowFrameRemoved-${sourceWindow.id}`);\n        return w;\n    }\n    async detachTab(w, options) {\n        const eventKeys = [\"WindowFrameRemoved\", `WindowFrameAdded`];\n        if (!isUndefinedOrNull(options === null || options === void 0 ? void 0 : options.relativeTo)) {\n            eventKeys.push(`CompositionChanged`);\n            eventKeys.push(`CompositionChanged-${options.relativeTo}`);\n        }\n        else {\n            eventKeys.push(\"BoundsChanged\");\n        }\n        await this.execute(\"detachTab\", { windowId: w.id, options }, ...eventKeys);\n        return w;\n    }\n    async setVisible(w, toBeVisible = true) {\n        let command;\n        if (toBeVisible) {\n            command = \"show\";\n        }\n        else {\n            command = \"hide\";\n        }\n        await this.execute(command, { windowId: w.id }, \"VisibilityChanged\");\n        return w;\n    }\n    async center(w, display) {\n        await this.execute(\"center\", { windowId: w.id, options: display });\n        return w;\n    }\n    async showLoader(w, loader) {\n        await this.execute(\"showLoadingAnimation\", { windowId: w.id, options: loader });\n        return w;\n    }\n    async hideLoader(w) {\n        await this.execute(\"hideLoadingAnimation\", { windowId: w.id });\n        return w;\n    }\n    async updateContext(w, context, replace) {\n        let un;\n        try {\n            const contextWithoutUndefinedValues = this.swapUndefinedToNull(context);\n            const done = new Promise((resolve, reject) => {\n                un = w.onContextUpdated(() => {\n                    resolve();\n                });\n            });\n            await Promise.all([this.execute(\"updateContext\", {\n                    windowId: w.id, context: contextWithoutUndefinedValues, replace\n                }), done]);\n            return w;\n        }\n        finally {\n            if (un) {\n                un();\n            }\n        }\n    }\n    async lock(w) {\n        await this.execute(\"lockUnlock\", { windowId: w.id, options: { lock: true } }, \"FrameIsLockedChanged\");\n        return w;\n    }\n    async unlock(w) {\n        await this.execute(\"lockUnlock\", { windowId: w.id, options: { lock: false } }, \"FrameIsLockedChanged\");\n        return w;\n    }\n    async getIcon(w) {\n        const result = await this.execute(\"getIcon\", {\n            windowId: w.id,\n            options: {}\n        });\n        return result.icon;\n    }\n    async setIcon(w, base64Image) {\n        await this.execute(\"setIcon\", {\n            windowId: w.id,\n            options: {\n                dataURL: base64Image\n            }\n        });\n        return w;\n    }\n    async setFrameColor(w, frameColor) {\n        await this.execute(\"setFrameColor\", { windowId: w.id, options: { frameColor } }, \"FrameColorChanged\");\n        return w;\n    }\n    async setTabHeaderVisible(w, toBeTabHeaderVisible) {\n        await this.execute(\"setTabHeaderVisible\", {\n            windowId: w.id,\n            options: {\n                toShow: toBeTabHeaderVisible\n            }\n        }, \"TabHeaderVisibilityChanged\");\n        return w;\n    }\n    async showGroupPopup(id, options) {\n        const reformatedOptions = this.showPopupCore(id, options);\n        await this.executeGroup(\"showGroupPopup\", {\n            groupId: id,\n            options: reformatedOptions\n        });\n    }\n    async showPopup(targetWindow, options) {\n        const reformatedOptions = this.showPopupCore(targetWindow.id, options);\n        await this.execute(\"showPopupWindow\", {\n            windowId: targetWindow.id,\n            options: reformatedOptions\n        });\n        return targetWindow;\n    }\n    async createFlydown(windowId, options) {\n        if (!options) {\n            throw new Error(\"The options object is not valid!\");\n        }\n        const optionsCopy = { ...options };\n        if (!optionsCopy.horizontalOffset) {\n            optionsCopy.horizontalOffset = 0;\n        }\n        if (!optionsCopy.verticalOffset) {\n            optionsCopy.verticalOffset = 0;\n        }\n        const fullOptions = this.reformatFlydownOptions(windowId, optionsCopy);\n        return this.execute(\"setFlydownArea\", { windowId, options: fullOptions }).then(() => {\n            const zoneIds = fullOptions.zones.map((z) => z.id);\n            fullOptions.zones.forEach((z) => {\n                let callback = typeof (z.flydownSize) === \"function\" ?\n                    z.flydownSize : () => z.flydownSize;\n                if (options.size instanceof Function && z.flydownSize) {\n                    callback = async (data, cancel) => {\n                        let result;\n                        if (options.size instanceof Function) {\n                            result = await options.size(data, cancel);\n                        }\n                        if (z.flydownSize instanceof Function && z.flydownSize !== options.size) {\n                            return await z.flydownSize(data, cancel) || result;\n                        }\n                        return result || z.flydownSize;\n                    };\n                }\n                this._registry.clearKey(`${fullOptions.targetId}_${z.id}`);\n                this._registry.add(`${fullOptions.targetId}_${z.id}`, callback);\n            });\n            return {\n                destroy: () => this.clearFlydownArea(fullOptions.targetId, zoneIds),\n                options: optionsCopy\n            };\n        });\n    }\n    async setModalState(windowId, isModal) {\n        return this.execute(\"setModalState\", { windowId, options: { isModal } });\n    }\n    async autoArrange(displayId) {\n        return this.execute(\"autoArrange\", { options: { displayId } });\n    }\n    async handleFlydownBoundsRequested(targetId, data) {\n        const cancelCallback = () => data.cancel = true;\n        const callbackData = {\n            zoneId: data.flydownId,\n            flydownWindowBounds: data.flydownWindowBounds,\n            flydownWindowId: data.flydownWindowId,\n        };\n        const responses = await Promise.all(this._registry.execute(`${targetId}_${data.flydownId}`, callbackData, cancelCallback));\n        if (responses.length === 1) {\n            const defaultResponse = { height: 0, width: 0, top: 0, left: 0 };\n            const response = typeof (responses[0]) === \"object\" && !Array.isArray(responses[0]) ? responses[0] : defaultResponse;\n            const responseOptions = { ...data, flydownWindowBounds: response };\n            return responseOptions;\n        }\n    }\n    async handleOnEventRequested(callbackId, args) {\n        var _a;\n        const callbacks = (_a = this.unsubCallbacks[callbackId]) !== null && _a !== void 0 ? _a : [];\n        let prevented = false;\n        const preventArgs = [];\n        await Promise.all(callbacks.map((cb) => {\n            return new Promise((resolve, reject) => {\n                cb(() => {\n                    resolve();\n                }, () => {\n                    reject();\n                }, (pArgs) => {\n                    prevented = true;\n                    preventArgs.push(pArgs);\n                }, args);\n            });\n        }));\n        return { prevented, preventArgs };\n    }\n    async zoomIn(window) {\n        await this.execute(\"zoomIn\", {\n            windowId: window.id,\n        });\n        return window;\n    }\n    async zoomOut(window) {\n        await this.execute(\"zoomOut\", {\n            windowId: window.id,\n        });\n        return window;\n    }\n    async setZoomFactor(window, zoomFactor) {\n        await this.execute(\"setZoomFactor\", {\n            windowId: window.id,\n            options: {\n                zoomFactor\n            }\n        });\n        return window;\n    }\n    async showDevTools(window) {\n        await this.execute(\"showDevTools\", {\n            windowId: window.id,\n        });\n        return window;\n    }\n    async capture(window, options) {\n        const base64screenshot = (await this.execute(\"captureScreenshot\", { windowId: window.id, options: { ...options } })).data;\n        return base64screenshot;\n    }\n    async captureGroup(windowIds, options) {\n        const base64screenshot = (await this.execute(\"captureGroupScreenshot\", { windowId: windowIds[0], options: { groupWindowIds: windowIds, ...options } })).data;\n        return base64screenshot;\n    }\n    async flash(resultWindow, options) {\n        await this.execute(\"flash\", { windowId: resultWindow.id, options: { ...options } });\n        return resultWindow;\n    }\n    async flashTab(resultWindow, options) {\n        await this.execute(\"flashTab\", { windowId: resultWindow.id, options: { ...options } });\n        return resultWindow;\n    }\n    async configure(windowId, options) {\n        return this.execute(\"configure\", { windowId, options: { ...options } });\n    }\n    async print(resultWindow, options) {\n        await this.execute(\"print\", { windowId: resultWindow.id, options: { ...options } });\n        return resultWindow;\n    }\n    async printToPDF(resultWindow, options) {\n        const filePath = (await this.execute(\"printToPDF\", { windowId: resultWindow.id, options: { ...options } })).filePath;\n        return filePath;\n    }\n    async place(window, options) {\n        const copy = { ...options };\n        if (!options.display || options.display === \"current\") {\n            copy.display = await window.getDisplay();\n        }\n        if (copy.display && typeof copy.display !== \"string\" && typeof copy.display !== \"number\") {\n            copy.display = copy.display.index + 1;\n        }\n        return this.execute(\"place\", { windowId: window.id, options: { ...copy } });\n    }\n    async refresh(resultWindow, ignoreCache) {\n        await this.execute(\"refresh\", { windowId: resultWindow.id, options: { ignoreCache } });\n        return resultWindow;\n    }\n    async download(resultWindow, url, options = {}) {\n        options.enableDownloadBar = !options.silent;\n        const result = await this.execute(\"downloadURL\", { windowId: resultWindow.id, options: { url, options } });\n        return {\n            url,\n            path: result.fullPath,\n            size: result.fileSize,\n        };\n    }\n    async configureWindow(resultWindow, options) {\n        await this.execute(\"configureWindow\", { windowId: resultWindow.id, options });\n        return resultWindow;\n    }\n    async getWindowConfiguration(resultWindow) {\n        const config = await this.execute(\"getWindowConfiguration\", { windowId: resultWindow.id });\n        return config;\n    }\n    async startDrag(resultWindow, options) {\n        await this.execute(\"startDrag\", { windowId: resultWindow.id, options });\n        return resultWindow;\n    }\n    showDialog(resultWindow, options) {\n        return new Promise((res, rej) => {\n            const token = Utils.generateId();\n            const un = this._registry.add(\"event\", (args) => {\n                if (args.type === \"DialogResult\" && args.windowId === resultWindow.id && args.data.token === token) {\n                    un();\n                    const data = args.data;\n                    if (\"status\" in data) {\n                        if (data.status === \"failed\") {\n                            rej(data.message);\n                        }\n                        else if (data.status === \"successful\") {\n                            res(data.result);\n                        }\n                    }\n                }\n            });\n            this.execute(\"showDialog\", { windowId: resultWindow.id, options: Object.assign({}, { ...options }, { token }) });\n        });\n    }\n    async execute(command, options, ...eventKeys) {\n        return this.executeCore(this.WndMethodName, command, options, ...eventKeys);\n    }\n    async executeGroup(command, options, ...eventKeys) {\n        return this.executeCore(this.GroupMethodName, command, options, ...eventKeys);\n    }\n    async ungroup(w, options) {\n        const args = {\n            windowId: w.id,\n            options\n        };\n        await this.execute(\"ungroup\", args);\n        return w;\n    }\n    async updateJumpList(windowId, options) {\n        const args = {\n            windowId,\n            options\n        };\n        await this.execute(\"updateJumplist\", args);\n    }\n    async getJumpList(windowId) {\n        const args = {\n            windowId,\n        };\n        const result = await this.execute(\"getJumplist\", args);\n        return result;\n    }\n    onClosing(callback, gdWindow) {\n        const glue42gd = typeof window !== \"undefined\" && window.glue42gd;\n        if (glue42gd && gdWindow.windowType === \"electron\") {\n            return glue42gd.addCloseHandler(callback, gdWindow.id);\n        }\n        else {\n            return this.nonWindowHandlers(callback, gdWindow.id, \"OnClosing\");\n        }\n    }\n    onGroupClosing(callback, group) {\n        return this.nonWindowHandlersCore(group.id, \"OnClosing\", true, callback);\n    }\n    onRefreshing(callback, gdWindow) {\n        const glue42gd = typeof window !== \"undefined\" && window.glue42gd;\n        if (glue42gd && gdWindow.windowType === \"electron\") {\n            return glue42gd.addRefreshHandler(callback, gdWindow.id);\n        }\n        else {\n            return this.nonWindowHandlers(callback, gdWindow.id, \"OnRefreshing\");\n        }\n    }\n    onNavigating(callback, gdWindow) {\n        const glue42gd = typeof window !== \"undefined\" && window.glue42gd;\n        if (glue42gd && gdWindow.windowType === \"electron\") {\n            return glue42gd.addWillNavigateHandler(callback, gdWindow.id);\n        }\n        else {\n            return this.nonWindowHandlers(callback, gdWindow.id, \"OnNavigating\");\n        }\n    }\n    async clone(window, cloneOptions) {\n        const args = {\n            windowId: window.id,\n            options: cloneOptions\n        };\n        const result = await this.execute(\"clone\", args);\n        const win = await windowStore.waitFor(result.id);\n        return win.API;\n    }\n    async goBack(resultWindow) {\n        await this.execute(\"goBack\", { windowId: resultWindow.id });\n    }\n    async goForward(resultWindow) {\n        await this.execute(\"goForward\", { windowId: resultWindow.id });\n    }\n    async getDockingPlacement(window) {\n        return this.execute(\"getDockingPlacement\", { windowId: window.id });\n    }\n    dock(window, options) {\n        return this.execute(\"dock\", { windowId: window.id, options });\n    }\n    clearCallbacks(id) {\n        const keys = Object.keys(this.unsubCallbacks);\n        keys.forEach((key) => {\n            if (key.startsWith(id)) {\n                delete this.unsubCallbacks[key];\n            }\n        });\n    }\n    nonWindowHandlers(callback, targetId, type) {\n        return this.nonWindowHandlersCore(targetId, type, false, callback);\n    }\n    nonWindowHandlersCore(targetId, type, isGroup, callback) {\n        const id = `${targetId}-${type}`;\n        const unsub = () => {\n            var _a;\n            if (this.unsubCallbacks[id]) {\n                const callbacks = this.unsubCallbacks[id];\n                this.unsubCallbacks[id] = callbacks.filter((cb) => cb !== callback);\n                if (this.unsubCallbacks[id].length === 0) {\n                    delete this.unsubCallbacks[id];\n                }\n            }\n            const cbs = (_a = this.unsubCallbacks[id]) !== null && _a !== void 0 ? _a : [];\n            if (cbs.length === 0) {\n                const options = {\n                    unsubscribe: true\n                };\n                if (isGroup) {\n                    this.executeGroup(type, {\n                        groupId: targetId,\n                        options\n                    });\n                }\n                else {\n                    this.execute(type, {\n                        windowId: targetId,\n                        options\n                    });\n                }\n            }\n        };\n        if (this.unsubCallbacks[id]) {\n            this.unsubCallbacks[id].push(callback);\n            return unsub;\n        }\n        else {\n            this.unsubCallbacks[id] = [callback];\n        }\n        if (isGroup) {\n            this.executeGroup(type, { groupId: targetId });\n        }\n        else {\n            this.execute(type, { windowId: targetId });\n        }\n        return unsub;\n    }\n    reformatFlydownOptions(windowId, options) {\n        const assignGeneralIfUnassigned = (zone, prop) => {\n            if (options[prop] && (zone[prop] === undefined || zone[prop] === null)) {\n                const valueFromOptions = options[prop];\n                zone[prop] = valueFromOptions;\n            }\n        };\n        const zones = options.zones.map((z) => {\n            assignGeneralIfUnassigned(z, \"windowId\");\n            assignGeneralIfUnassigned(z, \"targetLocation\");\n            if (options.size && (z.flydownSize === undefined || z.flydownSize === null)) {\n                z.flydownSize = options.size;\n            }\n            z.flydownBounds = z.flydownSize;\n            z.flydownId = z.windowId;\n            if (!z.targetLocation) {\n                z.targetLocation = \"bottom\";\n            }\n            return z;\n        });\n        return {\n            ...options,\n            zones,\n            targetId: windowId,\n            flydownBounds: options.size,\n            flydownActiveArea: options.activeArea\n        };\n    }\n    clearFlydownArea(windowId, areaIds) {\n        return this.execute(\"clearFlydownWindowArea\", {\n            windowId,\n            options: {}\n        }).then(() => {\n            areaIds.forEach((id) => {\n                this._registry.clearKey(`${windowId}_${id}`);\n            });\n        });\n    }\n    executeWithoutToken(params, ...eventKeys) {\n        const uns = [];\n        const executed = eventKeys === null || eventKeys === void 0 ? void 0 : eventKeys.filter((k) => !isUndefinedOrNull(k)).map((key) => {\n            return new Promise((r) => {\n                const [type, windowId = params.windowId] = key.split(\"-\");\n                uns.push(this._registry.add(\"event\", (data) => {\n                    if (data.type === type && data.windowId === windowId) {\n                        r();\n                    }\n                }));\n            });\n        });\n        const action = new Promise((resolve, reject) => {\n            this.agm.invoke(\"T42.Wnd.Execute\", params, this.agmTarget)\n                .then((i) => {\n                if (i.returned && i.returned.errorMsg) {\n                    reject(i);\n                }\n                else {\n                    resolve(i.returned);\n                }\n            })\n                .catch((e) => reject(e));\n        });\n        return Promise.all([action, ...executed])\n            .then((r) => {\n            return r[0];\n        })\n            .finally(() => {\n            uns.forEach((un) => un());\n        });\n    }\n    async executeCore(methodName, command, options, ...eventKeys) {\n        const params = {\n            ...options,\n            command,\n        };\n        let finishedResolve;\n        this._finished = new Promise((resolve) => {\n            finishedResolve = resolve;\n        });\n        try {\n            if (typeof window !== \"undefined\" && window.glueDesktop.versionNum < 31200) {\n                return await this.executeWithoutToken(params, ...eventKeys);\n            }\n            else {\n                return await this.executeWithToken(methodName, params);\n            }\n        }\n        finally {\n            finishedResolve();\n        }\n    }\n    async executeWithToken(methodName, options) {\n        let un;\n        try {\n            const token = Utils.generateId();\n            const event = new Promise((r) => {\n                un = this._registry.add(\"event\", (data) => {\n                    if (data.token === token) {\n                        r();\n                    }\n                });\n            });\n            const execute = new Promise((resolve, reject) => {\n                options.token = token;\n                this.agm.invoke(methodName, options, this.agmTarget)\n                    .then((i) => {\n                    if (i.returned && i.returned.errorMsg) {\n                        reject(i);\n                    }\n                    else {\n                        resolve(i.returned);\n                    }\n                })\n                    .catch((i) => {\n                    reject(i);\n                });\n            });\n            const result = await Promise.all([execute, event]);\n            return result[0];\n        }\n        finally {\n            if (un) {\n                un();\n            }\n        }\n    }\n    areBoundsEqual(requested, w) {\n        const current = w.bounds;\n        const settings = w.settings;\n        let height = requested.height;\n        let width = requested.width;\n        if (requested.height < settings.minHeight) {\n            height = settings.minHeight;\n        }\n        if (requested.height > settings.maxHeight) {\n            height = settings.maxHeight;\n        }\n        if (requested.width < settings.minWidth) {\n            width = settings.minWidth;\n        }\n        if (requested.width > settings.maxWidth) {\n            width = settings.maxWidth;\n        }\n        const areHeightsEqual = height ? current.height === height : true;\n        const areWidthsEqual = width ? current.width === width : true;\n        const areLeftsEqual = requested.left ? current.left === requested.left : true;\n        const areTopsEqual = requested.top ? current.top === requested.top : true;\n        return areHeightsEqual && areWidthsEqual && areLeftsEqual && areTopsEqual;\n    }\n    swapUndefinedToNull(context) {\n        try {\n            const copy = {};\n            for (const key of Object.keys(context)) {\n                let value = context[key];\n                if (typeof value === \"undefined\") {\n                    value = null;\n                }\n                copy[key] = value;\n            }\n            return copy;\n        }\n        catch {\n            return context;\n        }\n    }\n    showPopupCore(id, options) {\n        if (!options) {\n            throw new Error(\"The options object is not valid!\");\n        }\n        const optionsCopy = { ...options };\n        if (!optionsCopy.targetLocation) {\n            optionsCopy.targetLocation = \"bottom\";\n        }\n        const reformatedOptions = {\n            ...optionsCopy,\n            popupBounds: optionsCopy.size,\n            targetId: id,\n            popupId: optionsCopy.windowId\n        };\n        return reformatedOptions;\n    }\n}\nvar executor = new GDExecutor();\n\nclass GDEnvironment {\n    constructor(agm, logger, appManagerGetter, displayAPIGetter, channelsAPIGetter, wndId, groupId) {\n        this._registry = CallbackRegistryFactory();\n        this._waitTimeout = 10000;\n        this._agm = agm;\n        this._logger = logger.subLogger(\"gd-env\");\n        this._windowId = wndId;\n        this._groupId = groupId;\n        this._appManagerGetter = appManagerGetter;\n        this._displayAPIGetter = displayAPIGetter;\n        this._channelsAPIGetter = channelsAPIGetter;\n    }\n    init() {\n        return new Promise((resolve, reject) => {\n            this._agm.register(\"T42.Wnd.OnEventWithResponse\", (args, caller) => {\n                return this.respondToEvent(args);\n            });\n            new Promise((streamResolve, streamReject) => {\n                this._agm.subscribe(\"T42.Wnd.OnEvent\", {\n                    waitTimeoutMs: this._waitTimeout,\n                    target: \"best\",\n                    arguments: {\n                        withConfig: true\n                    },\n                    onData: (streamData) => {\n                        if (streamData.data.type === \"Configuration\") {\n                            this._configuration = streamData.data;\n                            executor.setConfiguration(this._configuration);\n                            return;\n                        }\n                        this.updateWindow(streamData.data, resolve);\n                        executor.handleEvent(streamData.data);\n                    },\n                    onConnected: (instance) => {\n                        this._agmInstance = instance;\n                        executor.init(this._agm, this._agmInstance);\n                    }\n                }).catch((error) => {\n                    var _a;\n                    const message = `${(_a = error === null || error === void 0 ? void 0 : error.method) === null || _a === void 0 ? void 0 : _a.name} - ${JSON.stringify(error === null || error === void 0 ? void 0 : error.called_with)} - ${error === null || error === void 0 ? void 0 : error.message}`;\n                    reject(new Error(message));\n                });\n            });\n        });\n    }\n    get executor() {\n        return executor;\n    }\n    open(name, url, options) {\n        options = options || {};\n        const copyOptions = { ...options };\n        if (copyOptions.relativeTo !== undefined && typeof copyOptions.relativeTo !== \"string\") {\n            copyOptions.relativeTo = copyOptions.relativeTo.id || \"\";\n        }\n        copyOptions.name = name;\n        copyOptions.url = url;\n        copyOptions.windowState = options.windowState || options.state;\n        delete copyOptions.state;\n        return this.executor.open(copyOptions);\n    }\n    createFlydown(windowId, options) {\n        return this.executor.createFlydown(windowId, options);\n    }\n    async showPopup(windowId, options) {\n        const window = windowStore.get(windowId);\n        await this.executor.showPopup(window.API, options);\n    }\n    tabAttached(callback) {\n        return this._registry.add(\"tab-attached\", callback);\n    }\n    tabDetached(callback) {\n        return this._registry.add(\"tab-detached\", callback);\n    }\n    onWindowFrameColorChanged(callback) {\n        return this._registry.add(\"frame-color-changed\", callback);\n    }\n    onEvent(callback) {\n        return this._registry.add(\"window-event\", callback);\n    }\n    my() {\n        return this._windowId;\n    }\n    myGroup() {\n        return this._groupId;\n    }\n    execute(command, windowId, options) {\n        return this._agm.invoke(\"T42.Wnd.Execute\", {\n            command,\n            options,\n            windowId,\n        });\n    }\n    onCompositionChanged(callback) {\n        return this._registry.add(\"composition-changed\", callback);\n    }\n    onGroupHeaderVisibilityChanged(callback) {\n        return this._registry.add(\"group-header-changed\", callback);\n    }\n    onGroupVisibilityChanged(callback) {\n        return this._registry.add(\"group-visibility-changed\", callback);\n    }\n    onGroupStateChanged(callback) {\n        return this._registry.add(\"group-state-changed\", callback);\n    }\n    onWindowGotFocus(callback) {\n        return this._registry.add(\"got-focus\", callback);\n    }\n    onWindowLostFocus(callback) {\n        return this._registry.add(\"lost-focus\", callback);\n    }\n    onWindowsAutoArrangeChanged(callback) {\n        return this._registry.add(\"windows-auto-arranged-changed\", callback);\n    }\n    respondToEvent(args) {\n        if (args.type === \"ShowFlydownBoundsRequested\") {\n            return this.executor.handleFlydownBoundsRequested(args.data.windowId, args.data);\n        }\n        else if (args.type === \"OnClosing\" || args.type === \"OnRefreshing\" || args.type === \"OnNavigating\") {\n            return this.executor.handleOnEventRequested(args.data.callbackId, args.data.args);\n        }\n        return Promise.reject(`There isn't a handler for ${args.type}`);\n    }\n    updateWindow(windowInfo, readyResolve) {\n        var _a;\n        const extendedStreamEvent = this.getExtendedStreamEvent(windowInfo);\n        if (windowInfo.type === \"Snapshot\") {\n            const windowInfoFullInfoEvent = windowInfo;\n            windowInfoFullInfoEvent.windows.forEach((w) => {\n                const existingWindow = windowStore.get(w.id);\n                if (existingWindow) {\n                    existingWindow.Events.handleUpdate(this.mapToWindowConstructorOptions(w));\n                    existingWindow.GroupCreationArgs = this.mapToGroupCreationArgs(w);\n                }\n                else {\n                    const win = this.createWindow(w.id, w);\n                    windowStore.markReadyToShow(win.API.id);\n                }\n                this._registry.execute(\"window-event\", extendedStreamEvent);\n            });\n            readyResolve(this);\n            return;\n        }\n        if (windowInfo.type === \"CommandExecuted\") {\n            this._registry.execute(\"window-event\", extendedStreamEvent);\n            return;\n        }\n        if (windowInfo.type === \"Created\") {\n            const windowInfoCreatedEvent = (windowInfo);\n            const win = this.createWindow(windowInfoCreatedEvent.windowId, windowInfoCreatedEvent.data || {});\n            windowStore.setReadyState(win.API.id);\n            this._registry.execute(\"window-event\", extendedStreamEvent);\n            return;\n        }\n        if (windowInfo.type === \"OnGroupVisibilityChanged\") {\n            const info = windowInfo;\n            this._registry.execute(\"group-visibility-changed\", info.data);\n            this._registry.execute(\"window-event\", windowInfo);\n            return;\n        }\n        if (windowInfo.type === \"OnGroupStateChanged\") {\n            const info = windowInfo;\n            this._registry.execute(\"group-state-changed\", info.data);\n            this._registry.execute(\"window-event\", windowInfo);\n            return;\n        }\n        if (windowInfo.type === \"OnWindowsAutoArrangeChanged\") {\n            const info = windowInfo;\n            this._registry.execute(\"windows-auto-arranged-changed\", info.data);\n            this._registry.execute(\"window-event\", windowInfo);\n            return;\n        }\n        const windowObjectAndEvents = windowStore.get((windowInfo).windowId);\n        if (!windowObjectAndEvents) {\n            this._logger.error(`received update for unknown window. Stream:', ${JSON.stringify(windowInfo, null, 4)}`);\n            return;\n        }\n        const theWindow = windowObjectAndEvents.API;\n        const theWindowEvents = windowObjectAndEvents.Events;\n        if (windowInfo.type === \"BoundsChanged\") {\n            const windowInfoBoundsChangedEvent = windowInfo;\n            theWindowEvents.handleBoundsChanged(windowInfoBoundsChangedEvent.data);\n        }\n        if (windowInfo.type === \"UrlChanged\") {\n            const windowInfoUrlChangedEvent = windowInfo;\n            windowStore.setUrlChangedState(windowInfoUrlChangedEvent.windowId);\n            theWindowEvents.handleUrlChanged(windowInfoUrlChangedEvent.data);\n        }\n        if (windowInfo.type === \"TitleChanged\") {\n            const windowInfoTitleChanged = windowInfo;\n            theWindowEvents.handleTitleChanged(windowInfoTitleChanged.data);\n        }\n        if (windowInfo.type === \"IsStickyChanged\") {\n            const windowInfoIsStickyChangedChanged = windowInfo;\n            theWindowEvents.handleIsStickyChanged(windowInfoIsStickyChangedChanged.data);\n        }\n        if (windowInfo.type === \"VisibilityChanged\") {\n            theWindowEvents.handleVisibilityChanged(windowInfo.data);\n        }\n        if (windowInfo.type === \"ContextChanged\") {\n            theWindowEvents.handleContextUpdated(windowInfo.data);\n        }\n        if (windowInfo.type === \"StateChanged\") {\n            theWindowEvents.handleWindowChangeState(windowInfo.data);\n        }\n        if (windowInfo.type === \"FrameColorChanged\") {\n            theWindowEvents.handleFrameColorChanged(windowInfo.data);\n            this._registry.execute(\"frame-color-changed\", theWindow);\n        }\n        if (windowInfo.type === \"CompositionChanged\") {\n            const windowInfoCompositionChanged = windowInfo;\n            theWindowEvents.handleCompositionChanged(windowInfoCompositionChanged.data);\n            windowStore.setCompositionChangedState(windowInfoCompositionChanged.data.windowId, (_a = this._configuration) === null || _a === void 0 ? void 0 : _a.windowAvailableOnURLChanged);\n            this._registry.execute(\"composition-changed\", windowInfoCompositionChanged.data);\n        }\n        if (windowInfo.type === \"GroupHeaderVisibilityChanged\") {\n            const info = windowInfo;\n            theWindowEvents.handleGroupHeaderVisibilityChanged(info.data.groupHeaderVisible);\n            this._registry.execute(\"group-header-changed\", info.data);\n        }\n        if (windowInfo.type === \"FocusChanged\") {\n            const windowInfoFocusChanged = windowInfo;\n            this.focusChanged(theWindowEvents, theWindow, windowInfoFocusChanged.data);\n        }\n        if (windowInfo.type === \"WindowFrameChanged\") {\n            theWindowEvents.handleFrameAttached(windowInfo.data.frameId, windowInfo.data.frameId, windowInfo.data.isTabHeaderVisible);\n            this._registry.execute(\"frame-changed\");\n        }\n        if (windowInfo.type === \"WindowFrameAdded\") {\n            const winsToBeNotified = getWindowsByTabGroupId(theWindow.id, windowInfo.data.frameId);\n            const data = windowInfo.data;\n            theWindowEvents.handleAttached(data.frameId, data.frameId, data.isTabHeaderVisible, data.isLocked, winsToBeNotified)\n                .then(async () => {\n                if (winsToBeNotified.length > 0) {\n                    await executor.finished;\n                    this._registry.execute(\"tab-attached\", theWindow, windowInfo.data.frameId, windowInfo.data.isTabHeaderVisible);\n                }\n            });\n        }\n        if (windowInfo.type === \"WindowFrameRemoved\") {\n            const oldTabGroupId = theWindow.tabGroupId;\n            const winsToBeNotified = getWindowsByTabGroupId(theWindow.id, oldTabGroupId);\n            theWindowEvents.handleDetached(windowInfo.data.isLocked, winsToBeNotified)\n                .then(async () => {\n                if (winsToBeNotified.length > 0) {\n                    await executor.finished;\n                    this._registry.execute(\"tab-detached\", theWindow, windowInfo.data.frameId, theWindow.tabGroupId);\n                }\n            });\n        }\n        if (windowInfo.type === \"TabHeaderVisibilityChanged\") {\n            theWindowEvents.handleTabHeaderVisibilityChanged(windowInfo.data.isTabHeaderVisible);\n        }\n        if (windowInfo.type === \"FrameSelectionChanged\") {\n            theWindowEvents.handleFrameSelectionChanged(windowInfo.data.newWindowId, windowInfo.data.prevWindowId);\n        }\n        if (windowInfo.type === \"ButtonClicked\") {\n            theWindowEvents.handleFrameButtonClicked(windowInfo.data);\n        }\n        if (windowInfo.type === \"ButtonAdded\") {\n            theWindowEvents.handleFrameButtonAdded(windowInfo.data);\n        }\n        if (windowInfo.type === \"ButtonRemoved\") {\n            theWindowEvents.handleFrameButtonRemoved(windowInfo.data);\n        }\n        if (windowInfo.type === \"WindowZoomFactorChanged\") {\n            theWindowEvents.handleZoomFactorChanged(windowInfo.data);\n        }\n        if (windowInfo.type === \"Closed\") {\n            windowStore.remove(windowObjectAndEvents);\n            theWindowEvents.handleWindowClose();\n        }\n        if (windowInfo.type === \"FrameIsLockedChanged\") {\n            theWindowEvents.handleFrameIsLockedChanged(windowInfo.data);\n        }\n        if (windowInfo.type === \"PlacementSettingsChanged\") {\n            theWindowEvents.handlePlacementSettingsChanged(windowInfo.data);\n        }\n        if (windowInfo.type === \"DockingChanged\") {\n            theWindowEvents.handleDockingChanged(windowInfo.data);\n        }\n        if (windowInfo.type === \"AllowWorkspaceDropChanged\") {\n            theWindowEvents.handleAllowWorkspaceDropChanged(windowInfo.data);\n        }\n        this._registry.execute(\"window-event\", extendedStreamEvent);\n    }\n    createWindow(windowId, options) {\n        const windowObjAndEvents = windowFactory(windowId, this.mapToWindowConstructorOptions(options), executor, this._logger, this._appManagerGetter, this._displayAPIGetter, this._channelsAPIGetter, this._agm);\n        windowObjAndEvents.GroupCreationArgs = this.mapToGroupCreationArgs(options);\n        windowStore.add(windowObjAndEvents);\n        return windowObjAndEvents;\n    }\n    async focusChanged(theWindowEvents, theWindow, focus) {\n        theWindowEvents.handleFocusChanged(focus);\n        try {\n            if (!this._configuration.windowAvailableOnURLChanged) {\n                await windowStore.waitFor(theWindow.id);\n            }\n        }\n        catch (error) {\n            return;\n        }\n        if (focus) {\n            this._registry.execute(\"got-focus\", theWindow);\n        }\n        else {\n            this._registry.execute(\"lost-focus\", theWindow);\n        }\n    }\n    mapToWindowConstructorOptions(args) {\n        return {\n            name: args.name,\n            context: args.context,\n            bounds: args.bounds,\n            url: args.url,\n            title: args.title,\n            isVisible: args.isVisible,\n            focus: args.isFocused,\n            state: args.state,\n            frameColor: args.frameColor,\n            groupId: args.groupId,\n            neighbours: args.neighbors,\n            isFocused: args.isFocused,\n            isGroupHeaderVisible: args.groupHeaderVisible,\n            isCollapsed: args.isCollapsed,\n            tabGroupId: args.frameId,\n            frameId: args.frameId,\n            mode: args.mode,\n            isTabHeaderVisible: args.isTabHeaderVisible,\n            isTabSelected: args.isActiveTab,\n            settings: args.settings,\n            windowType: args.windowType,\n            zoomFactor: args.zoomFactor,\n            isLocked: args.isLocked,\n            placementSettings: args.placementSettings,\n            isSticky: args.isSticky,\n            tabIndex: args.tabIndex,\n            frameButtons: args.frameButtons,\n            jumpListOptions: args.jumpList,\n            applicationName: args.applicationName,\n            allowWorkspaceDrop: args.allowWorkspaceDrop\n        };\n    }\n    mapToGroupCreationArgs(args) {\n        return {\n            isGroupHibernated: args.isGroupHibernated,\n            isGroupVisible: args.isGroupVisible\n        };\n    }\n    getExtendedStreamEvent(streamEvent) {\n        try {\n            if (!streamEvent.windowId) {\n                return streamEvent;\n            }\n            const window = windowStore.get(streamEvent.windowId);\n            if (!window) {\n                return streamEvent;\n            }\n            const result = {\n                state: streamEvent.type,\n                windowName: window.API.name,\n                ...streamEvent\n            };\n            if (result.state === \"WindowFrameAdded\") {\n                result.state = \"TabAttached\";\n            }\n            if (result.state === \"StateChanged\") {\n                result.state = result.data.charAt(0).toUpperCase() + result.data.slice(1);\n            }\n            if (result.state === \"ButtonAdded\") {\n                result.state = \"FrameButtonAdded\";\n            }\n            if (result.state === \"ButtonRemoved\") {\n                result.state = \"FrameButtonRemoved\";\n            }\n            return result;\n        }\n        catch (error) {\n            return streamEvent;\n        }\n    }\n}\n\nvar envDetector = (agm, logger, appManagerGetter, displayAPIGetter, channelsAPIGetter, gdMajorVersion) => {\n    var _a;\n    const _logger = logger;\n    if (gdMajorVersion === 2) {\n        _logger.trace(\"running in HC\");\n        throw new Error(\"GD2 not supported\");\n    }\n    else if (gdMajorVersion >= 3) {\n        _logger.trace(\"running in GD 3\");\n        return new GDEnvironment(agm, _logger, appManagerGetter, displayAPIGetter, channelsAPIGetter, window.glue42gd.windowId, (_a = window.webGroupsManager) === null || _a === void 0 ? void 0 : _a.id).init();\n    }\n    else {\n        return new GDEnvironment(agm, _logger, appManagerGetter, displayAPIGetter, channelsAPIGetter).init();\n    }\n};\n\nvar groupFactory = (id, executor) => {\n    const _registry = CallbackRegistryFactory();\n    const _windowsId = [];\n    let _isHibernatedFlag;\n    let _isVisible;\n    async function addWindow(winId) {\n        var _a, _b, _c, _d;\n        if (_windowsId.indexOf(winId) === -1) {\n            _windowsId.push(winId);\n            const win = windowStore.get(winId);\n            win.Events.handleGroupChanged(groupObject, undefined);\n            _isHibernatedFlag = (_b = (_a = win.GroupCreationArgs.isGroupHibernated) !== null && _a !== void 0 ? _a : _isHibernatedFlag) !== null && _b !== void 0 ? _b : false;\n            _isVisible = (_d = (_c = win.GroupCreationArgs.isGroupVisible) !== null && _c !== void 0 ? _c : _isVisible) !== null && _d !== void 0 ? _d : true;\n            await executor.finished;\n            _registry.execute(\"window-added\", groupObject, win.API);\n        }\n    }\n    async function removeWindow(win) {\n        const index = _windowsId.indexOf(win.API.id);\n        if (index !== -1) {\n            _windowsId.splice(index, 1);\n            win.Events.handleGroupChanged(undefined, groupObject);\n            await executor.finished;\n            _registry.execute(\"window-removed\", groupObject, win.API);\n        }\n    }\n    function find(window, success, error) {\n        let winId;\n        if (typeof window === \"string\") {\n            winId = window;\n        }\n        else if (!isUndefinedOrNull(window)) {\n            winId = window.id;\n        }\n        const win = _mapToWindowObject(winId);\n        if (win) {\n            if (typeof success === \"function\") {\n                success(win);\n            }\n            return win;\n        }\n        else {\n            if (typeof error === \"function\") {\n                error(`No window with ID: ${winId}`);\n            }\n        }\n    }\n    function windows(success) {\n        const mappedWindows = _mapToWindowObjects();\n        if (typeof success === \"function\") {\n            success(mappedWindows);\n        }\n        return mappedWindows;\n    }\n    async function execute(command, options, ...keys) {\n        await executor.execute(command, options, ...keys);\n        return groupObject;\n    }\n    function handleGroupHeaderVisibilityChanged(windowInfo) {\n        _registry.execute(\"header-visibility-changed\", groupObject);\n    }\n    function handleGroupVisibilityChanged(visibile) {\n        _isVisible = visibile;\n        _registry.execute(\"group-visibility-changed\", groupObject);\n    }\n    function handleGroupHibernateChanged(isHibernatedFlag) {\n        _isHibernatedFlag = isHibernatedFlag;\n    }\n    function _mapToWindowObjects() {\n        const winObjects = [];\n        _windowsId.forEach((winId) => {\n            const windowObject = _mapToWindowObject(winId);\n            if (typeof windowObject !== \"undefined\") {\n                winObjects.push(windowObject);\n            }\n        });\n        return winObjects;\n    }\n    function _mapToWindowObject(windowId) {\n        return windowStore.get(windowId) ? windowStore.get(windowId).API : undefined;\n    }\n    function _getGroupHeaderVisibility() {\n        const windowWithHiddenHeader = _mapToWindowObjects().find((w) => !w.isGroupHeaderVisible);\n        const _isGroupHeaderVisible = windowWithHiddenHeader === undefined;\n        return _isGroupHeaderVisible;\n    }\n    function isHibernated() {\n        return _isHibernatedFlag;\n    }\n    function onHeaderVisibilityChanged(callback) {\n        return _registry.add(\"header-visibility-changed\", callback);\n    }\n    function onWindowAdded(callback) {\n        return _registry.add(\"window-added\", callback);\n    }\n    function onWindowRemoved(callback) {\n        return _registry.add(\"window-removed\", callback);\n    }\n    function onVisibilityChanged(callback) {\n        if (!callback) {\n            throw new Error(\"Callback argument is required\");\n        }\n        if (callback && typeof callback !== \"function\") {\n            throw new Error(\"Callback argument must be a function\");\n        }\n        return _registry.add(\"group-visibility-changed\", callback);\n    }\n    function onClosing(callback) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"callback must be a function\");\n        }\n        const callbackWrap = (success, error, prevent) => {\n            const promise = callback(prevent);\n            if (promise === null || promise === void 0 ? void 0 : promise.then) {\n                promise.then(success).catch(error);\n            }\n            else {\n                success();\n            }\n        };\n        return executor.onGroupClosing(callbackWrap, groupObject);\n    }\n    const groupObject = {\n        id,\n        get windows() {\n            return windows();\n        },\n        find,\n        get isHeaderVisible() {\n            return _getGroupHeaderVisibility();\n        },\n        get isHibernated() {\n            return isHibernated();\n        },\n        get isVisible() {\n            return _isVisible;\n        },\n        showHeader: (success, error) => {\n            return Utils.callbackifyPromise(() => {\n                return execute(\"setGroupHeaderVisibility\", { windowId: _windowsId[0], options: { toShow: true } }, ..._windowsId.map((w) => `GroupHeaderVisibilityChanged-${w}`));\n            }, success, error);\n        },\n        hideHeader: (success, error) => {\n            return Utils.callbackifyPromise(() => {\n                return execute(\"setGroupHeaderVisibility\", { windowId: _windowsId[0], options: { toShow: false } }, ..._windowsId.map((w) => `GroupHeaderVisibilityChanged-${w}`));\n            }, success, error);\n        },\n        getTitle: async () => {\n            const r = await executor.execute(\"getGroupTitle\", { windowId: _windowsId[0] });\n            return r.title;\n        },\n        setTitle: async (title) => {\n            if (isNullOrWhiteSpace(title)) {\n                throw new Error(\"`title` must not be null or undefined.\");\n            }\n            return execute(\"setGroupTitle\", { windowId: _windowsId[0], options: { title } });\n        },\n        capture: (captureOptions) => {\n            return executor.captureGroup(_windowsId, captureOptions);\n        },\n        maximize: (success, error) => {\n            return Utils.callbackifyPromise(() => {\n                return execute(\"maximizeGroup\", { windowId: _windowsId[0] }, ..._windowsId.map((w) => `StateChanged-${w}`));\n            }, success, error);\n        },\n        restore: (success, error) => {\n            return Utils.callbackifyPromise(() => {\n                return execute(\"restoreGroup\", { windowId: _windowsId[0] }, ..._windowsId.map((w) => `StateChanged-${w}`));\n            }, success, error);\n        },\n        show: (activate) => {\n            if (!isUndefinedOrNull(activate) && !isBoolean(activate)) {\n                throw new Error(\"Activate flag must be a boolean!\");\n            }\n            activate = !isUndefinedOrNull(activate) ? activate : true;\n            return executor.executeGroup(\"showGroup\", {\n                groupId: id,\n                options: { activate }\n            });\n        },\n        hide: () => {\n            return executor.executeGroup(\"hideGroup\", {\n                groupId: id\n            });\n        },\n        close: () => {\n            return executor.executeGroup(\"closeGroup\", {\n                groupId: id\n            });\n        },\n        showPopup: (options) => {\n            return executor.showGroupPopup(id, options);\n        },\n        onHeaderVisibilityChanged,\n        onWindowAdded,\n        onWindowRemoved,\n        onVisibilityChanged,\n        onClosing,\n    };\n    const internal = {\n        get windows() {\n            return _windowsId;\n        },\n        addWindow,\n        removeWindow,\n        handleGroupHeaderVisibilityChanged,\n        handleGroupVisibilityChanged,\n        handleGroupHibernateChanged\n    };\n    return {\n        groupAPI: groupObject,\n        groupInternal: internal,\n    };\n};\n\nvar groupsFactory = (environment, logger) => {\n    const _registry = CallbackRegistryFactory();\n    const _groups = {};\n    let heardForWindowsCounter = -1;\n    const windows = windowStore.list;\n    Object.keys(windows).forEach((k) => {\n        const win = windows[k];\n        const groupId = win.API.groupId;\n        const winId = win.API.id;\n        if (!isNullOrWhiteSpace(groupId)) {\n            addWindow(groupId, winId);\n        }\n    });\n    windowStore.onRemoved((w) => {\n        const group = findGroupWrapperByWindow(w.API);\n        removeWindow(group, w);\n    });\n    environment.onCompositionChanged((windowInfo) => {\n        handleCompositionChanged(windowInfo);\n    });\n    environment.onGroupHeaderVisibilityChanged((windowInfo) => {\n        const windowId = windowInfo.windowId;\n        const group = findGroupByWindow(windowId);\n        if (typeof group !== \"undefined\") {\n            const groupEvents = _groups[group.id];\n            if (heardForWindowsCounter === -1) {\n                heardForWindowsCounter = group.windows.length;\n            }\n            heardForWindowsCounter--;\n            if (heardForWindowsCounter === 0) {\n                heardForWindowsCounter = -1;\n                groupEvents.groupInternal.handleGroupHeaderVisibilityChanged(windowInfo);\n            }\n        }\n    });\n    environment.onGroupVisibilityChanged((data) => {\n        const groupEvents = _groups[data.groupId];\n        if (groupEvents) {\n            groupEvents.groupInternal.handleGroupVisibilityChanged(data.visible);\n        }\n    });\n    environment.onGroupStateChanged((data) => {\n        const groupWrapper = _groups[data.groupId];\n        if (data.state === \"hibernated\") {\n            if (groupWrapper === null || groupWrapper === void 0 ? void 0 : groupWrapper.groupAPI) {\n                groupWrapper.groupInternal.handleGroupHibernateChanged(true);\n            }\n            _registry.execute(\"group-hibernated\", data.groupId);\n        }\n        else if (data.state === \"resumed\") {\n            if (groupWrapper === null || groupWrapper === void 0 ? void 0 : groupWrapper.groupAPI) {\n                groupWrapper.groupInternal.handleGroupHibernateChanged(false);\n            }\n            _registry.execute(\"group-resumed\", groupWrapper.groupAPI);\n        }\n    });\n    function my() {\n        var _a;\n        return findGroupByWindow((_a = environment.myGroup()) !== null && _a !== void 0 ? _a : environment.my());\n    }\n    async function create(options) {\n        if (isUndefinedOrNull(options)) {\n            throw new Error(`options must be defined`);\n        }\n        if (isUndefinedOrNull(options.groups) || !Array.isArray(options.groups) || options.groups.length === 0) {\n            throw new Error(`options.groups must be defined`);\n        }\n        const { groupIds } = await executor.executeGroup(\"createGroups\", {\n            options\n        });\n        const groups = groupIds.map((groupId) => {\n            return waitForGroup(groupId);\n        });\n        return Promise.all(groups);\n    }\n    async function close(idOrGroup, options) {\n        if (isUndefinedOrNull(idOrGroup)) {\n            throw new Error(`group must be defined`);\n        }\n        let groupId = \"\";\n        if (typeof idOrGroup === \"string\") {\n            groupId = idOrGroup;\n        }\n        else {\n            groupId = idOrGroup.id;\n        }\n        if (isUndefinedOrNull(options)) {\n            throw new Error(`options must be defined`);\n        }\n        await executor.executeGroup(\"closeGroup\", {\n            groupId,\n            options\n        });\n    }\n    function list(success) {\n        const result = Object.keys(_groups).map((groupId) => {\n            if (_groups[groupId]) {\n                return _groups[groupId].groupAPI;\n            }\n        });\n        if (typeof success === \"function\") {\n            success(result);\n        }\n        return result;\n    }\n    function findGroupByWindow(winId, success, error) {\n        let windowId;\n        if (typeof winId === \"string\") {\n            windowId = winId;\n        }\n        else if (!isUndefinedOrNull(winId)) {\n            windowId = winId.id;\n        }\n        const result = Object.values(_groups).find((groupObj) => {\n            const group = groupObj.groupAPI;\n            const wins = group.windows.filter((w) => w.id === windowId);\n            return wins.length;\n        });\n        if (result) {\n            if (typeof success === \"function\") {\n                success(result.groupAPI);\n            }\n            return result.groupAPI;\n        }\n        else if (typeof error === \"function\") {\n            error(`Cannot find the group of the window.`);\n        }\n    }\n    function waitForGroup(groupId) {\n        if (!groupId) {\n            return Promise.reject(new Error(`groupId must be defined`));\n        }\n        return new Promise((res, rej) => {\n            const groupWrapper = _groups[groupId];\n            if (groupWrapper) {\n                res(groupWrapper.groupAPI);\n            }\n            else {\n                const un = onGroupAdded((group) => {\n                    if (group.id === groupId) {\n                        un();\n                        res(group);\n                    }\n                });\n            }\n        });\n    }\n    function getMyGroup() {\n        var _a;\n        return waitForGroup((_a = environment.myGroup()) !== null && _a !== void 0 ? _a : environment.my());\n    }\n    async function resume(groupId, activate) {\n        if (!isUndefinedOrNull(activate) && !isBoolean(activate)) {\n            throw new Error(\"Activate flag must be a boolean!\");\n        }\n        activate = !isUndefinedOrNull(activate) ? activate : true;\n        await executor.executeGroup(\"resumeGroup\", {\n            groupId,\n            options: { activate }\n        });\n    }\n    async function hibernate(groupId) {\n        await executor.executeGroup(\"hibernateGroup\", {\n            groupId\n        });\n        return groupId;\n    }\n    function onGroupAdded(callback) {\n        return _registry.add(\"group-added\", callback);\n    }\n    function onGroupRemoved(callback) {\n        return _registry.add(\"group-removed\", callback);\n    }\n    function onWindowMoved(callback) {\n        return _registry.add(\"window-moved\", callback);\n    }\n    function onHibernated(callback) {\n        if (!callback) {\n            throw new Error(\"Callback argument is required\");\n        }\n        if (callback && typeof callback !== \"function\") {\n            throw new Error(\"Callback argument must be a function\");\n        }\n        return _registry.add(\"group-hibernated\", callback);\n    }\n    function onResumed(callback) {\n        if (!callback) {\n            throw new Error(\"Callback argument is required\");\n        }\n        if (callback && typeof callback !== \"function\") {\n            throw new Error(\"Callback argument must be a function\");\n        }\n        return _registry.add(\"group-resumed\", callback);\n    }\n    function createOrGet(groupId) {\n        if (!_groups.hasOwnProperty(groupId)) {\n            const createdGroupWrapper = groupFactory(groupId, environment.executor);\n            _groups[groupId] = createdGroupWrapper;\n            const group = createdGroupWrapper.groupAPI;\n            _registry.execute(\"group-added\", group);\n            return createdGroupWrapper;\n        }\n        else {\n            return _groups[groupId];\n        }\n    }\n    function deleteIfEmpty(groupWrapper) {\n        const group = groupWrapper.groupAPI;\n        if (group.windows.length === 0) {\n            delete _groups[group.id];\n            executor.clearCallbacks(group.id);\n            _registry.execute(\"group-removed\", group);\n        }\n    }\n    function addWindow(groupId, winId) {\n        const group = createOrGet(groupId);\n        group.groupInternal.addWindow(winId);\n        return group;\n    }\n    function removeWindow(group, win) {\n        if (!group) {\n            return;\n        }\n        group.groupInternal.removeWindow(win);\n        deleteIfEmpty(group);\n    }\n    function handleCompositionChanged(state) {\n        const groupId = state.groupId;\n        const windowId = state.windowId;\n        const win = windowStore.get(windowId);\n        if (!win) {\n            return;\n        }\n        const currentGroup = findGroupWrapperByWindow(win.API);\n        if (isUndefinedOrNull(groupId)) {\n            removeWindow(currentGroup, win);\n            return;\n        }\n        if (isUndefinedOrNull(currentGroup) && !isUndefinedOrNull(groupId)) {\n            addWindow(groupId, win.API.id);\n            return;\n        }\n        if (currentGroup.groupAPI.id !== groupId) {\n            moveWindow(win, currentGroup.groupAPI.id, groupId);\n        }\n    }\n    function moveWindow(win, from, to) {\n        const winId = win.API.id;\n        const fromGroup = _groups[from];\n        removeWindow(fromGroup, win);\n        const toGroup = addWindow(to, winId);\n        win.Events.handleGroupChanged(toGroup.groupAPI, fromGroup.groupAPI);\n        _registry.execute(\"window-moved\", winId, from, to);\n    }\n    function findGroupWrapperByWindow(winId) {\n        let windowId;\n        if (typeof winId === \"string\") {\n            windowId = winId;\n        }\n        else if (!isUndefinedOrNull(winId)) {\n            windowId = winId.id;\n        }\n        return Object.values(_groups).find((groupObj) => {\n            const groupInternal = groupObj.groupInternal;\n            const wins = groupInternal.windows.filter((id) => id === windowId);\n            return wins.length;\n        });\n    }\n    const groups = {\n        get my() {\n            return my();\n        },\n        create,\n        close,\n        list,\n        findGroupByWindow,\n        waitForGroup,\n        getMyGroup,\n        onGroupAdded,\n        onGroupRemoved,\n        hibernate,\n        resume,\n        onHibernated,\n        onResumed\n    };\n    const events = { onWindowMoved };\n    return {\n        groupsAPI: groups,\n        groupsEvents: events,\n    };\n};\n\nvar WindowsFactory = (agm, logger, appManagerGetter, displayAPIGetter, channelsGetter, gdMajorVersion) => {\n    const _registry = CallbackRegistryFactory();\n    const _logger = logger;\n    let groups;\n    let environment;\n    windowStore.init(_logger);\n    const isReady = new Promise((resolve, reject) => {\n        envDetector(agm, _logger, appManagerGetter, displayAPIGetter, channelsGetter, gdMajorVersion)\n            .then((env) => {\n            environment = env;\n            groups = groupsFactory(env);\n            jumpListManager.init(env.executor, agm, _logger);\n            resolve();\n        })\n            .catch((e) => {\n            const err = `Timed out waiting for connection to Glue42 Enterprise: Error: ${e.message}`;\n            _logger.error(err, e);\n            reject(new Error(err));\n        });\n    });\n    function ready() {\n        return isReady;\n    }\n    function my() {\n        const myWindow = windowStore.getIfReady(environment.my());\n        return myWindow ? myWindow.API : undefined;\n    }\n    function open(name, url, options, success, error) {\n        return Utils.callbackifyPromise(() => {\n            if (isNullOrWhiteSpace(name)) {\n                throw new Error(\"The window name is missing.\");\n            }\n            if (isNullOrWhiteSpace(url)) {\n                throw new Error(\"The window URL is missing.\");\n            }\n            if (!isUndefinedOrNull(options)) {\n                const optionsAsAny = options;\n                for (const prop of [\"minHeight\", \"maxHeight\", \"minWidth\", \"maxWidth\", \"width\", \"height\", \"top\", \"left\"]) {\n                    if (prop in optionsAsAny) {\n                        const value = optionsAsAny[prop];\n                        if (isUndefinedOrNull(value)) {\n                            delete optionsAsAny[prop];\n                            continue;\n                        }\n                        if (!isNumber(value)) {\n                            const errMessage = `${prop} must be a number`;\n                            throw new Error(errMessage);\n                        }\n                        if (optionsAsAny[prop] === \"width\" || optionsAsAny[prop] === \"height\") {\n                            if (value <= 0) {\n                                const errMessage = `${prop} must be a positive number`;\n                                throw new Error(errMessage);\n                            }\n                        }\n                    }\n                }\n            }\n            return environment.open(name, url, options);\n        }, success, error);\n    }\n    function find(name, success, error) {\n        const windows = windowStore.list;\n        const windowsForListing = Object.keys(windows).reduce((memo, winId) => {\n            var _a;\n            const window = windows[winId];\n            if (((_a = window === null || window === void 0 ? void 0 : window.API) === null || _a === void 0 ? void 0 : _a.name) === name) {\n                memo.push(window.API);\n            }\n            return memo;\n        }, []);\n        const win = windowsForListing[0];\n        if (win) {\n            if (typeof success === \"function\") {\n                success(windowsForListing[0]);\n            }\n            return windowsForListing[0];\n        }\n        else {\n            if (typeof error === \"function\") {\n                error(\"There is no window with name:\" + name);\n            }\n        }\n    }\n    function findById(id, success, error) {\n        const windows = windowStore.list;\n        const windowsForListing = Object.keys(windows).reduce((memo, winId) => {\n            const window = windows[winId];\n            if (typeof window !== \"undefined\" && window.API.id === id) {\n                memo.push(window.API);\n            }\n            return memo;\n        }, []);\n        const win = windowsForListing[0];\n        if (win) {\n            if (typeof success === \"function\") {\n                success(windowsForListing[0]);\n            }\n            return windowsForListing[0];\n        }\n        else {\n            if (typeof error === \"function\") {\n                error(\"There is no window with such id:\" + id);\n            }\n        }\n    }\n    function list(success) {\n        const windows = windowStore.list;\n        const windowsForListing = Object.keys(windows)\n            .map((k) => {\n            return windows[k].API;\n        });\n        if (typeof success !== \"function\") {\n            return windowsForListing;\n        }\n        success(windowsForListing);\n    }\n    function configure(options) {\n        const win = my();\n        const winId = win ? win.id : \"\";\n        return executor.configure(winId, options);\n    }\n    function autoArrange(displayId) {\n        return executor.autoArrange(displayId);\n    }\n    function windowAdded(callback) {\n        return _registry.add(\"window-added\", callback);\n    }\n    function windowRemoved(callback) {\n        return _registry.add(\"window-removed\", callback);\n    }\n    function tabAttached(callback) {\n        let unsubFunc;\n        let unsubscribed = false;\n        isReady.then(() => {\n            if (unsubscribed) {\n                return;\n            }\n            unsubFunc = environment.tabAttached(callback);\n        });\n        return () => {\n            unsubscribed = true;\n            if (unsubFunc) {\n                unsubFunc();\n            }\n        };\n    }\n    function tabDetached(callback) {\n        let unsubFunc;\n        let unsubscribed = false;\n        isReady.then(() => {\n            if (unsubscribed) {\n                return;\n            }\n            unsubFunc = environment.tabDetached(callback);\n        });\n        return () => {\n            unsubscribed = true;\n            if (unsubFunc) {\n                unsubFunc();\n            }\n        };\n    }\n    function onWindowFrameColorChanged(callback) {\n        let unsubFunc;\n        let unsubscribed = false;\n        isReady.then(() => {\n            if (unsubscribed) {\n                return;\n            }\n            unsubFunc = environment.onWindowFrameColorChanged(callback);\n        });\n        return () => {\n            unsubscribed = true;\n            if (unsubFunc) {\n                unsubFunc();\n            }\n        };\n    }\n    function onWindowGotFocus(callback) {\n        let unsubFunc;\n        let unsubscribed = false;\n        isReady.then(() => {\n            if (unsubscribed) {\n                return;\n            }\n            unsubFunc = environment.onWindowGotFocus(callback);\n        });\n        return () => {\n            unsubscribed = true;\n            if (unsubFunc) {\n                unsubFunc();\n            }\n        };\n    }\n    function onWindowLostFocus(callback) {\n        let unsubFunc;\n        let unsubscribed = false;\n        isReady.then(() => {\n            if (unsubscribed) {\n                return;\n            }\n            unsubFunc = environment.onWindowLostFocus(callback);\n        });\n        return () => {\n            unsubscribed = true;\n            if (unsubFunc) {\n                unsubFunc();\n            }\n        };\n    }\n    function onArrangementChanged(callback) {\n        return environment.onWindowsAutoArrangeChanged(callback);\n    }\n    function onEvent(callback) {\n        let unsubFunc;\n        let unsubscribed = false;\n        isReady.then(() => {\n            if (unsubscribed) {\n                return;\n            }\n            unsubFunc = environment.onEvent(callback);\n        });\n        return () => {\n            unsubscribed = true;\n            if (unsubFunc) {\n                unsubFunc();\n            }\n        };\n    }\n    function createFlydown(targetId, config) {\n        return environment.createFlydown(targetId, config);\n    }\n    function showPopup(targetId, config) {\n        return environment.showPopup(targetId, config);\n    }\n    function handleWindowAdded(w) {\n        _registry.execute(\"window-added\", w.API);\n    }\n    function handleWindowRemoved(w) {\n        _registry.execute(\"window-removed\", w.API);\n    }\n    windowStore.onReadyWindow(handleWindowAdded);\n    windowStore.onRemoved(handleWindowRemoved);\n    return {\n        my,\n        open,\n        find,\n        findById,\n        list,\n        ready,\n        onWindowAdded: windowAdded,\n        windowAdded,\n        onWindowRemoved: windowRemoved,\n        windowRemoved,\n        onTabAttached: tabAttached,\n        onTabDetached: tabDetached,\n        onWindowFrameColorChanged,\n        onArrangementChanged,\n        get groups() {\n            return groups.groupsAPI;\n        },\n        onWindowGotFocus,\n        onWindowLostFocus,\n        onEvent,\n        createFlydown,\n        showPopup,\n        configure,\n        autoArrange\n    };\n};\n\nclass LayoutStore {\n    constructor() {\n        this.layouts = [];\n    }\n    removeWhere(condition) {\n        this.layouts = this.layouts.filter(condition);\n    }\n    removeAll() {\n        this.layouts = [];\n    }\n    add(item) {\n        this.layouts.push(item);\n    }\n    get all() {\n        return this.layouts;\n    }\n    where(condition) {\n        return this.layouts.filter(condition);\n    }\n    first(condition) {\n        return this.where(condition)[0];\n    }\n}\nvar store = new LayoutStore();\n\nconst SaveContextMethodName = \"T42.HC.GetSaveContext\";\nclass ContextProvider {\n    constructor(config, activitiesGetter, callbacks, logger) {\n        this.config = config;\n        this.activitiesGetter = activitiesGetter;\n        this.callbacks = callbacks;\n        this.logger = logger;\n        this.interop = config.agm;\n        this.registerRequestMethods();\n    }\n    onSaveRequested(callback) {\n        return this.callbacks.add(\"saveRequested\", callback);\n    }\n    isActivityOwner() {\n        if (typeof htmlContainer !== \"undefined\") {\n            const context = htmlContainer.getContext();\n            return context && context._t42 && context._t42.activityIsOwner;\n        }\n        const activities = this.activitiesGetter();\n        if (!activities) {\n            return false;\n        }\n        if (!activities.inActivity) {\n            return false;\n        }\n        const myWindow = activities.my.window;\n        const myActivity = activities.my.activity;\n        if (!myActivity && !myWindow) {\n            return false;\n        }\n        return myActivity.owner.id === myWindow.id;\n    }\n    registerRequestMethods() {\n        this.interop.register(SaveContextMethodName, (args) => {\n            const usersCbs = this.callbacks.execute(\"saveRequested\", args);\n            if ((usersCbs === null || usersCbs === void 0 ? void 0 : usersCbs.length) > 1) {\n                this.logger.warn(`Multiple subscriptions for \"glue.layouts.onSaveRequested\" - only the first one will be used`);\n            }\n            const requestResult = usersCbs[0];\n            const autoSaveWindowContext = this.config.autoSaveWindowContext;\n            if (typeof autoSaveWindowContext === \"boolean\" && autoSaveWindowContext) {\n                return { autoSaveWindowContext };\n            }\n            else if (Array.isArray(autoSaveWindowContext) && autoSaveWindowContext.length > 0) {\n                return { autoSaveWindowContext };\n            }\n            const result = { windowContext: requestResult === null || requestResult === void 0 ? void 0 : requestResult.windowContext, activityContext: undefined };\n            if (this.isActivityOwner()) {\n                result.activityContext = requestResult === null || requestResult === void 0 ? void 0 : requestResult.activityContext;\n            }\n            return result;\n        });\n    }\n}\n\nfunction transformACSLayout(something) {\n    if (!something) {\n        return something;\n    }\n    if (Array.isArray(something)) {\n        return something.map((item) => {\n            return transformACSLayout(item);\n        });\n    }\n    if (typeof something === \"string\" || typeof something === \"number\" || typeof something === \"boolean\") {\n        return something;\n    }\n    const initial = {};\n    return Object.keys(something).reduce((accumulator, current) => {\n        var _a;\n        const value = something[current];\n        const convertedValue = transformACSLayout(value);\n        let key = current;\n        if (((_a = current[0]) === null || _a === void 0 ? void 0 : _a.toLowerCase()) !== current[0]) {\n            key = current[0].toLowerCase() + current.substr(1);\n        }\n        accumulator[key] = convertedValue;\n        return accumulator;\n    }, initial);\n}\n\nclass LayoutImpl {\n    constructor(data) {\n        this.name = data.name;\n        this.type = data.type;\n        this.components = data.components;\n        this.context = data.context;\n        this.metadata = data.metadata;\n        this.version = data.version;\n        this.displays = data.displays;\n    }\n}\n\nconst LayoutsCommandMethod = \"T42.ACS.Command\";\nclass LayoutsAPIImpl {\n    constructor(config, stream, callbacks, logger) {\n        this.config = config;\n        this.stream = stream;\n        this.callbacks = callbacks;\n        this.isRegisterMethodForLayoutModified = false;\n        this.appManager = config.appManager;\n        this.provider = new ContextProvider(config, config.activityGetter, callbacks, logger);\n        stream.subscribe();\n    }\n    async setDefaultGlobal(name) {\n        const methodName = \"SelectDefaultLayout\";\n        await this.invokeMethodCore(methodName, { name });\n        return;\n    }\n    async clearDefaultGlobal() {\n        const methodName = \"DeselectDefaultLayout\";\n        this.invokeMethodCore(methodName);\n        return;\n    }\n    async getDefaultGlobal() {\n        const methodName = \"GetDefaultLayout\";\n        const result = await this.invokeMethodCore(methodName);\n        const layout = result.returned;\n        if (!layout) {\n            return undefined;\n        }\n        if (this.isSlimMode()) {\n            return layout;\n        }\n        return this.list().find((l) => l.name === layout.name && l.type === \"Global\");\n    }\n    ready() {\n        if (this.config.mode === \"fullWaitSnapshot\") {\n            return this.stream.gotSnapshot;\n        }\n        return this.stream.ready;\n    }\n    save(layout) {\n        return new Promise((resolve, reject) => {\n            var _a, _b;\n            this.verifyNotSlimMode();\n            if (isUndefinedOrNull(layout)) {\n                return reject(new Error(\"layout is required\"));\n            }\n            if (isNullOrWhiteSpace(layout.name)) {\n                return reject(new Error(\"layout.name argument is required\"));\n            }\n            if (isNullOrWhiteSpace(layout.type)) {\n                layout.type = \"Global\";\n            }\n            if (!isNullOrWhiteSpace(layout.activityId)) {\n                layout.type = \"Activity\";\n            }\n            const layoutObject = {\n                name: layout.name,\n                type: layout.type,\n                context: (_a = layout.context) !== null && _a !== void 0 ? _a : {},\n                metadata: (_b = layout.metadata) !== null && _b !== void 0 ? _b : {},\n                options: {},\n            };\n            if (layout.type === \"Activity\") {\n                let actId = layout.activityId;\n                if (!actId) {\n                    if (!this.appManager.myInstance.inActivity) {\n                        return reject(new Error(\"Current application is not in activity. Cannot save activity layout for it.\"));\n                    }\n                    actId = this.appManager.myInstance.activityId;\n                }\n                layoutObject.activityId = actId;\n            }\n            else if (layout.type === \"Global\") {\n                if (Array.isArray(layout.ignoreInstances)) {\n                    layoutObject.options.ignoreInstances = layout.ignoreInstances;\n                }\n                if (Array.isArray(layout.instances)) {\n                    layoutObject.options.instances = layout.instances;\n                }\n                if (typeof layout.setAsCurrent === \"boolean\") {\n                    layoutObject.options.setAsCurrent = layout.setAsCurrent;\n                }\n            }\n            else {\n                return reject(new Error(`layout type ${layout.type} is not supported`));\n            }\n            this.invokeMethodAndTrack(\"SaveLayout\", layoutObject, resolve, reject);\n        });\n    }\n    restore(options) {\n        return new Promise((resolve, reject) => {\n            var _a, _b, _c;\n            this.verifyNotSlimMode();\n            if (isUndefinedOrNull(options)) {\n                return reject(new Error(\"options argument is required\"));\n            }\n            if (isNullOrWhiteSpace(options.name)) {\n                return reject(new Error(\"options.name argument is required\"));\n            }\n            if (isNullOrWhiteSpace(options.type)) {\n                options.type = \"Global\";\n            }\n            if (!isNullOrWhiteSpace(options.activityIdToJoin)) {\n                options.type = \"Activity\";\n            }\n            if (options.type === \"Activity\") {\n                if (isUndefinedOrNull(options.setActivityContext)) {\n                    options.setActivityContext = true;\n                }\n                if (typeof options.setActivityContext !== \"boolean\") {\n                    return reject(new Error(\"`setActivityContext` must hold a boolean value.\"));\n                }\n                options.activityIdToJoin = (_a = options.activityIdToJoin) !== null && _a !== void 0 ? _a : this.appManager.myInstance.activityId;\n            }\n            if (!isUndefinedOrNull(options.closeRunningInstance)) {\n                options.closeRunningInstances = options.closeRunningInstance;\n            }\n            if (isUndefinedOrNull(options.closeRunningInstances)) {\n                options.closeRunningInstances = true;\n            }\n            if (!isBoolean(options.closeRunningInstances)) {\n                return reject(new Error(\"`closeRunningInstances` must hold a boolean value.\"));\n            }\n            if (isUndefinedOrNull(options.closeMe)) {\n                options.closeMe = options.closeRunningInstances;\n            }\n            if (!isBoolean(options.closeMe)) {\n                return reject(new Error(\"`closeMe` must hold a boolean value.\"));\n            }\n            if (!isUndefinedOrNull(options.context) && !isObject(options.context)) {\n                return reject(new Error(\"`context` must hold an object value.\"));\n            }\n            if (!isUndefinedOrNull(options.timeout) && typeof options.timeout !== \"number\") {\n                return reject(new Error(\"`timeout` must hold an number value.\"));\n            }\n            options.context = (_b = options.context) !== null && _b !== void 0 ? _b : {};\n            const restoreOptions = {\n                activityToJoin: options.activityIdToJoin,\n                setActivityContext: options.setActivityContext,\n                ignoreActivityWindowTypes: options.ignoreActivityWindowTypes,\n                reuseExistingWindows: options.reuseWindows,\n                closeRunningInstances: options.closeRunningInstances,\n                excludeFromClosing: options.closeMe ? [] : [(_c = this.appManager.myInstance) === null || _c === void 0 ? void 0 : _c.id]\n            };\n            const arg = {\n                type: options.type,\n                name: options.name,\n                context: options.context,\n                options: restoreOptions\n            };\n            if (options.timeout) {\n                arg.timeout = options.timeout;\n            }\n            this.invokeMethodAndTrack(\"RestoreLayout\", arg, resolve, reject, true);\n        });\n    }\n    reset(options) {\n        return new Promise((resolve, reject) => {\n            this.verifyNotSlimMode();\n            if (typeof options !== \"object\") {\n                return reject(new Error(\"options argument is required\"));\n            }\n            if (isNullOrWhiteSpace(options.layoutId)) {\n                return reject(new Error(\"options.layoutId argument is required\"));\n            }\n            const msg = {\n                ...options\n            };\n            this.invokeMethodAndTrack(\"ResetLayout\", msg, resolve, reject, true);\n        });\n    }\n    remove(type, name) {\n        return new Promise((resolve, reject) => {\n            this.verifyNotSlimMode();\n            if (!name) {\n                return reject(new Error(\"name argument is required\"));\n            }\n            if (!type) {\n                return reject(new Error(\"type argument is required\"));\n            }\n            const msg = {\n                type,\n                name,\n            };\n            this.invokeMethodAndTrack(\"RemoveLayout\", msg, resolve, reject);\n        });\n    }\n    list() {\n        this.verifyNotSlimMode();\n        return store.all;\n    }\n    import(layouts, mode) {\n        return new Promise((resolve, reject) => {\n            this.verifyNotSlimMode();\n            if (!isUndefinedOrNull(mode)) {\n                if (mode !== \"merge\" && mode !== \"replace\") {\n                    return reject(new Error(`${mode} is not supported - only \"merge\" and \"replace\"`));\n                }\n            }\n            if (!Array.isArray(layouts)) {\n                return reject(new Error(\"layouts arguments is not an array\"));\n            }\n            const msg = {\n                mode: mode || \"replace\",\n                layouts\n            };\n            this.invokeMethodAndTrack(\"ImportLayouts\", msg, resolve, reject, true);\n        });\n    }\n    export(layoutType) {\n        return new Promise((resolve, reject) => {\n            const handleResult = (result) => {\n                let layouts = this.getObjectValues(result.Layouts).map((t) => new LayoutImpl(transformACSLayout(t)));\n                if (layoutType) {\n                    layouts = layouts.filter((l) => l.type === layoutType);\n                }\n                resolve(layouts);\n            };\n            this.invokeMethodAndTrack(\"ExportLayouts\", {}, handleResult, reject, true);\n        });\n    }\n    rename(layout, newName) {\n        return new Promise((resolve, reject) => {\n            this.verifyNotSlimMode();\n            if (!layout) {\n                return reject(new Error(\"layout argument is required\"));\n            }\n            if (!layout.name) {\n                return reject(new Error(\"name argument is required\"));\n            }\n            if (!layout.type) {\n                return reject(new Error(\"type argument is required\"));\n            }\n            const msg = { type: layout.type, oldName: layout.name, newName };\n            this.invokeMethodAndTrack(\"RenameLayout\", msg, resolve, reject);\n        });\n    }\n    updateMetadata(layout) {\n        return new Promise((resolve, reject) => {\n            if (!layout) {\n                return reject(new Error(\"layout argument is required\"));\n            }\n            if (!layout.name) {\n                return reject(new Error(\"name argument is required\"));\n            }\n            if (!layout.type) {\n                return reject(new Error(\"type argument is required\"));\n            }\n            if (!layout.metadata) {\n                return reject(new Error(\"metadata argument is required\"));\n            }\n            const layoutObject = {\n                name: layout.name,\n                type: layout.type,\n                metadata: layout.metadata\n            };\n            this.invokeMethodAndTrack(\"UpdateMetadata\", layoutObject, resolve, reject, true);\n        });\n    }\n    hibernate(name, options) {\n        return new Promise((resolve, reject) => {\n            if (!name) {\n                return reject(new Error(\"name cannot be empty\"));\n            }\n            options = options || {};\n            const request = {\n                name,\n                type: \"Global\",\n                context: options.context || {},\n                metadata: options.metadata || {},\n            };\n            this.invokeMethodAndTrack(\"HibernateLayout\", request, resolve, reject, true);\n        });\n    }\n    resume(name, context, options) {\n        return new Promise((resolve, reject) => {\n            if (!name) {\n                return reject(new Error(\"name cannot be empty\"));\n            }\n            const request = {\n                name,\n                type: \"Global\",\n                context,\n                ...options\n            };\n            this.invokeMethodAndTrack(\"ResumeLayout\", request, resolve, reject, true);\n        });\n    }\n    async getCurrentLayout() {\n        const methodName = \"GetCurrentLayout\";\n        const result = await this.invokeMethodCore(methodName);\n        let layout = result.returned.layout;\n        if (!layout) {\n            return undefined;\n        }\n        if (!this.isSlimMode()) {\n            layout = this.list().find((l) => l.name === layout.name && l.type === layout.type);\n        }\n        return layout;\n    }\n    getRestoredLayoutsInfo() {\n        return new Promise((resolve, reject) => {\n            const methodName = \"GetRestoredLayoutsInfo\";\n            this.invokeMethodCore(methodName)\n                .then((result) => {\n                const restoredLayouts = result.returned;\n                resolve(restoredLayouts);\n            })\n                .catch(reject);\n        });\n    }\n    onAdded(callback) {\n        const result = this.callbacks.add(\"added\", callback);\n        if (store.all.length > 0) {\n            store.all.forEach((layout) => {\n                try {\n                    callback(layout);\n                }\n                catch (err) { }\n            });\n        }\n        return result;\n    }\n    onRemoved(callback) {\n        return this.callbacks.add(\"removed\", callback);\n    }\n    onChanged(callback) {\n        return this.callbacks.add(\"changed\", callback);\n    }\n    onRestored(callback) {\n        return this.callbacks.add(\"restored\", callback);\n    }\n    onRenamed(callback) {\n        return this.callbacks.add(\"renamed\", callback);\n    }\n    onEvent(callback) {\n        return this.stream.onEvent(callback);\n    }\n    onSaveRequested(callback) {\n        return this.provider.onSaveRequested(callback);\n    }\n    onLayoutModified(callback) {\n        if (this.isRegisterMethodForLayoutModified === false) {\n            this.isRegisterMethodForLayoutModified = true;\n            this.registerMethodForLayoutModified();\n        }\n        return this.callbacks.add(\"layout-modified\", callback);\n    }\n    updateAppContextInCurrent(context) {\n        return new Promise((resolve, reject) => {\n            if (context && typeof context !== \"object\") {\n                return reject(new Error(\"context must be an object\"));\n            }\n            context = context !== null && context !== void 0 ? context : {};\n            const request = {\n                context\n            };\n            this.invokeMethodAndTrack(\"UpdateLayoutComponentContext\", request, resolve, reject, true);\n        });\n    }\n    updateDefaultContext(context) {\n        return new Promise((resolve, reject) => {\n            if (context && typeof context !== \"object\") {\n                return reject(new Error(\"context must be an object\"));\n            }\n            context = context !== null && context !== void 0 ? context : {};\n            const request = {\n                context\n            };\n            this.invokeMethodAndTrack(\"UpdateDefaultContext\", request, resolve, reject, true);\n        });\n    }\n    async get(name, type) {\n        const matching = this.list().find((l) => l.name === name && l.type === type);\n        if (!matching) {\n            throw new Error(`cannot find layout with name=${name} and type=${type}`);\n        }\n        return matching;\n    }\n    async getAll(type) {\n        const matching = this.list().filter((l) => type === l.type);\n        return matching;\n    }\n    async forceRefresh() {\n        const methodName = \"RefreshLayouts\";\n        await this.invokeMethodCore(methodName);\n    }\n    isSlimMode() {\n        return this.config.mode === \"slim\";\n    }\n    verifyNotSlimMode() {\n        if (this.isSlimMode()) {\n            throw Error(\"Operation not allowed in slim mode. Run in full mode.\");\n        }\n    }\n    async registerMethodForLayoutModified() {\n        await this.config.agm.register(\"T42.ACS.LayoutModified\", (args, caller) => {\n            this.callbacks.execute(\"layout-modified\", args);\n        });\n    }\n    invokeMethodAndTrack(methodName, args, resolve, reject, skipStreamEvent) {\n        let streamEventReceived = skipStreamEvent;\n        let agmResult;\n        const token = Utils.generateId();\n        args.token = token;\n        const handleResult = () => {\n            if (streamEventReceived && agmResult) {\n                resolve(agmResult);\n            }\n        };\n        const methodResponseTimeoutMs = 120 * 1000;\n        if (!skipStreamEvent) {\n            this.stream.waitFor(token, methodResponseTimeoutMs)\n                .then(() => {\n                streamEventReceived = true;\n                handleResult();\n            })\n                .catch((err) => {\n                reject(err);\n            });\n        }\n        const responseHandler = (result) => {\n            if (!result.returned) {\n                return reject(new Error(\"No result from method \" + methodName));\n            }\n            if (result.returned.status && (result.returned.status !== \"Success\" && result.returned.status !== \"PartialSuccess\")) {\n                if (typeof (result.returned) === \"string\") {\n                    return reject(new Error(result.returned));\n                }\n                else if (typeof (result.returned) === \"object\") {\n                    if (result.returned.status && result.returned.failed) {\n                        return reject(new Error(`${result.returned.status}: ${JSON.stringify(result.returned.failed)}`));\n                    }\n                    else {\n                        return reject(new Error(result.returned));\n                    }\n                }\n            }\n            agmResult = result.returned;\n            handleResult();\n        };\n        this.invokeMethodCore(methodName, args, \"best\", { methodResponseTimeoutMs })\n            .then(responseHandler)\n            .catch((err) => reject(err));\n    }\n    async invokeMethodCore(methodName, args, target, options) {\n        if (this.isCommandMethodPresent()) {\n            return await this.config.agm.invoke(LayoutsCommandMethod, { command: methodName, data: args }, target, options);\n        }\n        else {\n            return await this.config.agm.invoke(`T42.ACS.${methodName}`, args, target, options);\n        }\n    }\n    getObjectValues(obj) {\n        if (!obj) {\n            return [];\n        }\n        return Object.keys(obj).map((k) => obj[k]);\n    }\n    isCommandMethodPresent() {\n        return this.config.agm.methods().some((method) => method.name === LayoutsCommandMethod);\n    }\n}\n\nclass ACSStream {\n    constructor(agm, callbacks) {\n        this.agm = agm;\n        this.callbacks = callbacks;\n        this.StreamName = \"T42.ACS.OnLayoutEvent\";\n        this.ready = new Promise((resolve, reject) => {\n            this.resolveReady = resolve;\n            this.rejectReady = reject;\n        });\n        this.gotSnapshot = new Promise((resolve, reject) => {\n            this.resolveGotSnapshot = resolve;\n            this.rejectGotSnapshot = reject;\n        });\n    }\n    subscribe(noRetry) {\n        const transform = (obj) => {\n            return this.getObjectValues(obj).map((t) => transformACSLayout(t));\n        };\n        if (!this.checkForLayoutEventMethod()) {\n            if (noRetry) {\n                this.resolveReady();\n            }\n            setTimeout(() => {\n                this.subscribe(true);\n            }, 500);\n        }\n        else {\n            this.agm.subscribe(this.StreamName, { waitTimeoutMs: 10000 })\n                .then((subs) => {\n                subs.onData((args) => {\n                    const data = args.data;\n                    if (data.IsSnapshot) {\n                        this.resolveGotSnapshot();\n                    }\n                    this.addLayouts(transform(data.OnLayoutAdded), data.IsSnapshot);\n                    this.removeLayouts(transform(data.OnLayoutRemoved));\n                    this.changeLayouts(transform(data.OnLayoutChanged));\n                    this.renameLayouts(transform(data.OnLayoutRenamed));\n                    this.restoredLayout(transform(data.OnLayoutRestored));\n                    this.callbacks.execute(\"streamEvent\", data);\n                });\n                subs.onFailed((err) => {\n                    const msg = `Can not subscribe to \"${this.StreamName}\" stream - ${JSON.stringify(err)}`;\n                    this.rejectReady(msg);\n                    this.rejectGotSnapshot(msg);\n                });\n                this.resolveReady();\n            })\n                .catch((err) => {\n                const msg = `Error subscribing to \"${this.StreamName}\" stream - ${JSON.stringify(err)}`;\n                this.rejectReady(msg);\n                this.rejectGotSnapshot(msg);\n            });\n        }\n    }\n    onEvent(callback) {\n        return this.callbacks.add(\"streamEvent\", callback);\n    }\n    waitFor(token, timeout) {\n        if (!timeout) {\n            timeout = 30000;\n        }\n        return new Promise((resolve, reject) => {\n            let done = false;\n            const unsubscribe = this.onEvent((streamEvent) => {\n                if (streamEvent.Token === token) {\n                    done = true;\n                    unsubscribe();\n                    resolve();\n                }\n            });\n            setTimeout(() => {\n                if (!done) {\n                    reject(\"timed out\");\n                }\n            }, timeout);\n        });\n    }\n    checkForLayoutEventMethod() {\n        try {\n            return this.agm\n                .methods()\n                .map((m) => m.name)\n                .indexOf(this.StreamName) !== -1;\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    addLayouts(layoutsData, isSnapshot) {\n        if (!layoutsData) {\n            return;\n        }\n        const createAndNotifyLayout = (layoutData) => {\n            const layout = new LayoutImpl(layoutData);\n            store.add(layout);\n            this.callbacks.execute(\"added\", layout);\n        };\n        layoutsData.forEach((layoutData) => {\n            if (isSnapshot) {\n                const found = store.first((existingLayout) => this.compareLayouts(existingLayout, layoutData));\n                if (!found) {\n                    createAndNotifyLayout(layoutData);\n                }\n            }\n            else {\n                createAndNotifyLayout(layoutData);\n            }\n        });\n    }\n    removeLayouts(removedLayouts) {\n        if (!removedLayouts) {\n            return;\n        }\n        removedLayouts.forEach((removedLayout) => {\n            store.removeWhere((existingLayout) => !this.compareLayouts(existingLayout, removedLayout));\n            this.callbacks.execute(\"removed\", removedLayout);\n        });\n    }\n    changeLayouts(changedLayouts) {\n        if (!changedLayouts) {\n            return;\n        }\n        changedLayouts.forEach((changedLayout) => {\n            store.removeWhere((existingLayout) => !this.compareLayouts(existingLayout, changedLayout));\n            store.add(new LayoutImpl(changedLayout));\n            this.callbacks.execute(\"changed\", changedLayout);\n        });\n    }\n    renameLayouts(renamedLayouts) {\n        if (!renamedLayouts) {\n            return;\n        }\n        renamedLayouts.forEach((renamedLayout) => {\n            const existingLayout = store.first((current) => this.compareLayouts(current, { type: renamedLayout.type, name: renamedLayout.oldName }));\n            if (!existingLayout) {\n                throw Error(`received rename event for unknown layout with type ${renamedLayout.type} and name ${renamedLayout.oldName}`);\n            }\n            existingLayout.name = renamedLayout.newName;\n            this.callbacks.execute(\"renamed\", existingLayout);\n        });\n    }\n    compareLayouts(layout1, layout2) {\n        return layout1.name === layout2.name && layout1.type === layout2.type;\n    }\n    getObjectValues(obj) {\n        if (!obj) {\n            return [];\n        }\n        return Object.keys(obj).map((k) => obj[k]);\n    }\n    restoredLayout(restoredLayouts) {\n        if (!restoredLayouts) {\n            return;\n        }\n        restoredLayouts.forEach((restoredLayout) => {\n            const existingLayout = store.first((current) => this.compareLayouts(current, { type: restoredLayout.type, name: restoredLayout.name }));\n            this.callbacks.execute(\"restored\", existingLayout);\n        });\n    }\n}\n\nfunction streamNull () {\n    return {\n        ready: Promise.resolve(undefined),\n        subscribe: () => { },\n        onEvent: (callback) => () => { },\n        waitFor: (token, timeout) => Promise.resolve(undefined),\n        gotSnapshot: Promise.resolve(undefined),\n    };\n}\n\nfunction LayoutsFactory (config) {\n    if (!config.agm) {\n        throw Error(\"config.agm is required\");\n    }\n    if (!config.logger) {\n        throw Error(\"config.logger is required\");\n    }\n    config.mode = config.mode || \"slim\";\n    const logger = config.logger;\n    const callbacks = CallbackRegistryFactory();\n    let acsStream;\n    if (config.mode === \"full\" || \"fullWaitSnapshot\") {\n        acsStream = new ACSStream(config.agm, callbacks);\n    }\n    else {\n        acsStream = streamNull();\n    }\n    return new LayoutsAPIImpl(config, acsStream, callbacks, logger);\n}\n\nconst T42DisplayCommand = \"T42.Displays.Command\";\nconst T42DisplayOnEvent = \"T42.Displays.OnEvent\";\nclass DisplayManager {\n    constructor(_agm, _logger) {\n        this._agm = _agm;\n        this._logger = _logger;\n        this._registry = CallbackRegistryFactory();\n        this._registered = false;\n        this.all = async () => {\n            const displays = await this.callGD(DisplayCommand.GetAll, {});\n            return displays.map(this.decorateDisplay);\n        };\n        this.get = async (id) => {\n            const display = await this.callGD(DisplayCommand.Get, { id });\n            return this.decorateDisplay(display);\n        };\n        this.getPrimary = async () => {\n            const primary = (await this.all()).find((d) => d.isPrimary);\n            return primary;\n        };\n        this.capture = async (options) => {\n            const screenshot = await this.callGD(DisplayCommand.Capture, { ...options });\n            return screenshot;\n        };\n        this.captureAll = async (options) => {\n            const screenshots = await this.callGD(DisplayCommand.CaptureAll, { ...options });\n            return screenshots;\n        };\n        this.getMousePosition = async () => {\n            const point = await this.callGD(DisplayCommand.GetMousePosition);\n            return point;\n        };\n        this.callGD = async (command, options) => {\n            const invocationResult = await this._agm.invoke(T42DisplayCommand, { options: { ...options }, command });\n            return invocationResult.returned.data;\n        };\n        this.decorateDisplay = (original) => {\n            const decoratedDisplay = {\n                ...original,\n                capture: (size) => this.capture({ id: original.id, size })\n            };\n            const workAreaAsAny = decoratedDisplay.workArea;\n            workAreaAsAny.x = workAreaAsAny.left;\n            workAreaAsAny.y = decoratedDisplay.workArea.top;\n            return decoratedDisplay;\n        };\n    }\n    getByWindowId(id) {\n        const current = this.callGD(DisplayCommand.GetByWindowId, { id });\n        return current;\n    }\n    onDisplayChanged(cb) {\n        this.register();\n        return this._registry.add(\"on-display-changed\", cb);\n    }\n    register() {\n        if (this._registered) {\n            return;\n        }\n        this._registered = true;\n        this._agm.register(T42DisplayOnEvent, (args, caller) => {\n            const event = args.event;\n            const data = args.data;\n            switch (event) {\n                case \"display-changed\":\n                    this._registry.execute(\"on-display-changed\", data.displays.map(this.decorateDisplay));\n                    break;\n                default:\n                    this._logger.warn(`unknown event - ${event}`);\n                    break;\n            }\n        });\n    }\n}\nvar DisplayCommand;\n(function (DisplayCommand) {\n    DisplayCommand[\"Capture\"] = \"capture\";\n    DisplayCommand[\"CaptureAll\"] = \"captureAll\";\n    DisplayCommand[\"GetAll\"] = \"getAll\";\n    DisplayCommand[\"Get\"] = \"get\";\n    DisplayCommand[\"GetByWindowId\"] = \"getByWindowId\";\n    DisplayCommand[\"GetMousePosition\"] = \"getMousePosition\";\n})(DisplayCommand || (DisplayCommand = {}));\n\nlet interop;\nlet windowId;\nconst T42_ANNOUNCE_METHOD_NAME = \"T42.Channels.Announce\";\nasync function setupInterop(interopLib, channels) {\n    var _a, _b;\n    interop = interopLib;\n    if (typeof window !== \"undefined\") {\n        if (window.glue42gd) {\n            windowId = window.glue42gd.windowId;\n        }\n    }\n    if (!windowId) {\n        return;\n    }\n    await interop.register(\"T42.Channels.Command\", (args) => {\n        const command = args.command;\n        if (!command) {\n            throw new Error(\"missing command argument\");\n        }\n        if (command === \"join\") {\n            const id = args.channel;\n            if (!id) {\n                throw new Error(\"missing argument id\");\n            }\n            channels.joinNoSelectorSwitch(id);\n            return;\n        }\n        if (command === \"leave\") {\n            channels.leaveNoSelectorSwitch();\n            return;\n        }\n        if (command === \"get\") {\n            const id = channels.current();\n            return { id };\n        }\n        if (command === \"restrictions-changed\") {\n            const restrictions = args.restrictions;\n            const targetWindowId = args.swId;\n            channels.handleRestrictionsChanged(restrictions, targetWindowId);\n            return;\n        }\n        if (command === \"isFdc3DataWrappingSupported\") {\n            return { isSupported: true };\n        }\n        throw new Error(`unknown command ${command}`);\n    });\n    const result = await interop.invoke(\"T42.Channels.Announce\", { swId: windowId, instance: interop.instance.instance });\n    if ((_a = result.returned) === null || _a === void 0 ? void 0 : _a.restrictions) {\n        channels.handleRestrictionsChanged((_b = result.returned) === null || _b === void 0 ? void 0 : _b.restrictions, windowId);\n    }\n}\nasync function switchChannel(channel, id) {\n    interop.invoke(\"T42.Channels.Announce\", {\n        swId: id !== null && id !== void 0 ? id : windowId,\n        command: \"switchChannel\",\n        data: { newChannel: channel }\n    });\n}\nasync function setRestrictions(restrictions) {\n    var _a;\n    await interop.invoke(T42_ANNOUNCE_METHOD_NAME, {\n        swId: (_a = restrictions.windowId) !== null && _a !== void 0 ? _a : windowId,\n        command: \"restrict\",\n        data: restrictions\n    });\n    return;\n}\nasync function getRestrictionsByWindow(id) {\n    try {\n        const result = await interop.invoke(T42_ANNOUNCE_METHOD_NAME, {\n            swId: id !== null && id !== void 0 ? id : windowId,\n            command: \"getRestrictions\"\n        });\n        return result.returned;\n    }\n    catch (e) {\n        return;\n    }\n}\nasync function setRestrictionsForAllChannels(restrictions) {\n    var _a;\n    await interop.invoke(T42_ANNOUNCE_METHOD_NAME, {\n        swId: (_a = restrictions.windowId) !== null && _a !== void 0 ? _a : windowId,\n        command: \"restrictAll\",\n        data: restrictions\n    });\n    return;\n}\nasync function getWindowsWithChannels(filter) {\n    const result = await interop.invoke(T42_ANNOUNCE_METHOD_NAME, { command: \"getChannelsInfo\", data: { filter } });\n    return result.returned;\n}\nasync function addOrRemoveChannel(command, id, color) {\n    await interop.invoke(T42_ANNOUNCE_METHOD_NAME, { command, data: { id, color } });\n}\n\nconst CONTEXT_PREFIX = \"___channel___\";\nconst LATEST_FDC3_TYPE = \"latest_fdc3_type\";\nclass SharedContextSubscriber {\n    constructor(contexts) {\n        this.contexts = contexts;\n    }\n    subscribe(callback) {\n        this.callback = callback;\n    }\n    subscribeFor(name, callback) {\n        if (!this.isChannel(name)) {\n            return Promise.reject(new Error(`Channel with name: ${name} doesn't exist!`));\n        }\n        const contextName = this.createContextName(name);\n        return this.contexts.subscribe(contextName, (data, _, __, ___, extraData) => {\n            callback(data.data, data, extraData === null || extraData === void 0 ? void 0 : extraData.updaterId);\n        });\n    }\n    async switchChannel(name) {\n        this.unsubscribe();\n        const contextName = this.createContextName(name);\n        this.unsubscribeFunc = await this.contexts.subscribe(contextName, (data, _, __, ___, extraData) => {\n            if (this.callback) {\n                this.callback(data.data, data, extraData === null || extraData === void 0 ? void 0 : extraData.updaterId);\n            }\n        });\n    }\n    leave() {\n        if (this.callback) {\n            this.callback({}, undefined);\n        }\n        this.unsubscribe();\n    }\n    all() {\n        const contextNames = this.contexts.all();\n        const channelContextNames = contextNames.filter((contextName) => contextName.startsWith(CONTEXT_PREFIX));\n        const channelNames = channelContextNames.map((channelContextName) => channelContextName.substr(CONTEXT_PREFIX.length));\n        return channelNames;\n    }\n    async getContextData(name) {\n        if (!this.isChannel(name)) {\n            throw new Error(`A channel with name: ${name} doesn't exist!`);\n        }\n        const contextName = this.createContextName(name);\n        const contextData = await this.contexts.get(contextName);\n        if (contextData[LATEST_FDC3_TYPE]) {\n            return this.getContextWithFdc3Data(contextData);\n        }\n        return contextData;\n    }\n    updateChannel(name, data) {\n        const contextName = this.createContextName(name);\n        return this.contexts.update(contextName, data);\n    }\n    updateData(name, data) {\n        const contextName = this.createContextName(name);\n        const fdc3Type = this.getFDC3Type(data);\n        if (this.contexts.setPathSupported) {\n            const pathValues = Object.keys(data).map((key) => {\n                return {\n                    path: `data.` + key,\n                    value: data[key]\n                };\n            });\n            if (fdc3Type) {\n                pathValues.push({ path: LATEST_FDC3_TYPE, value: fdc3Type });\n            }\n            return this.contexts.setPaths(contextName, pathValues);\n        }\n        else {\n            if (fdc3Type) {\n                data[LATEST_FDC3_TYPE] = fdc3Type;\n            }\n            return this.contexts.update(contextName, { data });\n        }\n    }\n    setPaths(name, paths) {\n        const contextName = this.createContextName(name);\n        if (this.contexts.setPathSupported) {\n            const pathValues = paths.map((p) => {\n                return {\n                    path: `data.` + p.path,\n                    value: p.value\n                };\n            });\n            pathValues.map((p) => {\n                const fdc3Type = this.getFDC3Type(p.value);\n                if (fdc3Type) {\n                    pathValues.push({ path: LATEST_FDC3_TYPE, value: fdc3Type });\n                }\n            });\n            return this.contexts.setPaths(contextName, pathValues);\n        }\n        else {\n            throw new Error(\"setPaths is not supported!\");\n        }\n    }\n    isChannel(name) {\n        return this.all().some((channelName) => channelName === name);\n    }\n    async remove(name) {\n        if (!this.isChannel(name)) {\n            throw new Error(`A channel with name: ${name} doesn't exist!`);\n        }\n        const contextName = this.createContextName(name);\n        await this.contexts.destroy(contextName);\n    }\n    unsubscribe() {\n        if (this.unsubscribeFunc) {\n            this.unsubscribeFunc();\n        }\n    }\n    createContextName(name) {\n        return CONTEXT_PREFIX + name;\n    }\n    getFDC3Type(data) {\n        const fdc3PropsArr = Object.keys(data).filter((key) => key.indexOf(\"fdc3_\") === 0);\n        if (fdc3PropsArr.length === 0) {\n            return;\n        }\n        if (fdc3PropsArr.length > 1) {\n            throw new Error(\"FDC3 does not support updating of multiple context keys\");\n        }\n        return fdc3PropsArr[0].split(\"_\").slice(1).join(\"_\");\n    }\n    getContextWithFdc3Data(channelContext) {\n        const { latest_fdc3_type, ...rest } = channelContext;\n        const parsedType = latest_fdc3_type.split(\"&\").join(\".\");\n        const fdc3Context = { type: parsedType, ...rest.data[`fdc3_${latest_fdc3_type}`] };\n        delete rest.data[`fdc3_${latest_fdc3_type}`];\n        const context = {\n            name: channelContext.name,\n            meta: channelContext.meta,\n            data: {\n                ...rest.data,\n                fdc3: fdc3Context\n            }\n        };\n        return context;\n    }\n}\n\nclass ChannelsImpl {\n    constructor(shared, interop, getWindows, logger) {\n        this.shared = shared;\n        this.interop = interop;\n        this.getWindows = getWindows;\n        this.logger = logger;\n        this.subsKey = \"subs\";\n        this.changedKey = \"changed\";\n        this.isInitialJoin = true;\n        this.registry = CallbackRegistryFactory();\n        this.pendingReplays = {};\n        this.pendingRestrictionCallbacks = new Map();\n        this.shared.subscribe(this.handler.bind(this));\n        this.subscribeForChannelRestrictionsChange();\n        if (typeof window !== \"undefined\" && typeof window.glue42gd !== \"undefined\") {\n            this.currentContext = window.glue42gd.initialChannel;\n            if (this.currentContext) {\n                this.joinNoSelectorSwitch(this.currentContext);\n            }\n        }\n    }\n    subscribe(callback) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n        const id = Utils.generateId();\n        this.pendingReplays[id] = true;\n        const wrappedCallback = this.getWrappedSubscribeCallback(callback, id);\n        if (this.lastUpdate) {\n            let lastUpdate = Object.assign({}, this.lastUpdate);\n            setTimeout(async () => {\n                if (this.pendingReplays[id]) {\n                    if (this.lastUpdate) {\n                        lastUpdate = this.lastUpdate;\n                    }\n                    wrappedCallback(lastUpdate.context.data, lastUpdate.context, lastUpdate.updaterId);\n                }\n                delete this.pendingReplays[id];\n            }, 0);\n        }\n        const unsub = this.registry.add(this.subsKey, wrappedCallback);\n        return () => {\n            this.pendingReplays[id] = false;\n            this.pendingRestrictionCallbacks.delete(id);\n            unsub();\n        };\n    }\n    async subscribeFor(name, callback) {\n        if (typeof name !== \"string\") {\n            throw new Error(\"Please provide the name as a string!\");\n        }\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n        const id = Utils.generateId();\n        const wrappedCallback = this.getWrappedSubscribeCallback(callback, id);\n        const unsub = await this.shared.subscribeFor(name, wrappedCallback);\n        return () => {\n            this.pendingRestrictionCallbacks.delete(id);\n            unsub();\n        };\n    }\n    async publish(data, options) {\n        if (typeof data !== \"object\") {\n            throw new Error(\"Please provide the data as an object!\");\n        }\n        if (options) {\n            this.validatePublishOptions(options);\n        }\n        if (typeof options === \"object\") {\n            return this.publishWithOptions(data, options);\n        }\n        const channelName = typeof options === \"string\" ? options : this.currentContext;\n        if (!channelName) {\n            throw new Error(\"Not joined to any channel!\");\n        }\n        if (!this.shared.isChannel(channelName)) {\n            return Promise.reject(new Error(`A channel with name: ${channelName} doesn't exist!`));\n        }\n        const canPublish = (await this.getRestrictionsByChannel(channelName)).write;\n        if (!canPublish) {\n            throw new Error(`Window does not have permission to write to channel ${this.currentContext}`);\n        }\n        return this.shared.updateData(channelName, data);\n    }\n    async setPaths(paths, name) {\n        if (name) {\n            if (typeof name !== \"string\") {\n                throw new Error(\"Please provide the name as a string!\");\n            }\n            if (!this.shared.isChannel(name)) {\n                return Promise.reject(new Error(`A channel with name: ${name} doesn't exist!`));\n            }\n            if (!(await this.getRestrictionsByChannel(name)).write) {\n                throw new Error(`Window does not have permission to write to channel ${name}`);\n            }\n            return this.shared.setPaths(name, paths);\n        }\n        if (!this.currentContext) {\n            throw new Error(\"Not joined to any channel!\");\n        }\n        if (!(await this.getRestrictionsByChannel(this.currentContext)).write) {\n            throw new Error(`Window does not have permission to write to channel ${this.currentContext}`);\n        }\n        if (!Array.isArray(paths)) {\n            throw new Error(\"Path Values argument is not a valid array\");\n        }\n        paths.forEach((path) => {\n            this.validatePathArgs(path);\n        });\n        return this.shared.setPaths(this.currentContext, paths);\n    }\n    async setPath(path, name) {\n        if (name) {\n            if (typeof name !== \"string\") {\n                throw new Error(\"Please provide the name as a string!\");\n            }\n            if (!this.shared.isChannel(name)) {\n                return Promise.reject(new Error(`A channel with name: ${name} doesn't exist!`));\n            }\n            if (!(await this.getRestrictionsByChannel(name)).write) {\n                throw new Error(`Window does not have permission to write to channel ${name}`);\n            }\n            return this.shared.setPaths(name, [path]);\n        }\n        if (!this.currentContext) {\n            throw new Error(\"Not joined to any channel!\");\n        }\n        if (!(await this.getRestrictionsByChannel(this.currentContext)).write) {\n            throw new Error(`Window does not have permission to write to channel ${this.currentContext}`);\n        }\n        this.validatePathArgs(path);\n        return this.shared.setPaths(this.currentContext, [path]);\n    }\n    all() {\n        const channelNames = this.shared.all();\n        return Promise.resolve(channelNames);\n    }\n    async list() {\n        const channelNames = await this.all();\n        const channelContexts = await Promise.all(channelNames.map((channelName) => this.get(channelName)));\n        return channelContexts;\n    }\n    get(name) {\n        if (typeof name !== \"string\") {\n            return Promise.reject(new Error(\"Please provide the channel name as a string!\"));\n        }\n        return this.shared.getContextData(name);\n    }\n    getMy() {\n        if (!this.currentContext) {\n            return Promise.resolve(undefined);\n        }\n        return this.get(this.currentContext);\n    }\n    async join(name, windowId) {\n        if (windowId) {\n            return switchChannel(name, windowId);\n        }\n        return this.joinCore(name);\n    }\n    async joinNoSelectorSwitch(name) {\n        return this.joinCore(name, false);\n    }\n    leave(windowId) {\n        if (windowId) {\n            return switchChannel(undefined, windowId);\n        }\n        return this.leaveCore();\n    }\n    leaveNoSelectorSwitch() {\n        return this.leaveCore(false);\n    }\n    current() {\n        return this.currentContext;\n    }\n    my() {\n        return this.current();\n    }\n    changed(callback) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n        const current = this.current();\n        if (current) {\n            setTimeout(() => {\n                callback(this.current());\n            }, 0);\n        }\n        return this.registry.add(this.changedKey, callback);\n    }\n    onChanged(callback) {\n        return this.changed(callback);\n    }\n    async add(info) {\n        if (typeof info !== \"object\") {\n            throw new Error(\"Please provide the info as an object!\");\n        }\n        if (typeof info.name === \"undefined\") {\n            throw new Error(\"info.name is missing!\");\n        }\n        if (typeof info.name !== \"string\") {\n            throw new Error(\"Please provide the info.name as a string!\");\n        }\n        if (typeof info.meta === \"undefined\") {\n            throw new Error(\"info.meta is missing!\");\n        }\n        if (typeof info.meta !== \"object\") {\n            throw new Error(\"Please provide the info.meta as an object!\");\n        }\n        if (typeof info.meta.color === \"undefined\") {\n            throw new Error(\"info.meta.color is missing!\");\n        }\n        if (typeof info.meta.color !== \"string\") {\n            throw new Error(\"Please provide the info.meta.color as a string!\");\n        }\n        const context = {\n            name: info.name,\n            meta: info.meta || {},\n            data: info.data || {}\n        };\n        await this.shared.updateChannel(info.name, context);\n        await addOrRemoveChannel(\"addChannel\", info.name, info.meta.color);\n        return context;\n    }\n    async remove(channel) {\n        if (typeof channel !== \"string\") {\n            throw new Error(\"Please provide the channel name as a string!\");\n        }\n        await this.shared.remove(channel);\n        await addOrRemoveChannel(\"removeChannel\", channel);\n    }\n    async getWindowsOnChannel(channel) {\n        if (typeof channel !== \"string\") {\n            throw new Error(\"Please provide the channel name as a string!\");\n        }\n        const windowInfos = await this.getWindowsWithChannels({ channels: [channel] });\n        return windowInfos.map((w) => w.window);\n    }\n    async getWindowsWithChannels(filter) {\n        try {\n            const info = await getWindowsWithChannels(filter);\n            const windows = this.getWindows();\n            if (info === null || info === void 0 ? void 0 : info.windows) {\n                return info.windows.map((windowInfo) => {\n                    const window = windows.findById(windowInfo.windowId);\n                    return {\n                        window,\n                        channel: windowInfo.channel,\n                        application: windowInfo.application\n                    };\n                });\n            }\n        }\n        catch (er) {\n            this.logger.error(`Error getting all channel enabled windows. This method is available since Glue42 3.12`, er);\n        }\n        return [];\n    }\n    async restrict(restriction) {\n        return setRestrictions(restriction);\n    }\n    async getRestrictions(windowId) {\n        return getRestrictionsByWindow(windowId);\n    }\n    async restrictAll(restriction) {\n        return setRestrictionsForAllChannels(restriction);\n    }\n    handleRestrictionsChanged(restrictions, windowId) {\n        this.registry.execute(\"restrictions-changed\", {\n            restrictions,\n            windowId\n        });\n    }\n    handler(data, context, updaterId) {\n        if (!context && !updaterId) {\n            this.lastUpdate = undefined;\n            return;\n        }\n        this.lastUpdate = { context, updaterId };\n        this.pendingReplays = {};\n        this.registry.execute(this.subsKey, data, context, updaterId);\n    }\n    async joinCore(name, changeSelector = true) {\n        if (typeof name !== \"string\") {\n            throw new Error(\"Please provide the channel name as a string!\");\n        }\n        if (!this.isInitialJoin && name === this.currentContext) {\n            return;\n        }\n        this.isInitialJoin = false;\n        const doesChannelExist = (channelName) => {\n            const channelNames = this.shared.all();\n            return channelNames.includes(channelName);\n        };\n        if (!doesChannelExist(name)) {\n            const channelExistsPromise = new Promise((resolve, reject) => {\n                const intervalId = setInterval(() => {\n                    if (doesChannelExist(name)) {\n                        clearTimeout(timeoutId);\n                        clearInterval(intervalId);\n                        resolve();\n                    }\n                }, 100);\n                const timeoutId = setTimeout(() => {\n                    clearInterval(intervalId);\n                    return reject(new Error(`A channel with name: ${name} doesn't exist!`));\n                }, 3000);\n            });\n            await channelExistsPromise;\n        }\n        this.currentContext = name;\n        this.lastUpdate = undefined;\n        await this.shared.switchChannel(name);\n        if (changeSelector) {\n            switchChannel(name);\n        }\n        this.registry.execute(this.changedKey, name);\n    }\n    leaveCore(changeSelector = true) {\n        this.currentContext = undefined;\n        this.registry.execute(this.changedKey, undefined);\n        this.shared.leave();\n        if (changeSelector) {\n            switchChannel();\n        }\n        return Promise.resolve();\n    }\n    async getRestrictionsByChannel(channelName) {\n        var _a;\n        const restrictions = (_a = this.channelRestrictions) !== null && _a !== void 0 ? _a : await getRestrictionsByWindow();\n        if (!restrictions || !Array.isArray(restrictions.channels) || !restrictions.channels.find(c => c.name === channelName)) {\n            return {\n                read: true,\n                write: true\n            };\n        }\n        const byChannel = restrictions.channels.find(c => c.name === channelName);\n        return byChannel;\n    }\n    onRestrictionsChanged(callback, callbackId, currentChannelName) {\n        this.pendingRestrictionCallbacks.set(callbackId, {\n            cb: callback,\n            channelName: currentChannelName\n        });\n        if (this.onRestrictionsChangedSub) {\n            return;\n        }\n        this.onRestrictionsChangedSub = this.registry.add(\"restrictions-changed\", ({ restrictions }) => {\n            this.pendingRestrictionCallbacks.forEach(({ cb, channelName }, id) => {\n                const currentChannel = restrictions.channels.find((c) => c.name === channelName);\n                if (!currentChannel) {\n                    return;\n                }\n                if (currentChannel.read) {\n                    this.pendingRestrictionCallbacks.delete(id);\n                    if (this.pendingRestrictionCallbacks.values.length === 0 && this.onRestrictionsChangedSub) {\n                        this.onRestrictionsChangedSub();\n                        this.onRestrictionsChangedSub = null;\n                    }\n                    cb();\n                }\n            });\n        });\n    }\n    subscribeForChannelRestrictionsChange() {\n        this.registry.add(\"restrictions-changed\", (r) => {\n            this.channelRestrictions = r.restrictions;\n        });\n    }\n    validatePathArgs(path) {\n        if (!path) {\n            throw new Error(\"Please provide a valid path value argument\");\n        }\n        if (typeof path !== \"object\") {\n            throw new Error(`Path Value argument is not a valid object: ${JSON.stringify(path)}`);\n        }\n        if (!path.path) {\n            throw new Error(`path property is missing from Path Value argument: ${JSON.stringify(path)}`);\n        }\n        if (!path.value) {\n            throw new Error(`value property is missing from Path Value argument: ${JSON.stringify(path)}`);\n        }\n        if (typeof path.path !== \"string\") {\n            throw new Error(`path property is not a valid string from the Path Value argument: ${JSON.stringify(path)}`);\n        }\n    }\n    validatePublishOptions(options) {\n        if ((typeof options !== \"string\" && typeof options !== \"object\") || Array.isArray(options)) {\n            throw new Error(\"Provide options as a string or an object\");\n        }\n        if (typeof options === \"object\") {\n            this.validatePublishOptionsObject(options);\n            return;\n        }\n        if (options === \"string\" && !options.length) {\n            throw new Error(\"Provide options as a non-empty string\");\n        }\n    }\n    validatePublishOptionsObject(options) {\n        if (typeof options !== \"object\" || Array.isArray(options)) {\n            throw new Error(\"Provide options as an object\");\n        }\n        if (options.name && (typeof options.name !== \"string\" || !options.name.length)) {\n            throw new Error(\"Provide options.name as a non-empty string\");\n        }\n        if (Object.keys(options).includes(\"fdc3\") && typeof options.fdc3 !== \"boolean\") {\n            throw new Error(\"Provide options.fdc3 as a boolean\");\n        }\n    }\n    async publishWithOptions(data, options) {\n        const channelName = options.name || this.currentContext;\n        if (!this.shared.isChannel(channelName)) {\n            throw new Error(`A channel with name: ${options.name} doesn't exist!`);\n        }\n        if (!channelName) {\n            throw new Error(\"Cannot publish to channel, because not joined to a channel!\");\n        }\n        const canPublish = (await this.getRestrictionsByChannel(channelName)).write;\n        if (!canPublish) {\n            throw new Error(`Window does not have permission to write to channel ${this.currentContext}`);\n        }\n        if (!options.fdc3) {\n            return this.shared.updateData(channelName, data);\n        }\n        return this.publishFdc3Data(channelName, data);\n    }\n    async publishFdc3Data(channelName, data) {\n        var _a;\n        if (typeof data.type !== \"string\" || !((_a = data.type) === null || _a === void 0 ? void 0 : _a.length)) {\n            throw new Error(\"Expected a valid FDC3 Context with compulsory 'type' field\");\n        }\n        const { type, ...rest } = data;\n        const parsedType = type.split(\".\").join(\"&\");\n        const fdc3DataToPublish = { [`fdc3_${parsedType}`]: rest };\n        return this.shared.updateData(channelName, fdc3DataToPublish);\n    }\n    getWrappedSubscribeCallback(callback, id) {\n        const wrappedCallback = async (_, context, updaterId) => {\n            const restrictionByChannel = await this.getRestrictionsByChannel(context.name);\n            const channelData = this.getDataWithFdc3Encoding(context);\n            if (restrictionByChannel.read) {\n                callback(channelData, context, updaterId);\n            }\n            else {\n                this.onRestrictionsChanged(() => {\n                    callback(channelData, context, updaterId);\n                }, id, context.name);\n            }\n        };\n        return wrappedCallback;\n    }\n    getDataWithFdc3Encoding(context) {\n        const { data, latest_fdc3_type } = context;\n        if (!latest_fdc3_type) {\n            return data;\n        }\n        const parsedType = latest_fdc3_type.split(\"&\").join(\".\");\n        const latestTypePropName = `fdc3_${latest_fdc3_type}`;\n        const fdc3Data = { type: parsedType, ...data[latestTypePropName] };\n        const { [latestTypePropName]: latestFDC3Type, ...rest } = data;\n        return { ...rest, fdc3: fdc3Data };\n    }\n}\n\nfunction factory$4(contexts, agm, getWindows, logger) {\n    const sharedContexts = new SharedContextSubscriber(contexts);\n    const channels = new ChannelsImpl(sharedContexts, agm, getWindows, logger);\n    const setupInteropPromise = setupInterop(agm, channels);\n    return {\n        subscribe: channels.subscribe.bind(channels),\n        subscribeFor: channels.subscribeFor.bind(channels),\n        publish: channels.publish.bind(channels),\n        setPath: channels.setPath.bind(channels),\n        setPaths: channels.setPaths.bind(channels),\n        all: channels.all.bind(channels),\n        list: channels.list.bind(channels),\n        get: channels.get.bind(channels),\n        join: channels.join.bind(channels),\n        leave: channels.leave.bind(channels),\n        restrict: channels.restrict.bind(channels),\n        getRestrictions: channels.getRestrictions.bind(channels),\n        restrictAll: channels.restrictAll.bind(channels),\n        current: channels.current.bind(channels),\n        my: channels.my.bind(channels),\n        changed: channels.changed.bind(channels),\n        onChanged: channels.onChanged.bind(channels),\n        add: channels.add.bind(channels),\n        remove: channels.remove.bind(channels),\n        getWindowsOnChannel: channels.getWindowsOnChannel.bind(channels),\n        getWindowsWithChannels: channels.getWindowsWithChannels.bind(channels),\n        getMy: channels.getMy.bind(channels),\n        ready: async () => {\n            await Promise.all([contexts.ready(), setupInteropPromise]);\n        }\n    };\n}\n\nconst CommandMethod = \"T42.Hotkeys.Command\";\nconst InvokeMethod = \"T42.Hotkeys.Invoke\";\nconst RegisterCommand = \"register\";\nconst UnregisterCommand = \"unregister\";\nconst UnregisterAllCommand = \"unregisterAll\";\nclass HotkeysImpl {\n    constructor(agm) {\n        this.agm = agm;\n        this.registry = CallbackRegistryFactory();\n        this.firstHotkey = true;\n        this.hotkeys = new Map();\n    }\n    async register(info, callback) {\n        if (typeof info === \"undefined\") {\n            throw new Error(\"Hotkey parameter missing\");\n        }\n        if (typeof info === \"string\") {\n            info = {\n                hotkey: info\n            };\n        }\n        else {\n            if (!info.hotkey) {\n                throw new Error(\"Info's hotkey parameter missing\");\n            }\n            info = {\n                hotkey: info.hotkey,\n                description: info.description\n            };\n        }\n        const hkToLower = this.formatHotkey(info.hotkey);\n        if (this.hotkeys.has(hkToLower)) {\n            throw new Error(`Shortcut for ${hkToLower} already registered`);\n        }\n        if (this.firstHotkey) {\n            this.firstHotkey = false;\n            await this.registerInvokeAGMMethod();\n        }\n        this.registry.add(hkToLower, callback);\n        await this.agm.invoke(CommandMethod, { command: RegisterCommand, hotkey: hkToLower, description: info.description });\n        this.hotkeys.set(hkToLower, info);\n    }\n    async unregister(hotkey) {\n        if (typeof hotkey === \"undefined\") {\n            throw new Error(\"hotkey parameter missing\");\n        }\n        if (typeof hotkey !== \"string\") {\n            throw new Error(\"hotkey parameter must be string\");\n        }\n        const hkToLower = this.formatHotkey(hotkey);\n        await this.agm.invoke(CommandMethod, { command: UnregisterCommand, hotkey: hkToLower });\n        this.hotkeys.delete(hkToLower);\n        this.registry.clearKey(hkToLower);\n    }\n    async unregisterAll() {\n        await this.agm.invoke(CommandMethod, { command: UnregisterAllCommand });\n        this.hotkeys.clear();\n        this.registry.clear();\n    }\n    isRegistered(hotkey) {\n        const hkToLower = this.formatHotkey(hotkey);\n        return this.hotkeys.has(hkToLower);\n    }\n    registerInvokeAGMMethod() {\n        return this.agm.register(InvokeMethod, (args) => {\n            const hkToLower = args.key.toLowerCase();\n            const info = this.hotkeys.get(hkToLower);\n            this.registry.execute(hkToLower, info);\n        });\n    }\n    formatHotkey(hotkey) {\n        if (hotkey) {\n            return hotkey.replace(/\\s/g, \"\").toLowerCase();\n        }\n    }\n}\n\nfunction factory$3(agm) {\n    const hotkeys = new HotkeysImpl(agm);\n    return {\n        register: hotkeys.register.bind(hotkeys),\n        unregister: hotkeys.unregister.bind(hotkeys),\n        unregisterAll: hotkeys.unregisterAll.bind(hotkeys),\n        isRegistered: hotkeys.isRegistered.bind(hotkeys),\n        ready: () => Promise.resolve()\n    };\n}\n\nvar version = \"6.6.0\";\n\nvar prepareConfig = (options) => {\n    function getLibConfig(value, defaultMode, trueMode) {\n        if (typeof value === \"boolean\" && !value) {\n            return undefined;\n        }\n        const mode = getModeAsString(value, defaultMode, trueMode);\n        if (typeof mode === \"undefined\") {\n            return undefined;\n        }\n        if (typeof value === \"object\") {\n            value.mode = mode;\n            return value;\n        }\n        return {\n            mode,\n        };\n    }\n    function getModeAsString(value, defaultMode, trueMode) {\n        if (typeof value === \"object\") {\n            return getModeAsString(value.mode, defaultMode, trueMode).toString();\n        }\n        else if (typeof value === \"undefined\") {\n            if (typeof defaultMode === \"boolean\" && !defaultMode) {\n                return undefined;\n            }\n            else if (typeof defaultMode === \"boolean\" && defaultMode) {\n                return typeof trueMode === \"undefined\" ? defaultMode : trueMode;\n            }\n            else if (typeof defaultMode === \"undefined\") {\n                return undefined;\n            }\n            else {\n                return defaultMode;\n            }\n        }\n        else if (typeof value === \"boolean\") {\n            if (value) {\n                return (typeof trueMode === \"undefined\") ? defaultMode : trueMode;\n            }\n            else {\n                return undefined;\n            }\n        }\n        return value;\n    }\n    const appDefaultMode = true;\n    const appDefaultTrueMode = \"startOnly\";\n    const activitiesDefaultMode = Utils.isNode() ? false : \"trackMyTypeAndInitiatedFromMe\";\n    const activitiesTrueMode = \"trackMyTypeAndInitiatedFromMe\";\n    const layoutsDefaultMode = \"slim\";\n    const layoutsTrueMode = layoutsDefaultMode;\n    const exposeAPI = typeof options.exposeAPI === \"boolean\" || typeof options.exposeGlue === \"boolean\";\n    return {\n        layouts: getLibConfig(options.layouts, layoutsDefaultMode, layoutsTrueMode),\n        activities: getLibConfig(options.activities, activitiesDefaultMode, activitiesTrueMode),\n        appManager: getLibConfig(options.appManager, appDefaultMode, appDefaultTrueMode),\n        windows: getLibConfig(options.windows, true, true),\n        channels: getLibConfig(options.channels, false, true),\n        displays: getLibConfig(options.displays, true, true),\n        exposeAPI: exposeAPI ? exposeAPI : true\n    };\n};\n\nclass Glue42Notification {\n    constructor(options) {\n        this.options = options;\n        this.callbacks = CallbackRegistryFactory();\n        this.actions = options.actions;\n        this.body = options.body;\n        this.badge = options.badge;\n        this.data = options.data;\n        this.dir = options.dir;\n        this.icon = options.icon;\n        this.image = options.image;\n        this.lang = options.lang;\n        this.renotify = options.renotify;\n        this.requireInteraction = options.requireInteraction;\n        this.silent = options.silent;\n        this.tag = options.tag;\n        this.timestamp = options.timestamp;\n        this.title = options.title;\n    }\n    close() {\n        throw new Error(\"Method not implemented.\");\n    }\n    addEventListener(type, listener, options) {\n        this.callbacks.add(type, listener);\n    }\n    removeEventListener(type, listener, options) {\n    }\n    dispatchEvent(event) {\n        this.callbacks.execute(event.type, event);\n        return true;\n    }\n}\n\nclass PanelAPI {\n    constructor(interop, onStreamEvent) {\n        this.interop = interop;\n        this.onStreamEvent = onStreamEvent;\n    }\n    onVisibilityChanged(callback) {\n        return this.onStreamEvent(\"on-panel-visibility-changed\", callback);\n    }\n    toggle() {\n        return this.interop.invoke(\"T42.Notifications.Show\");\n    }\n    show() {\n        return this.interop.invoke(\"T42.Notifications.Show\", { show: true });\n    }\n    hide() {\n        return this.interop.invoke(\"T42.Notifications.Hide\");\n    }\n    async isVisible() {\n        const interopResult = await this.interop.invoke(\"T42.Notifications.Execute\", { command: \"isPanelVisible\" });\n        return interopResult.returned.panelVisible;\n    }\n    toAPI() {\n        return {\n            onVisibilityChanged: this.onVisibilityChanged.bind(this),\n            toggle: this.toggle.bind(this),\n            show: this.show.bind(this),\n            hide: this.hide.bind(this),\n            isVisible: this.isVisible.bind(this)\n        };\n    }\n}\n\nconst STARTING_INDEX = 0;\nclass Notifications {\n    constructor(interop, logger) {\n        this.interop = interop;\n        this.NotificationsSubscribeStream = \"T42.GNS.Subscribe.Notifications\";\n        this.NotificationsCounterStream = \"T42.Notifications.Counter\";\n        this.RaiseNotificationMethodName = \"T42.GNS.Publish.RaiseNotification\";\n        this.NotificationsExecuteMethod = \"T42.Notifications.Execute\";\n        this.methodsRegistered = false;\n        this.NOTIFICATIONS_CONFIGURE_METHOD_NAME = \"T42.Notifications.Configure\";\n        this.methodNameRoot = \"T42.Notifications.Handler-\" + Utils.generateId();\n        this.nextId = 0;\n        this.notifications = {};\n        this.registry = CallbackRegistryFactory();\n        this.subscribedForNotifications = false;\n        this.subscribedCounterStream = false;\n        this.subscriptionsCountForNotifications = 0;\n        this.subscriptionsCountForCounter = 0;\n        this.logger = logger.subLogger(\"notifications\");\n        this._panel = new PanelAPI(interop, this.onStreamEventCore.bind(this));\n        this._panelAPI = this._panel.toAPI();\n        this.subscribeInternalEvents();\n    }\n    get maxActions() {\n        return 2;\n    }\n    get panel() {\n        return this._panelAPI;\n    }\n    async raise(options) {\n        var _a, _b, _c, _d;\n        this.validate(options);\n        if (!this.methodsRegistered) {\n            const bunchOfPromises = [];\n            for (let index = STARTING_INDEX; index < this.maxActions; index++) {\n                bunchOfPromises.push(this.interop.register(`${this.methodNameRoot}_${index}`, this.handleNotificationEvent.bind(this)));\n            }\n            this.methodsRegistered = true;\n            await Promise.all(bunchOfPromises);\n        }\n        const id = String(this.nextId++);\n        const type = (_a = options.type) !== null && _a !== void 0 ? _a : \"Notification\";\n        const notification = {\n            id: options.id,\n            state: (_b = options.state) !== null && _b !== void 0 ? _b : \"Active\",\n            title: options.title,\n            type,\n            severity: (_c = options.severity) !== null && _c !== void 0 ? _c : \"None\",\n            description: options.body,\n            glueRoutingDetailMethodName: `${this.methodNameRoot}_${STARTING_INDEX}`,\n            actions: [],\n            sourceId: id,\n            source: options.source,\n            publishExtraEvents: true,\n            clickInterop: options.clickInterop\n        };\n        if (options.actions) {\n            this.handleActions(options, id, notification);\n        }\n        this.handleOptions(options, notification);\n        const g42notification = new Glue42Notification(options);\n        this.notifications[id] = g42notification;\n        try {\n            const invocationResult = await this.interop.invoke(this.RaiseNotificationMethodName, { notification });\n            g42notification.id = (_d = invocationResult.returned) === null || _d === void 0 ? void 0 : _d.id;\n        }\n        catch (err) {\n            const errorMessage = err.message;\n            setTimeout(() => {\n                this.handleNotificationErrorEvent(g42notification, errorMessage);\n            }, 1);\n        }\n        return g42notification;\n    }\n    async setFilter(filter) {\n        const result = await this.interop.invoke(\"T42.Notifications.Filter\", filter);\n        return result.returned;\n    }\n    async getFilter() {\n        const result = await this.interop.invoke(\"T42.Notifications.Filter\");\n        return result.returned;\n    }\n    async configure(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        if (!options || Array.isArray(options)) {\n            throw new Error(\"Invalid options - should be an object.\");\n        }\n        if (Object.values(options).length === 0) {\n            throw new Error(\"The argument must be a non-empty object.\");\n        }\n        if (typeof options.enable !== \"undefined\" && typeof options.enable !== \"boolean\") {\n            throw new Error(\"Expected type of enabled - boolean.\");\n        }\n        if (typeof options.enableToasts !== \"undefined\" && typeof options.enableToasts !== \"boolean\") {\n            throw new Error(\"Expected type of enableToasts - boolean.\");\n        }\n        if (typeof options.toastExpiry !== \"undefined\" && typeof options.toastExpiry !== \"number\") {\n            throw new Error(\"Expected type of toastExpiry - number.\");\n        }\n        if (options.sourceFilter && typeof options.sourceFilter !== \"object\") {\n            throw new Error(\"Expected type of sourceFilter - object.\");\n        }\n        if (((_a = options.sourceFilter) === null || _a === void 0 ? void 0 : _a.allowed) && !Array.isArray((_b = options.sourceFilter) === null || _b === void 0 ? void 0 : _b.allowed)) {\n            throw new Error(\"Expected type of sourceFilter.allowed - array.\");\n        }\n        if (((_c = options.sourceFilter) === null || _c === void 0 ? void 0 : _c.blocked) && !Array.isArray((_d = options.sourceFilter) === null || _d === void 0 ? void 0 : _d.blocked)) {\n            throw new Error(\"Expected type of sourceFilter.blocked - array.\");\n        }\n        if (options.toasts && typeof options.toasts !== \"object\") {\n            throw new Error(\"Expected type of (options.toasts - object.\");\n        }\n        if (((_e = options.toasts) === null || _e === void 0 ? void 0 : _e.mode) && typeof options.toasts.mode !== \"string\") {\n            throw new Error(\"Expected type of (options.toasts.mode - string.\");\n        }\n        if (((_f = options.toasts) === null || _f === void 0 ? void 0 : _f.stackBy) && typeof options.toasts.stackBy !== \"string\") {\n            throw new Error(\"Expected type of (options.toasts.stackBy - string.\");\n        }\n        if (options.placement && typeof options.placement !== \"object\") {\n            throw new Error(\"Expected type of (options.placement - object.\");\n        }\n        if (((_g = options.placement) === null || _g === void 0 ? void 0 : _g.toasts) && typeof options.placement.toasts !== \"string\") {\n            throw new Error(\"Expected type of (options.placement.toasts - string.\");\n        }\n        if (((_h = options.placement) === null || _h === void 0 ? void 0 : _h.panel) && typeof options.placement.panel !== \"string\") {\n            throw new Error(\"Expected type of (options.placement.panel - string.\");\n        }\n        const result = await this.interop.invoke(this.NOTIFICATIONS_CONFIGURE_METHOD_NAME, options);\n        return result.returned;\n    }\n    async getConfiguration() {\n        const result = await this.interop.invoke(this.NotificationsExecuteMethod, { command: \"getConfiguration\" });\n        return result.returned;\n    }\n    async list() {\n        const interopResult = await this.interop.invoke(this.NotificationsExecuteMethod, { command: \"list\", data: { statesVersion2: true } });\n        return interopResult.returned.notifications;\n    }\n    async updateData(id, data) {\n        const replacer = (key, value) => typeof value === \"undefined\" ? null : value;\n        const attribute = {\n            key: \"data\",\n            value: {\n                stringValue: JSON.stringify(data, replacer)\n            }\n        };\n        const interopResult = await this.interop.invoke(this.NotificationsExecuteMethod, { command: \"create-or-update-attribute\", data: { id, attribute } });\n        return interopResult.returned;\n    }\n    onRaised(callback) {\n        return this.onStreamEventCore(\"on-notification-raised\", callback);\n    }\n    onStateChanged(callback) {\n        return this.onStreamEventCore(\"on-state-changed\", callback);\n    }\n    onClosed(callback) {\n        return this.onStreamEventCore(\"on-notification-closed\", callback);\n    }\n    onConfigurationChanged(callback) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n        this.subscribe();\n        const un = this.registry.add(\"on-configuration-changed\", callback);\n        return () => {\n            un();\n            this.closeStreamSubscriptionIfNoNeeded();\n        };\n    }\n    onCounterChanged(callback) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n        this.subscribeForCounterStream();\n        const un = this.registry.add(\"on-counter-changed\", callback);\n        return () => {\n            un();\n            this.closeStreamCounterSubscriptionIfNoNeeded();\n        };\n    }\n    onDataChanged(callback) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n        this.subscribe();\n        const un = this.registry.add(\"on-notification-data-changed\", callback);\n        return () => {\n            un();\n            this.closeStreamSubscriptionIfNoNeeded();\n        };\n    }\n    async clearAll() {\n        await this.interop.invoke(this.NotificationsExecuteMethod, { command: \"clearAll\" });\n    }\n    async clearOld() {\n        await this.interop.invoke(this.NotificationsExecuteMethod, { command: \"clearAllOld\", data: { statesVersion2: true } });\n    }\n    async clear(id) {\n        if (!id) {\n            throw new Error(\"The 'id' argument cannot be null or undefined\");\n        }\n        if (typeof (id) !== \"string\") {\n            throw new Error(\"The 'id' argument must be a string\");\n        }\n        await this.interop.invoke(this.NotificationsExecuteMethod, { command: \"clear\", data: { id } });\n    }\n    async click(id, action, options) {\n        await this.interop.invoke(this.NotificationsExecuteMethod, { command: \"click\", data: { id, action, options } });\n    }\n    async snooze(id, duration) {\n        await this.interop.invoke(this.NotificationsExecuteMethod, { command: \"snooze\", data: { id, duration } });\n    }\n    async setState(id, state) {\n        if (!id) {\n            throw new Error(\"The 'id' argument cannot be null or undefined\");\n        }\n        if (typeof (id) !== \"string\") {\n            throw new Error(\"The 'id' argument must be a string\");\n        }\n        if (!state) {\n            throw new Error(\"The 'state' argument cannot be null or undefined\");\n        }\n        this.validateState(state);\n        await this.interop.invoke(this.NotificationsExecuteMethod, { command: \"updateState\", data: { id, state } });\n    }\n    toAPI() {\n        return {\n            maxActions: this.maxActions,\n            panel: this._panel.toAPI(),\n            raise: this.raise.bind(this),\n            setFilter: this.setFilter.bind(this),\n            getFilter: this.getFilter.bind(this),\n            configure: this.configure.bind(this),\n            getConfiguration: this.getConfiguration.bind(this),\n            list: this.list.bind(this),\n            onRaised: this.onRaised.bind(this),\n            onStateChanged: this.onStateChanged.bind(this),\n            onClosed: this.onClosed.bind(this),\n            onConfigurationChanged: this.onConfigurationChanged.bind(this),\n            onCounterChanged: this.onCounterChanged.bind(this),\n            onDataChanged: this.onDataChanged.bind(this),\n            clearAll: this.clearAll.bind(this),\n            clearOld: this.clearOld.bind(this),\n            clear: this.clear.bind(this),\n            click: this.click.bind(this),\n            setState: this.setState.bind(this),\n            updateData: this.updateData.bind(this),\n            snooze: this.snooze.bind(this)\n        };\n    }\n    onStreamEventCore(key, callback) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Please provide the callback as a function!\");\n        }\n        this.subscribe();\n        const un = this.registry.add(key, callback);\n        return () => {\n            un();\n            this.closeStreamSubscriptionIfNoNeeded();\n        };\n    }\n    handleOptions(options, notification) {\n        if (options.icon) {\n            notification.attributes = notification.attributes || [];\n            notification.attributes.push({ key: \"icon\", value: { stringValue: options.icon } });\n        }\n        if (options.data) {\n            notification.attributes = notification.attributes || [];\n            const dataAsString = JSON.stringify(options.data);\n            notification.attributes.push({ key: \"data\", value: { stringValue: dataAsString } });\n        }\n        if (typeof options.panelExpiry === \"number\") {\n            notification.attributes = notification.attributes || [];\n            notification.attributes.push({ key: \"panelExpiry\", value: { stringValue: options.panelExpiry.toString() } });\n        }\n        if (typeof options.toastExpiry === \"number\") {\n            notification.attributes = notification.attributes || [];\n            notification.attributes.push({ key: \"toastExpiry\", value: { stringValue: options.toastExpiry.toString() } });\n        }\n    }\n    handleActions(options, id, notification) {\n        var _a, _b, _c;\n        const validActions = options.actions.slice(0, this.maxActions);\n        let index = STARTING_INDEX;\n        for (const action of validActions) {\n            const args = {\n                g42notificationId: id,\n                g42action: action.action,\n                g42interopMethod: (_a = action.interop) === null || _a === void 0 ? void 0 : _a.method,\n                g42interopTarget: (_b = action.interop) === null || _b === void 0 ? void 0 : _b.target,\n                g42interopArguments: JSON.stringify((_c = action.interop) === null || _c === void 0 ? void 0 : _c.arguments)\n            };\n            const parameters = Object.keys(args).map((key) => {\n                const value = args[key];\n                return {\n                    name: key,\n                    value: {\n                        stringValue: value\n                    }\n                };\n            });\n            const glueAction = {\n                name: `${this.methodNameRoot}_${index}`,\n                description: action.title,\n                displayName: action.title,\n                parameters\n            };\n            notification.actions.push(glueAction);\n            index++;\n        }\n    }\n    validate(options) {\n        if (!options) {\n            throw new Error(\"invalid options - should be an object\");\n        }\n        if (typeof options !== \"object\") {\n            throw new Error(\"invalid options - should be an object\");\n        }\n        if (!options.title) {\n            throw new Error(\"invalid options - should have a title\");\n        }\n        if (typeof options.title !== \"string\") {\n            throw new Error(\"invalid options - title should be a string\");\n        }\n        if (options.severity && typeof options.severity !== \"string\") {\n            throw new Error(\"invalid options - severity should be a string\");\n        }\n        if (options.panelExpiry && typeof options.panelExpiry !== \"number\") {\n            throw new Error(\"invalid options - panelExpiry should be a number\");\n        }\n        if (options.toastExpiry && typeof options.toastExpiry !== \"number\") {\n            throw new Error(\"invalid options - toastExpiry should be a number\");\n        }\n        if (options.state) {\n            this.validateState(options.state);\n        }\n    }\n    validateState(state) {\n        if (typeof (state) !== \"string\") {\n            throw new Error(\"The 'state' argument must be a string\");\n        }\n        const validStates = [\n            \"Active\",\n            \"Acknowledged\",\n            \"Stale\"\n        ];\n        if (!validStates.includes(state)) {\n            throw new Error(`The state argument: ${state} is not valid!`);\n        }\n    }\n    subscribe() {\n        this.subscriptionsCountForNotifications++;\n        if (!this.subscribedForNotifications) {\n            this.subscribedForNotifications = true;\n            this.logger.info(`Attempting to subscribe to \"${this.NotificationsSubscribeStream}\".`);\n            this.interop\n                .subscribe(this.NotificationsSubscribeStream, {\n                arguments: {\n                    sendDeltaOnly: true,\n                    statesVersion2: true\n                }\n            })\n                .then((sub) => {\n                this.subscriptionForNotifications = sub;\n                this.logger.info(`Successfully subscribed to \"${this.NotificationsSubscribeStream}\".`);\n                sub.onData(({ data }) => {\n                    this.handleData(data);\n                });\n                sub.onClosed((...args) => {\n                    this.subscribedForNotifications = false;\n                    this.logger.info(`Stream subscription Closed - ${JSON.stringify(args)}`);\n                });\n                sub.onFailed((...args) => {\n                    this.subscribedForNotifications = false;\n                    this.logger.warn(`Stream subscription Failed - ${JSON.stringify(args)}`);\n                });\n            })\n                .catch((e) => {\n                this.subscribedForNotifications = false;\n                this.logger.error(`Unable to subscribe to \"${this.NotificationsSubscribeStream}\"`, e);\n            });\n        }\n    }\n    subscribeForCounterStream() {\n        this.subscriptionsCountForCounter++;\n        if (!this.subscribedCounterStream) {\n            this.subscribedCounterStream = true;\n            this.logger.info(`Attempting to subscribe to \"${this.NotificationsCounterStream}\".`);\n            this.interop\n                .subscribe(this.NotificationsCounterStream, {\n                arguments: {\n                    sendDeltaOnly: true\n                }\n            })\n                .then((sub) => {\n                this.subscriptionForCounter = sub;\n                this.logger.info(`Successfully subscribed to \"${this.NotificationsCounterStream}\".`);\n                sub.onData(({ data }) => {\n                    this.registry.execute(\"on-counter-changed\", { count: data.count });\n                });\n                sub.onClosed((...args) => {\n                    this.subscribedCounterStream = false;\n                    this.logger.info(`Stream subscription Closed - ${JSON.stringify(args)}`);\n                });\n                sub.onFailed((...args) => {\n                    this.subscribedCounterStream = false;\n                    this.logger.warn(`Stream subscription Failed - ${JSON.stringify(args)}`);\n                });\n            })\n                .catch((e) => {\n                this.subscribedCounterStream = false;\n                this.logger.error(`Unable to subscribe to \"${this.NotificationsCounterStream}\"`, e);\n            });\n        }\n    }\n    subscribeInternalEvents() {\n        this.registry.add(\"on-notification-closed\", (id) => {\n            this.handleOnClosed(id);\n        });\n        this.registry.add(\"on-notification-raised\", (notification) => {\n            this.handleOnShow(notification.id);\n        });\n    }\n    handleData(message) {\n        var _a;\n        try {\n            if (\"items\" in message && Array.isArray(message.items)) {\n                this.handleItemsData(message);\n            }\n            else if (\"deltas\" in message && Array.isArray(message.deltas)) {\n                this.handleDeltas(message);\n            }\n            if (\"configuration\" in message && typeof message.configuration === \"object\") {\n                this.logger.info(`Received configuration ${JSON.stringify(message.configuration)} from the stream`);\n                this.registry.execute(\"on-configuration-changed\", message.configuration, message.configuration.allApplications);\n            }\n            if (\"command\" in message && typeof message.command === \"string\") {\n                this.logger.info(`Received command \"${(_a = message.command) !== null && _a !== void 0 ? _a : JSON.stringify(message)}\" from the stream`);\n                if (message.command === \"showPanel\" || message.command === \"hidePanel\") {\n                    this.registry.execute(\"on-panel-visibility-changed\", message.command === \"showPanel\");\n                }\n            }\n        }\n        catch (e) {\n            this.logger.error(`Failed to parse data from the stream`, e);\n        }\n    }\n    handleItemsData(message) {\n        const items = message.items;\n        this.logger.info(`Received ${items.length} notifications from the stream`);\n        const notifications = items;\n        if (message.isSnapshot) {\n            notifications.forEach((n) => {\n                this.registry.execute(\"on-notification-raised\", n);\n            });\n        }\n        else {\n            const notification = notifications[0];\n            if (notification.state === \"Closed\") {\n                this.registry.execute(\"on-notification-closed\", { id: notification.id });\n            }\n            else {\n                this.registry.execute(\"on-notification-raised\", notification);\n            }\n        }\n    }\n    handleDeltas(message) {\n        const deltas = message.deltas;\n        deltas.forEach((info) => {\n            var _a;\n            const id = info.id;\n            const delta = (_a = info.delta) !== null && _a !== void 0 ? _a : {};\n            if (delta.state === \"Closed\") {\n                this.registry.execute(\"on-notification-closed\", { id, ...delta });\n            }\n            else if (delta.state) {\n                this.registry.execute(\"on-state-changed\", { id }, delta.state);\n            }\n            else if (delta.attributes) {\n                const attributes = delta.attributes;\n                const dataAttribute = attributes.find((a) => a.key === \"data\");\n                if (dataAttribute) {\n                    this.registry.execute(\"on-notification-data-changed\", { id }, JSON.parse(dataAttribute.value.stringValue));\n                }\n            }\n        });\n    }\n    handleOnClosed(id) {\n        const { notification, key } = this.getNotification(id);\n        if (notification) {\n            this.handleEvent(notification, \"close\");\n            delete this.notifications[key];\n        }\n    }\n    handleOnShow(id) {\n        const { notification } = this.getNotification(id);\n        if (notification) {\n            this.handleEvent(notification, \"show\");\n        }\n    }\n    getNotification(id) {\n        let notification;\n        let key;\n        for (const k in this.notifications) {\n            if (this.notifications[k].id === id) {\n                notification = this.notifications[k];\n                key = k;\n                break;\n            }\n        }\n        return { notification, key };\n    }\n    handleNotificationEvent(args) {\n        const gnsNotificationArgs = this.getGnsNotificationArgs(args);\n        if (gnsNotificationArgs.event === \"unknown\") {\n            return;\n        }\n        const notification = this.notifications[gnsNotificationArgs.notificationId];\n        if (!notification) {\n            return;\n        }\n        this.handleNotificationEventCore(notification, gnsNotificationArgs);\n    }\n    handleNotificationEventCore(notification, args) {\n        switch (args.event) {\n            case \"action\": {\n                return this.handleNotificationActionEvent(notification, args.notificationActionPayload);\n            }\n            case \"click\": {\n                return this.handleNotificationClickEvent(notification);\n            }\n            case \"close\": {\n                return this.handleEvent(notification, \"close\");\n            }\n            case \"error\": {\n                return this.handleNotificationErrorEvent(notification, args.error);\n            }\n            case \"show\": {\n                return this.handleEvent(notification, \"show\");\n            }\n        }\n    }\n    handleNotificationActionEvent(notification, payload) {\n        const event = {\n            type: \"onaction\",\n            action: payload.g42action\n        };\n        if (notification.onaction) {\n            notification.onaction(event);\n        }\n        notification.dispatchEvent(event);\n    }\n    handleNotificationClickEvent(notification) {\n        const event = { type: \"onclick\" };\n        if (notification.onclick) {\n            notification.onclick(event);\n        }\n        notification.dispatchEvent(event);\n    }\n    handleEvent(notification, eventType) {\n        var _a;\n        const event = { type: eventType };\n        const eventName = `on${eventType}`;\n        (_a = notification[eventName]) === null || _a === void 0 ? void 0 : _a.call(notification, event);\n        notification.dispatchEvent(event);\n    }\n    handleNotificationErrorEvent(notification, error) {\n        const event = { type: \"onerror\", error };\n        if (notification.onerror) {\n            notification.onerror(event);\n        }\n        notification.dispatchEvent(event);\n    }\n    getGnsNotificationArgs(args) {\n        var _a;\n        let result;\n        const event = (_a = args.notification) === null || _a === void 0 ? void 0 : _a.event;\n        if (!event) {\n            result = this.getBackwardGnsNotificationArgs(args);\n        }\n        else {\n            result = {\n                event,\n                notificationId: args.notification.sourceNotificationId,\n                notificationActionPayload: args\n            };\n        }\n        return result;\n    }\n    getBackwardGnsNotificationArgs(args) {\n        var _a;\n        let result;\n        if (args.g42notificationId) {\n            result = {\n                event: \"action\",\n                notificationId: args.g42notificationId,\n                notificationActionPayload: args\n            };\n        }\n        else if ((_a = args.notification) === null || _a === void 0 ? void 0 : _a.sourceNotificationId) {\n            result = {\n                event: \"click\",\n                notificationId: args.notification.sourceNotificationId,\n                notificationActionPayload: args\n            };\n        }\n        else {\n            result = {\n                event: \"unknown\",\n                notificationId: undefined,\n                notificationActionPayload: args\n            };\n        }\n        return result;\n    }\n    closeStreamSubscriptionIfNoNeeded() {\n        this.subscriptionsCountForNotifications--;\n        if (this.subscriptionForNotifications && this.subscriptionsCountForNotifications === 0) {\n            this.subscriptionForNotifications.close();\n            this.subscriptionForNotifications = undefined;\n        }\n    }\n    closeStreamCounterSubscriptionIfNoNeeded() {\n        this.subscriptionsCountForCounter--;\n        if (this.subscriptionForCounter && this.subscriptionsCountForCounter === 0) {\n            this.subscriptionForCounter.close();\n            this.subscriptionForCounter = undefined;\n        }\n    }\n}\n\nconst ThemesConfigurationMethodName = \"T42.Themes.Configuration\";\nclass ThemesImpl {\n    constructor(contexts, interop) {\n        this.contexts = contexts;\n        this.interop = interop;\n        this.registry = CallbackRegistryFactory();\n        this.isSubscribed = false;\n        this.getConfiguration();\n    }\n    async list() {\n        await this.getConfiguration();\n        if (!this.getMethodName) {\n            throw new Error(\"not supported\");\n        }\n        return (await this.getAll()).returned.all;\n    }\n    async getCurrent() {\n        await this.getConfiguration();\n        if (!this.getMethodName) {\n            throw new Error(\"not supported\");\n        }\n        const all = await this.getAll();\n        return all.returned.all.find((t) => t.name === all.returned.selected);\n    }\n    async select(theme) {\n        await this.getConfiguration();\n        if (!this.setMethodName) {\n            throw new Error(\"not supported\");\n        }\n        await this.interop.invoke(this.setMethodName, { theme });\n    }\n    onChanged(callback) {\n        this.subscribe();\n        return this.registry.add(\"changed\", callback);\n    }\n    async getConfiguration() {\n        try {\n            if (this.sharedContextName) {\n                return;\n            }\n            const config = await this.interop.invoke(ThemesConfigurationMethodName);\n            this.sharedContextName = config.returned.sharedContextName;\n            this.getMethodName = config.returned.getThemesMethodName;\n            this.setMethodName = config.returned.setThemesMethodName;\n        }\n        catch (error) {\n            return;\n        }\n    }\n    async getAll() {\n        await this.getConfiguration();\n        return await this.interop.invoke(this.getMethodName);\n    }\n    async subscribe() {\n        await this.getConfiguration();\n        if (this.isSubscribed) {\n            return;\n        }\n        this.isSubscribed = true;\n        this.contexts.subscribe(this.sharedContextName, (data) => {\n            if (data && data.all && data.selected) {\n                this.registry.execute(\"changed\", data.all.find((t) => t.name === data.selected));\n            }\n        });\n    }\n}\n\nfunction factory$2(contexts, interop) {\n    const themes = new ThemesImpl(contexts, interop);\n    return {\n        list: themes.list.bind(themes),\n        getCurrent: themes.getCurrent.bind(themes),\n        select: themes.select.bind(themes),\n        onChanged: themes.onChanged.bind(themes),\n        ready: () => Promise.resolve(),\n    };\n}\n\nconst GLUE42_FDC3_INTENTS_METHOD_PREFIX = \"Tick42.FDC3.Intents.\";\nconst INTENTS_RESOLVER_INTEROP_PREFIX = \"T42.Intents.Resolver.Control\";\nconst INTENTS_RESOLVER_WIDTH = 400;\nconst INTENTS_RESOLVER_HEIGHT = 440;\nconst DEFAULT_RESOLVER_RESPONSE_TIMEOUT = 60 * 1000;\nconst INTENT_HANDLER_DEFAULT_PROPS = [\"applicationName\", \"type\"];\nconst INTENTS_RESOLVER_APP_NAME = \"intentsResolver\";\nconst MAX_SET_TIMEOUT_DELAY = 2147483647;\nconst DEFAULT_METHOD_RESPONSE_TIMEOUT_MS = 60 * 1000;\nconst DEFAULT_RAISE_TIMEOUT_MS = 90 * 1000;\nconst DEFAULT_PICK_HANDLER_BY_TIMEOUT_MS = 90 * 1000;\n\nconst PromisePlus = (executor, timeoutMilliseconds, timeoutMessage) => {\n    return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => {\n            const message = timeoutMessage || `Promise timeout hit: ${timeoutMilliseconds}`;\n            reject(message);\n        }, timeoutMilliseconds);\n        const providedPromise = new Promise(executor);\n        providedPromise\n            .then((result) => {\n            clearTimeout(timeout);\n            resolve(result);\n        })\n            .catch((error) => {\n            clearTimeout(timeout);\n            reject(error);\n        });\n    });\n};\nconst PromiseWrap = (promise, timeoutMilliseconds, timeoutMessage) => {\n    return new Promise((resolve, reject) => {\n        let promiseActive = true;\n        const timeout = setTimeout(() => {\n            if (!promiseActive) {\n                return;\n            }\n            promiseActive = false;\n            const message = timeoutMessage || `Promise timeout hit: ${timeoutMilliseconds}`;\n            reject(message);\n        }, timeoutMilliseconds);\n        promise()\n            .then((result) => {\n            if (!promiseActive) {\n                return;\n            }\n            promiseActive = false;\n            clearTimeout(timeout);\n            resolve(result);\n        })\n            .catch((error) => {\n            if (!promiseActive) {\n                return;\n            }\n            promiseActive = false;\n            clearTimeout(timeout);\n            reject(error);\n        });\n    });\n};\n\nconst validateIntentHandlerAsResponse = (handler) => {\n    if (typeof handler !== \"object\") {\n        return { isValid: false, error: `Response object has invalid 'handler' key. Expected an object, got ${typeof handler}` };\n    }\n    const compulsoryKeysExist = INTENT_HANDLER_DEFAULT_PROPS.filter((key) => !(key in handler));\n    if (compulsoryKeysExist.length) {\n        return { isValid: false, error: `Handler in Response object does not provide compulsory keys: ${compulsoryKeysExist.join(\", \")}` };\n    }\n    return { isValid: true, ok: handler };\n};\nconst validateIntentRequestTarget = (target) => {\n    if (!target) {\n        return;\n    }\n    if (typeof target !== \"string\" && typeof target !== \"object\") {\n        throw new Error(`Please provide the intent target as one of the valid values: \"reuse\", \"startNew\", { app: string }, { instance: string } `);\n    }\n};\nconst validateIntentRequestContext = (context) => {\n    if (!context) {\n        return;\n    }\n    if (typeof context !== \"object\") {\n        throw new Error(`Please provide the intent context as an object`);\n    }\n    if (context.type && typeof context.type !== \"string\") {\n        throw new Error(`Please provide the intent context as an object with 'type' property as string`);\n    }\n    if (context.data && typeof context.data !== \"object\") {\n        throw new Error(`Please provide the intent context as an object with 'data' property as object`);\n    }\n};\nconst validateIntentRequestHandler = (handler) => {\n    if (!handler.applicationName) {\n        throw new Error(`Please provide applicationName for handler ${JSON.stringify(handler)}`);\n    }\n    if (!handler.type) {\n        throw new Error(`Please provide type for handler ${JSON.stringify(handler)}`);\n    }\n    if (handler.type === \"instance\" && !handler.instanceId) {\n        throw new Error(`Please provide instanceId for handler ${JSON.stringify(handler)}`);\n    }\n};\nconst validateIntentRequestTimeout = (timeout) => {\n    if (!timeout) {\n        return;\n    }\n    if (typeof timeout !== \"number\") {\n        throw new Error(`Please provide the timeout as a number`);\n    }\n    if (timeout <= 0) {\n        throw new Error(`Please provide the timeout as a positive number`);\n    }\n};\nconst validateWaitUserResponseIndefinitely = (waitUserResponseIndefinitely) => {\n    if (!waitUserResponseIndefinitely) {\n        return;\n    }\n    if (typeof waitUserResponseIndefinitely !== \"boolean\") {\n        throw new Error(\"Please provide waitUserResponseIndefinitely as a boolean\");\n    }\n};\nconst validateHandlerFilter = (handlerFilter) => {\n    if (!handlerFilter) {\n        throw new Error(`Provide 'handlerFilter' with at least one filter criteria of the following: 'intent' | 'contextTypes' | 'resultType' | 'applicationNames'`);\n    }\n    const { title, openResolver, timeout, intent, contextTypes, resultType, applicationNames } = handlerFilter;\n    if (typeof title !== \"undefined\" && (typeof title !== \"string\" || !title.length)) {\n        throw new Error(`Provide 'title' as a non empty string`);\n    }\n    if (typeof openResolver !== \"undefined\" && typeof openResolver !== \"boolean\") {\n        throw new Error(`Provide 'openResolver' prop as a boolean`);\n    }\n    if (typeof timeout !== \"undefined\" && (typeof timeout !== \"number\" || timeout <= 0)) {\n        throw new Error(`Provide 'timeout' prop as a positive number`);\n    }\n    if (typeof intent !== \"undefined\" && (typeof intent !== \"string\" || !intent.length)) {\n        throw new Error(`Provide 'intent' as a non empty string`);\n    }\n    if (typeof contextTypes !== \"undefined\" && (!Array.isArray(contextTypes) || contextTypes.some(ctx => typeof ctx !== \"string\"))) {\n        throw new Error(`Provide 'contextTypes' as an array of non empty strings`);\n    }\n    if (typeof resultType !== \"undefined\" && (typeof resultType !== \"string\" || !resultType.length)) {\n        throw new Error(`Provide 'resultType' as a non empty string`);\n    }\n    if (typeof applicationNames !== \"undefined\" && (!Array.isArray(applicationNames) || applicationNames.some(appName => typeof appName !== \"string\"))) {\n        throw new Error(`Provide 'applicationNames' as an array of non empty strings`);\n    }\n    const errorMsg = \"Provide at least one filter criteria of the following: 'intent' | 'contextTypes' | 'resultType' | 'applicationNames'\";\n    if (!Object.keys(handlerFilter).length) {\n        throw new Error(errorMsg);\n    }\n    if (!intent && !resultType && (!contextTypes || !contextTypes.length) && (!applicationNames || !applicationNames.length)) {\n        throw new Error(errorMsg);\n    }\n};\nconst validateResolverResponse = (responseObj) => {\n    var _a, _b;\n    if (typeof responseObj.intent !== \"string\") {\n        return { isValid: false, error: `Response object has invalid 'intent' key. Expected a string, got ${typeof responseObj.intent}` };\n    }\n    if (((_a = responseObj.userSettings) === null || _a === void 0 ? void 0 : _a.preserveChoice) && typeof ((_b = responseObj.userSettings) === null || _b === void 0 ? void 0 : _b.preserveChoice) !== \"boolean\") {\n        return { isValid: false, error: `Response object has invalid 'userSettings.preserveChoice' key. Expected a boolean, got ${typeof responseObj.userSettings.preserveChoice}` };\n    }\n    const { isValid, error } = validateIntentHandlerAsResponse(responseObj.handler);\n    return isValid\n        ? { isValid: true, ok: responseObj }\n        : { isValid, error };\n};\nconst validateIntentRequest = (request) => {\n    validateIntentRequestContext(request.context);\n    validateIntentRequestTarget(request.target);\n    validateIntentRequestTimeout(request.timeout);\n    validateWaitUserResponseIndefinitely(request.waitUserResponseIndefinitely);\n    if (typeof request.clearSavedHandler !== \"undefined\" && typeof request.clearSavedHandler !== \"boolean\") {\n        throw new Error(\"Please provide 'clearSavedHandler' as a boolean\");\n    }\n    if (request.handlers) {\n        request.handlers.forEach((handler) => validateIntentRequestHandler(handler));\n    }\n};\nconst validateIntentHandler = (handler) => {\n    if (typeof handler !== \"object\") {\n        throw new Error(\"IntentHandler must be an object\");\n    }\n    if (typeof handler.applicationName !== \"string\" || !handler.applicationName.length) {\n        throw new Error(`Please provide 'applicationName' as a non-empty string`);\n    }\n    if (typeof handler.type !== \"string\" || ![\"app\", \"instance\"].includes(handler.type)) {\n        throw new Error(`Invalid 'type' property. Expected 'app' | 'instance' got ${handler.type}`);\n    }\n    if (typeof handler.applicationTitle !== \"undefined\" && typeof handler.applicationTitle !== \"string\") {\n        throw new Error(`Provide 'applicationTitle' as a string`);\n    }\n    if (typeof handler.applicationDescription !== \"undefined\" && typeof handler.applicationDescription !== \"string\") {\n        throw new Error(`Provide 'applicationDescription' as a string`);\n    }\n    if (typeof handler.applicationIcon !== \"undefined\" && typeof handler.applicationIcon !== \"string\") {\n        throw new Error(`Provide 'applicationIcon' as a string`);\n    }\n    if (typeof handler.displayName !== \"undefined\" && typeof handler.displayName !== \"string\") {\n        throw new Error(`Provide 'displayName' as a string`);\n    }\n    if (typeof handler.contextTypes !== \"undefined\" && (!Array.isArray(handler.contextTypes) || handler.contextTypes.some(ctx => typeof ctx !== \"string\"))) {\n        throw new Error(`Provide 'contextTypes' as an array of non empty strings`);\n    }\n    if (typeof handler.instanceId !== \"undefined\" && typeof handler.instanceId !== \"string\") {\n        throw new Error(`Provide 'instanceId' as a string`);\n    }\n    if (typeof handler.instanceTitle !== \"undefined\" && typeof handler.instanceTitle !== \"string\") {\n        throw new Error(`Provide 'instanceTitle' as a string`);\n    }\n    if (typeof handler.resultType !== \"undefined\" && typeof handler.resultType !== \"string\") {\n        throw new Error(`Provide 'resultType' as a string`);\n    }\n};\nconst clearNullUndefined = (obj) => {\n    Object.keys(obj).forEach(key => {\n        if (obj[key] === null || obj[key] === undefined) {\n            delete obj[key];\n        }\n    });\n};\n\nclass Intents {\n    constructor(interop, windows, logger, options, prefsController, appManager) {\n        this.interop = interop;\n        this.windows = windows;\n        this.logger = logger;\n        this.prefsController = prefsController;\n        this.appManager = appManager;\n        this.myIntents = new Set();\n        this.intentsResolverResponsePromises = {};\n        this.useIntentsResolverUI = true;\n        this.unregisterIntentPromises = [];\n        this.checkIfIntentsResolverIsEnabled(options, appManager);\n    }\n    async find(intentFilter) {\n        await Promise.all(this.unregisterIntentPromises);\n        let intents = await this.all();\n        if (typeof intentFilter === \"undefined\") {\n            return intents;\n        }\n        if (typeof intentFilter === \"string\") {\n            return intents.filter((intent) => intent.name === intentFilter);\n        }\n        if (typeof intentFilter !== \"object\") {\n            throw new Error(\"Please provide the intentFilter as a string or an object!\");\n        }\n        if (intentFilter.contextType) {\n            const ctToLower = intentFilter.contextType.toLowerCase();\n            intents = intents.filter((intent) => intent.handlers.some((handler) => { var _a; return (_a = handler.contextTypes) === null || _a === void 0 ? void 0 : _a.some((ct) => ct.toLowerCase() === ctToLower); }));\n        }\n        if (intentFilter.resultType) {\n            const resultTypeToLower = intentFilter.resultType.toLowerCase();\n            intents = intents.filter((intent) => intent.handlers.some((handler) => { var _a; return ((_a = handler.resultType) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === resultTypeToLower; }));\n        }\n        if (intentFilter.name) {\n            intents = intents.filter((intent) => intent.name === intentFilter.name);\n        }\n        return intents;\n    }\n    async raise(intentRequest) {\n        if ((typeof intentRequest !== \"string\" && typeof intentRequest !== \"object\") || (typeof intentRequest === \"object\" && typeof intentRequest.intent !== \"string\")) {\n            throw new Error(\"Please provide the intent as a string or an object with an intent property!\");\n        }\n        if (typeof intentRequest === \"string\") {\n            intentRequest = { intent: intentRequest };\n        }\n        validateIntentRequest(intentRequest);\n        await Promise.all(this.unregisterIntentPromises);\n        if (intentRequest.clearSavedHandler) {\n            this.logger.trace(`User removes saved handler for intent ${intentRequest.intent}`);\n            await this.removeRememberedHandler(intentRequest.intent);\n        }\n        const resolverInstance = {};\n        const timeout = intentRequest.waitUserResponseIndefinitely ? MAX_SET_TIMEOUT_DELAY : intentRequest.timeout || DEFAULT_RAISE_TIMEOUT_MS;\n        const resultFromRememberedHandler = await this.checkHandleRaiseWithRememberedHandler(intentRequest, resolverInstance, timeout);\n        if (resultFromRememberedHandler) {\n            return resultFromRememberedHandler;\n        }\n        const coreRaiseIntentFn = this.coreRaiseIntent.bind(this, { request: intentRequest, resolverInstance, timeout });\n        if (intentRequest.waitUserResponseIndefinitely) {\n            return coreRaiseIntentFn();\n        }\n        const resultPromise = PromiseWrap(coreRaiseIntentFn, timeout, `Timeout of ${timeout}ms hit for intent request ${JSON.stringify(intentRequest)}`);\n        resultPromise.catch(() => this.handleRaiseOnError(resolverInstance.instanceId));\n        return resultPromise;\n    }\n    async all() {\n        await Promise.all(this.unregisterIntentPromises);\n        let apps;\n        try {\n            const result = await this.interop.invoke(\"T42.ACS.GetApplications\", { withIntentsInfo: true });\n            apps = result.returned.applications;\n        }\n        catch (e) {\n            this.logger.error(`Failed to get the applications!`, e);\n            return [];\n        }\n        const intents = {};\n        const appsWithIntents = apps.filter((app) => app.intents && app.intents.length > 0);\n        for (const app of appsWithIntents) {\n            for (const intentDef of app.intents) {\n                let intent = intents[intentDef.name];\n                if (!intent) {\n                    intent = {\n                        name: intentDef.name,\n                        handlers: [],\n                    };\n                    intents[intentDef.name] = intent;\n                }\n                const handler = {\n                    applicationName: app.name,\n                    applicationTitle: app.title || \"\",\n                    applicationDescription: app.caption,\n                    displayName: intentDef.displayName,\n                    contextTypes: intentDef.contexts,\n                    applicationIcon: app.icon,\n                    type: \"app\",\n                    resultType: intentDef.resultType\n                };\n                intent.handlers.push(handler);\n            }\n        }\n        const servers = this.interop.servers();\n        const serverWindowIds = servers.map((server) => server.windowId).filter((serverWindowId) => typeof serverWindowId !== \"undefined\");\n        const T42WndGetInfo = \"T42.Wnd.GetInfo\";\n        const isT42WndGetInfoMethodRegistered = this.interop.methods().some((method) => method.name === T42WndGetInfo);\n        let windowsInfos;\n        if (isT42WndGetInfoMethodRegistered) {\n            try {\n                const result = await this.interop.invoke(T42WndGetInfo, { ids: serverWindowIds });\n                windowsInfos = result.returned.windows;\n            }\n            catch (e) {\n            }\n        }\n        for (const server of servers) {\n            await Promise.all(server.getMethods()\n                .filter((method) => method.name.startsWith(GLUE42_FDC3_INTENTS_METHOD_PREFIX))\n                .map(async (method) => {\n                const intentName = method.name.replace(GLUE42_FDC3_INTENTS_METHOD_PREFIX, \"\");\n                let intent = intents[intentName];\n                if (!intent) {\n                    intent = {\n                        name: intentName,\n                        handlers: [],\n                    };\n                    intents[intentName] = intent;\n                }\n                const info = method.flags.intent;\n                const app = apps.find((appWithIntents) => appWithIntents.name === server.application);\n                let appIntent;\n                if (app && app.intents) {\n                    appIntent = app.intents.find((appDefIntent) => appDefIntent.name === intentName);\n                }\n                const title = await this.windowsIdToTitle(server.windowId, windowsInfos);\n                const handler = {\n                    instanceId: server.instance,\n                    applicationName: server.application,\n                    applicationIcon: info.icon || (app === null || app === void 0 ? void 0 : app.icon),\n                    applicationTitle: (app === null || app === void 0 ? void 0 : app.title) || \"\",\n                    applicationDescription: info.description || (app === null || app === void 0 ? void 0 : app.caption),\n                    displayName: info.displayName || (appIntent === null || appIntent === void 0 ? void 0 : appIntent.displayName),\n                    contextTypes: info.contextTypes || (appIntent === null || appIntent === void 0 ? void 0 : appIntent.contexts),\n                    instanceTitle: title,\n                    type: \"instance\",\n                    resultType: (appIntent === null || appIntent === void 0 ? void 0 : appIntent.resultType) || info.resultType\n                };\n                intent.handlers.push(handler);\n            }));\n        }\n        return Object.values(intents);\n    }\n    addIntentListener(intent, handler) {\n        if ((typeof intent !== \"string\" && typeof intent !== \"object\") || (typeof intent === \"object\" && typeof intent.intent !== \"string\")) {\n            throw new Error(\"Please provide the intent as a string or an object with an intent property!\");\n        }\n        if (typeof handler !== \"function\") {\n            throw new Error(\"Please provide the handler as a function!\");\n        }\n        const intentName = typeof intent === \"string\" ? intent : intent.intent;\n        const methodName = `${GLUE42_FDC3_INTENTS_METHOD_PREFIX}${intentName}`;\n        let intentFlag = {};\n        let registerPromise;\n        const alreadyRegistered = this.myIntents.has(intentName);\n        if (alreadyRegistered) {\n            throw new Error(`Intent listener for intent ${intentName} already registered!`);\n        }\n        this.myIntents.add(intentName);\n        const result = {\n            unsubscribe: () => {\n                this.myIntents.delete(intentName);\n                registerPromise\n                    .then(() => this.interop.unregister(methodName))\n                    .catch((err) => this.logger.trace(`Unregistration of a method with name ${methodName} failed with reason: ${JSON.stringify(err)}`));\n            }\n        };\n        if (typeof intent === \"object\") {\n            const { intent: removed, ...rest } = intent;\n            intentFlag = rest;\n        }\n        registerPromise = this.interop.register({ name: methodName, flags: { intent: intentFlag } }, (args) => {\n            if (this.myIntents.has(intentName)) {\n                return handler(args);\n            }\n        });\n        registerPromise.catch((err) => {\n            this.myIntents.delete(intentName);\n            this.logger.warn(`Registration of a method with name ${methodName} failed with reason: ${JSON.stringify(err)}`);\n        });\n        return result;\n    }\n    async register(intent, handler) {\n        if ((typeof intent !== \"string\" && typeof intent !== \"object\") || (typeof intent === \"object\" && typeof intent.intent !== \"string\")) {\n            throw new Error(\"Please provide the intent as a string or an object with an intent property!\");\n        }\n        if (typeof handler !== \"function\") {\n            throw new Error(\"Please provide the handler as a function!\");\n        }\n        await Promise.all(this.unregisterIntentPromises);\n        const intentName = typeof intent === \"string\" ? intent : intent.intent;\n        const methodName = this.buildInteropMethodName(intentName);\n        let intentFlag = {};\n        const alreadyRegistered = this.myIntents.has(intentName);\n        if (alreadyRegistered) {\n            throw new Error(`Intent listener for intent ${intentName} already registered!`);\n        }\n        this.myIntents.add(intentName);\n        if (typeof intent === \"object\") {\n            const { intent: removed, ...rest } = intent;\n            intentFlag = rest;\n        }\n        try {\n            await this.interop.register({ name: methodName, flags: { intent: intentFlag } }, (args, caller) => {\n                if (this.myIntents.has(intentName)) {\n                    return handler(args, caller);\n                }\n            });\n        }\n        catch (err) {\n            this.myIntents.delete(intentName);\n            throw new Error(`Registration of a method with name ${methodName} failed with reason: ${JSON.stringify(err)}`);\n        }\n        return {\n            unsubscribe: () => this.unsubscribeIntent(intentName)\n        };\n    }\n    async filterHandlers(handlerFilter) {\n        var _a, _b;\n        validateHandlerFilter(handlerFilter);\n        if (handlerFilter.openResolver && !this.useIntentsResolverUI) {\n            throw new Error(\"Cannot resolve 'filterHandlers' request using Intents Resolver UI because it's globally disabled\");\n        }\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.trace(`Received 'filterHandlers' command with request: ${JSON.stringify(handlerFilter)}`);\n        const filteredHandlers = this.filterHandlersBy(await this.all(), handlerFilter);\n        if (!filteredHandlers || !filteredHandlers.length) {\n            return { handlers: [] };\n        }\n        const { open, reason } = this.checkIfResolverShouldBeOpenedForFilterHandlers(filteredHandlers, handlerFilter);\n        if (!open) {\n            (_b = this.logger) === null || _b === void 0 ? void 0 : _b.trace(`Intent Resolver UI won't be used. Reason: ${reason}`);\n            return { handlers: filteredHandlers };\n        }\n        const resolverInstance = { instanceId: undefined };\n        const timeout = handlerFilter.timeout || DEFAULT_PICK_HANDLER_BY_TIMEOUT_MS;\n        const handler = await PromiseWrap(() => this.startResolverApp({ request: handlerFilter, resolverInstance, method: 'filterHandlers' }), timeout, `Timeout of ${timeout}ms hit for 'filterHandlers' request with filter: ${JSON.stringify(handlerFilter)}`);\n        return { handlers: [handler] };\n    }\n    async getIntents(handler) {\n        var _a;\n        this.logger.trace(`Received 'getIntents' command with handler ${JSON.stringify(handler)}`);\n        validateIntentHandler(handler);\n        const intents = await this.all();\n        clearNullUndefined(handler);\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.trace(`Extracting valid intents for the passed handler`);\n        const intentsWithInfo = this.extractIntentsWithInfoByHandler(intents, handler);\n        this.logger.trace(`Returning intents for handler ${JSON.stringify(handler)}`);\n        return { intents: intentsWithInfo };\n    }\n    async clearSavedHandlers() {\n        this.logger.trace(\"Removing all saved handlers from prefs storage for current app\");\n        await this.prefsController.update({ intents: undefined });\n    }\n    filterHandlersBy(intents, filter) {\n        const filteredIntentsWithHandlers = intents.filter((intent) => {\n            if (filter.intent && filter.intent !== intent.name) {\n                return;\n            }\n            if (filter.resultType) {\n                const filteredHandlers = intent.handlers.filter((handler) => handler.resultType && handler.resultType === filter.resultType);\n                if (!filteredHandlers.length)\n                    return;\n                intent.handlers = filteredHandlers;\n            }\n            if (filter.contextTypes) {\n                const filteredHandlers = intent.handlers.filter((handler) => { var _a; return (_a = filter.contextTypes) === null || _a === void 0 ? void 0 : _a.every((contextType) => { var _a; return (_a = handler.contextTypes) === null || _a === void 0 ? void 0 : _a.includes(contextType); }); });\n                if (!filteredHandlers.length)\n                    return;\n                intent.handlers = filteredHandlers;\n            }\n            if (filter.applicationNames) {\n                const filteredHandlers = intent.handlers.filter((handler) => { var _a; return (_a = filter.applicationNames) === null || _a === void 0 ? void 0 : _a.includes(handler.applicationName); });\n                if (!filteredHandlers.length)\n                    return;\n                intent.handlers = filteredHandlers;\n            }\n            return intent;\n        });\n        return filteredIntentsWithHandlers.map((intent) => intent.handlers).flat(1);\n    }\n    async coreRaiseIntent({ request, resolverInstance, timeout }) {\n        var _a, _b;\n        const intentDef = await this.get(request.intent);\n        if (typeof intentDef === \"undefined\") {\n            throw new Error(`Intent ${request.intent} not found.`);\n        }\n        const { open, reason } = this.checkIfResolverShouldBeOpenedForRaise(intentDef, request);\n        if (!open) {\n            this.logger.trace(`Intent Resolver UI won't be used. Reason: ${reason}`);\n            return request.waitUserResponseIndefinitely\n                ? PromiseWrap(() => this.raiseIntent(request, timeout), timeout, `Timeout of ${timeout}ms hit for raise to resolve`)\n                : this.raiseIntent(request, timeout);\n        }\n        const resolverHandler = await this.startResolverApp({ request, method: \"raise\", resolverInstance });\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.trace(`Raising intent to target handler: ${JSON.stringify(resolverHandler)} with timeout of ${timeout}`);\n        if (request.waitUserResponseIndefinitely) {\n            return PromiseWrap(() => this.raiseIntentToTargetHandler(request, resolverHandler, timeout), timeout, `Timeout of ${timeout}ms hit for raise to resolve`);\n        }\n        const result = await this.raiseIntentToTargetHandler(request, resolverHandler, timeout);\n        (_b = this.logger) === null || _b === void 0 ? void 0 : _b.trace(`Result from raise() method for intent ${JSON.stringify(request.intent)}: ${JSON.stringify(result)}`);\n        return result;\n    }\n    async get(intent) {\n        return (await this.all()).find((registeredIntent) => registeredIntent.name === intent);\n    }\n    async raiseIntent(intentRequest, timeout) {\n        const intentName = intentRequest.intent;\n        const intentDef = await this.get(intentName);\n        if (typeof intentDef === \"undefined\") {\n            throw new Error(`Intent ${intentName} not found.`);\n        }\n        const firstFoundAppHandler = intentRequest.handlers ? this.findHandlerByFilter(intentRequest.handlers, { type: \"app\" }) : this.findHandlerByFilter(intentDef.handlers, { type: \"app\" });\n        const firstFoundInstanceHandler = intentRequest.handlers ? this.findHandlerByFilter(intentRequest.handlers, { type: \"instance\" }) : this.findHandlerByFilter(intentDef.handlers, { type: \"instance\" });\n        let handler;\n        if (!intentRequest.target || intentRequest.target === \"reuse\") {\n            handler = firstFoundInstanceHandler || firstFoundAppHandler;\n        }\n        if (intentRequest.target === \"startNew\") {\n            handler = firstFoundAppHandler;\n        }\n        if (typeof intentRequest.target === \"object\" && intentRequest.target.app) {\n            handler = this.findHandlerByFilter(intentDef.handlers, { app: intentRequest.target.app });\n        }\n        if (typeof intentRequest.target === \"object\" && intentRequest.target.instance) {\n            handler = this.findHandlerByFilter(intentDef.handlers, { instance: intentRequest.target.instance, app: intentRequest.target.app });\n        }\n        if (!handler) {\n            throw new Error(`Can not raise intent for request ${JSON.stringify(intentRequest)} - can not find intent handler!`);\n        }\n        const result = await this.raiseIntentToTargetHandler(intentRequest, handler, timeout);\n        return result;\n    }\n    async raiseIntentToTargetHandler(intentRequest, handler, timeout) {\n        var _a, _b;\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.trace(`Raising intent to target handler:${JSON.stringify(handler)}`);\n        if (!handler.instanceId) {\n            handler.instanceId = await this.invokeStartApp(handler.applicationName, intentRequest.context, intentRequest.options);\n        }\n        const methodName = `${GLUE42_FDC3_INTENTS_METHOD_PREFIX}${intentRequest.intent}`;\n        const invokeOptions = {\n            methodResponseTimeoutMs: timeout ? timeout + 1000 : DEFAULT_METHOD_RESPONSE_TIMEOUT_MS,\n            waitTimeoutMs: timeout ? timeout + 1000 : DEFAULT_METHOD_RESPONSE_TIMEOUT_MS\n        };\n        const result = await this.interop.invoke(methodName, intentRequest.context, { instance: handler.instanceId }, invokeOptions);\n        (_b = this.logger) === null || _b === void 0 ? void 0 : _b.trace(`raiseIntent command completed. Returning result: ${JSON.stringify(result)}`);\n        return {\n            request: intentRequest,\n            handler: { ...handler, type: \"instance\" },\n            result: result.returned\n        };\n    }\n    async startResolverApp({ request, method, resolverInstance }) {\n        var _a, _b, _c, _d;\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.trace(`Intents Resolver UI with app name ${this.intentsResolverAppName} will be used for request: ${JSON.stringify(request)}`);\n        const responseMethodName = await this.registerIntentResolverMethod();\n        (_b = this.logger) === null || _b === void 0 ? void 0 : _b.trace(`Registered interop method ${responseMethodName}`);\n        const startContext = this.buildStartContext(method, request, responseMethodName);\n        const startOptions = await this.buildStartOptions();\n        (_c = this.logger) === null || _c === void 0 ? void 0 : _c.trace(`Starting Intents Resolver UI with context: ${JSON.stringify(startContext)} and options: ${JSON.stringify(startOptions)}`);\n        const instance = await this.appManager.application(this.intentsResolverAppName).start(startContext, startOptions);\n        resolverInstance.instanceId = instance.id;\n        (_d = this.logger) === null || _d === void 0 ? void 0 : _d.trace(`Intents Resolver instance with id ${instance.id} opened`);\n        this.subscribeOnInstanceStopped(instance, method);\n        const timeout = request.timeout || method === \"raise\" ? DEFAULT_RAISE_TIMEOUT_MS : DEFAULT_PICK_HANDLER_BY_TIMEOUT_MS;\n        this.createResponsePromise({\n            intent: method === \"raise\" ? request.intent : undefined,\n            instanceId: instance.id,\n            responseMethodName,\n            timeout,\n            errorMsg: `Timeout of ${timeout}ms hit waiting for the user to choose a handler ${method === \"raise\"\n                ? `for intent ${request.intent}`\n                : `for '${method}' method with filter ${JSON.stringify(request)}`}`\n        });\n        const handler = await this.handleInstanceResponse({ instanceId: instance.id, caller: startContext.initialCaller, method, request });\n        return handler;\n    }\n    async windowsIdToTitle(id, windowsInfos) {\n        var _a, _b;\n        if (typeof windowsInfos !== \"undefined\") {\n            return (_a = windowsInfos.find((windowsInfo) => windowsInfo.id === id)) === null || _a === void 0 ? void 0 : _a.title;\n        }\n        const window = (_b = this.windows) === null || _b === void 0 ? void 0 : _b.findById(id);\n        const title = await (window === null || window === void 0 ? void 0 : window.getTitle());\n        return title;\n    }\n    async handleInstanceResponse({ instanceId, method, request, caller }) {\n        var _a, _b, _c;\n        try {\n            const response = await this.intentsResolverResponsePromises[instanceId].promise;\n            const subMessage = method === \"raise\" ? `for intent ${response.intent} ` : \"\";\n            (_a = this.logger) === null || _a === void 0 ? void 0 : _a.trace(`Intent handler chosen ${subMessage}: ${JSON.stringify(response.handler)}. Stopping resolver instance with id ${instanceId}`);\n            this.stopResolverInstance(instanceId);\n            (_b = this.logger) === null || _b === void 0 ? void 0 : _b.trace(`Instance with id ${instanceId} successfully stopped`);\n            if ((_c = response.userSettings) === null || _c === void 0 ? void 0 : _c.preserveChoice) {\n                await this.saveUserChoice({\n                    intent: response.intent,\n                    handler: response.handler,\n                    filter: method === \"filterHandlers\"\n                        ? { applicationNames: request.applicationNames, contextTypes: request.contextTypes, resultType: request.resultType }\n                        : undefined,\n                    caller\n                });\n            }\n            return response.handler;\n        }\n        catch (error) {\n            this.stopResolverInstance(instanceId);\n            throw new Error(error);\n        }\n    }\n    async registerIntentResolverMethod() {\n        const methodName = INTENTS_RESOLVER_INTEROP_PREFIX + Utils.generateId();\n        await this.interop.register(methodName, (args, callerId) => this.resolverResponseHandler(args, callerId));\n        return methodName;\n    }\n    resolverResponseHandler(args, callerId) {\n        const { instance } = callerId;\n        const isValid = validateResolverResponse(args);\n        if (!isValid) {\n            this.logger.trace(`Intent Resolver instance with id ${callerId.instance} sent invalid response. Error: ${isValid.error}`);\n            this.intentsResolverResponsePromises[instance].reject(isValid.error);\n            this.stopResolverInstance(instance);\n            return;\n        }\n        const validResponse = isValid.ok;\n        this.intentsResolverResponsePromises[instance].resolve(validResponse);\n        this.cleanUpIntentResolverPromise(instance);\n    }\n    buildStartContext(method, request, methodName) {\n        var _a;\n        const myAppName = this.interop.instance.application || this.interop.instance.applicationName;\n        const myAppTitle = ((_a = this.appManager.application(myAppName)) === null || _a === void 0 ? void 0 : _a.title) || \"\";\n        const baseStartContext = {\n            callerId: this.interop.instance.instance,\n            methodName,\n            initialCaller: { id: this.interop.instance.instance, applicationName: myAppName, applicationTitle: myAppTitle },\n            resolverApi: \"1.0\"\n        };\n        return method === \"raise\"\n            ? { ...baseStartContext, intent: request }\n            : { ...baseStartContext, handlerFilter: request };\n    }\n    async buildStartOptions() {\n        const win = this.windows.my();\n        if (!win) {\n            return;\n        }\n        const bounds = await win.getBounds();\n        return {\n            top: (bounds.height - INTENTS_RESOLVER_HEIGHT) / 2 + bounds.top,\n            left: (bounds.width - INTENTS_RESOLVER_WIDTH) / 2 + bounds.left,\n            width: INTENTS_RESOLVER_WIDTH,\n            height: INTENTS_RESOLVER_HEIGHT\n        };\n    }\n    createResponsePromise({ instanceId, intent, responseMethodName, timeout, errorMsg }) {\n        let resolve = () => { };\n        let reject = () => { };\n        const promise = PromisePlus((res, rej) => {\n            resolve = res;\n            reject = rej;\n        }, timeout, errorMsg);\n        this.intentsResolverResponsePromises[instanceId] = { intent, resolve, reject, promise, methodName: responseMethodName };\n    }\n    async invokeStartApp(application, context, options) {\n        const result = await this.interop.invoke(\"T42.ACS.StartApplication\", { Name: application, options: { ...options, startedByIntentAPI: true } });\n        return result.returned.Id;\n    }\n    subscribeOnInstanceStopped(instance, method) {\n        const { application } = instance;\n        const unsub = application.onInstanceStopped((inst) => {\n            if (inst.id !== instance.id) {\n                return;\n            }\n            const intentPromise = this.intentsResolverResponsePromises[inst.id];\n            if (!intentPromise) {\n                return unsub();\n            }\n            const errorMsg = `Cannot resolve ${method === \"raise\" ? `raised intent ${intentPromise.intent}` : `'${method}' method`} - User closed ${instance.application.name} app without choosing a handler`;\n            intentPromise.reject(errorMsg);\n            this.cleanUpIntentResolverPromise(inst.id);\n            unsub();\n        });\n    }\n    async cleanUpIntentResolverPromise(instanceId) {\n        const intentPromise = this.intentsResolverResponsePromises[instanceId];\n        if (!intentPromise) {\n            return;\n        }\n        const unregisterPromise = this.interop.unregister(intentPromise.methodName);\n        unregisterPromise.catch((error) => this.logger.warn(error));\n        delete this.intentsResolverResponsePromises[instanceId];\n    }\n    handleRaiseOnError(instanceId) {\n        if (!instanceId) {\n            return;\n        }\n        this.stopResolverInstance(instanceId);\n    }\n    stopResolverInstance(instanceId) {\n        const gdWin = this.windows.findById(instanceId);\n        gdWin === null || gdWin === void 0 ? void 0 : gdWin.close().catch((err) => this.logger.error(err));\n    }\n    checkIfIntentsResolverIsEnabled(options, appManager) {\n        var _a, _b, _c, _d, _e;\n        if (!appManager) {\n            this.useIntentsResolverUI = false;\n            return;\n        }\n        this.useIntentsResolverUI = typeof ((_a = options.intents) === null || _a === void 0 ? void 0 : _a.enableIntentsResolverUI) === \"boolean\"\n            ? options.intents.enableIntentsResolverUI\n            : true;\n        this.intentsResolverAppName = (_c = (_b = options.intents) === null || _b === void 0 ? void 0 : _b.intentsResolverAppName) !== null && _c !== void 0 ? _c : INTENTS_RESOLVER_APP_NAME;\n        this.intentsResolverResponseTimeout = (_e = (_d = options.intents) === null || _d === void 0 ? void 0 : _d.methodResponseTimeoutMs) !== null && _e !== void 0 ? _e : DEFAULT_RESOLVER_RESPONSE_TIMEOUT;\n    }\n    checkIfResolverShouldBeOpenedForRaise(intent, request) {\n        const checkOpen = this.checkIfIntentsResolverShouldBeOpened();\n        if (!checkOpen.open) {\n            return checkOpen;\n        }\n        const hasMoreThanOneHandler = this.checkIfIntentHasMoreThanOneHandler(intent, request);\n        if (!hasMoreThanOneHandler) {\n            return { open: false, reason: `Raised intent ${intent.name} has only one handler` };\n        }\n        return { open: true };\n    }\n    checkIfResolverShouldBeOpenedForFilterHandlers(handlers, filter) {\n        if (handlers.length === 1) {\n            return { open: false, reason: `There's only one valid intent handler for filter ${JSON.stringify(filter)}` };\n        }\n        if (typeof (filter === null || filter === void 0 ? void 0 : filter.openResolver) === \"boolean\" && !filter.openResolver) {\n            return { open: false, reason: \"Intents resolver is disabled by IntentHandler filter\" };\n        }\n        return this.checkIfIntentsResolverShouldBeOpened();\n    }\n    checkIfIntentsResolverShouldBeOpened() {\n        if (!this.useIntentsResolverUI) {\n            return { open: false, reason: `Intent Resolver is disabled. Resolving to first found handler` };\n        }\n        const intentsResolverApp = this.appManager.application(this.intentsResolverAppName);\n        if (!intentsResolverApp) {\n            return { open: false, reason: `Intent Resolver Application with name ${this.intentsResolverAppName} not found.` };\n        }\n        return { open: true };\n    }\n    checkIfIntentHasMoreThanOneHandler(intent, request) {\n        if (!request.target) {\n            return request.handlers\n                ? request.handlers.length > 1\n                : intent.handlers.length > 1;\n        }\n        if (request.target === \"reuse\") {\n            return request.handlers\n                ? request.handlers.filter((handler) => handler.type === \"instance\" && handler.instanceId).length > 1 || request.handlers.filter((handler) => handler.type === \"app\").length > 1\n                : intent.handlers.filter((handler) => handler.type === \"instance\" && handler.instanceId).length > 1 || intent.handlers.filter((handler) => handler.type === \"app\").length > 1;\n        }\n        if (request.target === \"startNew\") {\n            return request.handlers\n                ? request.handlers.filter((handler) => handler.type === \"app\").length > 1\n                : intent.handlers.filter((handler) => handler.type === \"app\").length > 1;\n        }\n        if (typeof request.target === \"object\") {\n            return false;\n        }\n        return false;\n    }\n    buildInteropMethodName(intentName) {\n        return `${GLUE42_FDC3_INTENTS_METHOD_PREFIX}${intentName}`;\n    }\n    clearUnregistrationPromise(promiseToRemove) {\n        this.unregisterIntentPromises = this.unregisterIntentPromises.filter((promise) => promise !== promiseToRemove);\n    }\n    unsubscribeIntent(intentName) {\n        this.myIntents.delete(intentName);\n        const methodName = this.buildInteropMethodName(intentName);\n        const unregisterPromise = this.interop.unregister(methodName);\n        this.unregisterIntentPromises.push(unregisterPromise);\n        unregisterPromise\n            .then(() => {\n            this.clearUnregistrationPromise(unregisterPromise);\n        })\n            .catch((err) => {\n            this.logger.error(`Unregistration of a method with name ${methodName} failed with reason: `, err);\n            this.clearUnregistrationPromise(unregisterPromise);\n        });\n    }\n    findHandlerByFilter(handlers, filter) {\n        if (filter.type) {\n            return handlers.find((handler) => handler.type === filter.type);\n        }\n        if (filter.instance) {\n            return handlers.find((handler) => filter.app\n                ? handler.applicationName === filter.app && handler.instanceId === filter.instance\n                : handler.instanceId === filter.instance);\n        }\n        if (filter.app) {\n            return handlers.find((handler) => handler.applicationName === filter.app);\n        }\n    }\n    extractIntentsWithInfoByHandler(intents, handler) {\n        const intentsWithInfo = intents.reduce((validIntentsWithInfo, intent) => {\n            intent.handlers.forEach((currentHandler) => {\n                const isValid = Object.keys(handler).every((key) => {\n                    var _a;\n                    return key === \"contextTypes\"\n                        ? (_a = handler.contextTypes) === null || _a === void 0 ? void 0 : _a.every((contextType) => { var _a; return (_a = currentHandler.contextTypes) === null || _a === void 0 ? void 0 : _a.includes(contextType); })\n                        : currentHandler[key] === handler[key];\n                });\n                if (!isValid) {\n                    return;\n                }\n                const intentWithInfo = {\n                    intent: intent.name,\n                    contextTypes: currentHandler.contextTypes,\n                    description: currentHandler.applicationDescription,\n                    displayName: currentHandler.displayName,\n                    icon: currentHandler.applicationIcon,\n                    resultType: currentHandler.resultType\n                };\n                validIntentsWithInfo.push(intentWithInfo);\n            });\n            return validIntentsWithInfo;\n        }, []);\n        return intentsWithInfo;\n    }\n    async removeRememberedHandler(intentName) {\n        var _a;\n        this.logger.trace(`Removing saved handler from prefs storage for intent ${intentName}`);\n        const prefs = await this.prefsController.get();\n        const intentPrefs = (_a = prefs.data) === null || _a === void 0 ? void 0 : _a.intents;\n        if (!intentPrefs) {\n            this.logger.trace(\"No app prefs found for current app\");\n            return;\n        }\n        delete intentPrefs[intentName];\n        const updatedPrefs = {\n            ...prefs.data,\n            intents: intentPrefs\n        };\n        await this.prefsController.update(updatedPrefs);\n        this.logger.trace(`Handler saved choice for intent ${intentName} removed successfully`);\n    }\n    async checkForRememberedHandler(intentRequest) {\n        var _a, _b;\n        const prefs = await this.prefsController.get();\n        const prefsForIntent = (_b = (_a = prefs.data) === null || _a === void 0 ? void 0 : _a.intents) === null || _b === void 0 ? void 0 : _b[intentRequest.intent];\n        return prefsForIntent === null || prefsForIntent === void 0 ? void 0 : prefsForIntent.handler;\n    }\n    async checkHandleRaiseWithRememberedHandler(intentRequest, resolverInstance, timeout) {\n        const rememberedHandler = await this.checkForRememberedHandler(intentRequest);\n        if (!rememberedHandler) {\n            return;\n        }\n        const request = {\n            ...intentRequest,\n            target: {\n                app: rememberedHandler.applicationName,\n                instance: rememberedHandler.instanceId\n            }\n        };\n        try {\n            const response = await this.coreRaiseIntent({ request, resolverInstance, timeout });\n            return response;\n        }\n        catch (error) {\n            this.logger.trace(\"Could not raise intent to remembered handler. Removing it from Prefs store\");\n            await this.removeRememberedHandler(intentRequest.intent);\n        }\n    }\n    async saveUserChoice({ intent, handler, filter, caller }) {\n        var _a, _b;\n        const prevPrefs = await this.prefsController.get(caller.applicationName);\n        const prevIntentsPrefs = ((_a = prevPrefs === null || prevPrefs === void 0 ? void 0 : prevPrefs.data) === null || _a === void 0 ? void 0 : _a.intents) || {};\n        const prefsToUpdate = {\n            ...prevPrefs.data,\n            intents: {\n                ...prevIntentsPrefs,\n                [intent]: { handler, filter }\n            }\n        };\n        await this.prefsController.update(prefsToUpdate, { app: caller.applicationName });\n        (_b = this.logger) === null || _b === void 0 ? void 0 : _b.info(`Saved user's choice of handler for '${caller.applicationName}' app`);\n    }\n}\n\nclass FactoryCallInfo {\n    constructor() {\n        this.initialized = false;\n        this.details = [];\n        this.reject = () => { };\n        this.resolve = () => { };\n    }\n    init(config) {\n        this.initialized = true;\n        this.addCall(config);\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n    addCall(config) {\n        this.details.push({ date: new Date(), config });\n    }\n    done(g) {\n        this.resolve(g);\n    }\n    error(e) {\n        this.reject(e);\n    }\n}\n\nclass Prefs {\n    constructor(appName, interop) {\n        this.appName = appName;\n        this.interop = interop;\n        this.registry = CallbackRegistryFactory();\n        this.interopMethodRegistered = false;\n    }\n    async get(app) {\n        const data = (await this.interop.invoke(\"T42.Prefs.Get\", { app: app !== null && app !== void 0 ? app : this.appName }));\n        return data.returned;\n    }\n    async set(data, options) {\n        var _a;\n        this.verifyDataObject(data);\n        await this.interop.invoke(\"T42.Prefs.Set\", { app: (_a = options === null || options === void 0 ? void 0 : options.app) !== null && _a !== void 0 ? _a : this.appName, data, merge: false });\n    }\n    async setFor(app, data) {\n        this.verifyApp(app);\n        this.verifyDataObject(data);\n        return this.set(data, { app });\n    }\n    async update(data, options) {\n        var _a;\n        this.verifyDataObject(data);\n        await this.interop.invoke(\"T42.Prefs.Set\", { app: (_a = options === null || options === void 0 ? void 0 : options.app) !== null && _a !== void 0 ? _a : this.appName, data, merge: true });\n    }\n    async updateFor(app, data) {\n        this.verifyApp(app);\n        this.verifyDataObject(data);\n        return this.update(data, { app });\n    }\n    async clear(app) {\n        await this.interop.invoke(\"T42.Prefs.Set\", { app: app !== null && app !== void 0 ? app : this.appName, clear: true });\n    }\n    async clearFor(app) {\n        this.verifyApp(app);\n        await this.interop.invoke(\"T42.Prefs.Set\", { app, clear: true });\n    }\n    async getAll() {\n        const data = (await this.interop.invoke(\"T42.Prefs.Get\"));\n        return data.returned;\n    }\n    async clearAll() {\n        await this.interop.invoke(\"T42.Prefs.Set\", { clear: true });\n    }\n    subscribe(callback) {\n        this.verifyCallback(callback);\n        return this.subscribeFor(this.appName, callback);\n    }\n    subscribeFor(app, callback) {\n        this.verifyApp(app);\n        this.verifyCallback(callback);\n        const unsubscribeFn = this.registry.add(app, callback);\n        this.registerInteropIfNeeded()\n            .then(() => {\n            this.interop.invoke(\"T42.Prefs.Get\", { app, subscribe: true });\n        });\n        return () => {\n            unsubscribeFn();\n        };\n    }\n    async registerInteropIfNeeded() {\n        if (this.interopMethodRegistered) {\n            return;\n        }\n        this.interopMethodRegistered = true;\n        await this.interop.register(\"T42.Prefs.Update\", (args) => {\n            this.registry.execute(args.app, args);\n        });\n    }\n    verifyApp(app) {\n        if (!app) {\n            throw new Error(`app should be defined`);\n        }\n        if (!isString(app)) {\n            throw new Error(`app should be a string`);\n        }\n    }\n    verifyDataObject(data) {\n        if (!data) {\n            throw new Error(`data should be defined`);\n        }\n        if (!isObject(data)) {\n            throw new Error(`data should be an object`);\n        }\n    }\n    verifyCallback(callback) {\n        if (!isFunction(callback)) {\n            throw new Error(`callback should be defined`);\n        }\n    }\n}\n\nclass Cookies {\n    constructor(methodName, interop) {\n        this.methodName = methodName;\n        this.interop = interop;\n    }\n    async get(filter) {\n        const result = await this.invoke(\"get-cookies\", { filter });\n        return result.returned.cookies;\n    }\n    async set(cookie) {\n        this.verifyCookieObject(cookie);\n        await this.invoke(\"set-cookie\", cookie);\n    }\n    async remove(url, name) {\n        if (!isString(url)) {\n            throw new Error(`url should be a string`);\n        }\n        if (!isString(name)) {\n            throw new Error(`name should be a string`);\n        }\n        await this.invoke(\"remove-cookie\", { url, name });\n    }\n    invoke(command, data) {\n        return this.interop.invoke(this.methodName, { command, args: data });\n    }\n    verifyCookieObject(cookie) {\n        if (!cookie) {\n            throw new Error(`cookie should be defined`);\n        }\n        if (!isObject(cookie)) {\n            throw new Error(`cookie should be an object`);\n        }\n    }\n}\n\nfunction factory$1(agm, methodName) {\n    const cookies = new Cookies(methodName, agm);\n    return {\n        get: cookies.get.bind(cookies),\n        remove: cookies.remove.bind(cookies),\n        set: cookies.set.bind(cookies),\n        ready: () => Promise.resolve()\n    };\n}\n\nclass EventsDispatcher {\n    constructor(config) {\n        this.config = config;\n        this.glue42EventName = \"Glue42\";\n        this.events = {\n            notifyStarted: { name: \"notifyStarted\", handle: this.handleNotifyStarted.bind(this) },\n            requestGlue: { name: \"requestGlue\", handle: this.handleRequestGlue.bind(this) }\n        };\n    }\n    start(glue) {\n        if (Utils.isNode()) {\n            return;\n        }\n        this.glue = glue;\n        this.wireCustomEventListener();\n        this.announceStarted();\n    }\n    wireCustomEventListener() {\n        window.addEventListener(this.glue42EventName, (event) => {\n            const data = event.detail;\n            if (!data || !data.glue42) {\n                return;\n            }\n            const glue42Event = data.glue42.event;\n            const foundHandler = this.events[glue42Event];\n            if (!foundHandler) {\n                return;\n            }\n            foundHandler.handle(data.glue42.message);\n        });\n    }\n    announceStarted() {\n        this.send(\"start\");\n    }\n    handleRequestGlue() {\n        if (!this.config.exposeAPI) {\n            this.send(\"requestGlueResponse\", { error: \"Will not give access to the underlying Glue API, because it was explicitly denied upon initialization.\" });\n            return;\n        }\n        this.send(\"requestGlueResponse\", { glue: this.glue });\n    }\n    handleNotifyStarted() {\n        this.announceStarted();\n    }\n    send(eventName, message) {\n        const payload = { glue42: { event: eventName, message } };\n        const event = new CustomEvent(this.glue42EventName, { detail: payload });\n        window.dispatchEvent(event);\n    }\n}\n\nconst callInfo = new FactoryCallInfo();\nconst factory = async (options) => {\n    let firstRun = false;\n    if (!callInfo.initialized) {\n        firstRun = true;\n        callInfo.init(options);\n    }\n    const glue42gd = typeof window !== \"undefined\" && window.glue42gd;\n    if (glue42gd) {\n        if (!firstRun) {\n            callInfo.addCall(options);\n            return callInfo.promise;\n        }\n    }\n    const g = await factoryCore(options, glue42gd);\n    callInfo.resolve(g);\n    return g;\n};\nconst factoryCore = async (options, glue42gd) => {\n    const T42GDExecuteMethod = \"T42.GD.Execute\";\n    const gdMajorVersion = Utils.getGDMajorVersion();\n    options = options || {};\n    const glueConfig = prepareConfig(options);\n    options.gateway = options.gateway || {};\n    let _appManager;\n    let _activity;\n    let _windows;\n    let _displays;\n    let _channels;\n    let _prefs;\n    const _browserEventsDispatcher = new EventsDispatcher(glueConfig);\n    function createWindows(core) {\n        if (glueConfig.windows) {\n            const windowsLogger = getLibLogger(\"windows\", core.logger, glueConfig.windows);\n            _windows = WindowsFactory(core.agm, windowsLogger, () => {\n                return _appManager;\n            }, () => {\n                return _displays;\n            }, () => {\n                return _channels;\n            }, gdMajorVersion);\n            debugLog(_windows);\n            return _windows;\n        }\n    }\n    function createActivities(core) {\n        var _a;\n        if (glueConfig.activities) {\n            if (ActivityModule.checkIsUsingGW3Implementation && ActivityModule.checkIsUsingGW3Implementation(core.connection)) {\n                const activityLogger = getLibLogger(\"activity\", core.logger, glueConfig.activities);\n                _activity = new ActivityModule({\n                    connection: core.connection,\n                    contexts: core.contexts,\n                    agm: core.agm,\n                    logger: activityLogger,\n                    logLevel: \"info\",\n                    disableAutoAnnounce: false,\n                    disposeRequestHandling: \"exit\",\n                    announcementInfo: null,\n                    windows: _windows,\n                    appManagerGetter: () => {\n                        return _appManager;\n                    },\n                    mode: glueConfig.activities.mode,\n                    typesToTrack: glueConfig.activities.typesToTrack,\n                    activityId: (_a = glue42gd === null || glue42gd === void 0 ? void 0 : glue42gd.activityInfo) === null || _a === void 0 ? void 0 : _a.activityId,\n                    gdMajorVersion\n                }).api;\n                debugLog(_activity);\n                return _activity;\n            }\n        }\n    }\n    function createAppManager(core) {\n        if (!glueConfig.appManager) {\n            return;\n        }\n        const logger = getLibLogger(\"appManager\", core.logger, glueConfig.appManager);\n        _appManager = AppManagerFactory({\n            agm: core.agm,\n            windows: _windows,\n            logger,\n            activities: _activity,\n            mode: glueConfig.appManager.mode,\n            gdMajorVersion\n        });\n        debugLog(_appManager);\n        return _appManager;\n    }\n    function createLayouts(core) {\n        var _a;\n        if (!glueConfig.layouts) {\n            return;\n        }\n        const logger = getLibLogger(\"layouts\", core.logger, glueConfig.layouts);\n        const layoutsConfig = glueConfig.layouts;\n        const lay = LayoutsFactory({\n            agm: core.agm,\n            appManager: _appManager,\n            activityGetter: () => _activity,\n            logger,\n            mode: layoutsConfig.mode,\n            autoSaveWindowContext: (_a = layoutsConfig.autoSaveWindowContext) !== null && _a !== void 0 ? _a : false,\n            gdMajorVersion\n        });\n        debugLog(lay);\n        return lay;\n    }\n    function createChannels(core) {\n        if (!glueConfig.channels) {\n            return;\n        }\n        if (!core.contexts) {\n            return;\n        }\n        const logger = getLibLogger(\"channels\", core.logger, glueConfig.channels);\n        _channels = factory$4(core.contexts, core.agm, () => _windows, logger);\n        debugLog(_channels);\n        return _channels;\n    }\n    function createHotkeys(core) {\n        const hotkeysAPI = factory$3(core.agm);\n        debugLog(hotkeysAPI);\n        return hotkeysAPI;\n    }\n    function createIntents(core) {\n        const intentsAPI = new Intents(core.agm, _windows, core.logger.subLogger(\"intents\"), options, _prefs, _appManager);\n        debugLog(intentsAPI);\n        return intentsAPI;\n    }\n    function createNotifications(core) {\n        const notificationsAPI = new Notifications(core.interop, core.logger).toAPI();\n        debugLog(notificationsAPI);\n        return notificationsAPI;\n    }\n    function createDisplaysApi(core) {\n        if (glueConfig.displays) {\n            const displaysLogger = getLibLogger(\"displays\", core.logger, glueConfig.displays);\n            _displays = new DisplayManager(core.agm, displaysLogger);\n            debugLog(_displays);\n            return _displays;\n        }\n    }\n    function createThemes(core) {\n        if (!core.contexts) {\n            return;\n        }\n        const themesAPI = factory$2(core.contexts, core.interop);\n        debugLog(themesAPI);\n        return themesAPI;\n    }\n    function createPrefs(core) {\n        var _a, _b;\n        const appName = (_b = (_a = options.application) !== null && _a !== void 0 ? _a : glue42gd === null || glue42gd === void 0 ? void 0 : glue42gd.applicationName) !== null && _b !== void 0 ? _b : core.interop.instance.application;\n        _prefs = new Prefs(appName, core.interop);\n        debugLog(_prefs);\n        return _prefs;\n    }\n    function createCookies(core) {\n        const api = factory$1(core.interop, T42GDExecuteMethod);\n        debugLog(api);\n        return api;\n    }\n    function getLibLogger(loggerName, logger, config) {\n        const newLogger = logger.subLogger(loggerName);\n        if (config && config.logger) {\n            const loggerConfig = config.logger;\n            if (loggerConfig.console) {\n                newLogger.consoleLevel(loggerConfig.console);\n            }\n            if (loggerConfig.publish) {\n                newLogger.publishLevel(loggerConfig.publish);\n            }\n        }\n        return newLogger;\n    }\n    const ext = {\n        libs: [\n            { name: \"windows\", create: createWindows },\n            { name: \"activities\", create: createActivities },\n            { name: \"appManager\", create: createAppManager },\n            { name: \"layouts\", create: createLayouts },\n            { name: \"channels\", create: createChannels },\n            { name: \"hotkeys\", create: createHotkeys },\n            { name: \"displays\", create: createDisplaysApi },\n            { name: \"prefs\", create: createPrefs },\n            { name: \"intents\", create: createIntents },\n            { name: \"notifications\", create: createNotifications },\n            { name: \"themes\", create: createThemes },\n            { name: \"cookies\", create: createCookies }\n        ],\n        version,\n        enrichGlue: (glue) => {\n            glue.config.activities = glueConfig.activities;\n            glue.config.windows = glueConfig.windows;\n            glue.config.appManager = glueConfig.appManager;\n            glue.config.layouts = glueConfig.layouts;\n            glue.config.channels = glueConfig.channels;\n            glue.config.displays = glueConfig.displays;\n        },\n    };\n    const currentLog = [];\n    if (typeof window !== \"undefined\") {\n        if (!window.glueFactoryLog) {\n            window.glueFactoryLog = [];\n        }\n        window.glueFactoryLog.push(currentLog);\n    }\n    function debugLog(entry) {\n        currentLog.push(entry);\n    }\n    const glueApi = (await IOConnectCoreFactory(options, ext));\n    if (Array.isArray(options === null || options === void 0 ? void 0 : options.libraries) && options.libraries.length) {\n        await Promise.all(options.libraries.map((lib) => lib(glueApi, options)));\n    }\n    _browserEventsDispatcher.start(glueApi);\n    return glueApi;\n};\nfactory.coreVersion = IOConnectCoreFactory.version;\nfactory.version = version;\nfactory.calls = callInfo;\n\nvar _a, _b;\nlet whatToExpose = factory;\nlet shouldSetToWindow = true;\nif (typeof window !== \"undefined\") {\n    const windowAsAny = window;\n    const iodesktop = (_a = windowAsAny.iodesktop) !== null && _a !== void 0 ? _a : windowAsAny.glue42gd;\n    if (iodesktop && iodesktop.autoInjected) {\n        whatToExpose = (_b = windowAsAny.IODesktop) !== null && _b !== void 0 ? _b : windowAsAny.Glue;\n        shouldSetToWindow = false;\n    }\n    if (shouldSetToWindow) {\n        windowAsAny.Glue = whatToExpose;\n        windowAsAny.IODesktop = whatToExpose;\n    }\n    delete windowAsAny.IOBrowser;\n    delete windowAsAny.GlueCore;\n}\nwhatToExpose.default = whatToExpose;\nvar whatToExpose$1 = whatToExpose;\n\nexport { whatToExpose$1 as default };\n//# sourceMappingURL=desktop.es.js.map\n","const GLUE42_FDC3_INTENTS_METHOD_PREFIX = \"Tick42.FDC3.Intents.\";\nconst ENTERPRISE_NO_APP_NAME = \"no-app-window\";\nconst glueCompulsoryProps = [\"interop\", \"appManager\", \"intents\"];\nconst appManagerCompulsoryProps = [\"myInstance\", \"applications\", \"application\", \"instances\", \"onInstanceStarted\", \"onInstanceStopped\", \"onAppAdded\", \"onAppRemoved\"];\n\n/**\r\n * Wraps values in an `Ok` type.\r\n *\r\n * Example: `ok(5) // => {ok: true, result: 5}`\r\n */\r\nvar ok = function (result) { return ({ ok: true, result: result }); };\r\n/**\r\n * Wraps errors in an `Err` type.\r\n *\r\n * Example: `err('on fire') // => {ok: false, error: 'on fire'}`\r\n */\r\nvar err = function (error) { return ({ ok: false, error: error }); };\r\n/**\r\n * Create a `Promise` that either resolves with the result of `Ok` or rejects\r\n * with the error of `Err`.\r\n */\r\nvar asPromise = function (r) {\r\n    return r.ok === true ? Promise.resolve(r.result) : Promise.reject(r.error);\r\n};\r\n/**\r\n * Unwraps a `Result` and returns either the result of an `Ok`, or\r\n * `defaultValue`.\r\n *\r\n * Example:\r\n * ```\r\n * Result.withDefault(5, number().run(json))\r\n * ```\r\n *\r\n * It would be nice if `Decoder` had an instance method that mirrored this\r\n * function. Such a method would look something like this:\r\n * ```\r\n * class Decoder<A> {\r\n *   runWithDefault = (defaultValue: A, json: any): A =>\r\n *     Result.withDefault(defaultValue, this.run(json));\r\n * }\r\n *\r\n * number().runWithDefault(5, json)\r\n * ```\r\n * Unfortunately, the type of `defaultValue: A` on the method causes issues\r\n * with type inference on  the `object` decoder in some situations. While these\r\n * inference issues can be solved by providing the optional type argument for\r\n * `object`s, the extra trouble and confusion doesn't seem worth it.\r\n */\r\nvar withDefault = function (defaultValue, r) {\r\n    return r.ok === true ? r.result : defaultValue;\r\n};\r\n/**\r\n * Return the successful result, or throw an error.\r\n */\r\nvar withException = function (r) {\r\n    if (r.ok === true) {\r\n        return r.result;\r\n    }\r\n    else {\r\n        throw r.error;\r\n    }\r\n};\r\n/**\r\n * Apply `f` to the result of an `Ok`, or pass the error through.\r\n */\r\nvar map = function (f, r) {\r\n    return r.ok === true ? ok(f(r.result)) : r;\r\n};\r\n/**\r\n * Apply `f` to the result of two `Ok`s, or pass an error through. If both\r\n * `Result`s are errors then the first one is returned.\r\n */\r\nvar map2 = function (f, ar, br) {\r\n    return ar.ok === false ? ar :\r\n        br.ok === false ? br :\r\n            ok(f(ar.result, br.result));\r\n};\r\n/**\r\n * Apply `f` to the error of an `Err`, or pass the success through.\r\n */\r\nvar mapError = function (f, r) {\r\n    return r.ok === true ? r : err(f(r.error));\r\n};\r\n/**\r\n * Chain together a sequence of computations that may fail, similar to a\r\n * `Promise`. If the first computation fails then the error will propagate\r\n * through. If it succeeds, then `f` will be applied to the value, returning a\r\n * new `Result`.\r\n */\r\nvar andThen = function (f, r) {\r\n    return r.ok === true ? f(r.result) : r;\r\n};\r\n\r\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction isEqual(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    if (a === null && b === null) {\r\n        return true;\r\n    }\r\n    if (typeof (a) !== typeof (b)) {\r\n        return false;\r\n    }\r\n    if (typeof (a) === 'object') {\r\n        // Array\r\n        if (Array.isArray(a)) {\r\n            if (!Array.isArray(b)) {\r\n                return false;\r\n            }\r\n            if (a.length !== b.length) {\r\n                return false;\r\n            }\r\n            for (var i = 0; i < a.length; i++) {\r\n                if (!isEqual(a[i], b[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        // Hash table\r\n        var keys = Object.keys(a);\r\n        if (keys.length !== Object.keys(b).length) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < keys.length; i++) {\r\n            if (!b.hasOwnProperty(keys[i])) {\r\n                return false;\r\n            }\r\n            if (!isEqual(a[keys[i]], b[keys[i]])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n/*\r\n * Helpers\r\n */\r\nvar isJsonArray = function (json) { return Array.isArray(json); };\r\nvar isJsonObject = function (json) {\r\n    return typeof json === 'object' && json !== null && !isJsonArray(json);\r\n};\r\nvar typeString = function (json) {\r\n    switch (typeof json) {\r\n        case 'string':\r\n            return 'a string';\r\n        case 'number':\r\n            return 'a number';\r\n        case 'boolean':\r\n            return 'a boolean';\r\n        case 'undefined':\r\n            return 'undefined';\r\n        case 'object':\r\n            if (json instanceof Array) {\r\n                return 'an array';\r\n            }\r\n            else if (json === null) {\r\n                return 'null';\r\n            }\r\n            else {\r\n                return 'an object';\r\n            }\r\n        default:\r\n            return JSON.stringify(json);\r\n    }\r\n};\r\nvar expectedGot = function (expected, got) {\r\n    return \"expected \" + expected + \", got \" + typeString(got);\r\n};\r\nvar printPath = function (paths) {\r\n    return paths.map(function (path) { return (typeof path === 'string' ? \".\" + path : \"[\" + path + \"]\"); }).join('');\r\n};\r\nvar prependAt = function (newAt, _a) {\r\n    var at = _a.at, rest = __rest(_a, [\"at\"]);\r\n    return (__assign({ at: newAt + (at || '') }, rest));\r\n};\r\n/**\r\n * Decoders transform json objects with unknown structure into known and\r\n * verified forms. You can create objects of type `Decoder<A>` with either the\r\n * primitive decoder functions, such as `boolean()` and `string()`, or by\r\n * applying higher-order decoders to the primitives, such as `array(boolean())`\r\n * or `dict(string())`.\r\n *\r\n * Each of the decoder functions are available both as a static method on\r\n * `Decoder` and as a function alias -- for example the string decoder is\r\n * defined at `Decoder.string()`, but is also aliased to `string()`. Using the\r\n * function aliases exported with the library is recommended.\r\n *\r\n * `Decoder` exposes a number of 'run' methods, which all decode json in the\r\n * same way, but communicate success and failure in different ways. The `map`\r\n * and `andThen` methods modify decoders without having to call a 'run' method.\r\n *\r\n * Alternatively, the main decoder `run()` method returns an object of type\r\n * `Result<A, DecoderError>`. This library provides a number of helper\r\n * functions for dealing with the `Result` type, so you can do all the same\r\n * things with a `Result` as with the decoder methods.\r\n */\r\nvar Decoder = /** @class */ (function () {\r\n    /**\r\n     * The Decoder class constructor is kept private to separate the internal\r\n     * `decode` function from the external `run` function. The distinction\r\n     * between the two functions is that `decode` returns a\r\n     * `Partial<DecoderError>` on failure, which contains an unfinished error\r\n     * report. When `run` is called on a decoder, the relevant series of `decode`\r\n     * calls is made, and then on failure the resulting `Partial<DecoderError>`\r\n     * is turned into a `DecoderError` by filling in the missing information.\r\n     *\r\n     * While hiding the constructor may seem restrictive, leveraging the\r\n     * provided decoder combinators and helper functions such as\r\n     * `andThen` and `map` should be enough to build specialized decoders as\r\n     * needed.\r\n     */\r\n    function Decoder(decode) {\r\n        var _this = this;\r\n        this.decode = decode;\r\n        /**\r\n         * Run the decoder and return a `Result` with either the decoded value or a\r\n         * `DecoderError` containing the json input, the location of the error, and\r\n         * the error message.\r\n         *\r\n         * Examples:\r\n         * ```\r\n         * number().run(12)\r\n         * // => {ok: true, result: 12}\r\n         *\r\n         * string().run(9001)\r\n         * // =>\r\n         * // {\r\n         * //   ok: false,\r\n         * //   error: {\r\n         * //     kind: 'DecoderError',\r\n         * //     input: 9001,\r\n         * //     at: 'input',\r\n         * //     message: 'expected a string, got 9001'\r\n         * //   }\r\n         * // }\r\n         * ```\r\n         */\r\n        this.run = function (json) {\r\n            return mapError(function (error) { return ({\r\n                kind: 'DecoderError',\r\n                input: json,\r\n                at: 'input' + (error.at || ''),\r\n                message: error.message || ''\r\n            }); }, _this.decode(json));\r\n        };\r\n        /**\r\n         * Run the decoder as a `Promise`.\r\n         */\r\n        this.runPromise = function (json) { return asPromise(_this.run(json)); };\r\n        /**\r\n         * Run the decoder and return the value on success, or throw an exception\r\n         * with a formatted error string.\r\n         */\r\n        this.runWithException = function (json) { return withException(_this.run(json)); };\r\n        /**\r\n         * Construct a new decoder that applies a transformation to the decoded\r\n         * result. If the decoder succeeds then `f` will be applied to the value. If\r\n         * it fails the error will propagated through.\r\n         *\r\n         * Example:\r\n         * ```\r\n         * number().map(x => x * 5).run(10)\r\n         * // => {ok: true, result: 50}\r\n         * ```\r\n         */\r\n        this.map = function (f) {\r\n            return new Decoder(function (json) { return map(f, _this.decode(json)); });\r\n        };\r\n        /**\r\n         * Chain together a sequence of decoders. The first decoder will run, and\r\n         * then the function will determine what decoder to run second. If the result\r\n         * of the first decoder succeeds then `f` will be applied to the decoded\r\n         * value. If it fails the error will propagate through.\r\n         *\r\n         * This is a very powerful method -- it can act as both the `map` and `where`\r\n         * methods, can improve error messages for edge cases, and can be used to\r\n         * make a decoder for custom types.\r\n         *\r\n         * Example of adding an error message:\r\n         * ```\r\n         * const versionDecoder = valueAt(['version'], number());\r\n         * const infoDecoder3 = object({a: boolean()});\r\n         *\r\n         * const decoder = versionDecoder.andThen(version => {\r\n         *   switch (version) {\r\n         *     case 3:\r\n         *       return infoDecoder3;\r\n         *     default:\r\n         *       return fail(`Unable to decode info, version ${version} is not supported.`);\r\n         *   }\r\n         * });\r\n         *\r\n         * decoder.run({version: 3, a: true})\r\n         * // => {ok: true, result: {a: true}}\r\n         *\r\n         * decoder.run({version: 5, x: 'abc'})\r\n         * // =>\r\n         * // {\r\n         * //   ok: false,\r\n         * //   error: {... message: 'Unable to decode info, version 5 is not supported.'}\r\n         * // }\r\n         * ```\r\n         *\r\n         * Example of decoding a custom type:\r\n         * ```\r\n         * // nominal type for arrays with a length of at least one\r\n         * type NonEmptyArray<T> = T[] & { __nonEmptyArrayBrand__: void };\r\n         *\r\n         * const nonEmptyArrayDecoder = <T>(values: Decoder<T>): Decoder<NonEmptyArray<T>> =>\r\n         *   array(values).andThen(arr =>\r\n         *     arr.length > 0\r\n         *       ? succeed(createNonEmptyArray(arr))\r\n         *       : fail(`expected a non-empty array, got an empty array`)\r\n         *   );\r\n         * ```\r\n         */\r\n        this.andThen = function (f) {\r\n            return new Decoder(function (json) {\r\n                return andThen(function (value) { return f(value).decode(json); }, _this.decode(json));\r\n            });\r\n        };\r\n        /**\r\n         * Add constraints to a decoder _without_ changing the resulting type. The\r\n         * `test` argument is a predicate function which returns true for valid\r\n         * inputs. When `test` fails on an input, the decoder fails with the given\r\n         * `errorMessage`.\r\n         *\r\n         * ```\r\n         * const chars = (length: number): Decoder<string> =>\r\n         *   string().where(\r\n         *     (s: string) => s.length === length,\r\n         *     `expected a string of length ${length}`\r\n         *   );\r\n         *\r\n         * chars(5).run('12345')\r\n         * // => {ok: true, result: '12345'}\r\n         *\r\n         * chars(2).run('HELLO')\r\n         * // => {ok: false, error: {... message: 'expected a string of length 2'}}\r\n         *\r\n         * chars(12).run(true)\r\n         * // => {ok: false, error: {... message: 'expected a string, got a boolean'}}\r\n         * ```\r\n         */\r\n        this.where = function (test, errorMessage) {\r\n            return _this.andThen(function (value) { return (test(value) ? Decoder.succeed(value) : Decoder.fail(errorMessage)); });\r\n        };\r\n    }\r\n    /**\r\n     * Decoder primitive that validates strings, and fails on all other input.\r\n     */\r\n    Decoder.string = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'string'\r\n                ? ok(json)\r\n                : err({ message: expectedGot('a string', json) });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder primitive that validates numbers, and fails on all other input.\r\n     */\r\n    Decoder.number = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'number'\r\n                ? ok(json)\r\n                : err({ message: expectedGot('a number', json) });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder primitive that validates booleans, and fails on all other input.\r\n     */\r\n    Decoder.boolean = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'boolean'\r\n                ? ok(json)\r\n                : err({ message: expectedGot('a boolean', json) });\r\n        });\r\n    };\r\n    Decoder.constant = function (value) {\r\n        return new Decoder(function (json) {\r\n            return isEqual(json, value)\r\n                ? ok(value)\r\n                : err({ message: \"expected \" + JSON.stringify(value) + \", got \" + JSON.stringify(json) });\r\n        });\r\n    };\r\n    Decoder.object = function (decoders) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonObject(json) && decoders) {\r\n                var obj = {};\r\n                for (var key in decoders) {\r\n                    if (decoders.hasOwnProperty(key)) {\r\n                        var r = decoders[key].decode(json[key]);\r\n                        if (r.ok === true) {\r\n                            // tslint:disable-next-line:strict-type-predicates\r\n                            if (r.result !== undefined) {\r\n                                obj[key] = r.result;\r\n                            }\r\n                        }\r\n                        else if (json[key] === undefined) {\r\n                            return err({ message: \"the key '\" + key + \"' is required but was not present\" });\r\n                        }\r\n                        else {\r\n                            return err(prependAt(\".\" + key, r.error));\r\n                        }\r\n                    }\r\n                }\r\n                return ok(obj);\r\n            }\r\n            else if (isJsonObject(json)) {\r\n                return ok(json);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot('an object', json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.array = function (decoder) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonArray(json) && decoder) {\r\n                var decodeValue_1 = function (v, i) {\r\n                    return mapError(function (err$$1) { return prependAt(\"[\" + i + \"]\", err$$1); }, decoder.decode(v));\r\n                };\r\n                return json.reduce(function (acc, v, i) {\r\n                    return map2(function (arr, result) { return arr.concat([result]); }, acc, decodeValue_1(v, i));\r\n                }, ok([]));\r\n            }\r\n            else if (isJsonArray(json)) {\r\n                return ok(json);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot('an array', json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.tuple = function (decoders) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonArray(json)) {\r\n                if (json.length !== decoders.length) {\r\n                    return err({\r\n                        message: \"expected a tuple of length \" + decoders.length + \", got one of length \" + json.length\r\n                    });\r\n                }\r\n                var result = [];\r\n                for (var i = 0; i < decoders.length; i++) {\r\n                    var nth = decoders[i].decode(json[i]);\r\n                    if (nth.ok) {\r\n                        result[i] = nth.result;\r\n                    }\r\n                    else {\r\n                        return err(prependAt(\"[\" + i + \"]\", nth.error));\r\n                    }\r\n                }\r\n                return ok(result);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot(\"a tuple of length \" + decoders.length, json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.union = function (ad, bd) {\r\n        var decoders = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            decoders[_i - 2] = arguments[_i];\r\n        }\r\n        return Decoder.oneOf.apply(Decoder, [ad, bd].concat(decoders));\r\n    };\r\n    Decoder.intersection = function (ad, bd) {\r\n        var ds = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            ds[_i - 2] = arguments[_i];\r\n        }\r\n        return new Decoder(function (json) {\r\n            return [ad, bd].concat(ds).reduce(function (acc, decoder) { return map2(Object.assign, acc, decoder.decode(json)); }, ok({}));\r\n        });\r\n    };\r\n    /**\r\n     * Escape hatch to bypass validation. Always succeeds and types the result as\r\n     * `any`. Useful for defining decoders incrementally, particularly for\r\n     * complex objects.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface User {\r\n     *   name: string;\r\n     *   complexUserData: ComplexType;\r\n     * }\r\n     *\r\n     * const userDecoder: Decoder<User> = object({\r\n     *   name: string(),\r\n     *   complexUserData: anyJson()\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.anyJson = function () { return new Decoder(function (json) { return ok(json); }); };\r\n    /**\r\n     * Decoder identity function which always succeeds and types the result as\r\n     * `unknown`.\r\n     */\r\n    Decoder.unknownJson = function () {\r\n        return new Decoder(function (json) { return ok(json); });\r\n    };\r\n    /**\r\n     * Decoder for json objects where the keys are unknown strings, but the values\r\n     * should all be of the same type.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * dict(number()).run({chocolate: 12, vanilla: 10, mint: 37});\r\n     * // => {ok: true, result: {chocolate: 12, vanilla: 10, mint: 37}}\r\n     * ```\r\n     */\r\n    Decoder.dict = function (decoder) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonObject(json)) {\r\n                var obj = {};\r\n                for (var key in json) {\r\n                    if (json.hasOwnProperty(key)) {\r\n                        var r = decoder.decode(json[key]);\r\n                        if (r.ok === true) {\r\n                            obj[key] = r.result;\r\n                        }\r\n                        else {\r\n                            return err(prependAt(\".\" + key, r.error));\r\n                        }\r\n                    }\r\n                }\r\n                return ok(obj);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot('an object', json) });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Decoder for values that may be `undefined`. This is primarily helpful for\r\n     * decoding interfaces with optional fields.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface User {\r\n     *   id: number;\r\n     *   isOwner?: boolean;\r\n     * }\r\n     *\r\n     * const decoder: Decoder<User> = object({\r\n     *   id: number(),\r\n     *   isOwner: optional(boolean())\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.optional = function (decoder) {\r\n        return new Decoder(function (json) { return (json === undefined || json === null ? ok(undefined) : decoder.decode(json)); });\r\n    };\r\n    /**\r\n     * Decoder that attempts to run each decoder in `decoders` and either succeeds\r\n     * with the first successful decoder, or fails after all decoders have failed.\r\n     *\r\n     * Note that `oneOf` expects the decoders to all have the same return type,\r\n     * while `union` creates a decoder for the union type of all the input\r\n     * decoders.\r\n     *\r\n     * Examples:\r\n     * ```\r\n     * oneOf(string(), number().map(String))\r\n     * oneOf(constant('start'), constant('stop'), succeed('unknown'))\r\n     * ```\r\n     */\r\n    Decoder.oneOf = function () {\r\n        var decoders = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            decoders[_i] = arguments[_i];\r\n        }\r\n        return new Decoder(function (json) {\r\n            var errors = [];\r\n            for (var i = 0; i < decoders.length; i++) {\r\n                var r = decoders[i].decode(json);\r\n                if (r.ok === true) {\r\n                    return r;\r\n                }\r\n                else {\r\n                    errors[i] = r.error;\r\n                }\r\n            }\r\n            var errorsList = errors\r\n                .map(function (error) { return \"at error\" + (error.at || '') + \": \" + error.message; })\r\n                .join('\", \"');\r\n            return err({\r\n                message: \"expected a value matching one of the decoders, got the errors [\\\"\" + errorsList + \"\\\"]\"\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that always succeeds with either the decoded value, or a fallback\r\n     * default value.\r\n     */\r\n    Decoder.withDefault = function (defaultValue, decoder) {\r\n        return new Decoder(function (json) {\r\n            return ok(withDefault(defaultValue, decoder.decode(json)));\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that pulls a specific field out of a json structure, instead of\r\n     * decoding and returning the full structure. The `paths` array describes the\r\n     * object keys and array indices to traverse, so that values can be pulled out\r\n     * of a nested structure.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * const decoder = valueAt(['a', 'b', 0], string());\r\n     *\r\n     * decoder.run({a: {b: ['surprise!']}})\r\n     * // => {ok: true, result: 'surprise!'}\r\n     *\r\n     * decoder.run({a: {x: 'cats'}})\r\n     * // => {ok: false, error: {... at: 'input.a.b[0]' message: 'path does not exist'}}\r\n     * ```\r\n     *\r\n     * Note that the `decoder` is ran on the value found at the last key in the\r\n     * path, even if the last key is not found. This allows the `optional`\r\n     * decoder to succeed when appropriate.\r\n     * ```\r\n     * const optionalDecoder = valueAt(['a', 'b', 'c'], optional(string()));\r\n     *\r\n     * optionalDecoder.run({a: {b: {c: 'surprise!'}}})\r\n     * // => {ok: true, result: 'surprise!'}\r\n     *\r\n     * optionalDecoder.run({a: {b: 'cats'}})\r\n     * // => {ok: false, error: {... at: 'input.a.b.c' message: 'expected an object, got \"cats\"'}\r\n     *\r\n     * optionalDecoder.run({a: {b: {z: 1}}})\r\n     * // => {ok: true, result: undefined}\r\n     * ```\r\n     */\r\n    Decoder.valueAt = function (paths, decoder) {\r\n        return new Decoder(function (json) {\r\n            var jsonAtPath = json;\r\n            for (var i = 0; i < paths.length; i++) {\r\n                if (jsonAtPath === undefined) {\r\n                    return err({\r\n                        at: printPath(paths.slice(0, i + 1)),\r\n                        message: 'path does not exist'\r\n                    });\r\n                }\r\n                else if (typeof paths[i] === 'string' && !isJsonObject(jsonAtPath)) {\r\n                    return err({\r\n                        at: printPath(paths.slice(0, i + 1)),\r\n                        message: expectedGot('an object', jsonAtPath)\r\n                    });\r\n                }\r\n                else if (typeof paths[i] === 'number' && !isJsonArray(jsonAtPath)) {\r\n                    return err({\r\n                        at: printPath(paths.slice(0, i + 1)),\r\n                        message: expectedGot('an array', jsonAtPath)\r\n                    });\r\n                }\r\n                else {\r\n                    jsonAtPath = jsonAtPath[paths[i]];\r\n                }\r\n            }\r\n            return mapError(function (error) {\r\n                return jsonAtPath === undefined\r\n                    ? { at: printPath(paths), message: 'path does not exist' }\r\n                    : prependAt(printPath(paths), error);\r\n            }, decoder.decode(jsonAtPath));\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that ignores the input json and always succeeds with `fixedValue`.\r\n     */\r\n    Decoder.succeed = function (fixedValue) {\r\n        return new Decoder(function (json) { return ok(fixedValue); });\r\n    };\r\n    /**\r\n     * Decoder that ignores the input json and always fails with `errorMessage`.\r\n     */\r\n    Decoder.fail = function (errorMessage) {\r\n        return new Decoder(function (json) { return err({ message: errorMessage }); });\r\n    };\r\n    /**\r\n     * Decoder that allows for validating recursive data structures. Unlike with\r\n     * functions, decoders assigned to variables can't reference themselves\r\n     * before they are fully defined. We can avoid prematurely referencing the\r\n     * decoder by wrapping it in a function that won't be called until use, at\r\n     * which point the decoder has been defined.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface Comment {\r\n     *   msg: string;\r\n     *   replies: Comment[];\r\n     * }\r\n     *\r\n     * const decoder: Decoder<Comment> = object({\r\n     *   msg: string(),\r\n     *   replies: lazy(() => array(decoder))\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.lazy = function (mkDecoder) {\r\n        return new Decoder(function (json) { return mkDecoder().decode(json); });\r\n    };\r\n    return Decoder;\r\n}());\r\n\r\n/* tslint:disable:variable-name */\r\n/** See `Decoder.string` */\r\nvar string = Decoder.string;\r\n/** See `Decoder.number` */\r\nvar number = Decoder.number;\r\n/** See `Decoder.boolean` */\r\nvar boolean = Decoder.boolean;\r\n/** See `Decoder.anyJson` */\r\nvar anyJson = Decoder.anyJson;\r\n/** See `Decoder.unknownJson` */\r\nDecoder.unknownJson;\r\n/** See `Decoder.constant` */\r\nvar constant = Decoder.constant;\r\n/** See `Decoder.object` */\r\nvar object = Decoder.object;\r\n/** See `Decoder.array` */\r\nvar array = Decoder.array;\r\n/** See `Decoder.tuple` */\r\nDecoder.tuple;\r\n/** See `Decoder.dict` */\r\nDecoder.dict;\r\n/** See `Decoder.optional` */\r\nvar optional = Decoder.optional;\r\n/** See `Decoder.oneOf` */\r\nvar oneOf = Decoder.oneOf;\r\n/** See `Decoder.union` */\r\nDecoder.union;\r\n/** See `Decoder.intersection` */\r\nDecoder.intersection;\r\n/** See `Decoder.withDefault` */\r\nDecoder.withDefault;\r\n/** See `Decoder.valueAt` */\r\nDecoder.valueAt;\r\n/** See `Decoder.succeed` */\r\nDecoder.succeed;\r\n/** See `Decoder.fail` */\r\nDecoder.fail;\r\n/** See `Decoder.lazy` */\r\nDecoder.lazy;\n\nconst nonEmptyStringDecoder = string().where((s) => s.length > 0, \"Expected a non-empty string\");\nconst nonNegativeNumberDecoder = number().where((num) => num >= 0, \"Expected a non-negative number\");\nconst windowRelativeDirectionDecoder = oneOf(constant(\"top\"), constant(\"left\"), constant(\"right\"), constant(\"bottom\"));\nconst windowOpenSettingsDecoder = optional(object({\n    top: optional(number()),\n    left: optional(number()),\n    width: optional(nonNegativeNumberDecoder),\n    height: optional(nonNegativeNumberDecoder),\n    context: optional(anyJson()),\n    relativeTo: optional(nonEmptyStringDecoder),\n    relativeDirection: optional(windowRelativeDirectionDecoder),\n    windowId: optional(nonEmptyStringDecoder)\n}));\nconst intentTargetDecoder = oneOf(constant(\"startNew\"), constant(\"reuse\"), object({\n    app: optional(nonEmptyStringDecoder),\n    instance: optional(nonEmptyStringDecoder)\n}));\nconst intentContextDecoder = object({\n    type: optional(nonEmptyStringDecoder),\n    data: optional(object())\n});\nconst IntentHandlerDecoder = object({\n    applicationName: nonEmptyStringDecoder,\n    applicationTitle: optional(string()),\n    applicationDescription: optional(string()),\n    applicationIcon: optional(string()),\n    type: oneOf(constant(\"app\"), constant(\"instance\")),\n    displayName: optional(string()),\n    contextTypes: optional(array(nonEmptyStringDecoder)),\n    instanceId: optional(string()),\n    instanceTitle: optional(string()),\n    resultType: optional(string())\n});\nconst intentRequestDecoder = object({\n    intent: nonEmptyStringDecoder,\n    target: optional(intentTargetDecoder),\n    context: optional(intentContextDecoder),\n    options: optional(windowOpenSettingsDecoder),\n    handlers: optional(array(IntentHandlerDecoder))\n});\nconst StartContextIntentDecoder = oneOf(nonEmptyStringDecoder, intentRequestDecoder);\nconst handlerFilterDecoder = object({\n    title: optional(nonEmptyStringDecoder),\n    openResolver: optional(boolean()),\n    timeout: optional(number()),\n    intent: optional(nonEmptyStringDecoder),\n    contextTypes: optional(array(nonEmptyStringDecoder)),\n    resultType: optional(nonEmptyStringDecoder),\n    applicationNames: optional(array(nonEmptyStringDecoder))\n});\nconst initialCallerDecoder = object({\n    id: nonEmptyStringDecoder,\n    applicationName: optional(string()),\n    applicationTitle: optional(string()),\n});\nconst StartContextDecoder = object({\n    methodName: nonEmptyStringDecoder,\n    callerId: optional(string()),\n    intent: optional(StartContextIntentDecoder),\n    handlerFilter: optional(handlerFilterDecoder),\n    initialCaller: optional(initialCallerDecoder),\n    correlationId: optional(string()),\n    resolverApi: optional(string())\n});\nconst ResolverIntentHandlerDecoder = object({\n    applicationName: string(),\n    applicationIcon: optional(string()),\n    instanceId: optional(string()),\n    applicationTitle: optional(string())\n});\n\nconst validateGlue = (glue) => {\n    const glueAPIs = Object.keys(glue);\n    const missingAPIs = glueCompulsoryProps.filter(prop => !glueAPIs.includes(prop));\n    if (missingAPIs.length) {\n        return { ok: false, error: `Glue is missing the following API${missingAPIs.length > 1 ? \"s\" : \"\"}: ${missingAPIs.join(\", \")}` };\n    }\n    const appManagerProps = Object.keys(glue.appManager);\n    const missingAppManagerProps = appManagerCompulsoryProps.filter(prop => !appManagerProps.includes(prop));\n    if (!missingAppManagerProps.length) {\n        return { ok: true };\n    }\n    return { ok: false, error: `Glue is not initialized with { \"appManager: \"full\" }. Missing props: ${missingAppManagerProps.join(\", \")}` };\n};\nconst extractDecoderError = (decoderError) => {\n    return `${decoderError.message} at ${decoderError.at} for input: ${JSON.stringify(decoderError.input)}`;\n};\nconst clearNullUndefined = (obj) => {\n    Object.keys(obj).forEach(key => {\n        if (obj[key] === null || obj[key] === undefined) {\n            delete obj[key];\n        }\n    });\n};\n\nclass GlueController {\n    glue;\n    _intent;\n    _handlerFilter;\n    _callerId;\n    _methodName;\n    _resolvingMethod;\n    _initialCaller;\n    _correlationId;\n    _resolverApi;\n    async initialize(glue) {\n        const { ok, error } = validateGlue(glue);\n        if (!ok && error) {\n            return this.announceInitFailure(error);\n        }\n        this.glue = glue;\n        const context = await this.glue.windows.my()?.getContext();\n        await this.validateStartupContext(context);\n        this._intent = context.intent;\n        this._callerId = context.callerId;\n        this._methodName = context.methodName;\n        this._handlerFilter = context.handlerFilter;\n        this._initialCaller = context.initialCaller;\n        this._correlationId = context.correlationId;\n        this._resolverApi = context.resolverApi;\n        this._resolvingMethod = context.handlerFilter ? \"filterHandlers\" : \"raise\";\n    }\n    get intent() {\n        return this._intent;\n    }\n    get callerId() {\n        return this._callerId;\n    }\n    get initialCaller() {\n        return this._initialCaller;\n    }\n    get resolvingMethod() {\n        return this._resolvingMethod;\n    }\n    get handlerFilter() {\n        return this._handlerFilter;\n    }\n    getTitle() {\n        if (this.resolvingMethod === \"filterHandlers\" && this.handlerFilter) {\n            return this.handlerFilter.title;\n        }\n        return `Choose an app to ${this.getIntentName()}`;\n    }\n    async sendInteropMethodResponse(handler, options) {\n        const extendedHandler = this.resolvingMethod === \"raise\"\n            ? await this.getIntentHandlerForRaise(handler)\n            : await this.getIntentHandlerForFilterHandlers(handler);\n        if (!extendedHandler) {\n            throw new Error(`There's no such existing intent handler: ${JSON.stringify(handler)}`);\n        }\n        const methodIsRegistered = this.isMethodRegistered();\n        if (!this.isInstanceStillRunning()) {\n            this.glue.windows.my()?.close();\n            return;\n        }\n        const intent = this.intent\n            ? this.getIntentName()\n            : options?.intent || this.handlerFilter?.intent;\n        if (options?.saveHandler && !intent) {\n            throw new Error(\"Intent is ambiguous. Provide it in 'options' argument\");\n        }\n        const argsObj = this._resolverApi\n            ? {\n                intent: intent,\n                handler: extendedHandler,\n                correlationId: this._correlationId,\n                userSettings: {\n                    preserveChoice: options?.saveHandler\n                }\n            }\n            : { intent, handler: extendedHandler };\n        if (!methodIsRegistered) {\n            return this.waitForResponseMethodAdded(argsObj);\n        }\n        return this.glue.interop.invoke(this._methodName, argsObj, { instance: this.callerId });\n    }\n    subscribeForServerMethodAdded(callback) {\n        return this.glue.interop.serverMethodAdded(({ server, method }) => {\n            const isInstanceHandler = this.checkIfInstanceIntentHandler(server, method);\n            if (!isInstanceHandler) {\n                return;\n            }\n            this.buildAddedIntentHandler(server.application || server.applicationName, server.instance)\n                .then(builtInstance => {\n                if (!builtInstance) {\n                    return;\n                }\n                const builtIntentInfo = this.buildIntentInfoFromInstanceMethod(method);\n                callback(builtInstance, builtIntentInfo);\n            });\n        });\n    }\n    subscribeForServerMethodRemoved(callback) {\n        return this.glue.interop.serverMethodRemoved(({ server, method }) => {\n            const isInstanceHandler = this.checkIfInstanceIntentHandler(server, method);\n            if (!isInstanceHandler) {\n                return;\n            }\n            const builtInstance = this.buildRemovedIntentHandler({ instance: server });\n            const builtIntentInfo = this.buildIntentInfoFromInstanceMethod(method);\n            callback(builtInstance, builtIntentInfo);\n        });\n    }\n    subscribeOnAppAdded(callback) {\n        return this.glue.appManager.onAppAdded((app) => {\n            let handler;\n            this.checkIfAppIntentHandler(app, \"added\")\n                .then((isIntentHandler) => {\n                if (!isIntentHandler) {\n                    return;\n                }\n                return this.buildAddedIntentHandler(app.name);\n            })\n                .then((builtHandler) => {\n                if (!builtHandler) {\n                    return;\n                }\n                handler = builtHandler;\n                return this.getValidAppIntentsByFilter(app);\n            })\n                .then((intents) => (intents || []).map((intent) => {\n                const builtIntentInfo = this.buildIntentInfoFromAppIntent(intent);\n                callback(handler, builtIntentInfo);\n            }));\n        });\n    }\n    subscribeOnAppRemoved(callback) {\n        return this.glue.appManager.onAppRemoved((app) => {\n            let handler;\n            this.checkIfAppIntentHandler(app, \"removed\")\n                .then((isIntentHandler) => {\n                if (!isIntentHandler) {\n                    return;\n                }\n                return this.buildRemovedIntentHandler({ app });\n            })\n                .then((builtHandler) => {\n                if (!builtHandler) {\n                    return;\n                }\n                handler = builtHandler;\n                return this.getValidAppIntentsByFilter(app);\n            })\n                .then((intents) => (intents || []).map((intent) => {\n                const builtIntentInfo = this.buildIntentInfoFromAppIntent(intent);\n                callback(handler, builtIntentInfo);\n            }));\n        });\n    }\n    getIntentName() {\n        return typeof this.intent === \"object\" ? this.intent.intent : this.intent;\n    }\n    waitForResponseMethodAdded(args) {\n        const responsePromise = new Promise((resolve, reject) => {\n            const unsub = this.glue.interop.serverMethodAdded(({ server, method }) => {\n                if (server.instance !== this.callerId || method.name !== this._methodName) {\n                    return;\n                }\n                this.glue.interop.invoke(this._methodName, args, { instance: this.callerId })\n                    .then((invocationRes) => {\n                    resolve(invocationRes);\n                })\n                    .catch((error) => {\n                    reject(error);\n                })\n                    .finally(() => {\n                    if (unsub) {\n                        unsub();\n                    }\n                });\n            });\n        });\n        return responsePromise;\n    }\n    async checkIfAppIntentHandler(app, method) {\n        if (this.resolvingMethod === \"raise\" && typeof this.intent === \"object\" && this.intent.handlers) {\n            return this.checkIfAppInPassedHandlers(app);\n        }\n        const globalBrowserNamespace = window.glue42core || window.iobrowser;\n        const globalDesktopNamespace = window.glue42gd || window.iodesktop;\n        if (globalBrowserNamespace && globalBrowserNamespace.webStarted) {\n            return this.checkInBrowserIfAppShouldShow(app, method);\n        }\n        if (globalDesktopNamespace) {\n            return this.checkInDesktopIfAppShouldShow(app);\n        }\n        return false;\n    }\n    checkIfInstanceIntentHandler(server, method) {\n        if (this.resolvingMethod === \"filterHandlers\") {\n            return this.checkIfValidIntentServerMethodWithHandlerFilter(server, method);\n        }\n        const isMethodForCurrentIntent = this.isMethodIsForPassedIntent(method.name, this.getIntentName());\n        if (!isMethodForCurrentIntent) {\n            return false;\n        }\n        if (typeof this.intent === \"object\" && this.intent.handlers && !this.checkIfInstanceInPassedHandlers(server)) {\n            return false;\n        }\n        return true;\n    }\n    async getValidAppIntentsByFilter(app) {\n        const globalDesktopNamespace = window.glue42gd || window.iodesktop;\n        const appIntents = globalDesktopNamespace\n            ? (await app.getConfiguration()).intents\n            : app.userProperties.intents;\n        if (!appIntents) {\n            return [];\n        }\n        return this.filterValidAppIntentsByFilter(appIntents, app.name);\n    }\n    buildIntentInfoFromAppIntent(intent) {\n        const intentInfo = {\n            intent: intent.name,\n            contextTypes: intent.contexts || intent.contextTypes,\n            description: intent.description,\n            displayName: intent.displayName,\n            icon: intent.icon,\n            resultType: intent.resultType\n        };\n        clearNullUndefined(intentInfo);\n        return intentInfo;\n    }\n    buildIntentInfoFromInstanceMethod(method) {\n        const intentFlag = method.flags.intent;\n        const intentInfo = {\n            intent: method.name.replace(GLUE42_FDC3_INTENTS_METHOD_PREFIX, \"\"),\n            contextTypes: intentFlag.contextTypes || intentFlag.contexts,\n            description: intentFlag.description,\n            displayName: intentFlag.displayName,\n            icon: intentFlag.icon,\n            resultType: intentFlag.resultType\n        };\n        clearNullUndefined(intentInfo);\n        return intentInfo;\n    }\n    filterValidAppIntentsByFilter(intents, appName) {\n        const filter = this.resolvingMethod === \"filterHandlers\" ? this.handlerFilter : { intent: this.getIntentName() };\n        return intents.filter((intentInfo) => {\n            if (filter.intent && filter.intent !== intentInfo.name) {\n                return;\n            }\n            if (filter.resultType && filter.resultType !== intentInfo.resultType) {\n                return;\n            }\n            if (filter.contextTypes && (!intentInfo.contexts || !filter.contextTypes.every((contextType) => intentInfo.contexts?.includes(contextType)))) {\n                return;\n            }\n            if (filter.applicationNames && !filter.applicationNames.includes(appName)) {\n                return;\n            }\n            return intentInfo;\n        });\n    }\n    checkIfValidIntentServerMethodWithHandlerFilter(server, method) {\n        if (this.handlerFilter?.intent && !this.isMethodIsForPassedIntent(method.name, this.handlerFilter.intent)) {\n            return false;\n        }\n        const intentFlag = method.flags.intent;\n        if (this.handlerFilter?.resultType && (!intentFlag?.resultType || intentFlag.resultType !== this.handlerFilter.resultType)) {\n            return false;\n        }\n        if (this.handlerFilter?.contextTypes && (!intentFlag?.contextTypes?.length || !this.handlerFilter.contextTypes.every((contextType) => intentFlag.contextTypes.includes(contextType)))) {\n            return false;\n        }\n        if (this.handlerFilter?.applicationNames && !this.handlerFilter?.applicationNames.includes(server.application || server.applicationName)) {\n            return false;\n        }\n        return true;\n    }\n    checkIfAppInPassedHandlers(app) {\n        const handlersForApp = this.intent.handlers?.filter(handler => handler.applicationName === app.name);\n        if (!handlersForApp?.length)\n            return false;\n        if (this.intent.target === \"startNew\") {\n            return !!handlersForApp.find((handler) => handler.type === \"app\");\n        }\n        if (this.intent.target === \"reuse\") {\n            const openedInstance = handlersForApp.find(handler => handler.type === \"instance\");\n            return !openedInstance;\n        }\n        return !!handlersForApp.find(handler => handler.type === \"app\");\n    }\n    async checkInBrowserIfAppShouldShow(app, method) {\n        if (this.resolvingMethod === \"filterHandlers\") {\n            return app.userProperties.intents ? !!this.filterValidAppIntentsByFilter(app.userProperties.intents, app.name).length : false;\n        }\n        const intentName = this.getIntentName();\n        if (method === \"removed\") {\n            return !!app.userProperties.intents?.find((intent) => intent.name === intentName);\n        }\n        if (typeof this.intent === \"object\" && this.intent.target === \"reuse\") {\n            const currentIntent = app.userProperties.intents?.find((intent) => intent.name === intentName);\n            if (!currentIntent)\n                return false;\n            const intent = (await this.glue.intents.find(intentName)).find(intent => intent.name === intentName);\n            if (!intent)\n                return false;\n            return !intent.handlers.find(handler => handler.applicationName === app.name && handler.type === \"instance\" && handler.instanceId);\n        }\n        return !!app.userProperties.intents?.find((intent) => intent.name === intentName);\n    }\n    async checkInDesktopIfAppShouldShow(app) {\n        const appConfig = await app.getConfiguration();\n        if (!appConfig?.intents) {\n            return false;\n        }\n        const appIsSingleton = appConfig.allowMultiple === false;\n        if (appIsSingleton && this.glue.interop.servers().find((server) => server.application === app.name)) {\n            return false;\n        }\n        if (this.resolvingMethod === \"filterHandlers\") {\n            return !!this.filterValidAppIntentsByFilter(appConfig.intents, app.name).length;\n        }\n        const intentName = this.getIntentName();\n        const intent = (await this.glue.intents.find(intentName)).find(intent => intent.name === intentName);\n        if (!intent)\n            return false;\n        if (typeof this.intent === \"object\" && this.intent.target === \"reuse\") {\n            const handlersForCurrentIntent = intent.handlers.filter(handler => handler.applicationName === app.name);\n            if (!handlersForCurrentIntent.length)\n                return false;\n            const openedInstance = handlersForCurrentIntent.some(handler => handler.instanceId);\n            return !openedInstance;\n        }\n        return !!intent.handlers.find((handler) => handler.applicationName === app.name);\n    }\n    checkIfInstanceInPassedHandlers(server) {\n        return !!this.intent.handlers?.find((handler) => handler.applicationName === server.application && server.instance === handler.instanceId);\n    }\n    async buildAddedIntentHandler(appName, instanceId) {\n        const foundApp = this.glue.appManager.application(appName);\n        const serverInstance = this.glue.interop.servers().find(server => server.instance === instanceId);\n        if (!foundApp && !serverInstance) {\n            return;\n        }\n        if (foundApp) {\n            return {\n                applicationName: foundApp.name !== ENTERPRISE_NO_APP_NAME ? foundApp.name : serverInstance?.applicationName || serverInstance?.application || \"\",\n                applicationTitle: serverInstance ? await this.getHandlerTitle(serverInstance) : foundApp.title || instanceId,\n                applicationIcon: foundApp?.icon,\n                instanceId\n            };\n        }\n        return {\n            applicationName: serverInstance.applicationName || serverInstance.application || serverInstance.instance || \"\",\n            applicationTitle: await this.getHandlerTitle(serverInstance),\n            applicationIcon: \"\",\n            instanceId\n        };\n    }\n    buildRemovedIntentHandler({ instance, app }) {\n        if (instance) {\n            return {\n                applicationName: instance.applicationName || instance.application || \"\",\n                instanceId: instance.instance || instance.windowId\n            };\n        }\n        if (app) {\n            return {\n                applicationName: app.name,\n                applicationTitle: app.title,\n                applicationIcon: app.icon,\n            };\n        }\n        throw new Error(\"Invalid arguments passed to buildRemovedIntentHandler\");\n    }\n    async getHandlerTitle(server) {\n        if (!server.windowId) {\n            return server.applicationName || server.application || server.instance || \"\";\n        }\n        const winDef = this.glue.windows.findById(server.windowId);\n        const serverInstanceInfo = server.applicationName || server.application || server.instance || \"\";\n        if (!winDef) {\n            return serverInstanceInfo;\n        }\n        const title = await winDef.getTitle();\n        return title || serverInstanceInfo;\n    }\n    async getIntentHandlerForRaise(userHandler) {\n        const intentName = this.getIntentName();\n        const searchedIntent = (await this.glue.intents.find(intentName)).find(intent => intent.name === intentName);\n        if (!searchedIntent) {\n            throw new Error(`Intent with name ${intentName} does not exist`);\n        }\n        const handler = this.findHandlerByFilter({ instanceId: userHandler.instanceId, applicationName: userHandler.applicationName }, searchedIntent.handlers);\n        return handler;\n    }\n    async getIntentHandlerForFilterHandlers(userHandler) {\n        const allIntents = await this.glue.intents.all();\n        const allIntentHandlers = allIntents.map((intent) => intent.handlers).flat(1);\n        const handler = this.findHandlerByFilter({ instanceId: userHandler.instanceId, applicationName: userHandler.applicationName }, allIntentHandlers);\n        return handler;\n    }\n    findHandlerByFilter(filterObject, handlers) {\n        if (filterObject.instanceId) {\n            return handlers.find(handler => handler.instanceId === filterObject.instanceId);\n        }\n        if (filterObject.applicationName) {\n            return handlers.find(handler => handler.applicationName === filterObject.applicationName);\n        }\n    }\n    isMethodRegistered() {\n        return !!this.glue.interop.methods(this._methodName).length;\n    }\n    isInstanceStillRunning() {\n        return !!this.glue.interop.servers().find(server => server.instance === this.callerId);\n    }\n    isMethodIsForPassedIntent(methodName, intentName) {\n        const expectedMethodName = `${GLUE42_FDC3_INTENTS_METHOD_PREFIX}${intentName}`;\n        return expectedMethodName === methodName;\n    }\n    async validateStartupContext(context) {\n        const decoderRes = StartContextDecoder.run(context);\n        if (!decoderRes.ok) {\n            const errorMsg = extractDecoderError(decoderRes.error);\n            return this.announceInitFailure(errorMsg, context);\n        }\n        const baseErrorMsg = `Invalid startup context: ${JSON.stringify(context)}`;\n        if (!context.intent && !context.handlerFilter) {\n            return this.announceInitFailure(`${baseErrorMsg}. Either 'intent' or 'handlerFilter' should be present.`, context);\n        }\n        if (!context.handlerFilter) {\n            return;\n        }\n        const { intent, resultType, contextTypes, applicationNames } = context.handlerFilter;\n        if (!Object.keys(context.handlerFilter).length || (!intent && !resultType && !contextTypes?.length && !applicationNames?.length)) {\n            return this.announceInitFailure(`Invalid startup context: ${JSON.stringify(context)}. Provide at least one filter criteria of the following:  'intent' | 'contextTypes' | 'resultType' | 'applicationName'`, context);\n        }\n    }\n    announceInitFailure(errorMsg, context) {\n        return new Promise((res, rej) => {\n            if (!this.glue?.interop || !context?.methodName || typeof context.methodName !== \"string\" || typeof context.callerId !== \"string\") {\n                return rej(errorMsg);\n            }\n            this.glue.interop.invoke(context.methodName, { error: errorMsg }, { instance: context.callerId }).then(() => res()).catch(rej);\n        });\n    }\n}\n\nvar version = \"2.4.0\";\n\nclass MainController {\n    glueController;\n    constructor(glueController) {\n        this.glueController = glueController;\n    }\n    toApi() {\n        const api = {\n            intent: this.glueController.intent,\n            caller: this.glueController.initialCaller,\n            handlerFilter: this.glueController.handlerFilter,\n            version,\n            getTitle: this.getTitle.bind(this),\n            sendResponse: this.sendResponse.bind(this),\n            onHandlerAdded: this.onHandlerAdded.bind(this),\n            onHandlerRemoved: this.onHandlerRemoved.bind(this),\n        };\n        return Object.freeze(api);\n    }\n    getTitle() {\n        return this.glueController.getTitle();\n    }\n    async sendResponse(args, options) {\n        const handler = ResolverIntentHandlerDecoder.runWithException(args);\n        if (!handler.applicationName && !handler.instanceId) {\n            throw new Error(\"Handler must have either applicationName or instanceId property\");\n        }\n        return this.glueController.sendInteropMethodResponse(handler, options);\n    }\n    onHandlerAdded(callback) {\n        if (this.glueController.resolvingMethod === \"raise\" && this.glueController.intent.target === \"startNew\") {\n            return this.glueController.subscribeOnAppAdded(callback);\n        }\n        const unsubFromAppAdded = this.glueController.subscribeOnAppAdded(callback);\n        const unsubFromServerMethodAdded = this.glueController.subscribeForServerMethodAdded(callback);\n        return () => {\n            unsubFromAppAdded();\n            unsubFromServerMethodAdded();\n        };\n    }\n    onHandlerRemoved(callback) {\n        if (this.glueController.resolvingMethod === \"raise\" && typeof this.glueController.intent === \"object\" && this.glueController.intent.target === \"startNew\") {\n            return this.glueController.subscribeOnAppRemoved(callback);\n        }\n        const unsubFromAppRemoved = this.glueController.subscribeOnAppRemoved(callback);\n        const unsubFromServerMethodRemoved = this.glueController.subscribeForServerMethodRemoved(callback);\n        return () => {\n            unsubFromAppRemoved();\n            unsubFromServerMethodRemoved();\n        };\n    }\n}\n\nclass IoC {\n    _intentsResolver;\n    _glueController;\n    get intentsResolver() {\n        if (!this._intentsResolver) {\n            this._intentsResolver = new MainController(this.glueController).toApi();\n        }\n        return this._intentsResolver;\n    }\n    get glueController() {\n        if (!this._glueController) {\n            this._glueController = new GlueController();\n        }\n        return this._glueController;\n    }\n}\n\nconst factoryFunction = async (io) => {\n    const ioc = new IoC();\n    try {\n        await ioc.glueController.initialize(io);\n    }\n    catch (error) {\n        throw new Error(`The Intents Resolver API did not initialized successfully. Error: ${JSON.stringify(error)}`);\n    }\n    io.intents.resolver = ioc.intentsResolver;\n    Object.freeze(io.intents);\n};\nif (typeof window !== \"undefined\") {\n    window.IOConnectIntentsResolver = factoryFunction;\n}\n\nexport { factoryFunction as default };\n//# sourceMappingURL=intents-resolver-api.es.js.map\n","import React, { createContext, forwardRef, useCallback, useMemo, memo, useState, useContext, useRef, useEffect } from 'react';\nimport { IOConnectContext } from '@interopio/react-hooks';\nimport 'react-dom';\n\nvar version = \"0.0.0\";\n\nconst validateIO = (io) => {\n    if (!io.intents.resolver) {\n        throw new Error(\"IO must be configured with IOConnectIntentsResolver factory passed in `config.libraries' \");\n    }\n};\nconst appendIOResolverToWindow = (io) => {\n    if (window.ioResolver) {\n        return;\n    }\n    window.ioResolver = {\n        apiVersion: io.intents.resolver?.version,\n        uiVersion: version\n    };\n};\nconst getTitleWithIntent = ({ intent, callerName, }) => {\n    if (callerName) {\n        return `\"${intent}\" action from \"${callerName}\" is unassigned. Choose an app to perform this action.`;\n    }\n    return `\"${intent}\" action is unassigned. Choose an app to perform this action.`;\n};\nconst getTitleWithHandlerFilter = ({ contextTypes, resultType }) => {\n    const contextTypesString = contextTypes?.length ? `'${contextTypes.join(\", \")}' context types` : \"\";\n    if (contextTypesString && resultType) {\n        return `Choose action for ${contextTypesString} and '${resultType}' result type.`;\n    }\n    if (contextTypesString && !resultType) {\n        return `Choose action for ${contextTypesString}`;\n    }\n    if (!contextTypesString && resultType) {\n        return `Choose action for '${resultType}' result type.`;\n    }\n    return \"Choose action\";\n};\n\nvar jsxRuntime = {exports: {}};\n\nvar reactJsxRuntime_production_min = {};\n\n/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar hasRequiredReactJsxRuntime_production_min;\n\nfunction requireReactJsxRuntime_production_min () {\n\tif (hasRequiredReactJsxRuntime_production_min) return reactJsxRuntime_production_min;\n\thasRequiredReactJsxRuntime_production_min = 1;\nvar f=React,k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\n\tfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return {$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;\n\treturn reactJsxRuntime_production_min;\n}\n\nvar reactJsxRuntime_development = {};\n\n/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar hasRequiredReactJsxRuntime_development;\n\nfunction requireReactJsxRuntime_development () {\n\tif (hasRequiredReactJsxRuntime_development) return reactJsxRuntime_development;\n\thasRequiredReactJsxRuntime_development = 1;\n\n\tif (process.env.NODE_ENV !== \"production\") {\n\t  (function() {\n\n\tvar React$1 = React;\n\n\t// ATTENTION\n\t// When adding new symbols to this file,\n\t// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\t// The Symbol used to tag the ReactElement-like types.\n\tvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\n\tvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\n\tvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\n\tvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\n\tvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\n\tvar REACT_PROVIDER_TYPE = Symbol.for('react.provider');\n\tvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\n\tvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\n\tvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\n\tvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\n\tvar REACT_MEMO_TYPE = Symbol.for('react.memo');\n\tvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\n\tvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\n\tvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\n\tvar FAUX_ITERATOR_SYMBOL = '@@iterator';\n\tfunction getIteratorFn(maybeIterable) {\n\t  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n\t    return null;\n\t  }\n\n\t  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n\t  if (typeof maybeIterator === 'function') {\n\t    return maybeIterator;\n\t  }\n\n\t  return null;\n\t}\n\n\tvar ReactSharedInternals = React$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\n\tfunction error(format) {\n\t  {\n\t    {\n\t      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n\t        args[_key2 - 1] = arguments[_key2];\n\t      }\n\n\t      printWarning('error', format, args);\n\t    }\n\t  }\n\t}\n\n\tfunction printWarning(level, format, args) {\n\t  // When changing this logic, you might want to also\n\t  // update consoleWithStackDev.www.js as well.\n\t  {\n\t    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\t    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n\t    if (stack !== '') {\n\t      format += '%s';\n\t      args = args.concat([stack]);\n\t    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n\t    var argsWithFormat = args.map(function (item) {\n\t      return String(item);\n\t    }); // Careful: RN currently depends on this prefix\n\n\t    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n\t    // breaks IE9: https://github.com/facebook/react/issues/13610\n\t    // eslint-disable-next-line react-internal/no-production-logging\n\n\t    Function.prototype.apply.call(console[level], console, argsWithFormat);\n\t  }\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\tvar enableScopeAPI = false; // Experimental Create Event Handle API.\n\tvar enableCacheElement = false;\n\tvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\n\tvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\n\t// stuff. Intended to enable React core members to more easily debug scheduling\n\t// issues in DEV builds.\n\n\tvar enableDebugTracing = false; // Track which Fiber(s) schedule render work.\n\n\tvar REACT_MODULE_REFERENCE;\n\n\t{\n\t  REACT_MODULE_REFERENCE = Symbol.for('react.module.reference');\n\t}\n\n\tfunction isValidElementType(type) {\n\t  if (typeof type === 'string' || typeof type === 'function') {\n\t    return true;\n\t  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n\t  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n\t    return true;\n\t  }\n\n\t  if (typeof type === 'object' && type !== null) {\n\t    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n\t    // types supported by any Flight configuration anywhere since\n\t    // we don't know which Flight build this will end up being used\n\t    // with.\n\t    type.$$typeof === REACT_MODULE_REFERENCE || type.getModuleId !== undefined) {\n\t      return true;\n\t    }\n\t  }\n\n\t  return false;\n\t}\n\n\tfunction getWrappedName(outerType, innerType, wrapperName) {\n\t  var displayName = outerType.displayName;\n\n\t  if (displayName) {\n\t    return displayName;\n\t  }\n\n\t  var functionName = innerType.displayName || innerType.name || '';\n\t  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n\t} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\n\tfunction getContextName(type) {\n\t  return type.displayName || 'Context';\n\t} // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\n\n\tfunction getComponentNameFromType(type) {\n\t  if (type == null) {\n\t    // Host root, text node or just invalid type.\n\t    return null;\n\t  }\n\n\t  {\n\t    if (typeof type.tag === 'number') {\n\t      error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n\t    }\n\t  }\n\n\t  if (typeof type === 'function') {\n\t    return type.displayName || type.name || null;\n\t  }\n\n\t  if (typeof type === 'string') {\n\t    return type;\n\t  }\n\n\t  switch (type) {\n\t    case REACT_FRAGMENT_TYPE:\n\t      return 'Fragment';\n\n\t    case REACT_PORTAL_TYPE:\n\t      return 'Portal';\n\n\t    case REACT_PROFILER_TYPE:\n\t      return 'Profiler';\n\n\t    case REACT_STRICT_MODE_TYPE:\n\t      return 'StrictMode';\n\n\t    case REACT_SUSPENSE_TYPE:\n\t      return 'Suspense';\n\n\t    case REACT_SUSPENSE_LIST_TYPE:\n\t      return 'SuspenseList';\n\n\t  }\n\n\t  if (typeof type === 'object') {\n\t    switch (type.$$typeof) {\n\t      case REACT_CONTEXT_TYPE:\n\t        var context = type;\n\t        return getContextName(context) + '.Consumer';\n\n\t      case REACT_PROVIDER_TYPE:\n\t        var provider = type;\n\t        return getContextName(provider._context) + '.Provider';\n\n\t      case REACT_FORWARD_REF_TYPE:\n\t        return getWrappedName(type, type.render, 'ForwardRef');\n\n\t      case REACT_MEMO_TYPE:\n\t        var outerName = type.displayName || null;\n\n\t        if (outerName !== null) {\n\t          return outerName;\n\t        }\n\n\t        return getComponentNameFromType(type.type) || 'Memo';\n\n\t      case REACT_LAZY_TYPE:\n\t        {\n\t          var lazyComponent = type;\n\t          var payload = lazyComponent._payload;\n\t          var init = lazyComponent._init;\n\n\t          try {\n\t            return getComponentNameFromType(init(payload));\n\t          } catch (x) {\n\t            return null;\n\t          }\n\t        }\n\n\t      // eslint-disable-next-line no-fallthrough\n\t    }\n\t  }\n\n\t  return null;\n\t}\n\n\tvar assign = Object.assign;\n\n\t// Helpers to patch console.logs to avoid logging during side-effect free\n\t// replaying on render function. This currently only patches the object\n\t// lazily which won't cover if the log function was extracted eagerly.\n\t// We could also eagerly patch the method.\n\tvar disabledDepth = 0;\n\tvar prevLog;\n\tvar prevInfo;\n\tvar prevWarn;\n\tvar prevError;\n\tvar prevGroup;\n\tvar prevGroupCollapsed;\n\tvar prevGroupEnd;\n\n\tfunction disabledLog() {}\n\n\tdisabledLog.__reactDisabledLog = true;\n\tfunction disableLogs() {\n\t  {\n\t    if (disabledDepth === 0) {\n\t      /* eslint-disable react-internal/no-production-logging */\n\t      prevLog = console.log;\n\t      prevInfo = console.info;\n\t      prevWarn = console.warn;\n\t      prevError = console.error;\n\t      prevGroup = console.group;\n\t      prevGroupCollapsed = console.groupCollapsed;\n\t      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n\t      var props = {\n\t        configurable: true,\n\t        enumerable: true,\n\t        value: disabledLog,\n\t        writable: true\n\t      }; // $FlowFixMe Flow thinks console is immutable.\n\n\t      Object.defineProperties(console, {\n\t        info: props,\n\t        log: props,\n\t        warn: props,\n\t        error: props,\n\t        group: props,\n\t        groupCollapsed: props,\n\t        groupEnd: props\n\t      });\n\t      /* eslint-enable react-internal/no-production-logging */\n\t    }\n\n\t    disabledDepth++;\n\t  }\n\t}\n\tfunction reenableLogs() {\n\t  {\n\t    disabledDepth--;\n\n\t    if (disabledDepth === 0) {\n\t      /* eslint-disable react-internal/no-production-logging */\n\t      var props = {\n\t        configurable: true,\n\t        enumerable: true,\n\t        writable: true\n\t      }; // $FlowFixMe Flow thinks console is immutable.\n\n\t      Object.defineProperties(console, {\n\t        log: assign({}, props, {\n\t          value: prevLog\n\t        }),\n\t        info: assign({}, props, {\n\t          value: prevInfo\n\t        }),\n\t        warn: assign({}, props, {\n\t          value: prevWarn\n\t        }),\n\t        error: assign({}, props, {\n\t          value: prevError\n\t        }),\n\t        group: assign({}, props, {\n\t          value: prevGroup\n\t        }),\n\t        groupCollapsed: assign({}, props, {\n\t          value: prevGroupCollapsed\n\t        }),\n\t        groupEnd: assign({}, props, {\n\t          value: prevGroupEnd\n\t        })\n\t      });\n\t      /* eslint-enable react-internal/no-production-logging */\n\t    }\n\n\t    if (disabledDepth < 0) {\n\t      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n\t    }\n\t  }\n\t}\n\n\tvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\n\tvar prefix;\n\tfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n\t  {\n\t    if (prefix === undefined) {\n\t      // Extract the VM specific prefix used by each line.\n\t      try {\n\t        throw Error();\n\t      } catch (x) {\n\t        var match = x.stack.trim().match(/\\n( *(at )?)/);\n\t        prefix = match && match[1] || '';\n\t      }\n\t    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n\t    return '\\n' + prefix + name;\n\t  }\n\t}\n\tvar reentry = false;\n\tvar componentFrameCache;\n\n\t{\n\t  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n\t  componentFrameCache = new PossiblyWeakMap();\n\t}\n\n\tfunction describeNativeComponentFrame(fn, construct) {\n\t  // If something asked for a stack inside a fake render, it should get ignored.\n\t  if ( !fn || reentry) {\n\t    return '';\n\t  }\n\n\t  {\n\t    var frame = componentFrameCache.get(fn);\n\n\t    if (frame !== undefined) {\n\t      return frame;\n\t    }\n\t  }\n\n\t  var control;\n\t  reentry = true;\n\t  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n\t  Error.prepareStackTrace = undefined;\n\t  var previousDispatcher;\n\n\t  {\n\t    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n\t    // for warnings.\n\n\t    ReactCurrentDispatcher.current = null;\n\t    disableLogs();\n\t  }\n\n\t  try {\n\t    // This should throw.\n\t    if (construct) {\n\t      // Something should be setting the props in the constructor.\n\t      var Fake = function () {\n\t        throw Error();\n\t      }; // $FlowFixMe\n\n\n\t      Object.defineProperty(Fake.prototype, 'props', {\n\t        set: function () {\n\t          // We use a throwing setter instead of frozen or non-writable props\n\t          // because that won't throw in a non-strict mode function.\n\t          throw Error();\n\t        }\n\t      });\n\n\t      if (typeof Reflect === 'object' && Reflect.construct) {\n\t        // We construct a different control for this case to include any extra\n\t        // frames added by the construct call.\n\t        try {\n\t          Reflect.construct(Fake, []);\n\t        } catch (x) {\n\t          control = x;\n\t        }\n\n\t        Reflect.construct(fn, [], Fake);\n\t      } else {\n\t        try {\n\t          Fake.call();\n\t        } catch (x) {\n\t          control = x;\n\t        }\n\n\t        fn.call(Fake.prototype);\n\t      }\n\t    } else {\n\t      try {\n\t        throw Error();\n\t      } catch (x) {\n\t        control = x;\n\t      }\n\n\t      fn();\n\t    }\n\t  } catch (sample) {\n\t    // This is inlined manually because closure doesn't do it for us.\n\t    if (sample && control && typeof sample.stack === 'string') {\n\t      // This extracts the first frame from the sample that isn't also in the control.\n\t      // Skipping one frame that we assume is the frame that calls the two.\n\t      var sampleLines = sample.stack.split('\\n');\n\t      var controlLines = control.stack.split('\\n');\n\t      var s = sampleLines.length - 1;\n\t      var c = controlLines.length - 1;\n\n\t      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n\t        // We expect at least one stack frame to be shared.\n\t        // Typically this will be the root most one. However, stack frames may be\n\t        // cut off due to maximum stack limits. In this case, one maybe cut off\n\t        // earlier than the other. We assume that the sample is longer or the same\n\t        // and there for cut off earlier. So we should find the root most frame in\n\t        // the sample somewhere in the control.\n\t        c--;\n\t      }\n\n\t      for (; s >= 1 && c >= 0; s--, c--) {\n\t        // Next we find the first one that isn't the same which should be the\n\t        // frame that called our sample function and the control.\n\t        if (sampleLines[s] !== controlLines[c]) {\n\t          // In V8, the first line is describing the message but other VMs don't.\n\t          // If we're about to return the first line, and the control is also on the same\n\t          // line, that's a pretty good indicator that our sample threw at same line as\n\t          // the control. I.e. before we entered the sample frame. So we ignore this result.\n\t          // This can happen if you passed a class to function component, or non-function.\n\t          if (s !== 1 || c !== 1) {\n\t            do {\n\t              s--;\n\t              c--; // We may still have similar intermediate frames from the construct call.\n\t              // The next one that isn't the same should be our match though.\n\n\t              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n\t                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n\t                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n\t                // but we have a user-provided \"displayName\"\n\t                // splice it in to make the stack more readable.\n\n\n\t                if (fn.displayName && _frame.includes('<anonymous>')) {\n\t                  _frame = _frame.replace('<anonymous>', fn.displayName);\n\t                }\n\n\t                {\n\t                  if (typeof fn === 'function') {\n\t                    componentFrameCache.set(fn, _frame);\n\t                  }\n\t                } // Return the line we found.\n\n\n\t                return _frame;\n\t              }\n\t            } while (s >= 1 && c >= 0);\n\t          }\n\n\t          break;\n\t        }\n\t      }\n\t    }\n\t  } finally {\n\t    reentry = false;\n\n\t    {\n\t      ReactCurrentDispatcher.current = previousDispatcher;\n\t      reenableLogs();\n\t    }\n\n\t    Error.prepareStackTrace = previousPrepareStackTrace;\n\t  } // Fallback to just using the name if we couldn't make it throw.\n\n\n\t  var name = fn ? fn.displayName || fn.name : '';\n\t  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n\t  {\n\t    if (typeof fn === 'function') {\n\t      componentFrameCache.set(fn, syntheticFrame);\n\t    }\n\t  }\n\n\t  return syntheticFrame;\n\t}\n\tfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n\t  {\n\t    return describeNativeComponentFrame(fn, false);\n\t  }\n\t}\n\n\tfunction shouldConstruct(Component) {\n\t  var prototype = Component.prototype;\n\t  return !!(prototype && prototype.isReactComponent);\n\t}\n\n\tfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n\t  if (type == null) {\n\t    return '';\n\t  }\n\n\t  if (typeof type === 'function') {\n\t    {\n\t      return describeNativeComponentFrame(type, shouldConstruct(type));\n\t    }\n\t  }\n\n\t  if (typeof type === 'string') {\n\t    return describeBuiltInComponentFrame(type);\n\t  }\n\n\t  switch (type) {\n\t    case REACT_SUSPENSE_TYPE:\n\t      return describeBuiltInComponentFrame('Suspense');\n\n\t    case REACT_SUSPENSE_LIST_TYPE:\n\t      return describeBuiltInComponentFrame('SuspenseList');\n\t  }\n\n\t  if (typeof type === 'object') {\n\t    switch (type.$$typeof) {\n\t      case REACT_FORWARD_REF_TYPE:\n\t        return describeFunctionComponentFrame(type.render);\n\n\t      case REACT_MEMO_TYPE:\n\t        // Memo may contain any component type so we recursively resolve it.\n\t        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n\t      case REACT_LAZY_TYPE:\n\t        {\n\t          var lazyComponent = type;\n\t          var payload = lazyComponent._payload;\n\t          var init = lazyComponent._init;\n\n\t          try {\n\t            // Lazy may contain any component type so we recursively resolve it.\n\t            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n\t          } catch (x) {}\n\t        }\n\t    }\n\t  }\n\n\t  return '';\n\t}\n\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\tvar loggedTypeFailures = {};\n\tvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\n\tfunction setCurrentlyValidatingElement(element) {\n\t  {\n\t    if (element) {\n\t      var owner = element._owner;\n\t      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n\t      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n\t    } else {\n\t      ReactDebugCurrentFrame.setExtraStackFrame(null);\n\t    }\n\t  }\n\t}\n\n\tfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n\t  {\n\t    // $FlowFixMe This is okay but Flow doesn't know it.\n\t    var has = Function.call.bind(hasOwnProperty);\n\n\t    for (var typeSpecName in typeSpecs) {\n\t      if (has(typeSpecs, typeSpecName)) {\n\t        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n\t        // fail the render phase where it didn't fail before. So we log it.\n\t        // After these have been cleaned up, we'll let them throw.\n\n\t        try {\n\t          // This is intentionally an invariant that gets caught. It's the same\n\t          // behavior as without this statement except with a better message.\n\t          if (typeof typeSpecs[typeSpecName] !== 'function') {\n\t            // eslint-disable-next-line react-internal/prod-error-codes\n\t            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n\t            err.name = 'Invariant Violation';\n\t            throw err;\n\t          }\n\n\t          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n\t        } catch (ex) {\n\t          error$1 = ex;\n\t        }\n\n\t        if (error$1 && !(error$1 instanceof Error)) {\n\t          setCurrentlyValidatingElement(element);\n\n\t          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n\t          setCurrentlyValidatingElement(null);\n\t        }\n\n\t        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n\t          // Only monitor this failure once because there tends to be a lot of the\n\t          // same error.\n\t          loggedTypeFailures[error$1.message] = true;\n\t          setCurrentlyValidatingElement(element);\n\n\t          error('Failed %s type: %s', location, error$1.message);\n\n\t          setCurrentlyValidatingElement(null);\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n\tvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\n\tfunction isArray(a) {\n\t  return isArrayImpl(a);\n\t}\n\n\t/*\n\t * The `'' + value` pattern (used in in perf-sensitive code) throws for Symbol\n\t * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n\t *\n\t * The functions in this module will throw an easier-to-understand,\n\t * easier-to-debug exception with a clear errors message message explaining the\n\t * problem. (Instead of a confusing exception thrown inside the implementation\n\t * of the `value` object).\n\t */\n\t// $FlowFixMe only called in DEV, so void return is not possible.\n\tfunction typeName(value) {\n\t  {\n\t    // toStringTag is needed for namespaced types like Temporal.Instant\n\t    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n\t    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object';\n\t    return type;\n\t  }\n\t} // $FlowFixMe only called in DEV, so void return is not possible.\n\n\n\tfunction willCoercionThrow(value) {\n\t  {\n\t    try {\n\t      testStringCoercion(value);\n\t      return false;\n\t    } catch (e) {\n\t      return true;\n\t    }\n\t  }\n\t}\n\n\tfunction testStringCoercion(value) {\n\t  // If you ended up here by following an exception call stack, here's what's\n\t  // happened: you supplied an object or symbol value to React (as a prop, key,\n\t  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n\t  // coerce it to a string using `'' + value`, an exception was thrown.\n\t  //\n\t  // The most common types that will cause this exception are `Symbol` instances\n\t  // and Temporal objects like `Temporal.Instant`. But any object that has a\n\t  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n\t  // exception. (Library authors do this to prevent users from using built-in\n\t  // numeric operators like `+` or comparison operators like `>=` because custom\n\t  // methods are needed to perform accurate arithmetic or comparison.)\n\t  //\n\t  // To fix the problem, coerce this object or symbol value to a string before\n\t  // passing it to React. The most reliable way is usually `String(value)`.\n\t  //\n\t  // To find which value is throwing, check the browser or debugger console.\n\t  // Before this exception was thrown, there should be `console.error` output\n\t  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n\t  // problem and how that type was used: key, atrribute, input value prop, etc.\n\t  // In most cases, this console output also shows the component and its\n\t  // ancestor components where the exception happened.\n\t  //\n\t  // eslint-disable-next-line react-internal/safe-string-coercion\n\t  return '' + value;\n\t}\n\tfunction checkKeyStringCoercion(value) {\n\t  {\n\t    if (willCoercionThrow(value)) {\n\t      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before before using it here.', typeName(value));\n\n\t      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n\t    }\n\t  }\n\t}\n\n\tvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\n\tvar RESERVED_PROPS = {\n\t  key: true,\n\t  ref: true,\n\t  __self: true,\n\t  __source: true\n\t};\n\tvar specialPropKeyWarningShown;\n\tvar specialPropRefWarningShown;\n\tvar didWarnAboutStringRefs;\n\n\t{\n\t  didWarnAboutStringRefs = {};\n\t}\n\n\tfunction hasValidRef(config) {\n\t  {\n\t    if (hasOwnProperty.call(config, 'ref')) {\n\t      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n\t      if (getter && getter.isReactWarning) {\n\t        return false;\n\t      }\n\t    }\n\t  }\n\n\t  return config.ref !== undefined;\n\t}\n\n\tfunction hasValidKey(config) {\n\t  {\n\t    if (hasOwnProperty.call(config, 'key')) {\n\t      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n\t      if (getter && getter.isReactWarning) {\n\t        return false;\n\t      }\n\t    }\n\t  }\n\n\t  return config.key !== undefined;\n\t}\n\n\tfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n\t  {\n\t    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n\t      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n\t      if (!didWarnAboutStringRefs[componentName]) {\n\t        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n\t        didWarnAboutStringRefs[componentName] = true;\n\t      }\n\t    }\n\t  }\n\t}\n\n\tfunction defineKeyPropWarningGetter(props, displayName) {\n\t  {\n\t    var warnAboutAccessingKey = function () {\n\t      if (!specialPropKeyWarningShown) {\n\t        specialPropKeyWarningShown = true;\n\n\t        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n\t      }\n\t    };\n\n\t    warnAboutAccessingKey.isReactWarning = true;\n\t    Object.defineProperty(props, 'key', {\n\t      get: warnAboutAccessingKey,\n\t      configurable: true\n\t    });\n\t  }\n\t}\n\n\tfunction defineRefPropWarningGetter(props, displayName) {\n\t  {\n\t    var warnAboutAccessingRef = function () {\n\t      if (!specialPropRefWarningShown) {\n\t        specialPropRefWarningShown = true;\n\n\t        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n\t      }\n\t    };\n\n\t    warnAboutAccessingRef.isReactWarning = true;\n\t    Object.defineProperty(props, 'ref', {\n\t      get: warnAboutAccessingRef,\n\t      configurable: true\n\t    });\n\t  }\n\t}\n\t/**\n\t * Factory method to create a new React element. This no longer adheres to\n\t * the class pattern, so do not use new to call it. Also, instanceof check\n\t * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n\t * if something is a React Element.\n\t *\n\t * @param {*} type\n\t * @param {*} props\n\t * @param {*} key\n\t * @param {string|object} ref\n\t * @param {*} owner\n\t * @param {*} self A *temporary* helper to detect places where `this` is\n\t * different from the `owner` when React.createElement is called, so that we\n\t * can warn. We want to get rid of owner and replace string `ref`s with arrow\n\t * functions, and as long as `this` and owner are the same, there will be no\n\t * change in behavior.\n\t * @param {*} source An annotation object (added by a transpiler or otherwise)\n\t * indicating filename, line number, and/or other information.\n\t * @internal\n\t */\n\n\n\tvar ReactElement = function (type, key, ref, self, source, owner, props) {\n\t  var element = {\n\t    // This tag allows us to uniquely identify this as a React Element\n\t    $$typeof: REACT_ELEMENT_TYPE,\n\t    // Built-in properties that belong on the element\n\t    type: type,\n\t    key: key,\n\t    ref: ref,\n\t    props: props,\n\t    // Record the component responsible for creating this element.\n\t    _owner: owner\n\t  };\n\n\t  {\n\t    // The validation flag is currently mutative. We put it on\n\t    // an external backing store so that we can freeze the whole object.\n\t    // This can be replaced with a WeakMap once they are implemented in\n\t    // commonly used development environments.\n\t    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n\t    // the validation flag non-enumerable (where possible, which should\n\t    // include every environment we run tests in), so the test framework\n\t    // ignores it.\n\n\t    Object.defineProperty(element._store, 'validated', {\n\t      configurable: false,\n\t      enumerable: false,\n\t      writable: true,\n\t      value: false\n\t    }); // self and source are DEV only properties.\n\n\t    Object.defineProperty(element, '_self', {\n\t      configurable: false,\n\t      enumerable: false,\n\t      writable: false,\n\t      value: self\n\t    }); // Two elements created in two different places should be considered\n\t    // equal for testing purposes and therefore we hide it from enumeration.\n\n\t    Object.defineProperty(element, '_source', {\n\t      configurable: false,\n\t      enumerable: false,\n\t      writable: false,\n\t      value: source\n\t    });\n\n\t    if (Object.freeze) {\n\t      Object.freeze(element.props);\n\t      Object.freeze(element);\n\t    }\n\t  }\n\n\t  return element;\n\t};\n\t/**\n\t * https://github.com/reactjs/rfcs/pull/107\n\t * @param {*} type\n\t * @param {object} props\n\t * @param {string} key\n\t */\n\n\tfunction jsxDEV(type, config, maybeKey, source, self) {\n\t  {\n\t    var propName; // Reserved names are extracted\n\n\t    var props = {};\n\t    var key = null;\n\t    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n\t    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n\t    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n\t    // but as an intermediary step, we will use jsxDEV for everything except\n\t    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n\t    // key is explicitly declared to be undefined or not.\n\n\t    if (maybeKey !== undefined) {\n\t      {\n\t        checkKeyStringCoercion(maybeKey);\n\t      }\n\n\t      key = '' + maybeKey;\n\t    }\n\n\t    if (hasValidKey(config)) {\n\t      {\n\t        checkKeyStringCoercion(config.key);\n\t      }\n\n\t      key = '' + config.key;\n\t    }\n\n\t    if (hasValidRef(config)) {\n\t      ref = config.ref;\n\t      warnIfStringRefCannotBeAutoConverted(config, self);\n\t    } // Remaining properties are added to a new props object\n\n\n\t    for (propName in config) {\n\t      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n\t        props[propName] = config[propName];\n\t      }\n\t    } // Resolve default props\n\n\n\t    if (type && type.defaultProps) {\n\t      var defaultProps = type.defaultProps;\n\n\t      for (propName in defaultProps) {\n\t        if (props[propName] === undefined) {\n\t          props[propName] = defaultProps[propName];\n\t        }\n\t      }\n\t    }\n\n\t    if (key || ref) {\n\t      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n\t      if (key) {\n\t        defineKeyPropWarningGetter(props, displayName);\n\t      }\n\n\t      if (ref) {\n\t        defineRefPropWarningGetter(props, displayName);\n\t      }\n\t    }\n\n\t    return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n\t  }\n\t}\n\n\tvar ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\n\tvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\n\tfunction setCurrentlyValidatingElement$1(element) {\n\t  {\n\t    if (element) {\n\t      var owner = element._owner;\n\t      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n\t      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n\t    } else {\n\t      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n\t    }\n\t  }\n\t}\n\n\tvar propTypesMisspellWarningShown;\n\n\t{\n\t  propTypesMisspellWarningShown = false;\n\t}\n\t/**\n\t * Verifies the object is a ReactElement.\n\t * See https://reactjs.org/docs/react-api.html#isvalidelement\n\t * @param {?object} object\n\t * @return {boolean} True if `object` is a ReactElement.\n\t * @final\n\t */\n\n\n\tfunction isValidElement(object) {\n\t  {\n\t    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n\t  }\n\t}\n\n\tfunction getDeclarationErrorAddendum() {\n\t  {\n\t    if (ReactCurrentOwner$1.current) {\n\t      var name = getComponentNameFromType(ReactCurrentOwner$1.current.type);\n\n\t      if (name) {\n\t        return '\\n\\nCheck the render method of `' + name + '`.';\n\t      }\n\t    }\n\n\t    return '';\n\t  }\n\t}\n\n\tfunction getSourceInfoErrorAddendum(source) {\n\t  {\n\t    if (source !== undefined) {\n\t      var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n\t      var lineNumber = source.lineNumber;\n\t      return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n\t    }\n\n\t    return '';\n\t  }\n\t}\n\t/**\n\t * Warn if there's no key explicitly set on dynamic arrays of children or\n\t * object keys are not valid. This allows us to keep track of children between\n\t * updates.\n\t */\n\n\n\tvar ownerHasKeyUseWarning = {};\n\n\tfunction getCurrentComponentErrorInfo(parentType) {\n\t  {\n\t    var info = getDeclarationErrorAddendum();\n\n\t    if (!info) {\n\t      var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n\t      if (parentName) {\n\t        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n\t      }\n\t    }\n\n\t    return info;\n\t  }\n\t}\n\t/**\n\t * Warn if the element doesn't have an explicit key assigned to it.\n\t * This element is in an array. The array could grow and shrink or be\n\t * reordered. All children that haven't already been validated are required to\n\t * have a \"key\" property assigned to it. Error statuses are cached so a warning\n\t * will only be shown once.\n\t *\n\t * @internal\n\t * @param {ReactElement} element Element that requires a key.\n\t * @param {*} parentType element's parent's type.\n\t */\n\n\n\tfunction validateExplicitKey(element, parentType) {\n\t  {\n\t    if (!element._store || element._store.validated || element.key != null) {\n\t      return;\n\t    }\n\n\t    element._store.validated = true;\n\t    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n\t    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n\t      return;\n\t    }\n\n\t    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n\t    // property, it may be the creator of the child that's responsible for\n\t    // assigning it a key.\n\n\t    var childOwner = '';\n\n\t    if (element && element._owner && element._owner !== ReactCurrentOwner$1.current) {\n\t      // Give the component that originally created this child.\n\t      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n\t    }\n\n\t    setCurrentlyValidatingElement$1(element);\n\n\t    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n\t    setCurrentlyValidatingElement$1(null);\n\t  }\n\t}\n\t/**\n\t * Ensure that every element either is passed in a static location, in an\n\t * array with an explicit keys property defined, or in an object literal\n\t * with valid key property.\n\t *\n\t * @internal\n\t * @param {ReactNode} node Statically passed child of any type.\n\t * @param {*} parentType node's parent's type.\n\t */\n\n\n\tfunction validateChildKeys(node, parentType) {\n\t  {\n\t    if (typeof node !== 'object') {\n\t      return;\n\t    }\n\n\t    if (isArray(node)) {\n\t      for (var i = 0; i < node.length; i++) {\n\t        var child = node[i];\n\n\t        if (isValidElement(child)) {\n\t          validateExplicitKey(child, parentType);\n\t        }\n\t      }\n\t    } else if (isValidElement(node)) {\n\t      // This element was passed in a valid location.\n\t      if (node._store) {\n\t        node._store.validated = true;\n\t      }\n\t    } else if (node) {\n\t      var iteratorFn = getIteratorFn(node);\n\n\t      if (typeof iteratorFn === 'function') {\n\t        // Entry iterators used to provide implicit keys,\n\t        // but now we print a separate warning for them later.\n\t        if (iteratorFn !== node.entries) {\n\t          var iterator = iteratorFn.call(node);\n\t          var step;\n\n\t          while (!(step = iterator.next()).done) {\n\t            if (isValidElement(step.value)) {\n\t              validateExplicitKey(step.value, parentType);\n\t            }\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\t/**\n\t * Given an element, validate that its props follow the propTypes definition,\n\t * provided by the type.\n\t *\n\t * @param {ReactElement} element\n\t */\n\n\n\tfunction validatePropTypes(element) {\n\t  {\n\t    var type = element.type;\n\n\t    if (type === null || type === undefined || typeof type === 'string') {\n\t      return;\n\t    }\n\n\t    var propTypes;\n\n\t    if (typeof type === 'function') {\n\t      propTypes = type.propTypes;\n\t    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n\t    // Inner props are checked in the reconciler.\n\t    type.$$typeof === REACT_MEMO_TYPE)) {\n\t      propTypes = type.propTypes;\n\t    } else {\n\t      return;\n\t    }\n\n\t    if (propTypes) {\n\t      // Intentionally inside to avoid triggering lazy initializers:\n\t      var name = getComponentNameFromType(type);\n\t      checkPropTypes(propTypes, element.props, 'prop', name, element);\n\t    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n\t      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n\t      var _name = getComponentNameFromType(type);\n\n\t      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n\t    }\n\n\t    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n\t      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n\t    }\n\t  }\n\t}\n\t/**\n\t * Given a fragment, validate that it can only be provided with fragment props\n\t * @param {ReactElement} fragment\n\t */\n\n\n\tfunction validateFragmentProps(fragment) {\n\t  {\n\t    var keys = Object.keys(fragment.props);\n\n\t    for (var i = 0; i < keys.length; i++) {\n\t      var key = keys[i];\n\n\t      if (key !== 'children' && key !== 'key') {\n\t        setCurrentlyValidatingElement$1(fragment);\n\n\t        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n\t        setCurrentlyValidatingElement$1(null);\n\t        break;\n\t      }\n\t    }\n\n\t    if (fragment.ref !== null) {\n\t      setCurrentlyValidatingElement$1(fragment);\n\n\t      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n\t      setCurrentlyValidatingElement$1(null);\n\t    }\n\t  }\n\t}\n\n\tvar didWarnAboutKeySpread = {};\n\tfunction jsxWithValidation(type, props, key, isStaticChildren, source, self) {\n\t  {\n\t    var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n\t    // succeed and there will likely be errors in render.\n\n\t    if (!validType) {\n\t      var info = '';\n\n\t      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n\t        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n\t      }\n\n\t      var sourceInfo = getSourceInfoErrorAddendum(source);\n\n\t      if (sourceInfo) {\n\t        info += sourceInfo;\n\t      } else {\n\t        info += getDeclarationErrorAddendum();\n\t      }\n\n\t      var typeString;\n\n\t      if (type === null) {\n\t        typeString = 'null';\n\t      } else if (isArray(type)) {\n\t        typeString = 'array';\n\t      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n\t        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n\t        info = ' Did you accidentally export a JSX literal instead of a component?';\n\t      } else {\n\t        typeString = typeof type;\n\t      }\n\n\t      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n\t    }\n\n\t    var element = jsxDEV(type, props, key, source, self); // The result can be nullish if a mock or a custom function is used.\n\t    // TODO: Drop this when these are no longer allowed as the type argument.\n\n\t    if (element == null) {\n\t      return element;\n\t    } // Skip key warning if the type isn't valid since our key validation logic\n\t    // doesn't expect a non-string/function type and can throw confusing errors.\n\t    // We don't want exception behavior to differ between dev and prod.\n\t    // (Rendering will throw with a helpful message and as soon as the type is\n\t    // fixed, the key warnings will appear.)\n\n\n\t    if (validType) {\n\t      var children = props.children;\n\n\t      if (children !== undefined) {\n\t        if (isStaticChildren) {\n\t          if (isArray(children)) {\n\t            for (var i = 0; i < children.length; i++) {\n\t              validateChildKeys(children[i], type);\n\t            }\n\n\t            if (Object.freeze) {\n\t              Object.freeze(children);\n\t            }\n\t          } else {\n\t            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n\t          }\n\t        } else {\n\t          validateChildKeys(children, type);\n\t        }\n\t      }\n\t    }\n\n\t    {\n\t      if (hasOwnProperty.call(props, 'key')) {\n\t        var componentName = getComponentNameFromType(type);\n\t        var keys = Object.keys(props).filter(function (k) {\n\t          return k !== 'key';\n\t        });\n\t        var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n\t        if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n\t          var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n\t          error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n\t          didWarnAboutKeySpread[componentName + beforeExample] = true;\n\t        }\n\t      }\n\t    }\n\n\t    if (type === REACT_FRAGMENT_TYPE) {\n\t      validateFragmentProps(element);\n\t    } else {\n\t      validatePropTypes(element);\n\t    }\n\n\t    return element;\n\t  }\n\t} // These two functions exist to still get child warnings in dev\n\t// even with the prod transform. This means that jsxDEV is purely\n\t// opt-in behavior for better messages but that we won't stop\n\t// giving you warnings if you use production apis.\n\n\tfunction jsxWithValidationStatic(type, props, key) {\n\t  {\n\t    return jsxWithValidation(type, props, key, true);\n\t  }\n\t}\n\tfunction jsxWithValidationDynamic(type, props, key) {\n\t  {\n\t    return jsxWithValidation(type, props, key, false);\n\t  }\n\t}\n\n\tvar jsx =  jsxWithValidationDynamic ; // we may want to special case jsxs internally to take advantage of static children.\n\t// for now we can ship identical prod functions\n\n\tvar jsxs =  jsxWithValidationStatic ;\n\n\treactJsxRuntime_development.Fragment = REACT_FRAGMENT_TYPE;\n\treactJsxRuntime_development.jsx = jsx;\n\treactJsxRuntime_development.jsxs = jsxs;\n\t  })();\n\t}\n\treturn reactJsxRuntime_development;\n}\n\nif (process.env.NODE_ENV === 'production') {\n  jsxRuntime.exports = requireReactJsxRuntime_production_min();\n} else {\n  jsxRuntime.exports = requireReactJsxRuntime_development();\n}\n\nvar jsxRuntimeExports = jsxRuntime.exports;\n\nfunction g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}var p,b={exports:{}};\n/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/p=b,function(){var e={}.hasOwnProperty;function t(){for(var e=\"\",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=i(e,n(o)));}return e}function n(n){if(\"string\"==typeof n||\"number\"==typeof n)return n;if(\"object\"!=typeof n)return \"\";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes(\"[native code]\"))return n.toString();var o=\"\";for(var a in n)e.call(n,a)&&n[a]&&(o=i(o,a));return o}function i(e,t){return t?e?e+\" \"+t:e+t:e}p.exports?(t.default=t,p.exports=t):window.classNames=t;}();var v=g(b.exports);function w({className:t,size:n=\"16\",variant:i=\"workspace\",...o}){const a=v(t,\"icon\",{[`icon-size-${n}`]:n});return jsxRuntimeExports.jsx(\"span\",{className:a,...o,children:jsxRuntimeExports.jsx(\"i\",{className:`icon-${i}`})})}function y({className:t=\"io-btn-icon\",variant:n=\"default\",icon:o=\"workspace\",size:a=\"16\",iconSize:s=\"16\",onClick:r,disabled:c,children:l,...d}){const u=v(t,{[`${t}-${n}`]:\"default\"!==n,[`${t}-size-${a}`]:\"24\"===a||\"32\"===a}),h=useCallback((e=>{if(!c)return r?r(e):void 0;e.preventDefault();}),[r,c]);return jsxRuntimeExports.jsx(\"button\",{type:\"button\",className:u,\"aria-label\":\"button\",onClick:h,disabled:c,...d,children:l??(o&&jsxRuntimeExports.jsx(w,{variant:o,size:s}))})}function k({className:n=\"io-alert\",variant:i=\"info\",text:o,close:a=!1,...s}){const r=v(n,`io-alert-${i}`);return jsxRuntimeExports.jsxs(\"div\",{className:r,...s,children:[jsxRuntimeExports.jsx(w,{variant:{info:\"info\",success:\"check\",warning:\"exclamation-mark\",critical:\"exclamation-mark\"}[i],className:\"icon-severity\"}),jsxRuntimeExports.jsx(\"p\",{className:\"io-text-smaller\",children:o}),a&&jsxRuntimeExports.jsx(y,{size:\"16\",iconSize:\"10\",icon:\"close\",className:\"io-btn-icon ms-auto\"})]})}function S({className:t=\"io-badge\",variant:n=\"default\",children:i,...o}){const a=v(t,{[`${t}-${n}`]:\"default\"!==n});return jsxRuntimeExports.jsx(\"div\",{className:a,...o,children:i})}function N({className:t=\"io-title\",tag:n=\"h2\",size:i=\"normal\",text:o=\"Title\",...a}){const s=n,r=v({[`${t}-semibold`]:\"small\"===i,[t]:\"normal\"===i,[`${t}-${i}`]:\"large\"===i});return jsxRuntimeExports.jsx(s,{className:r,...a,children:o})}function C({className:n=\"io-block\",title:i,titleSize:o=\"normal\",tag:a,hint:s,children:r,...c}){return jsxRuntimeExports.jsxs(\"div\",{className:n,...c,children:[i&&jsxRuntimeExports.jsx(N,{tag:a,text:i,size:o}),r,s&&jsxRuntimeExports.jsx(\"p\",{className:\"io-text-smaller\",children:s})]})}function B({className:n=\"io-btn\",variant:o=\"default\",size:a=\"normal\",icon:s,iconRight:r=!1,text:c,onClick:l,disabled:d,children:u,...h}){const m=v(n,{[`${n}-${o}`]:\"primary\"===o||\"outline\"===o||\"link\"===o,[`${n}-lg`]:\"large\"===a}),f=useCallback((e=>{if(!d)return l?l(e):void 0;e.preventDefault();}),[l,d]);return jsxRuntimeExports.jsxs(\"button\",{type:\"button\",className:m,\"aria-label\":\"button\",onClick:f,disabled:d,tabIndex:0,...h,children:[s&&!r&&jsxRuntimeExports.jsx(w,{variant:s,size:\"12\"}),u??c,s&&r&&jsxRuntimeExports.jsx(w,{variant:s,size:\"12\"})]})}const A=createContext({});function x({className:t=\"io-dropdown-content\",...n}){const{handleOpen:o}=useContext(A),s=useCallback((e=>{e.stopPropagation(),o&&o();}),[o]);return jsxRuntimeExports.jsx(\"div\",{className:t,role:\"button\",onClick:s,...n})}const $=createContext({});function I({className:n=\"io-list\",prepend:o,append:s,isSelected:r,onClick:c,disabled:l=!1,children:d,...u}){const{variant:h,selected:m,checkIcon:f,handleItemClick:g}=useContext($),p=r??m?.some((e=>e.children===d)),b=v(`${n}-item`,{selected:\"default\"!==h&&p,[`${n}-item-disabled`]:l}),y=useCallback(((e,t)=>{l?e.preventDefault():(g&&g(e,t),c&&c(e));}),[c,g,l]);return jsxRuntimeExports.jsxs(\"li\",{className:b,role:\"menuitem\",\"aria-roledescription\":\"menuitem\",tabIndex:0,onClick:e=>y(e,{children:d}),...u,children:[(f&&\"none\"!==f||o)&&jsxRuntimeExports.jsxs(\"div\",{className:`${n}-left-column`,children:[\"default\"!==h&&\"none\"!==f&&jsxRuntimeExports.jsx(w,{variant:f}),o]}),jsxRuntimeExports.jsx(\"span\",{className:`${n}-text`,children:d}),s&&jsxRuntimeExports.jsx(\"div\",{className:`${n}-right-column`,children:s})]})}function z({className:n=\"io-list-item io-list-item-title\",prepend:i,append:o,children:a,...s}){return jsxRuntimeExports.jsxs(\"li\",{className:n,...s,children:[i,jsxRuntimeExports.jsx(\"span\",{className:\"io-list-text\",children:a}),o]})}function P({className:n=\"io-list-item io-list-item-section\",prepend:i,append:o,children:a,...s}){return jsxRuntimeExports.jsxs(\"li\",{className:n,...s,children:[i,jsxRuntimeExports.jsx(\"span\",{className:\"io-list-text\",children:a}),o]})}function F({className:t=\"io-list\",variant:n=\"default\",checkIcon:o=\"none\",children:a,...c}){const[l,d]=useState([]),u=v(t,{[`${t}-selectable`]:\"default\"!==n}),h=useCallback(((e,t)=>{if(\"single\"===n)d([t]);else {const e=l.some((e=>e.children?.toString()===t.children?.toString())),n=l.filter((e=>e.children!==t.children));d(e?n:[...l,t]);}}),[l,n]),m=useMemo((()=>({variant:n,selected:l,checkIcon:o,handleItemClick:h})),[n,l,o,h]);return jsxRuntimeExports.jsx($.Provider,{value:m,children:jsxRuntimeExports.jsx(\"ul\",{className:u,...c,children:a})})}function T(e,t){useEffect((()=>{const n=n=>{e.current&&!e.current.contains(n.target)&&t();};return document.addEventListener(\"mousedown\",n),()=>{document.removeEventListener(\"mousedown\",n);}}),[e,t]);}function L({className:t=\"io-dropdown\",variant:n=\"default\",align:o=\"down\",disabled:a,children:c,...d}){const[u,h]=useState(!1),m=useRef(null),f=v(t,{[`${t}-open`]:u,[`${t}-${n}`]:\"default\"!==n}),g=useCallback((()=>{h(!u);}),[u]);T(m,useCallback((()=>{h(!1);}),[]));const p=useMemo((()=>({isOpen:u,handleOpen:g,variant:n,align:o,disabled:a})),[u,g,n,o,a]);return jsxRuntimeExports.jsx(A.Provider,{value:p,children:jsxRuntimeExports.jsx(\"div\",{className:f,ref:m,...d,children:c})})}function _({className:t=\"io-btn-group\",variant:n=\"default\",align:i=\"left\",children:o,...a}){const s=v(t,{[`${t}-sticky`]:\"sticky\"===n,[`${t}-append`]:\"append\"===n,[`${t}-fullwidth`]:\"fullwidth\"===n,[`${t}-right`]:\"right\"===i});return jsxRuntimeExports.jsx(\"div\",{className:s,...a,children:o})}function D({className:t=\"io-header\",draggable:n=!1,children:i,...o}){const a=v(t,{draggable:n});return jsxRuntimeExports.jsx(\"header\",{className:a,style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",gap:\"var(--spacing-8)\"},...o,children:i})}function E({className:t=\"io-dialog-header\",children:n,...i}){return jsxRuntimeExports.jsx(D,{className:t,...i,children:n})}function H({className:t=\"io-dialog-body\",children:n,...i}){return jsxRuntimeExports.jsx(\"div\",{className:t,...i,children:n})}function M({className:t=\"io-footer\",children:n,...i}){return jsxRuntimeExports.jsx(\"footer\",{className:t,...i,children:n})}function O({className:t=\"io-dialog-footer\",...n}){return jsxRuntimeExports.jsx(M,{className:t,...n})}function V({className:t=\"io-image-icon\",size:n=\"16\",variant:i=\"default\",src:o,alt:a,...s}){const r=v(t,{[`${t}-${n}`]:n,[`${t}-${i}`]:\"grayscale\"===i});return jsxRuntimeExports.jsx(\"img\",{className:r,style:{width:`${n}px`,filter:\"grayscale\"===i?\"grayscale(100%)\":\"none\"},src:o,alt:a,...s})}function R({className:n=\"io-loader\",size:i=\"large\",variant:o=\"default\",align:a=\"up\",text:s,...r}){const c=v(n,{[`${n}-${o}`]:\"default\"!==o,[`${n}-md`]:\"normal\"===i,[`${n}-sm`]:\"small\"===i,[`direction-${a}`]:a});return jsxRuntimeExports.jsxs(\"div\",{className:c,...r,children:[jsxRuntimeExports.jsx(\"div\",{className:`${n}-icon`}),s&&jsxRuntimeExports.jsx(\"div\",{className:`${n}-text`,children:s})]})}function J({className:t=\"io-panel-header\",children:n,...i}){return jsxRuntimeExports.jsx(D,{className:t,...i,children:n})}F.Item=I,F.ItemTitle=z,F.ItemSection=P,L.Button=function({icon:t=\"chevron-down\",...n}){const{handleOpen:o,disabled:s}=useContext(A),r=useCallback((e=>{e.stopPropagation(),o&&o();}),[o]);return jsxRuntimeExports.jsx(B,{icon:t,iconRight:!0,onClick:r,disabled:s,...n})},L.ButtonIcon=function({size:t=\"32\",...n}){const{handleOpen:o,disabled:s}=useContext(A),r=useCallback((()=>{o&&o();}),[o]);return jsxRuntimeExports.jsx(y,{size:t,onClick:r,disabled:s,...n})},L.Content=x,L.List=F,L.Item=I,L.ItemTitle=z,L.ItemSection=P,_.Button=B,_.ButtonIcon=y,_.Dropdown=L,D.Title=N,D.ButtonGroup=_,D.Button=B,D.ButtonIcon=y,D.Dropdown=L,E.Title=N,E.ButtonGroup=_,E.Button=B,E.ButtonIcon=y,E.Dropdown=L,H.Content=function({className:t=\"io-dialog-content\",children:n,...i}){return jsxRuntimeExports.jsx(\"div\",{className:t,...i,children:n})},M.ButtonGroup=_,M.Button=B,M.ButtonIcon=y,M.Dropdown=L,O.ButtonGroup=_,O.Button=B,O.ButtonIcon=y,O.Dropdown=L,J.Title=N,J.ButtonGroup=_,J.Button=B,J.ButtonIcon=y,J.Dropdown=L;const U=forwardRef((({className:t=\"io-panel-body\",children:n,...i},o)=>jsxRuntimeExports.jsx(\"div\",{className:t,ref:o,...i,children:n})));function q({className:t=\"io-panel-footer\",...n}){return jsxRuntimeExports.jsx(M,{className:t,...n})}function G({className:t=\"io-panel\",children:n,...i}){return jsxRuntimeExports.jsx(\"div\",{className:t,...i,children:n})}function K({className:t=\"io-progress\",variant:n=\"active\",value:i=0,...o}){return jsxRuntimeExports.jsx(\"div\",{className:`${t} ${n}`,...o,children:jsxRuntimeExports.jsx(\"div\",{className:`${t}-bar`,style:{width:`${i<0?0:i>100?100:i}%`}})})}function W({text:t=\"Label\",...n}){return jsxRuntimeExports.jsx(\"label\",{...n,children:t})}U.displayName=\"PanelBody\",q.ButtonGroup=_,q.Button=B,q.ButtonIcon=y,q.Dropdown=L,G.Header=J,G.Body=U,G.Footer=q;const X=forwardRef((function({id:n=\"input\",className:o=\"io\",type:a=\"text\",name:s=\"input\",align:r=\"up\",label:c,iconPrepend:l,iconPrependOnClick:d,iconAppend:u,iconAppendOnClick:h,placeholder:m,disabled:f,readOnly:g,...p},b){const y=v(`${o}-control-input`,{[`${o}-control-leading-icon`]:l,[`${o}-control-trailing-icon`]:u,[`${o}-control-disabled`]:f,[`${o}-control-readonly`]:g,[`direction-${r}`]:r}),k=useCallback((e=>{f?e.preventDefault():d&&d(e);}),[d,f]),S=useCallback((e=>{f?e.preventDefault():h&&h(e);}),[h,f]);return jsxRuntimeExports.jsxs(\"div\",{className:y,children:[c&&jsxRuntimeExports.jsx(W,{htmlFor:n,text:c}),l&&jsxRuntimeExports.jsx(w,{variant:l,onClick:e=>k(e)}),jsxRuntimeExports.jsx(\"input\",{id:n,className:`${o}-input`,ref:b,type:a,name:s,tabIndex:0,placeholder:m??(()=>{switch(a){case\"email\":return \"Enter your email here...\";case\"number\":return \"Enter number here...\";case\"password\":return \"Enter your password here...\";case\"tel\":return \"Enter your phone number here...\";case\"file\":return \"Select a file...\";default:return \"Enter text here...\"}})(),disabled:f,readOnly:g,...p}),u&&jsxRuntimeExports.jsx(w,{variant:u,onClick:e=>S(e)})]})})),Z=forwardRef((function({id:n=\"textarea\",className:i=\"io\",name:o=\"textarea\",align:a=\"up\",label:s,rows:r=4,placeholder:c=\"Enter text here...\",disabled:l,readOnly:d,...u},h){const m=v(`${i}-control-textarea`,{[`${i}-control-disabled`]:l,[`${i}-control-readonly`]:d,[`direction-${a}`]:a});return jsxRuntimeExports.jsxs(\"div\",{className:m,children:[s&&jsxRuntimeExports.jsx(W,{htmlFor:n,text:s}),jsxRuntimeExports.jsx(\"textarea\",{id:n,className:`${i}-textarea`,ref:h,name:o,tabIndex:0,placeholder:c,disabled:l,readOnly:d,rows:r,...u})]})})),ee=forwardRef((function({id:n=\"checkbox\",className:i=\"io\",name:o=\"checkbox\",align:a=\"left\",label:s,checked:r,disabled:c,...l},d){const u=v(`${i}-control-checkbox`,{[`${i}-control-checked`]:r,[`${i}-control-disabled`]:c,[`direction-${a}`]:a});return jsxRuntimeExports.jsxs(\"div\",{className:u,children:[jsxRuntimeExports.jsx(\"input\",{type:\"checkbox\",id:n,className:`${i}-checkbox`,ref:d,name:o,tabIndex:0,checked:r,disabled:c,...l}),s&&jsxRuntimeExports.jsx(W,{htmlFor:n,text:s})]})}));forwardRef((function({id:n=\"radio\",className:i=\"io\",name:o=\"radio\",align:a=\"left\",label:s,checked:r,disabled:c,...l},d){const u=v(`${i}-control-radio`,{[`${i}-control-checked`]:r,[`${i}-control-disabled`]:c,[`direction-${a}`]:a});return jsxRuntimeExports.jsxs(\"div\",{className:u,children:[jsxRuntimeExports.jsx(\"input\",{type:\"radio\",id:n,className:`${i}-radio`,ref:d,name:o,tabIndex:0,checked:r,disabled:c,...l}),s&&jsxRuntimeExports.jsx(W,{htmlFor:n,text:s})]})}));const ne=forwardRef((function({id:n=\"toggle\",className:i=\"io\",name:o=\"toggle\",align:a=\"left\",label:s=\"Toggle\",checked:r,disabled:c,...l},d){const u=v(`${i}-control-toggle`,{[`${i}-control-checked`]:r,[`${i}-control-disabled`]:c,[`direction-${a}`]:a});return jsxRuntimeExports.jsx(\"div\",{className:u,children:jsxRuntimeExports.jsxs(\"label\",{className:`${i}-toggle`,tabIndex:0,children:[jsxRuntimeExports.jsx(\"input\",{type:\"checkbox\",id:n,className:`${i}-checkbox`,ref:d,name:o,checked:r,disabled:c,...l}),jsxRuntimeExports.jsx(\"span\",{className:\"slider\"}),s]})})}));function re(e,t=500){const[n,i]=useState(e);return useEffect((()=>{const n=setTimeout((()=>{i(e);}),t);return ()=>clearTimeout(n)}),[e,t]),n}createContext({theme:\"dark\"});function me(e,t,n){return Math.min(Math.max(e,n),t)}class fe extends Error{constructor(e){super(`Failed to parse color: \"${e}\"`);}}var ge=fe;function pe(e){if(\"string\"!=typeof e)throw new ge(e);if(\"transparent\"===e.trim().toLowerCase())return [0,0,0,0];let t=e.trim();t=Ce.test(e)?function(e){const t=e.toLowerCase().trim(),n=ve[function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return (t>>>0)%2341}(t)];if(!n)throw new ge(e);return `#${n}`}(e):e;const n=ye.exec(t);if(n){const e=Array.from(n).slice(1);return [...e.slice(0,3).map((e=>parseInt(we(e,2),16))),parseInt(we(e[3]||\"f\",2),16)/255]}const i=ke.exec(t);if(i){const e=Array.from(i).slice(1);return [...e.slice(0,3).map((e=>parseInt(e,16))),parseInt(e[3]||\"ff\",16)/255]}const o=Se.exec(t);if(o){const e=Array.from(o).slice(1);return [...e.slice(0,3).map((e=>parseInt(e,10))),parseFloat(e[3]||\"1\")]}const a=Ne.exec(t);if(a){const[t,n,i,o]=Array.from(a).slice(1).map(parseFloat);if(me(0,100,n)!==n)throw new ge(e);if(me(0,100,i)!==i)throw new ge(e);return [...Ae(t,n,i),Number.isNaN(o)?1:o]}throw new ge(e)}const be=e=>parseInt(e.replace(/_/g,\"\"),36),ve=\"1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm\".split(\" \").reduce(((e,t)=>{const n=be(t.substring(0,3)),i=be(t.substring(3)).toString(16);let o=\"\";for(let e=0;e<6-i.length;e++)o+=\"0\";return e[n]=`${o}${i}`,e}),{});const we=(e,t)=>Array.from(Array(t)).map((()=>e)).join(\"\"),ye=new RegExp(`^#${we(\"([a-f0-9])\",3)}([a-f0-9])?$`,\"i\"),ke=new RegExp(`^#${we(\"([a-f0-9]{2})\",3)}([a-f0-9]{2})?$`,\"i\"),Se=new RegExp(`^rgba?\\\\(\\\\s*(\\\\d+)\\\\s*${we(\",\\\\s*(\\\\d+)\\\\s*\",2)}(?:,\\\\s*([\\\\d.]+))?\\\\s*\\\\)$`,\"i\"),Ne=/^hsla?\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)%\\s*,\\s*([\\d.]+)%(?:\\s*,\\s*([\\d.]+))?\\s*\\)$/i,Ce=/^[a-z]+$/i,Be=e=>Math.round(255*e),Ae=(e,t,n)=>{let i=n/100;if(0===t)return [i,i,i].map(Be);const o=(e%360+360)%360/60,a=(1-Math.abs(2*i-1))*(t/100),s=a*(1-Math.abs(o%2-1));let r=0,c=0,l=0;o>=0&&o<1?(r=a,c=s):o>=1&&o<2?(r=s,c=a):o>=2&&o<3?(c=a,l=s):o>=3&&o<4?(c=s,l=a):o>=4&&o<5?(r=s,l=a):o>=5&&o<6&&(r=a,l=s);const d=i-a/2;return [r+d,c+d,l+d].map(Be)};function xe(e){return function(e){if(\"transparent\"===e)return 0;function t(e){const t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}const[n,i,o]=pe(e);return .2126*t(n)+.7152*t(i)+.0722*t(o)}(e)>.179}function $e({className:t=\"io-channel-badge\",channel:n,...i}){return jsxRuntimeExports.jsx(\"div\",{className:t,style:{color:(o=n.color,xe(o)?\"#000\":\"#fff\"),backgroundColor:n.color},...i,children:jsxRuntimeExports.jsx(\"span\",{className:`${t}-label`,children:n.label})});var o;}const Ie=createContext({});function ze({channel:o,isSelected:s,onChannelSelect:r,...c}){const{variant:l,selectedChannels:d}=useContext(Ie),u=s||o.isSelected||d?.includes(o),h=useCallback((e=>{r&&r(e);}),[r]);return jsxRuntimeExports.jsx(I,{prepend:jsxRuntimeExports.jsx($e,{channel:o}),append:jsxRuntimeExports.jsx(\"single\"===l?()=>u&&jsxRuntimeExports.jsx(w,{variant:\"check\"})||null:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(\"div\",{onClick:e=>e.stopPropagation(),children:jsxRuntimeExports.jsx(ne,{label:\"Publish\",checked:o.write,onChange:()=>h({...o,isSelected:!(!o.read&&(o.write||o.read)),write:!o.write})})}),jsxRuntimeExports.jsx(\"div\",{onClick:e=>e.stopPropagation(),children:jsxRuntimeExports.jsx(ne,{label:\"Subscribe\",checked:o.read,onChange:()=>h({...o,isSelected:!(!o.write&&(o.write||o.read)),read:!o.read})})})]}),{}),isSelected:u,onClick:()=>{h(\"single\"===l?{...o,isSelected:!u}:{...o,isSelected:!u,read:!u,write:!u});},...c,children:o.name},o.name)}const Pe=forwardRef((({className:n=\"io-list-channels\",variant:i=\"single\",variantToggle:o=!1,channels:a=[],onVariantChange:s,onChannelSelect:c,...l},d)=>{const u=v(n,{\"io-bi-direction\":\"directionalSingle\"===i}),h=a.filter((e=>e.isSelected)),m=useMemo((()=>({variant:i,selectedChannels:h,onVariantChange:s,onChannelSelect:c})),[i,h,s,c]);return jsxRuntimeExports.jsx(Ie.Provider,{value:m,children:jsxRuntimeExports.jsx(\"div\",{className:u,ref:d,children:jsxRuntimeExports.jsxs(F,{variant:\"single\",...l,children:[jsxRuntimeExports.jsx(F.ItemTitle,{append:o&&jsxRuntimeExports.jsx(ne,{label:\"Directional\",align:\"right\",onChange:e=>s&&s(e.target.checked),checked:\"directionalSingle\"===i}),children:\"single\"===i?\"Select Channel\":\"Select Directional Channel\"}),a?.map((t=>jsxRuntimeExports.jsx(ze,{channel:t,onChannelSelect:c},t.name)))]})})})}));Pe.displayName=\"ChannelSelector\";createContext({config:{message:\"\"},theme:\"dark\",setResult:()=>{}});function Je({title:n=\"Downloads\"}){const{ItemSearch:i,HeaderButtons:o}=mt();return jsxRuntimeExports.jsxs(\"div\",{className:\"io-dm-header\",children:[jsxRuntimeExports.jsxs(D,{children:[jsxRuntimeExports.jsx(D.Title,{tag:\"h1\",text:n,size:\"large\"}),jsxRuntimeExports.jsx(o,{})]}),jsxRuntimeExports.jsx(i,{})]})}const qe=createContext({configuration:{},items:[],removeItem:()=>{},pauseResumeItem:()=>{},cancelItem:()=>{},clearItems:()=>{},showItemInFolder:()=>{},isSettingsVisible:!1,showSettings:()=>{},hideSettings:()=>{},isSearchVisible:!1,showSearch:()=>{},hideSearch:()=>{},searchQuery:\"\",setSearch:()=>{},itemsCount:0,setCount:()=>{},setDownloadLocation:()=>{},setDownloadLocationWithDialog:()=>{},sortItems:()=>[],downloadLocationList:[],isDownloadLocationDialogVisible:!1}),Ge=()=>useContext(qe);function Qe({className:n=\"io-header-search\",icon:i=\"search\",placeholder:o=\"Search\",...a}){const s=useRef(null),{isSearchVisible:r,searchQuery:d,setSearch:u,itemsCount:h}=Ge();return useEffect((()=>{r?s.current?.focus():(s.current?.blur(),u(\"\"));}),[r,u]),r?jsxRuntimeExports.jsxs(\"div\",{className:n,children:[jsxRuntimeExports.jsx(X,{ref:s,value:d,iconPrepend:i,placeholder:o,onChange:e=>u(e.target.value),...a}),r&&d.length>0&&jsxRuntimeExports.jsx(\"p\",{className:`${n}-count`,children:`${h} results`})]}):null}function Ye({className:n,...i}){const{SearchButton:o,SettingsButton:a,MoreButton:s}=mt();return jsxRuntimeExports.jsxs(_,{className:n,align:\"right\",...i,children:[jsxRuntimeExports.jsx(o,{}),jsxRuntimeExports.jsx(a,{}),jsxRuntimeExports.jsx(s,{})]})}function Ke({...t}){const{isSearchVisible:n,showSearch:i,hideSearch:o,items:a}=Ge();return jsxRuntimeExports.jsx(y,{icon:n?\"search-filled\":\"search\",variant:\"circle\",size:\"32\",onClick:n?o:i,disabled:0===a.length,...t})}function We({icon:t=\"cog\",...n}){const{showSettings:i}=Ge();return jsxRuntimeExports.jsx(y,{icon:t,variant:\"circle\",size:\"32\",onClick:i,...n})}function Xe({icon:n=\"ellipsis\",...i}){const{items:o,clearItems:a}=Ge(),s=0===o.length;return jsxRuntimeExports.jsxs(L,{variant:\"light\",...i,children:[jsxRuntimeExports.jsx(L.ButtonIcon,{icon:n,variant:\"circle\",size:\"32\"}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{children:jsxRuntimeExports.jsx(L.Item,{disabled:s,onClick:e=>(e=>{s?e.stopPropagation():a();})(e),children:\"Clear All\"})})})]})}function Ze(e,t=!1,n=!1,i=!1){const o=e.getDate(),a=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"][e.getMonth()],s=e.getFullYear(),r=e.getHours(),c=e.getMinutes();let l=\"\";return l=c<10?`0${c}`:`${c}`,t?\"Today\"===t?n?\"Today\":`Today at ${r}:${l}`:\"Yesterday\"===t?n?\"Yesterday\":`Yesterday at ${r}:${l}`:`${r}:${l}`:i?n?`${a} ${o}`:`${a} ${o} at ${r}:${l}`:n?`${a} ${o}, ${s}`:`${a} ${o}, ${s} at ${r}:${l}`}function et(e,t={showTime:!0}){const n=new Date(1e3*e),i=new Date,o=Math.round((i-n)/1e3),a=Math.round(o/60),s=i.toDateString()===n.toDateString(),r=new Date(i.setDate(i.getDate()-1)).toDateString()===n.toDateString(),c=i.getFullYear()===n.getFullYear();return t.showTime?o<5?\"Just Now\":o<60?`${o} seconds ago`:o<90?\"about a minute ago\":a<60?`${a} minutes ago`:s?Ze(n,\"Today\",!1,!0):r?Ze(n,\"Yesterday\",!1,!0):c?Ze(n,!1,!1,!0):Ze(n):s?\"Today\":r?\"Yesterday\":c?Ze(n,!1,!0,!0):Ze(n,!1,!0)}function tt({className:t=\"io-dm-body\",...n}){const{DownloadListEmpty:i,ItemGroup:o,Item:a}=mt(),{items:s,searchQuery:l,setCount:d,sortItems:u}=Ge(),h=u(s),m=re(l),f=useMemo((()=>h.filter((e=>e.displayInfo.filename.toLowerCase().includes(m.toLowerCase())||e.displayInfo.url.toLowerCase().includes(m.toLowerCase())))),[h,m]),g=useMemo((()=>f.map((e=>({...e,displayInfo:{...e.displayInfo,startTime:et(e.displayInfo.startTime,{showTime:!1})}})))),[f]),p=useMemo((()=>Object.values(g.reduce(((e={},t)=>(e[t.displayInfo.startTime]=e[t.displayInfo.startTime]?.concat([])??[],e[t.displayInfo.startTime].push(t),e)),{}))),[g]);return useEffect((()=>{d(f.length);}),[f,d]),jsxRuntimeExports.jsx(\"div\",{className:t,...n,children:p&&0!==p.length?p.map((t=>jsxRuntimeExports.jsx(o,{title:String(t[0].displayInfo.startTime)??null,children:t.map((t=>jsxRuntimeExports.jsx(a,{item:t},t.id)))},t[0].id??\"\"))):jsxRuntimeExports.jsx(i,{})})}function nt({className:n=\"io-dm-no-items\",icon:i=\"download\",text:o=\"No downloads to display.\",...a}){return jsxRuntimeExports.jsxs(\"div\",{className:n,...a,children:[jsxRuntimeExports.jsx(w,{variant:i}),jsxRuntimeExports.jsx(\"p\",{children:o})]})}function it({className:n=\"io-dm-item-group\",title:i,children:o,...a}){return jsxRuntimeExports.jsxs(\"div\",{className:n,...a,children:[i&&jsxRuntimeExports.jsx(\"p\",{children:i}),o]})}function ot({className:i=\"io-dm-item\",item:o,...a}){const{ItemHeader:s,ItemBody:r,ItemFooter:c}=mt(),{state:l,url:d,filename:u,receivedBytes:h,totalBytes:m,speed:f,timeRemaining:g}=o.displayInfo;if(!o)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const p=v(i,{[l]:o.displayInfo.state});return jsxRuntimeExports.jsxs(\"div\",{className:p,...a,children:[jsxRuntimeExports.jsx(s,{itemID:o.id,filename:u,state:l}),jsxRuntimeExports.jsx(r,{state:l,url:d,bytesReceived:h,bytesTotal:m,speed:f,timeRemaining:g}),jsxRuntimeExports.jsx(c,{itemID:o.id,state:l})]})}function at({bytesReceived:t=0,bytesTotal:n=0,...o}){const a=useCallback((()=>t&&n?Math.round(t/n*100):0),[t,n]);return jsxRuntimeExports.jsx(K,{value:a(),...o})}function st({className:n=\"io-dm-item-header\",itemID:o,filename:a,state:s,cancel:r,remove:c,...l}){const{cancelItem:d,removeItem:u}=Ge(),h=useCallback((e=>{r?r(e):d(e);}),[r,d]),m=useCallback((e=>{c?c(e):u(e);}),[c,u]);return jsxRuntimeExports.jsxs(\"div\",{className:n,...l,children:[jsxRuntimeExports.jsx(N,{text:a,style:{textDecoration:\"interrupted\"===s||\"cancelled\"===s?\"line-through\":\"none\"}}),jsxRuntimeExports.jsx(y,{icon:\"close\",onClick:()=>{\"progressing\"===s||\"paused\"===s?h(o):m(o);}})]})}function rt({className:n=\"io-dm-item-body\",state:i,url:o,bytesReceived:a=0,bytesTotal:s=0,speed:r=0,timeRemaining:c=0,...l}){const d=e=>{const t=[\"Bytes\",\"KB\",\"MB\",\"GB\",\"TB\"];if(0===e)return \"0\";const n=Math.floor(Math.log(e)/Math.log(1024));return 0===n?`${e}${t[n]}`:`${(e/1024**n).toFixed(1)}${t[n]}`};return jsxRuntimeExports.jsxs(\"div\",{className:n,...l,children:[jsxRuntimeExports.jsx(\"p\",{className:\"io-text-small\",children:o}),(h=i,\"cancelled\"===h||\"interrupted\"===h||\"completed\"===h?null:jsxRuntimeExports.jsx(at,{variant:\"paused\"===h?\"paused\":\"active\",bytesReceived:a,bytesTotal:s})),jsxRuntimeExports.jsx(\"p\",{className:\"io-text-default-lh16\",children:\"completed\"===i?`${d(a??0)} - Done`:\"cancelled\"===i||\"interrupted\"===i?`${d(a??0)}/${d(s??0)} - Failed`:`${d(a??0)}/${d(s??0)} (${u=r,(u?`${(u/1e6/8).toFixed(2)}MB/s`:0)??0}) - ${(e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60);let i=\"\";return t>0&&(i+=`${t} hour${t>1?\"s\":\"\"}, `),n>0&&(i+=`${n} min${n>1?\"s\":\"\"}, `),((e=Math.floor(e%60))>0||\"\"===i)&&(i+=`${e} sec${1!==e?\"s\":\"\"}`),`${i.trim()} left`})(c)??0}`})]});var u,h;}function ct({className:o=\"io-dm-item-footer\",itemID:a,state:s,pauseResume:r,showInFolder:c,cancel:l,...d}){const{pauseResumeItem:u,showItemInFolder:h,cancelItem:m}=Ge(),f=useCallback((e=>{r?r(e):u(e);}),[r,u]),g=useCallback((e=>{c?c(e):h(e);}),[c,h]),p=useCallback((e=>{l?l(e):m(e);}),[l,m]);return jsxRuntimeExports.jsx(\"div\",{className:o,...d,children:(()=>{switch(s){case\"progressing\":return jsxRuntimeExports.jsxs(_,{align:\"right\",children:[jsxRuntimeExports.jsx(_.Button,{variant:\"primary\",text:\"Pause\",onClick:()=>f(a)}),jsxRuntimeExports.jsx(_.Button,{variant:\"link\",text:\"Cancel\",onClick:()=>p(a)})]});case\"paused\":return jsxRuntimeExports.jsx(_,{align:\"right\",children:jsxRuntimeExports.jsx(_.Button,{variant:\"primary\",text:\"Resume\",onClick:()=>f(a)})});case\"completed\":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(k,{variant:\"success\",text:\"Complete\"}),jsxRuntimeExports.jsx(_,{align:\"right\",children:jsxRuntimeExports.jsx(_.Button,{variant:\"primary\",text:\"Show in Folder\",onClick:()=>g(a)})})]});case\"cancelled\":return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(k,{variant:\"warning\",text:\"Cancelled\"})});case\"interrupted\":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(k,{variant:\"critical\",text:\"Failed\"}),jsxRuntimeExports.jsx(_,{align:\"right\",children:jsxRuntimeExports.jsx(_.Button,{variant:\"primary\",text:\"Retry\",onClick:()=>f(a)})})]});default:return null}})()})}function lt({className:n=\"io-panel io-settings\",title:i=\"Settings\",...o}){const{configuration:{downloadFolder:a},hideSettings:s,setDownloadLocation:r,setDownloadLocationWithDialog:c,isDownloadLocationDialogVisible:l,downloadLocationList:d}=Ge();return jsxRuntimeExports.jsxs(G,{className:n,...o,children:[jsxRuntimeExports.jsxs(G.Header,{children:[jsxRuntimeExports.jsx(G.Header.Title,{size:\"large\",text:i,tag:\"h1\"}),jsxRuntimeExports.jsx(G.Header.ButtonGroup,{children:jsxRuntimeExports.jsx(y,{variant:\"circle\",icon:\"close\",size:\"32\",onClick:()=>{s();},disabled:l})})]}),jsxRuntimeExports.jsx(G.Body,{children:jsxRuntimeExports.jsxs(_,{children:[jsxRuntimeExports.jsxs(L,{variant:\"outline\",disabled:l,children:[jsxRuntimeExports.jsx(L.Button,{children:jsxRuntimeExports.jsx(\"span\",{className:\"io-settings-download-location\",children:a??d[0]})}),d.length>1&&jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{children:d.map(((t,n)=>!t||0===n||n>3?null:jsxRuntimeExports.jsx(L.Item,{onClick:()=>{r(t);},children:t},t)))})})]}),jsxRuntimeExports.jsx(B,{className:\"io-btn io-settings-download-location-btn\",text:\"Browse\",onClick:()=>{c();},disabled:l})]})})]})}const dt={Header:Je,ItemSearch:Qe,HeaderButtons:Ye,SearchButton:Ke,SettingsButton:We,MoreButton:Xe,Body:tt,DownloadListEmpty:nt,ItemGroup:it,Item:ot,ItemProgress:at,ItemHeader:st,ItemBody:rt,ItemFooter:ct,Settings:lt},ut=createContext(dt),ht=memo((({children:t,components:n})=>{const i=useMemo((()=>({...dt,...n})),[n]);return jsxRuntimeExports.jsx(ut.Provider,{value:i,children:t})}));ht.displayName=\"ComponentsStore\";const mt=()=>useContext(ut);function pt(e){if(e&&e.errorHandling&&\"function\"!=typeof e.errorHandling&&\"log\"!==e.errorHandling&&\"silent\"!==e.errorHandling&&\"throw\"!==e.errorHandling)throw new Error('Invalid options passed to createRegistry. Prop errorHandling should be [\"log\" | \"silent\" | \"throw\" | (err) => void], but '+typeof e.errorHandling+\" was passed\");var t=e&&\"function\"==typeof e.errorHandling&&e.errorHandling,n={};function i(n,i){var o=n instanceof Error?n:new Error(n);if(t)t(o);else {var a='[ERROR] callback-registry: User callback for key \"'+i+'\" failed: '+o.stack;if(e)switch(e.errorHandling){case\"log\":return console.error(a);case\"silent\":return;case\"throw\":throw new Error(a)}console.error(a);}}return {add:function(e,t,o){var a=n[e];return a||(a=[],n[e]=a),a.push(t),o&&setTimeout((function(){o.forEach((function(o){var a;if(null===(a=n[e])||void 0===a?void 0:a.includes(t))try{Array.isArray(o)?t.apply(void 0,o):t.apply(void 0,[o]);}catch(t){i(t,e);}}));}),0),function(){var i=n[e];i&&(i=i.reduce((function(e,n,i){return n===t&&e.length===i||e.push(n),e}),[]),0===i.length?delete n[e]:n[e]=i);}},execute:function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var a=n[e];if(!a||0===a.length)return [];var s=[];return a.forEach((function(n){try{var o=n.apply(void 0,t);s.push(o);}catch(t){s.push(void 0),i(t,e);}})),s},clear:function(){n={};},clearKey:function(e){n[e]&&delete n[e];}}}pt.default=pt;g(pt);const wt=createContext({config:{env:\"\",region:\"\",version:\"\",buildVersion:\"\",theme:\"\",isError:!1,mailingList:\"\",createJiraTicket:!0,sendEmail:!1,attachments:[],applicationTitle:\"\",allowEditRecipients:!0,attachmentsViewMode:\"category\",environmentInfo:\"\",selectedCategories:[],errorMessage:\"\",showEnvironmentInfo:!1,context:{},technicalInfo:\"\",sendEmailClient:\"Outlook\"},onThemeChanged:e=>{},openUrl:()=>{},submit:()=>Promise.resolve({}),setBounds:()=>{},close:e=>{},showMailingList:!0,setShowMailingList:()=>{},attachmentCategories:[],submitInProgress:!1,setSubmitInProgress:()=>{},submitStatus:{type:\"success\",title:\"\",text:\"\"},setSubmitStatus:()=>{},submitCompleted:!1,setSubmitCompleted:()=>{},jiraTicketURL:\"\",setJiraTicketURL:()=>{},submitFeedback:()=>{}}),yt=()=>useContext(wt);function kt({...n}){const{config:i,close:o}=yt(),{applicationTitle:a}=i;return jsxRuntimeExports.jsxs(D,{draggable:!0,...n,children:[jsxRuntimeExports.jsx(D.Title,{tag:\"h1\",text:a?`Feedback Form - ${a}`:\"Feedback Form\",size:\"large\"}),jsxRuntimeExports.jsx(D.ButtonGroup,{className:\"non-draggable\",children:jsxRuntimeExports.jsx(D.ButtonIcon,{variant:\"circle\",icon:\"close\",size:\"32\",onClick:()=>o()})})]})}function St({className:n=\"io-panel-body\",handleSubmit:i,...o}){const{config:a,submitFeedback:s}=yt(),{IntroField:r,DescriptionField:c,TechInfoField:l,EnvInfoField:d,FileAttachmentsField:u,CategoryAttachmentsField:h,SettingsField:m,MailListField:f}=Ot(),g=i??s,p=`Your feedback will be submitted to the ${a.buildVersion} team and some additional information will be automatically included to help us examine your issue.`;return jsxRuntimeExports.jsxs(\"form\",{className:n,id:\"feedback\",onSubmit:e=>g(e),...o,children:[jsxRuntimeExports.jsx(r,{children:jsxRuntimeExports.jsx(\"p\",{children:p})}),jsxRuntimeExports.jsx(m,{}),jsxRuntimeExports.jsx(f,{}),jsxRuntimeExports.jsx(c,{}),jsxRuntimeExports.jsx(l,{readOnly:!0}),jsxRuntimeExports.jsx(d,{readOnly:!0}),\"file\"===a.attachmentsViewMode?jsxRuntimeExports.jsx(u,{}):jsxRuntimeExports.jsx(h,{})]})}function Nt({...n}){const{FooterButtons:i}=Ot(),{openUrl:o,submitInProgress:a,submitStatus:s,jiraTicketURL:r}=yt();return jsxRuntimeExports.jsx(M,{...n,children:jsxRuntimeExports.jsxs(\"div\",a?{className:\"flex ai-center jc-between\",children:[jsxRuntimeExports.jsx(C,{children:jsxRuntimeExports.jsx(\"p\",{children:s.title})}),jsxRuntimeExports.jsx(R,{align:\"right\",size:\"small\"})]}:{className:\"flex ai-center jc-between\",children:[jsxRuntimeExports.jsxs(C,{children:[jsxRuntimeExports.jsx(\"p\",{className:\"error\"===s.type?\"io-text-error\":\"\",children:s.title}),r&&jsxRuntimeExports.jsx(\"a\",{href:r,onClick:e=>{e.preventDefault(),o(r);},children:r})]}),jsxRuntimeExports.jsx(i,{})]})})}function Ct({className:t,...n}){const{CloseButton:i}=Ot(),{close:o}=yt();return jsxRuntimeExports.jsx(_,{className:t,...n,children:jsxRuntimeExports.jsx(i,{onClick:()=>o()})})}function Bt({className:n,...i}){const{SubmitButton:o,CancelButton:a,CloseButton:s}=Ot(),{close:r,submitCompleted:c}=yt();return c?jsxRuntimeExports.jsx(_,{className:n,...i,children:jsxRuntimeExports.jsx(s,{text:\"Close\",onClick:()=>r()})}):jsxRuntimeExports.jsxs(_,{className:n,...i,children:[jsxRuntimeExports.jsx(o,{}),jsxRuntimeExports.jsx(a,{onClick:()=>r()})]})}function At({text:t=\"Submit\",...n}){return jsxRuntimeExports.jsx(B,{form:\"feedback\",type:\"submit\",variant:\"primary\",text:t,...n})}function xt({text:t=\"Cancel\",...n}){return jsxRuntimeExports.jsx(B,{variant:\"outline\",text:t,...n})}function $t({...t}){return jsxRuntimeExports.jsx(B,{variant:\"primary\",...t})}function It({showField:t=!0,className:n,title:i,hint:o,children:a,...s}){return t?jsxRuntimeExports.jsx(C,{className:n,title:i,hint:o,...s,children:a}):null}function zt({showField:t=!0,className:n,title:i=\"Description\",hint:o,readOnly:a=!1,disabled:s,...r}){return t?jsxRuntimeExports.jsx(C,{className:n,hint:o,title:\"\",...r,children:jsxRuntimeExports.jsx(Z,{id:\"description\",name:\"description\",label:i,readOnly:a,disabled:s})}):null}function Pt({showField:t,className:n,title:i=\"Technical Information\",hint:o,fieldValue:a,readOnly:s=!1,disabled:r,...c}){const{config:l}=yt(),d=t??l.errorMessage,u=a??l.errorMessage;return d&&u?jsxRuntimeExports.jsx(C,{className:n,hint:o,...c,children:jsxRuntimeExports.jsx(Z,{id:\"errorMessage\",name:\"errorMessage\",label:i,value:u,readOnly:s,disabled:r})}):null}function Ft({showField:t,className:n,title:i=\"Environment Information\",hint:o,fieldValue:a,readOnly:s=!1,disabled:r,...c}){const{config:l}=yt(),d=t??l.showEnvironmentInfo,u=a??l.environmentInfo;return d&&u?jsxRuntimeExports.jsx(C,{className:n,hint:o,...c,children:jsxRuntimeExports.jsx(Z,{id:\"environmentInfo\",name:\"environmentInfo\",label:i,value:u,readOnly:s,disabled:r})}):null}function Tt({showField:n=!0,className:o=\"io-block io-block-list-gap\",title:a=\"Attachments\",hint:s,readOnly:r=!1,disabled:c,attachments:l,selectedCategories:d,...u}){const{config:h}=yt(),m=l??h.attachments,f=d??h.selectedCategories,g=useCallback((e=>!!f&&-1!==f.indexOf(e)),[f]);return n?!m||m.length<=0?jsxRuntimeExports.jsxs(\"div\",{children:[jsxRuntimeExports.jsx(\"h2\",{className:\"io-title\",children:\"Attachments\"}),jsxRuntimeExports.jsx(\"p\",{children:\"No Attachments\"})]}):jsxRuntimeExports.jsx(C,{className:o,title:a,hint:s,...u,children:jsxRuntimeExports.jsx(\"div\",{className:\"file-attachments\",children:m.map((t=>jsxRuntimeExports.jsx(ee,{id:t.id,name:t.id,label:t.name,readOnly:r,disabled:c,defaultChecked:g(t.category)},t.id)))})}):null}function Lt({showField:t=!0,className:n,title:o=\"Attachments\",hint:a,readOnly:s=!1,disabled:r,categories:c,selectedCategories:l,...d}){const{config:u,attachmentCategories:h}=yt(),m=c??h,f=l??u.selectedCategories,g=useCallback((e=>!!f&&-1!==f.indexOf(e)),[f]);return t?!m||m.length<=0?jsxRuntimeExports.jsx(\"p\",{children:\"No Attachments\"}):jsxRuntimeExports.jsx(C,{className:n,title:o,hint:a,...d,children:jsxRuntimeExports.jsx(\"div\",{className:\"category-attachments\",children:m.map((t=>jsxRuntimeExports.jsx(ne,{id:t,name:t,align:\"right\",label:t,readOnly:s,disabled:r,defaultChecked:g(t)},t)))})}):null}function _t({className:n=\"io-block io-block-list-gap\",title:i,hint:o,showField:a=!0,showJiraTicketField:s,jiraTicketLabel:r=\"Create Jira Ticket\",showSendEmailField:c,sendEmailLabel:l=\"Send Email\",readOnly:d=!1,disabled:u,...h}){const{config:m,showMailingList:f,setShowMailingList:g}=yt();if(!a)return null;const p=s??m.createJiraTicket,b=c??m.sendEmail;return jsxRuntimeExports.jsxs(C,{className:n,hint:o,title:i,...h,children:[p&&jsxRuntimeExports.jsx(ne,{id:\"createJiraTicket\",name:\"createJiraTicket\",label:r,align:\"right\",readOnly:d,disabled:u,defaultChecked:p}),b&&jsxRuntimeExports.jsx(ne,{onChange:()=>{g(!f);},id:\"sendEmail\",name:\"sendEmail\",label:l,align:\"right\",readOnly:d,disabled:u,defaultChecked:b})]})}function Dt({showField:t=!0,className:n,title:i=\"Email List\",hint:o=\"Separate with commas or semicolons.\",placehodler:a=\"john.doe@somedomain.com; jane.doe@otherdomain.com\",readOnly:s=!1,disabled:r,...c}){const{config:l,showMailingList:d}=yt();return (t??l.sendEmail)&&d?jsxRuntimeExports.jsx(C,{className:n,hint:o,...c,children:jsxRuntimeExports.jsx(X,{id:\"mailingList\",name:\"mailingList\",label:i,placeholder:a,readOnly:s,disabled:r,defaultValue:l.mailingList??\"\"})}):null}const Et={Header:kt,Body:St,Footer:Nt,HeaderButtons:Ct,FooterButtons:Bt,SubmitButton:At,CancelButton:xt,CloseButton:$t,IntroField:It,DescriptionField:zt,TechInfoField:Pt,EnvInfoField:Ft,FileAttachmentsField:Tt,CategoryAttachmentsField:Lt,SettingsField:_t,MailListField:Dt},Ht=createContext(Et),Mt=memo((({children:t,components:n})=>{const i=useMemo((()=>({...Et,...n})),[n]);return jsxRuntimeExports.jsx(Ht.Provider,{value:i,children:t})}));function Ot(e){return {...useContext(Ht),...e}}Mt.displayName=\"ComponentsStore\";function Jt(e){const t=useContext(IOConnectContext),n=t?.appManager,[o,r]=useState([]),[l,d]=useState(0),u=\"*\",h=useCallback((e=>[...e].sort(((e,t)=>{const n=(e.title??e.name).toLowerCase(),i=(t.title??t.name).toLowerCase();return n<i?-1:n>i?1:0}))),[]);return useEffect((()=>{if(!n)return;const e=n.onAppAdded((e=>{r((t=>[...t,{title:e.title,name:e.name,hidden:e.hidden}]));}));return ()=>{e();}}),[n]),useEffect((()=>{if(!n)return;const e=n.onAppRemoved((e=>{r((t=>t.filter((t=>t.name!==e.name))));}));return ()=>{e();}}),[n,o]),useEffect((()=>{if(!n)return;const e=n.onAppChanged((e=>{r((t=>{const n=t.find((t=>t.name===e.name));return [...t.filter((t=>t.name!==e.name)),{title:e.title,name:n?.name,hidden:n?.hidden,allowed:n?.allowed}]}));}));return ()=>{e();}}),[n]),useEffect((()=>{const n=e?.allApplications??t.appManager.applications().length;let i=0;const a=[...o],s=e?.sourceFilter;if(void 0===s||!Array.isArray(s.allowed)||!Array.isArray(s.blocked))return;const c=s.allowed,l=s.blocked;0===c.length||-1!==l.indexOf(u)||0===c.length&&0===l.length||-1!==c.indexOf(u)&&-1!==l.indexOf(u)?(i=n,a.forEach((e=>{e.allowed=!1;}))):-1!==c.indexOf(u)&&a.forEach((e=>{e.allowed=!0;})),-1===l.indexOf(u)&&l.length>0&&(i=s.blocked.length),c.forEach((e=>{const t=a.find((t=>t.name===e));t&&(t.allowed=!0);})),l.forEach((e=>{const t=a.find((t=>t.name===e));t&&(t.allowed=!1);})),d(n-i),r(a);}),[e]),{apps:o,allowedApps:l,sortAppsAlphabetically:h}}const Qt=createContext({allApps:[],settings:{},configuration:{},notifications:[],onClose:()=>{},allApplications:0,clearAll:()=>{},showPanel:()=>{},hidePanel:()=>{},saveFilter:()=>{},clearAllOld:()=>{},notificationStacks:[],isPanelVisible:!1,saveSetting:()=>{},allowedApplications:0,saveAllFilter:()=>{},isBulkActionsSupported:!1,selectedNotifications:[],selectNotification:()=>{},selectAllNotifications:()=>{},clearMany:()=>{},snooze:()=>{},snoozeMany:()=>{},setState:()=>{},setStates:()=>{}}),Yt=()=>useContext(Qt);const Kt=createContext({isSearchVisible:!1,showSearch:()=>{},hideSearch:()=>{},searchQuery:\"\",setSearch:()=>{},isSettingsVisible:!1,showSettings:()=>{},hideSettings:()=>{},sortNotificationsBy:\"newest\",setSortBy:()=>{},viewNotificationsBy:\"all\",setViewBy:()=>{},notificationsCount:0,setCount:()=>{},isBulkActionsVisible:!1,showBulkActions:()=>{},hideBulkActions:()=>{}}),Wt=()=>useContext(Kt);function Xt({...n}){const{HeaderCaption:i,HeaderActions:o,HeaderBulkActions:a,HeaderSearch:s}=hi(),{isBulkActionsSupported:r}=Yt(),{isBulkActionsVisible:c}=Wt();return jsxRuntimeExports.jsxs(J,{...n,children:[jsxRuntimeExports.jsx(i,{}),r?jsxRuntimeExports.jsxs(\"div\",{className:`io-panel-header-actions-wrapper ${c?\"io-panel-header-bulk-actions-opened\":\"\"} `,children:[jsxRuntimeExports.jsx(o,{}),jsxRuntimeExports.jsx(a,{})]}):jsxRuntimeExports.jsx(o,{}),jsxRuntimeExports.jsx(s,{})]})}function Zt({className:n=\"io-panel-header-caption\",...i}){const{HeaderCaptionTitle:o,HeaderCaptionCount:a,HeaderCaptionButtons:s}=hi();return jsxRuntimeExports.jsxs(\"div\",{className:n,...i,children:[jsxRuntimeExports.jsx(o,{}),jsxRuntimeExports.jsx(a,{}),jsxRuntimeExports.jsx(s,{})]})}function en({className:n=\"io-panel-header-caption-filter\",...i}){const{allApplications:o,allowedApplications:a}=Yt();return jsxRuntimeExports.jsxs(\"div\",{className:n,...i,children:[jsxRuntimeExports.jsx(w,{variant:\"filter\"}),jsxRuntimeExports.jsx(\"span\",{className:`${n}-allowed`,children:a}),\"of \",jsxRuntimeExports.jsx(\"span\",{className:`${n}-all`,children:o}),\"apps\"]})}function tn({text:n=\"Notifications\",counter:i,...o}){const{notificationsCount:a}=Wt();return jsxRuntimeExports.jsx(N,{text:n,size:\"large\",...o,children:(i??!0)&&jsxRuntimeExports.jsxs(\"span\",{children:[\"(\",a,\")\"]})})}function nn({...n}){const{HeaderCaptionButtonSearch:i,HeaderCaptionButtonSettings:o,HeaderCaptionButtonClose:a}=hi();return jsxRuntimeExports.jsxs(_,{...n,children:[jsxRuntimeExports.jsx(i,{}),jsxRuntimeExports.jsx(o,{}),jsxRuntimeExports.jsx(a,{})]})}const on=\"newest\",an=\"oldest\",sn=\"severity\",rn=[\"None\",\"Low\",\"Medium\",\"High\",\"Critical\"],cn={key:on,descending:!0},ln=e=>[...e].sort(((e,t)=>(t.timestamp||0)-(e.timestamp||0))),dn=e=>[...e].sort(((e,t)=>(e.timestamp||0)-(t.timestamp||0))),un=(e,t)=>{const n=rn[0];return [...e].sort(((e,i)=>{const o=rn.indexOf(e.severity||n),a=rn.indexOf(i.severity||n);return (t?-1:1)*(o-a)}))},hn={[on]:ln,[an]:dn,[sn]:un};function mn({...t}){const[n,i]=useState([]),{NotificationsList:o,Notification:a}=hi(),{sortNotificationsBy:d,viewNotificationsBy:u,setCount:h,searchQuery:m,notificationsCount:f}=Wt(),{notifications:g}=Yt(),p=useRef(null),b=re(m),v=useMemo((()=>((e,t)=>{if(!e)return [];switch(t){case\"all\":default:return e;case\"unread\":return e.filter((e=>\"Active\"===e.state||\"Stale\"===e.state));case\"read\":return e.filter((e=>\"Acknowledged\"===e.state||\"Seen\"===e.state));case\"snoozed\":return e.filter((e=>\"Snoozed\"===e.state))}})(g,u)),[g,u]),w=useMemo((()=>v.filter((e=>e.title.toLowerCase().includes(b.toLowerCase())||e.body?.toLowerCase().includes(b.toLowerCase())))),[v,b]);return useEffect((()=>{switch(d){case\"newest\":i(ln(w));break;case\"oldest\":i(dn(w));break;case\"severity\":i(un(w,!0));break;default:i(w);}h(w.length);}),[w,d,h]),useEffect((()=>{p.current&&p.current?.scrollTo({top:0,behavior:\"smooth\"});}),[b,f,d,u]),jsxRuntimeExports.jsx(U,{ref:p,...t,children:jsxRuntimeExports.jsx(o,{notifications:n,Notification:a})})}function fn({...t}){const{FooterButtons:n}=hi();return jsxRuntimeExports.jsx(q,{...t,children:jsxRuntimeExports.jsx(n,{})})}function gn({className:n,...i}){const{FooterButtonClearAll:o,FooterButtonClearAllOld:a}=hi(),{notifications:r}=Yt(),[l,d]=useState(!1);return useEffect((()=>{r.filter((e=>\"Stale\"===e.state||\"Acknowledged\"===e.state)).length>0?d(!0):d(!1);}),[r]),jsxRuntimeExports.jsxs(_,{className:n,align:\"right\",...i,children:[jsxRuntimeExports.jsx(a,{disabled:!l}),jsxRuntimeExports.jsx(o,{disabled:r.length<=0})]})}function pn({text:t=\"Clear All\",...n}){const{clearAll:i}=Yt();return jsxRuntimeExports.jsx(B,{text:t,onClick:()=>{i();},...n})}function bn({text:t=\"Clear Old\",...n}){const{clearAllOld:i}=Yt();return jsxRuntimeExports.jsx(B,{text:t,onClick:()=>{i();},...n})}function vn({className:n=\"io-panel io-settings\",title:i=\"Settings\",...o}){const{SettingsGeneral:a,SettingsPlacement:s,SettingsStacking:r,SettingsSnooze:c,SettingsSubscriptions:l}=hi(),{hideSettings:d}=Wt();return jsxRuntimeExports.jsxs(G,{className:n,...o,children:[jsxRuntimeExports.jsxs(G.Header,{children:[jsxRuntimeExports.jsx(G.Header.Title,{size:\"large\",text:i,tag:\"h1\"}),jsxRuntimeExports.jsx(G.Header.ButtonGroup,{children:jsxRuntimeExports.jsx(G.Header.ButtonIcon,{variant:\"circle\",icon:\"close\",size:\"32\",onClick:d})})]}),jsxRuntimeExports.jsxs(G.Body,{children:[jsxRuntimeExports.jsx(a,{}),jsxRuntimeExports.jsx(r,{}),jsxRuntimeExports.jsx(s,{}),jsxRuntimeExports.jsx(c,{}),jsxRuntimeExports.jsx(l,{})]})]})}function wn({className:n=\"io-panel-settings-general\",title:i=\"General\",...o}){const{SettingsAllowNotifications:a,SettingsShowNotificationBadge:s,SettingsPanelAutoHide:r,SettingsHideToastsAfter:c}=hi();return jsxRuntimeExports.jsx(\"div\",{className:n,...o,children:jsxRuntimeExports.jsxs(C,{title:i,children:[jsxRuntimeExports.jsx(a,{}),jsxRuntimeExports.jsx(s,{}),jsxRuntimeExports.jsx(r,{}),jsxRuntimeExports.jsx(c,{})]})})}function yn({label:t=\"Allow notifications\",align:n=\"right\",...o}){const{settings:a,saveSetting:s}=Yt(),r=useCallback((e=>{s({enabledNotifications:e});}),[s]);return jsxRuntimeExports.jsx(ne,{label:t,align:n,onChange:e=>r(e.target.checked),checked:a.enabledNotifications,...o})}function kn({label:t=\"Show notification badge\",align:n=\"right\",...o}){const{settings:a,saveSetting:s}=Yt(),r=useCallback((e=>{s({showNotificationBadge:e});}),[s]);return jsxRuntimeExports.jsx(ne,{label:t,align:n,onChange:e=>r(e.target.checked),checked:a.showNotificationBadge,...o})}function Sn({label:t=\"Auto hide panel\",align:n=\"right\",...o}){const{settings:a,saveSetting:s}=Yt(),r=useCallback((e=>{s({autoHidePanel:e});}),[s]);return jsxRuntimeExports.jsx(ne,{label:t,align:n,onChange:e=>r(e.target.checked),checked:a.autoHidePanel,...o})}function Nn({label:t=\"Panel always on top\",align:n=\"right\",...o}){const{settings:a,saveSetting:s}=Yt(),r=useCallback((e=>{s({alwaysOnTop:e});}),[s]);return jsxRuntimeExports.jsx(ne,{label:t,align:n,onChange:e=>r(e.target.checked),checked:a.alwaysOnTop,...o})}function Cn({className:n=\"flex jc-between ai-center\",title:o=\"Hide toasts after\",items:a=[15,30,45,60],...s}){const{settings:r,saveSetting:c}=Yt(),l=useCallback((e=>{e||(e=15e3),r.toastExpiry!==e&&c({toastExpiry:1e3*e});}),[r.toastExpiry,c]),d=e=>e<60?`${e} seconds`:60===e?\"1 minute\":e/60+\" minutes\";return jsxRuntimeExports.jsxs(\"div\",{className:n,...s,children:[jsxRuntimeExports.jsx(\"div\",{className:\"io-text-clipper \"+(r.enabledNotifications?\"\":\"io-text-disabled\"),children:jsxRuntimeExports.jsx(\"span\",{children:o})}),jsxRuntimeExports.jsxs(L,{variant:\"light\",disabled:!r.enabledNotifications,children:[jsxRuntimeExports.jsx(L.Button,{text:d(r.toastExpiry/1e3)}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{variant:\"single\",children:a.map((t=>jsxRuntimeExports.jsx(L.Item,{onClick:()=>{l(t);},children:d(t)},t)))})})]})]})}function Bn({className:n=\"flex jc-between ai-center\",title:i=\"Highlight new for\",...o}){const{settings:a,saveSetting:s}=Yt(),r=[\"30 seconds\",\"1 minute\",\"5 minutes\",\"Never\"];return jsxRuntimeExports.jsxs(\"div\",{className:n,...o,children:[jsxRuntimeExports.jsx(\"div\",{className:\"io-text-clipper \"+(a.enabledNotifications?\"\":\"io-text-disabled\"),children:jsxRuntimeExports.jsx(\"span\",{children:i})}),jsxRuntimeExports.jsxs(L,{variant:\"outline\",disabled:!a.enabledNotifications,children:[jsxRuntimeExports.jsx(L.Button,{text:r[0]}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{variant:\"single\",children:r.map((t=>jsxRuntimeExports.jsx(L.Item,{children:t},t)))})})]})]})}function An({className:n=\"flex jc-between ai-center\",title:i=\"Mark as read after\",...o}){const{settings:a,saveSetting:s}=Yt(),r=[\"1 minute\",\"5 minutes\",\"Never\"];return jsxRuntimeExports.jsxs(\"div\",{className:n,...o,children:[jsxRuntimeExports.jsx(\"div\",{className:\"io-text-clipper \"+(a.enabledNotifications?\"\":\"io-text-disabled\"),children:jsxRuntimeExports.jsx(\"span\",{children:i})}),jsxRuntimeExports.jsxs(L,{variant:\"outline\",disabled:!a.enabledNotifications,children:[jsxRuntimeExports.jsx(L.Button,{text:r[0]}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{variant:\"single\",children:r.map((t=>jsxRuntimeExports.jsx(L.Item,{children:t},t)))})})]})]})}function xn({className:n=\"io-panel-settings-stacking\",title:i=\"Stacking\",...o}){const{SettingsToastStacking:a,SettingsToastStackBy:s}=hi();return jsxRuntimeExports.jsx(\"div\",{className:n,...o,children:jsxRuntimeExports.jsxs(C,{title:i,children:[jsxRuntimeExports.jsx(a,{}),jsxRuntimeExports.jsx(s,{})]})})}function $n({label:t=\"Allow toast stacking\",align:n=\"right\",...o}){const{settings:a,saveSetting:s}=Yt(),r=useCallback((e=>{s({toastStacking:e});}),[s]);return jsxRuntimeExports.jsx(ne,{label:t,align:n,onChange:e=>r(e.target.checked),checked:a.toastStacking,disabled:!a.enabledNotifications,...o})}const In=e=>e.replace(/(^|-)\\w/g,(e=>e.toUpperCase().replace(\"-\",\" \")));function zn({className:n=\"flex jc-between ai-center\",title:o=\"Group by\",...a}){const{settings:s,saveSetting:r}=Yt(),c=useCallback((e=>{e||(e=\"severity\"),s.stackBy!==e&&r({stackBy:e.toLowerCase()});}),[s.stackBy,r]);return jsxRuntimeExports.jsxs(\"div\",{className:n,...a,children:[jsxRuntimeExports.jsx(\"div\",{className:\"io-text-clipper \"+(s.enabledNotifications?\"\":\"io-text-disabled\"),children:jsxRuntimeExports.jsx(\"span\",{children:o})}),jsxRuntimeExports.jsxs(L,{variant:\"light\",disabled:!s.enabledNotifications,children:[jsxRuntimeExports.jsx(L.Button,{text:s.stackBy?In(s.stackBy):\"Severity\"}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{variant:\"single\",children:[\"Severity\",\"Application\"].map((t=>jsxRuntimeExports.jsx(L.Item,{onClick:()=>{c(t);},children:t},t)))})})]})]})}function Pn({className:n=\"io-panel-settings-placement\",title:i=\"Placement\",...o}){const{SettingsPlacementPanel:a,SettingsPlacementToasts:s}=hi();return jsxRuntimeExports.jsx(\"div\",{className:n,...o,children:jsxRuntimeExports.jsxs(C,{title:i,children:[jsxRuntimeExports.jsx(a,{}),jsxRuntimeExports.jsx(s,{})]})})}function Fn({className:n=\"flex jc-between ai-center\",title:o=\"Panel position\",...a}){const{settings:s,saveSetting:r}=Yt(),c=useCallback((e=>{e||(e=\"right\"),s.placement?.panel!==e&&r({placement:{...s.placement,panel:e.toLowerCase()}});}),[s.placement,r]);return jsxRuntimeExports.jsxs(\"div\",{className:n,...a,children:[jsxRuntimeExports.jsx(\"div\",{className:\"io-text-clipper\",children:jsxRuntimeExports.jsx(\"span\",{children:o})}),jsxRuntimeExports.jsxs(L,{variant:\"light\",children:[jsxRuntimeExports.jsx(L.Button,{text:s.placement?.panel?In(s.placement?.panel):\"Right\"}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{variant:\"single\",children:[\"Right\",\"Left\"].map((t=>jsxRuntimeExports.jsx(L.Item,{onClick:()=>{c(t);},children:t},t)))})})]})]})}function Tn({className:n=\"flex jc-between ai-center\",title:o=\"Toasts position\",...a}){const{settings:s,saveSetting:r}=Yt(),c=useCallback((e=>{if(e||(e=\"bottom-right\"),s.placement?.toasts===e)return;const t=e.replace(/\\s+/g,\"-\").toLowerCase();r({placement:{...s.placement,toasts:t}});}),[s.placement,r]);return jsxRuntimeExports.jsxs(\"div\",{className:n,...a,children:[jsxRuntimeExports.jsx(\"div\",{className:\"io-text-clipper\",children:jsxRuntimeExports.jsx(\"span\",{children:o})}),jsxRuntimeExports.jsxs(L,{variant:\"light\",children:[jsxRuntimeExports.jsx(L.Button,{text:s.placement?.toasts?In(s.placement?.toasts):\"Bottom Right\"}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{variant:\"single\",children:[\"Top Right\",\"Top Left\",\"Bottom Right\",\"Bottom Left\"].map((t=>jsxRuntimeExports.jsx(L.Item,{onClick:()=>{c(t);},children:t},t)))})})]})]})}function Ln({className:t=\"io-panel-settings-snooze\",title:n=\"Snooze\",...i}){const{SettingsSnoozeDuration:o}=hi(),{settings:a}=Yt();return a.snooze?.enabled?jsxRuntimeExports.jsx(\"div\",{className:t,...i,children:jsxRuntimeExports.jsx(C,{title:n,children:jsxRuntimeExports.jsx(o,{})})}):null}function _n({className:n=\"flex jc-between ai-center\",title:o=\"Default duration\",items:a=[60,120,180,300],...s}){const{settings:r,saveSetting:c}=Yt(),l=useCallback((e=>{e||(e=6e4),r.snooze&&r.snooze?.duration!==e&&c({snooze:{...r.snooze,duration:1e3*e}});}),[r.snooze,c]),d=e=>e<60?`${e} seconds`:60===e?\"1 minute\":e/60+\" minutes\";return r.snooze?.enabled?jsxRuntimeExports.jsxs(\"div\",{className:n,...s,children:[jsxRuntimeExports.jsx(\"div\",{className:\"io-text-clipper \"+(r.enabledNotifications?\"\":\"io-text-disabled\"),children:jsxRuntimeExports.jsx(\"span\",{children:o})}),jsxRuntimeExports.jsxs(L,{variant:\"outline\",disabled:!r.enabledNotifications,children:[jsxRuntimeExports.jsx(L.Button,{text:d(r.snooze?.duration/1e3)}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{variant:\"single\",children:a.map((t=>jsxRuntimeExports.jsx(L.Item,{onClick:()=>{l(t);},children:d(t)},t)))})})]})]}):null}function Dn({className:n=\"io-panel-settings-subscriptions\",title:i=\"Subscribe and Mute\",...o}){const{SettingsSubscribeAll:a,SettingsSubscribeApp:s,SettingsSubscribeMuteAll:r,SettingsSubscribeMuteApp:c}=hi(),{allApps:l}=Yt(),{sortAppsAlphabetically:d}=Jt(),u=d(l);return jsxRuntimeExports.jsx(\"div\",{className:n,...o,children:jsxRuntimeExports.jsxs(C,{title:i,children:[jsxRuntimeExports.jsxs(\"div\",{className:`${n}-grid`,children:[jsxRuntimeExports.jsx(\"p\",{className:\"io-text-section\",children:\"Sources\"}),jsxRuntimeExports.jsx(\"p\",{className:\"io-text-section\",children:\"Subscribe\"}),jsxRuntimeExports.jsx(\"p\",{className:\"io-text-section\",children:\"Mute\"})]}),jsxRuntimeExports.jsxs(\"div\",{className:`${n}-grid`,children:[jsxRuntimeExports.jsx(\"p\",{children:\"All Sources\"}),jsxRuntimeExports.jsx(a,{label:\"\"}),jsxRuntimeExports.jsx(r,{label:\"\"})]}),u.map((i=>!i||i.hidden?null:jsxRuntimeExports.jsxs(\"div\",{className:`${n}-grid`,children:[jsxRuntimeExports.jsx(\"p\",{children:i.title??i.name}),jsxRuntimeExports.jsx(s,{app:i,label:\"\"}),jsxRuntimeExports.jsx(c,{app:i,label:\"\"})]},i.name)))]})})}function En({label:t=\"All apps\",align:n=\"right\",...o}){const{settings:a,configuration:s,saveAllFilter:r}=Yt(),c=useCallback((e=>{r({subscribe:e});}),[r]);return jsxRuntimeExports.jsx(ne,{align:n,label:t,onChange:e=>c(e.target.checked),checked:s.sourceFilter?.allowed?.includes(\"*\"),disabled:!a.enabledNotifications,...o})}function Hn({label:t=\"App\",align:n=\"right\",app:o,...a}){const{allApps:s,settings:r,configuration:c,saveFilter:l}=Yt(),d=useCallback(((e,t)=>{const n={...c.sourceFilter},i=n.allowed?.indexOf(\"*\");\"number\"==typeof i&&i>-1&&(n.allowed?.splice(i,1),s.forEach((e=>{e.name!==t.name&&n.allowed?.push(e.name);}))),e?(n.allowed?.push(t.name),n.blocked=n.blocked?.filter((e=>e!==t.name))):(n.allowed=n.allowed?.filter((e=>e!==t.name)),n.blocked?.push(t.name)),n.allowed?.length&&n.allowed?.length>0&&n.blocked?.includes(\"*\")&&n.blocked.splice(n.blocked.indexOf(\"*\"),1),l(n);}),[s,c.sourceFilter,l]);return jsxRuntimeExports.jsx(ne,{id:o.name,label:t,align:n,onChange:e=>d(e.target.checked,o),checked:c.sourceFilter?.allowed?.includes(\"*\")||c.sourceFilter?.allowed?.includes(o.name),disabled:!r.enabledNotifications,...a})}function Mn({label:t=\"Mute all\",align:n=\"right\",...o}){const{settings:a,configuration:s,saveAllFilter:r}=Yt(),c=useCallback((e=>{r({mute:e});}),[r]);return jsxRuntimeExports.jsx(ne,{align:n,label:t,onChange:e=>c(e.target.checked),checked:s.sourceFilter?.muted?.includes(\"*\"),disabled:!a.enabledNotifications||-1===s.sourceFilter?.allowed?.indexOf(\"*\"),...o})}function On({label:t=\"App\",align:n=\"right\",app:o,...a}){const{allApps:s,settings:r,configuration:c,saveFilter:l}=Yt(),d=useCallback(((e,t)=>{const n={...c.sourceFilter},i=n?.muted?.indexOf(\"*\");\"number\"==typeof i&&i>-1&&(n.muted?.splice(i,1),s.forEach((e=>{e.name===t.name||e.hidden||n.muted?.push(e.name);}))),e?n.muted?.push(t.name):n.muted=n.muted?.filter((e=>e!==t.name)),l(n);}),[s,c.sourceFilter,l]);return jsxRuntimeExports.jsx(ne,{id:o.name,label:t,align:n,onChange:e=>d(e.target.checked,o),checked:c.sourceFilter?.muted?.includes(\"*\")||c.sourceFilter?.muted?.includes(o.name),disabled:!r.enabledNotifications||c.sourceFilter?.blocked?.includes(\"*\")||c.sourceFilter?.blocked?.includes(o.name)||0===c.sourceFilter?.allowed?.length||-1===c.sourceFilter?.allowed?.indexOf(o.name)&&-1===c.sourceFilter?.allowed?.indexOf(\"*\")&&0===c.sourceFilter?.blocked?.length,...a})}function jn({className:n=\"io-notification-header\",notification:i,...o}){const{HeaderCount:a,HeaderBadge:s,HeaderTitle:r,HeaderTimestamp:c,HeaderButtonSnooze:l,HeaderButtonClose:d}=oi();return jsxRuntimeExports.jsxs(\"div\",{className:n,...o,children:[jsxRuntimeExports.jsx(s,{notification:i}),jsxRuntimeExports.jsx(a,{notification:i}),jsxRuntimeExports.jsx(r,{notification:i}),jsxRuntimeExports.jsx(c,{notification:i}),jsxRuntimeExports.jsxs(_,{children:[jsxRuntimeExports.jsx(l,{notification:i}),jsxRuntimeExports.jsx(d,{notification:i})]})]})}function Vn({notification:t,...n}){const{settings:i,isPanelVisible:o,notificationStacks:a}=Yt(),{toastStacking:s,stackBy:r}=i,c=\"application\"===r?\"source\":r??\"source\";let l;if(s){const e=a.find((e=>e.key===t[c]));l=e?.items.length??0;}return s&&!o&&l&&l>1?jsxRuntimeExports.jsx(S,{...n,children:l<10?l:\"9+\"}):null}function Rn({className:n=\"io-notification-header-badge\",notification:i,...o}){return i&&i.severity&&\"None\"!==i.severity?jsxRuntimeExports.jsxs(\"div\",{className:n,...o,children:[jsxRuntimeExports.jsx(w,{variant:(e=>{if(!e)return \"circle-info\";switch(e.toLowerCase()){case\"info\":case\"low\":case\"medium\":default:return \"circle-info\";case\"high\":return \"triangle-exclamation\";case\"critical\":return \"ban\"}})(i.severity),size:\"12\"}),i.severity]}):null}function Jn({className:n=\"io-notification-header-icon\",state:i,severity:o=\"None\",icon:a,...s}){const{isPanelVisible:r}=Yt();return jsxRuntimeExports.jsxs(\"div\",{className:n,...s,children:[a&&jsxRuntimeExports.jsx(\"span\",{className:`${n}-image`,children:jsxRuntimeExports.jsx(\"img\",{src:a,alt:`${n}-${a}`})}),jsxRuntimeExports.jsx(\"span\",{className:`${n}-badge color-${o.toLowerCase()}`,children:r&&\"Acknowledged\"!==i&&\"New\"})]})}function Un({className:t=\"io-notification-header-title\",notification:{appTitle:n},...i}){return jsxRuntimeExports.jsx(\"div\",{className:t,...i,children:n})}function qn({className:t=\"io-notification-timestamp\",notification:{timestamp:n,state:i,snooze:o},...a}){return jsxRuntimeExports.jsx(\"small\",o&&\"Snoozed\"===i?{className:t,...a,children:\"Snoozed\"}:{className:t,...a,children:et(n??0)??\"Just Now\"})}function Gn({notification:{id:t,state:n},...o}){const{settings:a,snooze:s}=Yt(),r=useCallback((e=>{e.stopPropagation(),s&&s(t,a.snooze?.duration??0);}),[t,s,a.snooze?.duration]);return s&&\"Snoozed\"!==n&&a.snooze?.enabled?jsxRuntimeExports.jsx(B,{icon:\"snooze\",variant:\"link\",text:\"Snooze\",tabIndex:-1,onClick:r,...o}):null}function Qn({notification:{updateState:t,close:n},...i}){const{isPanelVisible:o}=Yt();return jsxRuntimeExports.jsx(y,{icon:\"close\",size:\"24\",tabIndex:-1,onClick:e=>{o?n().catch(console.error):(e.stopPropagation(),t(\"Acknowledged\").catch(console.error));},...i})}function Yn({className:n=\"io-notification-body\",notification:i,...o}){const{BodyIcon:a,BodyTitle:s,BodyDescription:r}=oi(),{onClick:c}=i,{settings:l}=Yt();return jsxRuntimeExports.jsxs(\"div\",{className:n,role:\"button\",tabIndex:0,onKeyDown:e=>{\"Enter\"!==e.key&&\" \"!==e.key||c({close:!1});},onClick:()=>{l.toastStacking?c({close:!1}):c();},...o,children:[jsxRuntimeExports.jsx(a,{icon:i.icon}),jsxRuntimeExports.jsxs(\"div\",{className:`${n}-content`,children:[jsxRuntimeExports.jsx(s,{text:i.title}),jsxRuntimeExports.jsx(r,{text:i.body})]})]})}function Kn({className:t=\"io-notification-body-icon\",icon:n,...i}){return n?jsxRuntimeExports.jsx(\"div\",{className:t,...i,children:jsxRuntimeExports.jsx(\"img\",{src:n,alt:\"notification-icon\"})}):null}function Wn({text:t,...n}){return jsxRuntimeExports.jsx(N,{text:t,...n})}function Xn({className:t=\"io-notification-body-description\",text:n,...i}){return jsxRuntimeExports.jsx(\"p\",{className:t,...i,children:n})}function Zn({className:t=\"io-notification-footer\",notification:n}){const{FooterButton:i}=oi();return jsxRuntimeExports.jsx(\"div\",{className:t,children:jsxRuntimeExports.jsx(_,{align:\"right\",children:n.actions?.map(((t,n)=>jsxRuntimeExports.jsx(i,{notificationAction:t,variant:0===n?\"primary\":\"link\"},`${t.title+n.toString()}`)))})})}function ei({notificationAction:t,...n}){return jsxRuntimeExports.jsx(B,{text:t.title,onClick:e=>{e.stopPropagation(),t.onClick();},...n})}const ti={Header:jn,HeaderCount:Vn,HeaderBadge:Rn,HeaderIcon:Jn,HeaderTitle:Un,HeaderTimestamp:qn,HeaderButtonSnooze:Gn,HeaderButtonClose:Qn,Body:Yn,BodyIcon:Kn,BodyTitle:Wn,BodyDescription:Xn,Footer:Zn,FooterButton:ei},ni=createContext(ti),ii=memo((({children:t,components:n})=>{const i=useMemo((()=>({...ti,...n})),[n]);return jsxRuntimeExports.jsx(ni.Provider,{value:i,children:t})}));function oi(e){return {...useContext(ni),...e}}function ai({className:n=\"io-notification\",notification:i,...o}){const{Header:a,Body:s,Footer:r}=oi(),{severity:c}=i,l=v(n,`severity-${c?.toLowerCase()??\"none\"}`,{\"state-new\":\"Acknowledged\"!==i.state});return jsxRuntimeExports.jsxs(\"div\",{className:l,...o,children:[jsxRuntimeExports.jsx(a,{notification:i}),jsxRuntimeExports.jsx(s,{notification:i}),jsxRuntimeExports.jsx(r,{notification:i})]})}function si({components:t,notification:n,...i}){return jsxRuntimeExports.jsx(ii,{components:t,children:jsxRuntimeExports.jsx(ai,{notification:n,...i})})}function ri({className:n=\"io-notification-stack\",notifications:o,...a}){const[r,c]=useState(!1),l=2===o.length?\"small\":o.length>=3?\"large\":\"normal\",d=o[0].severity,u=v(n,{[`${n}-open`]:r,[`${n}-${l}`]:\"normal\"!==l,[`${n}-${d}`]:d&&\"None\"!==d}),h=useCallback((()=>{c(!r);}),[r]),m=useCallback((e=>{e.stopPropagation(),o.forEach((e=>{e.close();}));}),[o]);return jsxRuntimeExports.jsxs(\"div\",{className:u,onClick:h,...a,children:[\"normal\"!==l&&jsxRuntimeExports.jsx(\"div\",{className:`${n}-btn`,children:jsxRuntimeExports.jsx(B,{icon:\"close\",onClick:e=>m(e),children:jsxRuntimeExports.jsx(\"span\",{className:\"io-btn-text\",children:\"Clear All\"})})}),o.map((t=>jsxRuntimeExports.jsx(si,{notification:t},t.id)))]})}function ci({className:n=\"io-notification-list\",Notification:i,notifications:o,noNotificationText:a=\"No notifications to display\",...s}){const{notifications:r,notificationStacks:c,settings:l,configuration:d,isPanelVisible:u,selectedNotifications:h,selectNotification:m,isBulkActionsSupported:f}=Yt(),{isBulkActionsVisible:g}=Wt(),{toastStacking:p}=l,b=o??r;return jsxRuntimeExports.jsx(\"div\",{className:n,...s,children:p&&!u?c.length>0?c.map((t=>jsxRuntimeExports.jsx(ri,{notifications:t.items},t.key))):jsxRuntimeExports.jsx(\"div\",{className:\"flex jc-center mt-8\",children:a??\"\"}):b.length>0?b.map((o=>{const a=d.sourceFilter?.muted?.includes(o.source)||d.sourceFilter?.muted?.includes(\"*\");return !u&&a?null:u&&f&&g?jsxRuntimeExports.jsxs(\"div\",{className:`${n}-bulk-action-item ${h.includes(o.id)?\"selected\":\"\"}`,children:[jsxRuntimeExports.jsx(ee,{checked:h.includes(o.id),onChange:e=>m(o.id,e.target.checked)}),jsxRuntimeExports.jsx(i,{notification:o})]},o.id):jsxRuntimeExports.jsx(i,{notification:o},o.id)})):jsxRuntimeExports.jsx(\"div\",{className:\"flex jc-center mt-8\",children:a??\"\"})})}ii.displayName=\"ComponentsStoreProvider\";const li={Header:Xt,HeaderCaption:Zt,HeaderCaptionFilter:en,HeaderCaptionTitle:tn,HeaderCaptionCount:function({...t}){const{notificationsCount:n}=Wt();return jsxRuntimeExports.jsx(S,{...t,children:(n||0).toString()})},HeaderCaptionButtons:nn,HeaderCaptionButtonSearch:function({...t}){const{isSearchVisible:n,showSearch:i,hideSearch:o,notificationsCount:a}=Wt();return jsxRuntimeExports.jsx(y,{icon:n?\"search-filled\":\"search\",variant:\"circle\",size:\"32\",onClick:n?o:i,disabled:0===a,...t})},HeaderCaptionButtonSettings:function({icon:t=\"cog\",size:n=\"32\",variant:i=\"circle\",...o}){const{showSettings:a}=Wt();return jsxRuntimeExports.jsx(y,{icon:t,size:n,variant:i,onClick:a,...o})},HeaderCaptionButtonClose:function({icon:t=\"close\",size:n=\"32\",variant:i=\"circle\",...o}){const{hidePanel:a}=Yt();return jsxRuntimeExports.jsx(y,{icon:t,size:n,variant:i,onClick:a,...o})},HeaderActions:function({className:n=\"io-panel-header-actions\",...i}){const{HeaderActionSort:o,HeaderActionView:a,HeaderActionClear:s,HeaderActionEdit:r}=hi();return jsxRuntimeExports.jsxs(\"div\",{className:n,...i,children:[jsxRuntimeExports.jsxs(_,{children:[jsxRuntimeExports.jsx(o,{}),jsxRuntimeExports.jsx(a,{})]}),jsxRuntimeExports.jsxs(_,{children:[jsxRuntimeExports.jsx(s,{}),jsxRuntimeExports.jsx(r,{})]})]})},HeaderActionSort:function({text:n=\"Sort by\",...o}){const{sortNotificationsBy:a,setSortBy:c}=Wt(),{onNotificationsSort:l}=(()=>{const{notifications:e}=Yt(),[t,n]=useState(cn),{key:o,descending:a}=t,c=useMemo((()=>hn[o](e,a)),[e,o,a]),l=useCallback((e=>{n((t=>({key:e,descending:t.key!==e?cn.descending:!t.descending})));}),[]);return {onNotificationsSort:l,sortedNotifications:c}})();return jsxRuntimeExports.jsxs(L,{variant:\"light\",...o,children:[jsxRuntimeExports.jsxs(L.Button,{variant:\"link\",children:[n,\" \",jsxRuntimeExports.jsx(\"strong\",{children:a})]}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{variant:\"single\",checkIcon:\"check\",children:[\"Newest\",\"Oldest\",\"Severity\"].map((t=>jsxRuntimeExports.jsx(L.Item,{isSelected:a===t.toLowerCase(),onClick:()=>{c(t.toLowerCase()),l(t.toLowerCase());},children:t},t)))})})]})},HeaderActionView:function({text:n=\"View\",...i}){const{settings:o}=Yt(),{viewNotificationsBy:a,setViewBy:s}=Wt(),r=o.snooze?.enabled?[\"All\",\"Read\",\"Unread\",\"Snoozed\"]:[\"All\",\"Read\",\"Unread\"];return jsxRuntimeExports.jsxs(L,{variant:\"light\",...i,children:[jsxRuntimeExports.jsxs(L.Button,{variant:\"link\",children:[n,\" \",jsxRuntimeExports.jsx(\"strong\",{children:a})]}),jsxRuntimeExports.jsx(L.Content,{children:jsxRuntimeExports.jsx(L.List,{variant:\"single\",checkIcon:\"check\",children:r.map((t=>jsxRuntimeExports.jsx(L.Item,{isSelected:a===t.toLowerCase(),onClick:()=>s(t.toLowerCase()),children:t},t)))})})]})},HeaderActionClear:function({text:t=\"Clear All\",...n}){const{clearAll:i}=Yt(),{notificationsCount:o}=Wt();return jsxRuntimeExports.jsx(B,{variant:\"link\",text:t,onClick:i,disabled:0===o,...n})},HeaderActionEdit:function({tooltip:t=\"Bulk Edit\",...n}){const{isBulkActionsSupported:i}=Yt(),{showBulkActions:o,notificationsCount:a}=Wt();return i?jsxRuntimeExports.jsx(y,{icon:\"pen-to-square\",title:t,size:\"32\",onClick:o,disabled:0===a,...n}):null},HeaderBulkActions:function({className:n=\"io-panel-header-bulk-actions\",...i}){const{HeaderBulkActionSelect:o,HeaderBulkActionSelectDropdown:a,HeaderBulkActionMarkAsRead:s,HeaderBulkActionMarkAsUnread:r,HeaderBulkActionSnooze:c,HeaderBulkActionClear:l,HeaderBulkActionClose:d}=hi(),{isBulkActionsSupported:u}=Yt();return u?jsxRuntimeExports.jsx(\"div\",{className:n,...i,children:jsxRuntimeExports.jsxs(_,{children:[jsxRuntimeExports.jsx(o,{}),jsxRuntimeExports.jsx(a,{}),jsxRuntimeExports.jsx(s,{}),jsxRuntimeExports.jsx(r,{}),jsxRuntimeExports.jsx(c,{}),jsxRuntimeExports.jsx(l,{}),jsxRuntimeExports.jsx(d,{})]})}):null},HeaderBulkActionSelect:function({...t}){const{isBulkActionsSupported:n,selectedNotifications:i,selectAllNotifications:o}=Yt(),{notificationsCount:a}=Wt();return n?jsxRuntimeExports.jsx(ee,{checked:a===i.length&&a>0,onChange:e=>o(\"all\",e.target.checked),disabled:0===a,...t}):null},HeaderBulkActionSelectDropdown:function({...n}){const{isBulkActionsSupported:i,selectAllNotifications:o}=Yt(),{notificationsCount:a}=Wt();return i?jsxRuntimeExports.jsxs(L,{variant:\"light\",...n,children:[jsxRuntimeExports.jsx(L.ButtonIcon,{variant:\"default\",icon:\"chevron-down\",size:\"16\",iconSize:\"10\",disabled:0===a}),jsxRuntimeExports.jsx(x,{children:jsxRuntimeExports.jsxs(L.List,{variant:\"single\",checkIcon:\"check\",children:[jsxRuntimeExports.jsx(L.ItemSection,{children:\"Select\"}),[\"All\",\"Read\",\"Unread\",\"Snoozed\"].map((t=>jsxRuntimeExports.jsx(L.Item,{onClick:()=>o(t.toLowerCase(),!0),children:t},t)))]})})]}):null},HeaderBulkActionMarkAsRead:function({icon:t=\"envelope-open\",size:n=\"32\",variant:o=\"circle\",tooltip:a=\"Mark as read\",...s}){const{isBulkActionsSupported:r,selectedNotifications:c,setStates:l}=Yt(),{notificationsCount:d}=Wt(),u=useCallback((()=>{l(c,\"Seen\");}),[c,l]);return r?jsxRuntimeExports.jsx(y,{icon:t,size:n,variant:o,title:a,onClick:u,disabled:0===d,...s}):null},HeaderBulkActionMarkAsUnread:function({icon:t=\"envelope\",size:n=\"32\",variant:o=\"circle\",tooltip:a=\"Mark as unread\",...s}){const{isBulkActionsSupported:r,selectedNotifications:c,setStates:l}=Yt(),{notificationsCount:d}=Wt(),u=useCallback((()=>{l(c,\"Active\");}),[c,l]);return r?jsxRuntimeExports.jsx(y,{icon:t,size:n,variant:o,title:a,onClick:u,disabled:0===d,...s}):null},HeaderBulkActionSnooze:function({icon:t=\"snooze\",size:n=\"32\",variant:o=\"circle\",tooltip:a=\"Snooze\",...s}){const{isBulkActionsSupported:r,selectedNotifications:c,snoozeMany:l,settings:d}=Yt(),{notificationsCount:u}=Wt(),h=useCallback((()=>{l(c,d.snooze?.duration??0);}),[c,l,d.snooze?.duration]);return r&&d.snooze?.enabled?jsxRuntimeExports.jsx(y,{icon:t,size:n,variant:o,title:a,onClick:h,disabled:0===u,...s}):null},HeaderBulkActionClear:function({icon:t=\"trash\",size:n=\"32\",variant:o=\"circle\",tooltip:a=\"Clear\",...s}){const{isBulkActionsSupported:r,selectedNotifications:c,clearMany:l}=Yt(),{notificationsCount:d}=Wt(),u=useCallback((()=>{l(c);}),[c,l]);return r?jsxRuntimeExports.jsx(y,{icon:t,size:n,variant:o,title:a,onClick:u,disabled:0===d,...s}):null},HeaderBulkActionClose:function({text:t=\"Done\",variant:n=\"primary\",...i}){const{isBulkActionsSupported:o}=Yt(),{hideBulkActions:a,notificationsCount:s}=Wt();return o?jsxRuntimeExports.jsx(B,{variant:n,text:t,onClick:a,disabled:0===s,...i}):null},HeaderSearch:function({className:n=\"io-panel-header-search\",icon:i=\"search\",placeholder:o=\"Search\",...a}){const{isSearchVisible:s,searchQuery:r,setSearch:d,notificationsCount:u}=Wt(),h=useRef(null);return useEffect((()=>{s?h.current?.focus():(h.current?.blur(),d(\"\"));}),[s,d]),s?jsxRuntimeExports.jsxs(\"div\",{className:n,children:[jsxRuntimeExports.jsx(X,{ref:h,value:r,iconPrepend:i,placeholder:o,onChange:e=>d(e.target.value),...a}),s&&r.length>0&&jsxRuntimeExports.jsx(\"p\",{className:`${n}-count`,children:`${u} results`})]}):null},Body:mn,Footer:fn,FooterButtons:gn,FooterButtonClearAll:pn,FooterButtonClearAllOld:bn,Notification:si,NotificationsList:ci,Settings:vn,SettingsGeneral:wn,SettingsAllowNotifications:yn,SettingsShowNotificationBadge:kn,SettingsPanelAutoHide:Sn,SettingsPanelAlwaysOnTop:Nn,SettingsHideToastsAfter:Cn,SettingsMarkAsNew:Bn,SettingsMarkAsRead:An,SettingsStacking:xn,SettingsToastStacking:$n,SettingsToastStackBy:zn,SettingsPlacement:Pn,SettingsPlacementPanel:Fn,SettingsPlacementToasts:Tn,SettingsSnooze:Ln,SettingsSnoozeDuration:_n,SettingsSubscriptions:Dn,SettingsSubscribeAll:En,SettingsSubscribeApp:Hn,SettingsSubscribeMuteAll:Mn,SettingsSubscribeMuteApp:On},di=createContext(li),ui=memo((({children:t,components:n})=>{const i=useMemo((()=>({...li,...n})),[n]);return jsxRuntimeExports.jsx(di.Provider,{value:i,children:t})}));function hi(e){return {...useContext(di),...e}}ui.displayName=\"ComponentsStoreProvider\";const gi={Body:function({className:t=\"io-toasts-body\",notifications:n,maxToasts:i=1,...o}){const{NotificationsList:a,Notification:r}=vi(),[l,d]=useState([]);return useEffect((()=>{const e=i<0?n.length:i,t=n.filter((e=>\"Active\"===e.state)).slice(0,e);for(const e of t)e.onShow();d(t);}),[n,i]),jsxRuntimeExports.jsx(\"div\",{className:t,...o,children:jsxRuntimeExports.jsx(a,{Notification:r,notifications:l,noNotificationText:\"\"})})},Notification:si,NotificationsList:ci},pi=createContext(gi),bi=memo((({children:t,components:n})=>{const i=useMemo((()=>({...gi,...n})),[n]);return jsxRuntimeExports.jsx(pi.Provider,{value:i,children:t})}));function vi(e){return {...useContext(pi),...e}}bi.displayName=\"ComponentsStoreProvider\";\n\nconst Search = ({ searchQuery, setSearchQuery, handleSearchQueryChange }) => {\n    return (React.createElement(\"div\", { className: \"column-wrapper\" },\n        React.createElement(y, { icon: \"search\", size: \"24\", className: \"io-btn-icon io-btn-icon-size-24 input-search-icon\" }),\n        React.createElement(X, { placeholder: \"Filter apps\", value: searchQuery, onChange: handleSearchQueryChange }),\n        React.createElement(y, { icon: \"close\", size: \"24\", onClick: () => setSearchQuery(\"\"), className: \"io-btn-icon io-btn-icon-size-24 input-close-icon\" })));\n};\n\nconst InstancesList = ({ filteredHandlers, chosenIntentHandler, handleSelectHandlerClick }) => {\n    const handleListItemClick = (instances) => {\n        if (instances.length > 1) {\n            return;\n        }\n        handleSelectHandlerClick(instances[0]);\n    };\n    const groupInstances = (handlers) => {\n        let groupedInstances = {};\n        handlers.forEach(({ handler }) => {\n            const app = handler.applicationTitle || handler.applicationName;\n            if (groupedInstances[app]?.length) {\n                groupedInstances[app].push(handler);\n                return;\n            }\n            groupedInstances[app] = [handler];\n        });\n        return groupedInstances;\n    };\n    const handleHover = async (handler) => {\n        // implement when hover area and pop up window is ready for io.CD\n    };\n    return (React.createElement(F, { checkIcon: \"check\", variant: \"single\" }, filteredHandlers.instances.length ? (React.createElement(React.Fragment, null,\n        React.createElement(F.ItemSection, null, \"Open apps\"),\n        Object.entries(groupInstances(filteredHandlers.instances)).map(([app, instances]) => (React.createElement(F.Item, { key: app, prepend: instances[0].applicationIcon ? React.createElement(V, { src: instances[0].applicationIcon, alt: \"\" }) : React.createElement(w, { variant: \"application\" }), onClick: () => handleListItemClick(instances), isSelected: instances.length === 1 && chosenIntentHandler?.instanceId === instances[0].instanceId, onMouseEnter: () => {\n                if (instances.length > 1) {\n                    return;\n                }\n                handleHover(instances[0]);\n            }, append: instances.length > 1 ? (React.createElement(L, { variant: \"light\" },\n                React.createElement(L.Button, { variant: \"link\", icon: \"chevron-down\" }, \"App Instances\"),\n                React.createElement(L.Content, null,\n                    React.createElement(F, { checkIcon: \"check\", variant: \"single\" }, instances.map((handler) => (React.createElement(F.Item, { key: handler.instanceId, onClick: () => handleSelectHandlerClick(handler), isSelected: chosenIntentHandler?.instanceId === handler.instanceId, onMouseEnter: () => handleHover() },\n                        handler.applicationTitle || handler.applicationName || handler.instanceId,\n                        \"(\",\n                        handler.instanceId,\n                        \")\"))))))) : null }, app))))) : null));\n};\n\nconst AppsList = ({ filteredHandlers, chosenIntentHandler, handleSelectHandlerClick }) => {\n    return (React.createElement(F, { checkIcon: \"check\", variant: \"single\" }, filteredHandlers.apps.length ? (React.createElement(React.Fragment, null,\n        React.createElement(F.ItemSection, null, \"All Available Apps\"),\n        filteredHandlers.apps.map(({ handler, intent }) => (React.createElement(F.Item, { key: handler.id, prepend: handler.applicationIcon ? React.createElement(V, { src: handler.applicationIcon, alt: \"\" }) : React.createElement(w, { variant: \"application\" }), onClick: () => handleSelectHandlerClick(handler), isSelected: !chosenIntentHandler?.instanceId && chosenIntentHandler?.applicationName === handler.applicationName }, handler.applicationTitle || handler.applicationName))))) : null));\n};\n\nconst CustomIOContext = createContext(null);\nconst useCustomIOContext = () => {\n    const context = useContext(CustomIOContext);\n    if (!context) {\n        throw new Error(`useCustomIOContext must be used within a CustomContextProvider`);\n    }\n    return context;\n};\nconst CustomIOContextProvider = ({ io, children }) => {\n    return React.createElement(CustomIOContext.Provider, { value: io }, children);\n};\n\nconst HandlersView = ({ callerName, intentName, setShowIntentList, handlers }) => {\n    const io = useCustomIOContext();\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const [filteredHandlers, setFilteredHandlers] = useState({ apps: [], instances: [] });\n    const [chosenIntentHandler, setChosenIntentHandler] = useState(undefined);\n    const [saveHandler, setSaveHandler] = useState(false);\n    useEffect(() => {\n        const newFilteredApps = handlers.apps.filter(({ handler, intent }) => {\n            if (!intentName) {\n                return (handler.applicationTitle || handler.applicationName).toLowerCase().includes(searchQuery.toLowerCase());\n            }\n            const sameIntent = intentName && intentName === intent.intent;\n            return sameIntent && (handler.applicationTitle || handler.applicationName).toLowerCase().includes(searchQuery.toLowerCase());\n        });\n        const newFilteredInstances = handlers.instances.filter(({ handler, intent }) => {\n            if (!intentName) {\n                return (handler.applicationTitle || handler.applicationName).toLowerCase().includes(searchQuery.toLowerCase());\n            }\n            const sameIntent = intentName && intentName === intent.intent;\n            return sameIntent && (handler.applicationTitle || handler.applicationName).toLowerCase().includes(searchQuery.toLowerCase());\n        });\n        setFilteredHandlers({ apps: newFilteredApps, instances: newFilteredInstances });\n    }, [searchQuery, handlers]);\n    const handleSelectHandlerClick = (handler) => {\n        if (!chosenIntentHandler) {\n            setChosenIntentHandler(handler);\n            return;\n        }\n        const instanceHandlerId = handler.instanceId;\n        const sameInstanceAsChosenOne = (instanceHandlerId && instanceHandlerId === chosenIntentHandler.instanceId) ||\n            (!instanceHandlerId && !chosenIntentHandler.instanceId && handler.applicationName === chosenIntentHandler.applicationName);\n        setChosenIntentHandler(sameInstanceAsChosenOne ? undefined : handler);\n    };\n    const handleActionClick = () => {\n        if (!chosenIntentHandler) {\n            return;\n        }\n        return io.intents.resolver?.sendResponse(chosenIntentHandler, { saveHandler, intent: intentName });\n    };\n    const handleSearchQueryChange = (e) => {\n        setSearchQuery(e.target.value);\n    };\n    const getListProps = () => {\n        return { intentName, filteredHandlers, chosenIntentHandler, handleSelectHandlerClick };\n    };\n    const getIntentName = () => {\n        if (intentName) {\n            return intentName;\n        }\n        return typeof io.intents.resolver.intent === \"string\" ? io.intents.resolver.intent : io.intents.resolver.intent?.intent;\n    };\n    const getCheckboxLabel = () => {\n        if (!callerName) {\n            return `Always use this app for \"${getIntentName()}\"`;\n        }\n        return `Always use this app for \"${getIntentName()}\" in \"${callerName}`;\n    };\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Search, { searchQuery: searchQuery, setSearchQuery: setSearchQuery, handleSearchQueryChange: handleSearchQueryChange }),\n        React.createElement(\"div\", { className: \"io-intent-list-wrapper\" },\n            React.createElement(InstancesList, { ...getListProps() }),\n            React.createElement(AppsList, { ...getListProps() })),\n        React.createElement(ee, { label: getCheckboxLabel(), onClick: (e) => setSaveHandler(e.target.checked) }),\n        React.createElement(_, { align: \"right\", variant: \"fullwidth\" },\n            io.intents.resolver.handlerFilter ? (React.createElement(B, { text: \"Back\", variant: \"link\", onClick: () => setShowIntentList(true) })) : null,\n            React.createElement(B, { disabled: !chosenIntentHandler, variant: \"primary\", text: \"Action\", onClick: handleActionClick }))));\n};\n\nconst useThemeSync = (io) => {\n    useEffect(() => {\n        let isUnsubscribed = false;\n        const themesApi = io?.themes;\n        if (!themesApi) {\n            return;\n        }\n        const changeTheme = async (theme) => {\n            if (isUnsubscribed) {\n                return;\n            }\n            const htmlElement = document.documentElement;\n            if (htmlElement.classList.contains(theme.name)) {\n                return;\n            }\n            const allThemes = await themesApi.list();\n            htmlElement.classList.remove(...allThemes.map(({ name }) => name));\n            htmlElement.classList.add(theme.name);\n        };\n        themesApi.onChanged(changeTheme);\n        themesApi.getCurrent().then(changeTheme);\n        return () => {\n            isUnsubscribed = true;\n        };\n    }, []);\n};\n\nconst IntentsView = ({ chosenIntentName, handleSelectIntentClick, setShowIntentList, intentsForFilter }) => {\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"div\", { className: \"io-intent-list-wrapper\" },\n            React.createElement(F, { checkIcon: \"check\", variant: \"single\" }, Array.from(new Set(intentsForFilter.map((method) => method.intent))).map((methodName) => (React.createElement(F.Item, { key: methodName, onClick: () => handleSelectIntentClick(methodName), isSelected: methodName === chosenIntentName }, methodName))))),\n        React.createElement(_, { align: \"right\", variant: \"fullwidth\" },\n            React.createElement(B, { disabled: !chosenIntentName, variant: \"primary\", text: \"Next\", onClick: () => setShowIntentList(false) }))));\n};\n\nconst BrowserClientControlMethodName = \"T42.Web.Client.Control\";\nconst DesktopClientControlMethodName = \"T42.Channels.Command\";\n\nconst App = ({ io }) => {\n    window.io = io;\n    const [description, setDescription] = useState(\"\");\n    const [chosenIntentName, setChosenIntentName] = useState(\"\");\n    const [showIntentList, setShowIntentList] = useState(!!io.intents.resolver.handlerFilter);\n    const [callerName, setCallerName] = useState(\"\");\n    const [handlers, setHandlers] = useState({ apps: [], instances: [] });\n    const [intentsForFilter, setIntentsForFilter] = useState([]);\n    useThemeSync(io);\n    useEffect(() => {\n        const setTitleForHandlersFilter = ({ intent, title, contextTypes, resultType }, callerName) => {\n            if (title) {\n                setDescription(title);\n                return;\n            }\n            if (intent) {\n                setDescription(getTitleWithIntent({ intent: chosenIntentName || intent, callerName }));\n                return;\n            }\n            setDescription(getTitleWithHandlerFilter({ contextTypes, resultType }));\n        };\n        const setTitle = () => {\n            const { handlerFilter, intent } = io.intents.resolver;\n            const caller = io.intents.resolver?.caller;\n            const callerNameToShow = caller ? caller.applicationTitle || caller.applicationName || caller.id : \"\";\n            const intentName = chosenIntentName || typeof intent === \"string\" ? intent : intent?.intent || \"\";\n            setCallerName(callerNameToShow);\n            if (handlerFilter) {\n                setTitleForHandlersFilter(handlerFilter, callerNameToShow);\n                return;\n            }\n            const subMessage = callerNameToShow ? `from \"${callerNameToShow}\" ` : \"\";\n            setDescription(`\"${intentName}\" action ${subMessage}is unassigned. Choose an app to perform this action.`);\n        };\n        setTitle();\n    }, [io, chosenIntentName]);\n    useEffect(() => {\n        let unsubOnHandlerAdded;\n        let unsubOnHandlerRemoved;\n        const subscribeOnHandlerAdded = () => {\n            unsubOnHandlerAdded = io.intents.resolver.onHandlerAdded((handler, intent) => {\n                if (showIntentList && intent) {\n                    setIntentsForFilter((methods) => methods.concat([intent]));\n                }\n                if (chosenIntentName && chosenIntentName !== intent?.intent) {\n                    return;\n                }\n                const isInstance = handler.instanceId;\n                const isFirstOpenInstance = handlers.instances.find((intentHandler) => intentHandler.handler.applicationName === handler.applicationName);\n                if (isInstance && isFirstOpenInstance) {\n                    setHandlers((handlers) => ({\n                        apps: handlers.apps,\n                        instances: [\n                            ...handlers.instances,\n                            { handler: { ...handler, id: handler.instanceId }, intent }\n                        ],\n                    }));\n                    return;\n                }\n                const handlerWithId = { ...handler, id: isInstance ? handler.instanceId : handler.applicationName };\n                const updateValue = handler.instanceId ? \"instances\" : \"apps\";\n                setHandlers((handlers) => ({ ...handlers, [updateValue]: [...handlers[updateValue], { handler: handlerWithId, intent }] }));\n            });\n        };\n        const subscribeOnHandlerRemoved = () => {\n            unsubOnHandlerRemoved = io.intents.resolver.onHandlerRemoved((removedHandler, intent) => {\n                if (showIntentList && intent) {\n                    setIntentsForFilter((methods) => methods.filter((method) => (method.displayName || method.intent) !== (intent.displayName || intent.intent)));\n                }\n                if (chosenIntentName && chosenIntentName !== intent?.intent) {\n                    return;\n                }\n                const updateValue = removedHandler.instanceId ? \"instances\" : \"apps\";\n                setHandlers((handlers) => ({\n                    ...handlers,\n                    [updateValue]: handlers[updateValue].filter(({ handler }) => removedHandler.instanceId ? handler.id !== removedHandler.instanceId : handler.applicationName !== removedHandler.applicationName),\n                }));\n            });\n        };\n        subscribeOnHandlerAdded();\n        subscribeOnHandlerRemoved();\n        return () => {\n            unsubOnHandlerAdded();\n            unsubOnHandlerRemoved();\n        };\n    }, [io]);\n    useEffect(() => {\n        const checkSetShowIntentList = async () => {\n            // only use it if 'handlerFilter' is defined \n            if (typeof io.intents.resolver.handlerFilter !== \"object\") {\n                setShowIntentList(false);\n                return;\n            }\n            if (io.intents.resolver.handlerFilter.intent) {\n                setShowIntentList(false);\n                setChosenIntentName(io.intents.resolver.handlerFilter.intent);\n                return;\n            }\n            const globalBrowserNamespace = window.glue42core || window.iobrowser;\n            const methodName = globalBrowserNamespace ? BrowserClientControlMethodName : DesktopClientControlMethodName;\n            const data = globalBrowserNamespace ? { domain: \"system\", operation: \"isFdc3DataWrappingSupported\" } : { command: \"isFdc3DataWrappingSupported\" };\n            try {\n                const res = await io.interop.invoke(methodName, data, { instance: io.interop.instance.instance });\n                const { isSupported } = res.returned;\n                setShowIntentList(isSupported);\n            }\n            catch (error) {\n                setShowIntentList(false);\n            }\n        };\n        checkSetShowIntentList();\n    }, [io]);\n    const handleSelectIntentClick = (name) => {\n        if (!chosenIntentName) {\n            setChosenIntentName(name);\n            return;\n        }\n        setChosenIntentName((currentIntentName) => (currentIntentName === name ? \"\" : name));\n    };\n    const getIntentsViewProps = () => {\n        return { chosenIntentName, handleSelectIntentClick, setShowIntentList, intentsForFilter };\n    };\n    const getHandlersViewProps = () => {\n        return { intentName: chosenIntentName, callerName, setShowIntentList, handlers };\n    };\n    return (React.createElement(CustomIOContextProvider, { io: io },\n        React.createElement(G, null,\n            React.createElement(G.Header, null,\n                React.createElement(N, { text: \"Intents Resolver\", size: \"large\" })),\n            React.createElement(G.Body, null,\n                React.createElement(\"p\", { className: \"io-text-default-lh16\" }, description),\n                showIntentList ? React.createElement(IntentsView, { ...getIntentsViewProps() }) : React.createElement(HandlersView, { ...getHandlersViewProps() })))));\n};\n\nconst AppWithProps = ({ config }) => {\n    if (!config.io) {\n        return React.createElement(AppWithOurIO, null);\n    }\n    validateIO(config.io);\n    appendIOResolverToWindow(config.io);\n    return React.createElement(App, { io: config.io });\n};\nconst AppWithOurIO = () => {\n    const io = useContext(IOConnectContext);\n    if (!io) {\n        throw new Error(\"Couldn't find io. Provide it in props or wrap the component with IOConnectProvider\");\n    }\n    validateIO(io);\n    appendIOResolverToWindow(io);\n    return React.createElement(App, { io: io });\n};\n\nexport { AppWithProps as default };\n//# sourceMappingURL=index.js.map\n","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport { IOConnectProvider } from '@interopio/react-hooks'\r\nimport IOBrowser from \"@interopio/browser\";\r\nimport IODesktop, { IOConnectDesktop } from \"@interopio/desktop\";\r\nimport IOConnectIntentsResolver from '@interopio/intents-resolver-api';\r\nimport IOConnectIntentsResolverUI from \"@interopio/intents-resolver-ui-react\";\r\nimport \"@interopio/intents-resolver-ui-react/styles\";\r\n\r\nconst config = {\r\n  browser: {\r\n    config: {\r\n      libraries: [IOConnectIntentsResolver]\r\n    },\r\n    factory: IOBrowser\r\n  },\r\n  desktop: {\r\n    config: {\r\n      libraries: [IOConnectIntentsResolver],\r\n      appManager: \"full\" as IOConnectDesktop.AppManager.Mode\r\n    },\r\n    factory: IODesktop\r\n  }\r\n} \r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <IOConnectProvider settings={config}>\r\n      <IOConnectIntentsResolverUI config={{}} />\r\n    </IOConnectProvider>\r\n  </React.StrictMode>,\r\n)\r\n"],"names":["l","n","p","q","r","t","u","v","w","x","y","z","A","a","B","C","D","E","b","e","F","G","H","I","J","K","L","M","d","c","k","h","g","f","m","N","O","escape","P","Q","R","S","T","U","V","W","X","react_production_min","reactModule","require$$0","reactJsxRuntime_production_min","jsxRuntimeModule","exports","schedulerModule","aa","ca","require$$1","da","ea","fa","ha","ia","ja","ka","la","ma","oa","pa","qa","ra","sa","ta","ua","va","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","Na","Oa","Pa","Qa","Ra","Sa","Ta","Ua","Va","Wa","Xa","Ya","Za","ab","bb","cb","db","eb","fb","gb","hb","ib","jb","kb","lb","mb","nb","ob","pb","qb","rb","sb","tb","ub","vb","wb","xb","yb","zb","Ab","Bb","Cb","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","Ob","Pb","Qb","Rb","Sb","Tb","Ub","Vb","Wb","Xb","Yb","Zb","$b","ac","bc","cc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","oc","nc","pc","qc","rc","sc","tc","uc","vc","wc","xc","yc","zc","Ac","Bc","Cc","Dc","Ec","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","Rc","Sc","Tc","Uc","Vc","Wc","Xc","Yc","Zc","$c","ad","bd","cd","dd","ed","fd","gd","hd","id","jd","kd","ld","md","nd","od","pd","qd","rd","sd","td","ud","vd","wd","xd","yd","Ad","zd","Bd","Cd","Dd","Ed","Fd","Gd","Hd","Id","Jd","Kd","Ld","Md","Nd","Od","Pd","Qd","Rd","Sd","Td","Ud","Vd","Wd","Xd","Yd","Zd","$d","ae","be","ce","de","ee","fe","ge","he","ie","je","ke","le","me","ne","oe","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","Ae","Be","Ce","De","Ee","Fe","Ge","He","Ie","Je","Ke","Le","Me","Ne","Oe","Pe","Qe","Re","Se","Te","Ue","Ve","We","Xe","Ye","Ze","$e","af","bf","cf","df","ef","ff","gf","hf","jf","kf","lf","mf","nf","of","pf","qf","rf","sf","tf","uf","vf","wf","na","xa","$a","ba","xf","yf","zf","Af","Bf","Cf","Df","Ef","Ff","Gf","Hf","Jf","If","Kf","Lf","Mf","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","zg","Ag","Bg","Cg","Dg","Eg","Fg","Gg","Hg","Ig","Jg","Kg","Lg","Mg","Ng","Og","Pg","Qg","Rg","Sg","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","gh","hh","ih","jh","kh","lh","mh","nh","oh","ph","qh","rh","sh","th","uh","vh","wh","xh","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","Nh","Oh","Ph","Qh","Rh","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","ei","fi","gi","hi","ii","ji","ki","li","mi","ni","oi","pi","qi","ri","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","Ci","Di","Ei","Fi","Gi","Hi","Ii","Ji","Ki","Li","Mi","Ni","Oi","Pi","Qi","Ri","Si","Ti","Ui","Vi","Wi","Xi","Yi","Zi","$i","aj","bj","cj","dj","ej","fj","gj","hj","ij","jj","kj","lj","mj","nj","oj","pj","qj","rj","sj","tj","uj","vj","wj","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Kj","Lj","Mj","Nj","Oj","Pj","Qj","Rj","Sj","Tj","Uj","Vj","Wj","Xj","Yj","Zj","ak","bk","ck","dk","ek","fk","gk","hk","ik","jk","kk","lk","mk","nk","ok","Y","Z","pk","qk","rk","sk","tk","uk","vk","wk","xk","yk","zk","Ak","Bk","Ck","Dk","Ek","Fk","Gk","Hk","Ik","Jk","Kk","Lk","Mk","Nk","Ok","Pk","Qk","Rk","Sk","Tk","Uk","Vk","Wk","Xk","Yk","Zk","$k","al","bl","cl","dl","el","fl","gl","hl","il","jl","kl","ll","ml","nl","ol","pl","ql","rl","sl","tl","ul","vl","reactDom_production_min","checkDCE","err","reactDomModule","ReactPropTypesSecret","ReactPropTypesSecret_1","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","props","propName","componentName","location","propFullName","secret","getShim","ReactPropTypes","propTypesModule","extractErrorMsg","error","errorMessage","useIOConnectInit","settings","onInitError","io","setIOConnect","useState","useEffect","factory","_a","_b","_c","config","_d","_e","_f","factoryResult","_g","_h","_i","_j","IOConnectContext","createContext","IOConnectProvider","memo","children","fallback","glue","React","node","object","defaultConfig","parseConfig","isPlatformInternal","combined","Glue42CoreMessageTypes","webPlatformTransportName","latestFDC3Type","errorChannel","runDecoderWithIOError","decoder","json","ioError","IOError","shouldThrowOriginalError","checkSingleton","ioConnectBrowserNamespace","enterprise","enterpriseConfig","ok$1","result","err$1","asPromise$1","withDefault$1","defaultValue","withException$1","map$1","map2$1","ar","br","mapError$1","andThen$1","__assign$1","s","i","__rest$1","isEqual$1","keys","isJsonArray$1","isJsonObject$1","typeString$1","expectedGot$1","expected","got","printPath$1","paths","path","prependAt$1","newAt","at","rest","Decoder$1","Decoder","decode","_this","value","test","decoders","obj","key","decodeValue_1","err$$1","acc","arr","nth","ds","errors","errorsList","jsonAtPath","fixedValue","mkDecoder","string$1","number$1","boolean$1","anyJson$1","constant$1","object$1","array$1","optional$1","oneOf$1","lazy","connectBrowserAppProps","fdc3v2AppProps","asPromise","withDefault","withException","map","map2","mapError","andThen","__assign","__rest","isEqual","isJsonArray","isJsonObject","typeString","expectedGot","printPath","prependAt","string","number","boolean","anyJson","constant","array","dict","optional","oneOf","nonEmptyStringDecoder$1","nonNegativeNumberDecoder$1","num","intentDefinitionDecoder$1","v2TypeDecoder","v2DetailsDecoder","v2IconDecoder","v2ScreenshotDecoder","v2ListensForIntentDecoder","v2IntentsDecoder","v2UserChannelDecoder","v2AppChannelDecoder","v2InteropDecoder","glue42ApplicationDetailsDecoder","glue42HostManifestsBrowserDecoder","hostManifestsBrowserDecoder","v1DefinitionDecoder","v2LocalizedDefinitionDecoder","v2DefinitionDecoder","allDefinitionsDecoder","parseDecoderErrorToStringMessage","FDC3Service","__publicField","definition","decodeRes","isFdc3","version","userProperties","createOptions","baseApplicationData","ioConnectDefinition","ioDefinitionDecodeRes","fdc3v1Definition","fdc3v2Definition","desktopDefinition","url","parsedManifest","fdc3Intents","fdc3Intent","intentName","intentData","iconDef","baseAppData","hostManifestDefinition","baseApplicationDefinition","details","appConfig","decoders$1","INTENTS_ERRORS","IoC$1","ioc","nonEmptyStringDecoder","nonNegativeNumberDecoder","optionalNonEmptyStringDecoder","libDomainDecoder","windowOperationTypesDecoder","appManagerOperationTypesDecoder","layoutsOperationTypesDecoder","notificationsOperationTypesDecoder","systemOperationTypesDecoder","windowRelativeDirectionDecoder","windowBoundsDecoder","windowOpenSettingsDecoder","openWindowConfigDecoder","windowHelloDecoder","coreWindowDataDecoder","simpleWindowDecoder","helloSuccessDecoder","windowTitleConfigDecoder","focusEventDataDecoder","windowMoveResizeConfigDecoder","windowBoundsResultDecoder","frameWindowBoundsResultDecoder","windowUrlResultDecoder","anyDecoder","boundsDecoder","instanceDataDecoder","applicationDetailsDecoder","intentDefinitionDecoder","applicationDefinitionDecoder","allApplicationDefinitionsDecoder","appRemoveConfigDecoder","appsExportOperationDecoder","applicationDataDecoder","baseApplicationDataDecoder","appDirectoryStateChangeDecoder","appHelloSuccessDecoder","basicInstanceDataDecoder","applicationStartConfigDecoder","layoutTypeDecoder","componentTypeDecoder","windowComponentStateDecoder","windowLayoutComponentDecoder","windowLayoutItemDecoder","groupLayoutItemDecoder","columnLayoutItemDecoder","rowLayoutItemDecoder","workspaceLayoutComponentStateDecoder","workspaceLayoutComponentDecoder","workspaceFrameComponentStateDecoder","workspaceFrameComponentDecoder","glueLayoutDecoder","newLayoutOptionsDecoder","restoreOptionsDecoder","layoutSummaryDecoder","simpleLayoutConfigDecoder","saveLayoutConfigDecoder","renameLayoutConfigDecoder","layoutResultDecoder","updateLayoutMetadataConfigDecoder","restoreLayoutConfigDecoder","getAllLayoutsConfigDecoder","allLayoutsFullConfigDecoder","importModeDecoder","layoutsImportConfigDecoder","allLayoutsSummariesResultDecoder","simpleLayoutResultDecoder","optionalSimpleLayoutResult","setDefaultGlobalConfigDecoder","intentsOperationTypesDecoder","intentHandlerDecoder","intentResolverResponseDecoder","intentDecoder","intentTargetDecoder","intentContextDecoder","intentsDecoder","wrappedIntentsDecoder","intentFilterDecoder","findFilterDecoder","wrappedIntentFilterDecoder","intentRequestDecoder","raiseRequestDecoder","resolverConfigDecoder","raiseIntentRequestDecoder","intentResultDecoder","handlersFilterDecoder","filterHandlersResultDecoder","filterHandlersWithResolverConfigDecoder","AddIntentListenerRequestDecoder","AddIntentListenerDecoder","intentInfoDecoder","getIntentsResultDecoder","channelNameDecoder","channelNames","publishOptionsDecoder","fdc3ContextDecoder","interopActionSettingsDecoder","glue42NotificationActionDecoder","notificationStateDecoder","activeNotificationsCountChangeDecoder","notificationDefinitionDecoder","glue42NotificationOptionsDecoder","notificationSetStateRequestDecoder","channelContextDecoder","removeChannelDataDecoder","channelRestrictionsDecoder","channelRestrictionConfigWithWindowIdDecoder","restrictionConfigDataDecoder","restrictionsDecoder","getRestrictionsDataDecoder","restrictionsConfigDecoder","restrictAllDataDecoder","raiseNotificationDecoder","raiseNotificationResultDecoder","permissionRequestResultDecoder","permissionQueryResultDecoder","notificationEventPayloadDecoder","notificationFilterDecoder","notificationsConfigurationDecoder","notificationsConfigurationProtocolDecoder","strictNotificationsConfigurationProtocolDecoder","platformSaveRequestConfigDecoder","saveRequestClientResponseDecoder","permissionStateResultDecoder","simpleAvailabilityResultDecoder","simpleItemIdDecoder","operationCheckResultDecoder","operationCheckConfigDecoder","workspaceFrameBoundsResultDecoder","themeDecoder","simpleThemeResponseDecoder","allThemesResponseDecoder","selectThemeConfigDecoder","notificationsDataDecoder","simpleNotificationDataDecoder","allNotificationsDataDecoder","simpleNotificationSelectDecoder","getWindowIdsOnChannelDataDecoder","getWindowIdsOnChannelResultDecoder","channelsOperationTypesDecoder","getMyChanelResultDecoder","windowWithChannelFilterDecoder","wrappedWindowWithChannelFilterDecoder","getWindowIdsWithChannelsResultDecoder","startApplicationContextDecoder","startApplicationOptionsDecoder","joinChannelDataDecoder","windowChannelResultDecoder","prefsOperationTypesDecoder","appPreferencesDecoder","basePrefsConfigDecoder","getPrefsResultDecoder","getAllPrefsResultDecoder","changePrefsDataDecoder","prefsHelloSuccessDecoder","clientErrorDataDecoder","operations$9","getDefaultExportFromCjs$1","createRegistry$1","options","_userErrorHandler","callbacks","add","callback","replayArgumentsArr","callbacksForKey","replayArgument","_handleError","allForKey","element","index","execute","argumentsArr","results","exceptionArtifact","errParam","msg","clear","clearKey","lib$1","CallbackRegistryFactory$1","WebWindowModel","_id","_name","_bridge","hasFocus","data","dimension","targetBounds","commandArgs","width","height","top","left","title","ttl","ctx","___io___","context","current","newCtx","wrappedCallback","systemOperations","PromiseWrap","promise","timeoutMilliseconds","timeoutMessage","resolve","reject","promiseActive","timeout","PromisePlus$1","executor","message","WindowsController","coreGlue","api","args","operationName","operation","operationData","name","windowSuccess","projection","windows","isWorkspaceFrame","myWindow","myProjection","currentWindows","focusData","foundProjection","keyToExecute","webWindowProjection","removed","targetTop","targetLeft","targetHeight","targetWidth","moveMethod","resizeMethod","windowId","foundWindow","unsubscribe","addedWindow","eventData","channel","GlueWebPlatformControlName","GlueWebPlatformStreamName","GlueClientControlName","GlueCorePlusThemesStream","GlueBridge","communicationId","controllers","systemId","sub","_","success","pkg","domain","webOptions","operationResult","method","nameMatch","serverMatch","server","unSub","decodeResult","resolutionData","messageData","invocationResult","baseErrorMessage","invocationErrorMessage","operations$8","AppManagerController","appName","channels","startOptions","openResult","app","verifiedName","appData","instances","instance","appIndex","instanceData","application","instIdx","inst","instIdxApps","definitions","mode","parseResult","soFar","responseTimeout","valid","initialChannelId","instancesSoFar","channelsStorageData","foundInstance","InstanceModel","bridge","agm","ApplicationModel","controller","verifiedContext","verifiedOptions","operations$7","LayoutsController","type","layouts","layout","layoutsToImport","validLayout","invocationTimeout","response","onSaveRequestResponse","currentState","amIWorkspaceFrame","newName","operations$6","urlAlphabet$1","nanoid$1","size","NotificationsController","raiseResult","notification","action","verifiedConfig","filter","verifiedFilter","state","actionDef","operations$5","GLUE42_FDC3_INTENTS_METHOD_PREFIX","INTENTS_RESOLVER_INTEROP_PREFIX","INTENTS_RESOLVER_APP_NAME","DEFAULT_RESOLVER_RESPONSE_TIMEOUT","ADDITIONAL_BRIDGE_OPERATION_TIMEOUT","INTENTS_RESOLVER_WIDTH","INTENTS_RESOLVER_HEIGHT","MAX_SET_TIMEOUT_DELAY","DEFAULT_PICK_HANDLER_BY_TIMEOUT","IntentsController","request","validatedIntentRequest","intentRequest","resultFromRememberedHandler","requestWithResolverInfo","isRaiseOperationSupported","methodResponseTimeoutMs","waitResponseTimeout","isSupported","intent","handler","registerPromise","methodName","intentFlag","_initialCallerId","caller","intentFilter","intentFilterObj","promiseToRemove","unregisterPromise","handlerFilter","filterHandlersRequestWithResolverConfig","errorMsg","resultType","contextTypes","applicationNames","existingValidContextTypes","existingValidApplicationNames","prefs","intentPrefs","updatedPrefs","prefsForIntent","rememberedHandler","operations$4","ChannelsController","channelId","channelContext","contextName","__","___","extraData","un","restrictions","channelName","channelContextName","fdc3Type","pathValues","fdc3PropsArr","currentChannel","latest_fdc3_type","fdc3Context","info","windowIds","window","windowIdsWithChannels","windowsWithChannels","sessionStorageData","prevReadAllowed","allChannelNames","allRestrictions","restriction","unsub","prevRestrictions","fdc3DataToPublish","channelData","updaterId","parsedType","latestTypePropName","fdc3Data","operations$3","SystemController","event","environment","base","globalNamespace","globalNamespaceName","globalObj","Notification","extensionConfigDecoder","operations$2","ExtController","unsubDispatcher","unsubChannels","foundHandler","EventsDispatcher$1","namespace","glue42Event","eventName","payload","PreferredConnectionController","coreConfig","transportState","isConnectedToPlatform","transactionId","myCurrentTransportName","transaction","transactionLock","transactionLive","reason","ws","LegacyIntentsHelper","logger","interop","appManagerController","windowsController","findIntentFn","resolverConfig","open","loggerInst","responseMethodName","resolverInstance","target","instanceId","requestObj","startContext","intentPromise","bounds","defaultBounds","myWindowBounds","myWorkspaceBounds","res","rej","callerId","searchedInstance","operations$1","ThemesController","unsubFunc","validation","themeChanged","registryUnsub","SessionStorageController","allData","operations","PrefsController","prefsHelloSuccess","verifiedApp","verifiedData","applications","subscriptionKey","myAppName","IoC","EventsDispatcher","model","applicationInstances","version$1","createFactoryFunction","coreFactoryFunction","userConfig","lib","MetricTypes","getMetricTypeByValue","metric","getTypeByValue","serializeMetric","serializedMetrics","values","innerType","composite","defineNestedComposite","normalizeMetricName","getMetricValueByType","publishNestedComposite","flatten","flat","toFlatten","getHighestState","aggregateDescription","idx","composeMsgForRootStateMetric","system","aggregatedState","merged","highestState","gw3","connection","joinPromise","session","init","repo","resolveReadyPromise","reconnect","defineRootMetricsMsg","replayRepo","replaySystem","createSystem","createMetric","ss","createMetricsMsg","updateSystem","shadowedUpdateMetric","stateObj","rootMetric","metricClone","cloneMetric","updateMetricCore","updateMetric","canUpdate","publishMetricsMsg","Helpers","parent","transport","BaseMetric$1","newValue","BaseMetric","protocol","description","_transport","_description","_repo","_parent","_path","_buildPath","_state","_arrayToString","root","_subSystems","_metrics","subSystem","nameSystem","descriptionSystem","match","_system","setState","stateDescription","stringMetric","_getOrCreateMetric","metricDef","StringMetric","numberMetric","NumberMetric","objectMetric","ObjectMetric","timestampMetric","TimestampMetric","metricObject","expectedType","matching","shadowedMetric","existing","shadowedSystem","separator","getAggregateState","aggState","shadowedSubSystem","Repository$1","rootSystem","useClickStream","clickStream","documentClickHandler","className","urlMetric","appNameMetric","startUrl","NullProtocol$1","PerfTracker$1","initialPublishTimeout","publishInterval","memory","allEntries","jsonfiedEntries","metrics","NullProtocol","Repository","addFAVSupport","initPerf","perfConfig","PerfTracker","reportingSystem","def","featureMetric","featureMetricFunc","commonjsGlobal","getDefaultExportFromCjs","createRegistry","CallbackRegistryFactory","InProcTransport$1","_client","client","_msg","SharedWorkerTransport$1","workerFile","_Utils","Utils","PromiseWrapper$1","time","timers","getAllTimers","timer","timerName","marks","now","startTime","mark","endTime","period","stop","currentTime","diff","timerObj","WebSocketConstructor","WS$1","pw","PromiseWrapper","failed","retryInterval","retriesLeft","retries","seen","wsRequest","status","MessageReplayerImpl$1","specs","spec","refCount","messages","urlAlphabet","nanoid","PromisePlus","WebPlatformTransport$1","identity","bridgeInstanceId","parentCheck","allowedOrigins","messageType","extData","child","source","clientId","typeToValidate","origin","rejection","connectionNotPossibleMsg","myInsideParents","myOutsideParents","uniqueParents","currentWindow","opener","targets","waitForInvocations","invocations","AsyncSequelizer$1","minSequenceInterval","actionResult","domainSession","successMessages","errorMessages","isJoined","tryReconnecting","_latestOptions","_connectionOn","handleConnectionDisconnected","handleConnectionLoggedIn","handleSuccessMessage","handleErrorMessage","sm","requestsMap","join","send","handleJoined","leave","leaveMsg","wasReconnect","onJoined","onLeft","requestId","entry","getNextRequestId","queuedCalls","tag","ignore","qm","successMsg","sendFireAndForget","Connection$1","AsyncSequelizer","InProcTransport","SharedWorkerTransport","WebPlatformTransport","WS","unsubConnectionChanged","unsubOnMessage","switchTargetTransport","verifyPromise","isSwitchSuccess","strMessage","messageHandler","currentServer","authRequest","createTokenReq","handlers","handlerId","connected","MessageReplayerImpl","msgObj","ready","milliseconds","oldToJson","datePrefix","authentication","helloMsg","sendOptions","welcomeMsg","globalDomain","token","promises","glue42gd","order","_Logger","logFn","existingSub","subLogger","level","compareWith","levelIdx","restrictionIdx","loggerName","prefix","date","toPrint","Logger","GW_MESSAGE_CREATE_CONTEXT","GW_MESSAGE_ACTIVITY_CREATED","GW_MESSAGE_ACTIVITY_DESTROYED","GW_MESSAGE_CONTEXT_CREATED","GW_MESSAGE_CONTEXT_ADDED","GW_MESSAGE_SUBSCRIBE_CONTEXT","GW_MESSAGE_SUBSCRIBED_CONTEXT","GW_MESSAGE_UNSUBSCRIBE_CONTEXT","GW_MESSAGE_DESTROY_CONTEXT","GW_MESSAGE_CONTEXT_DESTROYED","GW_MESSAGE_UPDATE_CONTEXT","GW_MESSAGE_CONTEXT_UPDATED","GW_MESSAGE_JOINED_ACTIVITY","ContextMessageReplaySpec","prepareConfig","configuration","ext","nodeStartingContext","startingContextString","define_process_env_default","getConnection","gwConfig","protocolVersion","reconnectInterval","reconnectAttempts","defaultWs","sharedWorker","inproc","webPlatform","pid","region","getApplication","uniqueAppName","replaySpecs","getContexts","uid","getAuth","getLogger","defaultLevel","gdConsoleLevel","windowAsAny","containerApplication","GW3ContextData$1","contextId","isAnnounced","activityId","lodash_clonedeep","module","LARGE_ARRAY_SIZE","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reRegExpChar","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","freeExports","freeModule","moduleExports","addMapEntry","pair","addSetEntry","set","arrayEach","iteratee","length","arrayPush","offset","arrayReduce","accumulator","initAccum","baseTimes","getValue","isHostObject","mapToArray","overArg","func","transform","arg","setToArray","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","funcToString","hasOwnProperty","objectToString","reIsNative","Buffer","Symbol","Uint8Array","getPrototype","objectCreate","propertyIsEnumerable","splice","nativeGetSymbols","nativeIsBuffer","nativeKeys","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","entries","hashClear","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","cache","pairs","arrayLikeKeys","inherited","isArray","isArguments","skipIndexes","isIndex","assignValue","objValue","eq","baseAssign","copyObject","baseClone","isDeep","isFull","customizer","stack","isObject","isArr","initCloneArray","copyArray","getTag","isFunc","isBuffer","cloneBuffer","initCloneObject","copySymbols","initCloneByTag","stacked","getAllKeys","subValue","baseCreate","proto","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","baseIsNative","isMasked","pattern","isFunction","baseKeys","isPrototype","buffer","cloneArrayBuffer","arrayBuffer","cloneDataView","dataView","cloneMap","cloneFunc","cloneRegExp","regexp","cloneSet","cloneSymbol","symbol","cloneTypedArray","typedArray","getSymbols","isKeyable","stubArray","Ctor","ctorString","cloneDeep","other","isArrayLikeObject","isArrayLike","isLength","isObjectLike","stubFalse","lodash_clonedeepExports","applyContextDelta","delta","deepClone","command","deletePath","setValueToPath","added","updated","mergeObjectsProperties","hash","what","withWhat","right","deepEqual","pathArr","isSubset","superObj","subObj","ele","GW3Bridge","contextsDomainInfo","createContextMsg","contextData","GW3ContextData","currentContext","calculatedDelta","gwResponse","pathValue","commands","_r","thisCallbackSubscriptionNumber","subscription","hadCallbacks","clone","oldContext","createdMessageTypes","createdMessageType","contextCreatedMsg","subKey","updatedMessageTypes","updatedMessageType","contextUpdatedMsg","justSeen","updateCallbackIndex","updateCallback","destroyedMessageTypes","destroyedMessageType","destroyedMsg","from","to","fromX","cacheSoFar","ctxName","lastKnownData","ContextsModule$1","promisify","successCallback","errorCallback","rejectAfter","ms","clearTimeoutIfThere","InvokeStatus","Client$1","callProtocolSubscribe","targetServers","stream","successProxy","errorProxy","methodDef","delayStep","delayTillNow","currentServers","retry","streamInfo","methodFilter","filterCopy","serverMethodMap","argumentObj","additionalOptions","methodDefinition","serversMethodMap","errorObj","additionalOptionsCopy","invokePromises","serversMethodPair","invId","invokePromise","invocationMessages","invocationResults","calledWith","all_return_values","invokeMessage","allValues","currentValue","all_errors","allErrors","currError","invResult","interval","localMachine","targetArray","matches","myMatches","serverMethodPair","instanceFilter","instanceDefinition","repoMethod","prop","isMatch","filterValue","repoMethodValue","filterValueEl","matchingServers","resultMethodsObject","methodKey","servers","prev","matchingMethods","ServerSubscription$1","Request$1","requestContext","branch","ServerStreaming$1","rm","Request","ServerSubscription","ServerBranch$1","ServerStream$1","_protocol","_repoMethod","_server","bList","ServerBranch","branchKey","def2","branches","Server$1","serverRepository","streamDef","existingStream","streamMethodDefinition","serverMethod","streamUserObject","ServerStream","wrappedCallbackFunction","resultCallback","resultValue","resultCalled","methodResult","forStream","methodToBeRemoved","filterPredicate","methodsOrStreamsToRemove","methodsToRemove","methodUnregPromises","theFunction","unregisterInProgress","methodToExecute","invocationId","invocationArgs","InstanceWrapper$1","API","resolvedIdentity","hideMethodSystemFlags","ClientRepository$1","peerId","serverId","wrapper","InstanceWrapper","serverEntry","methodId","identifier","that","clientMethodDefinition","unsubscribeFunc","serversWithMethodsToReplay","methodsToReplay","unsubCalled","methods","methodInfo","accepts","returns","allServers","collectionToReplay","item","clientMethods","ServerRepository$1","repoId","SUBSCRIPTION_REQUEST","SUBSCRIPTION_ADDED","SUBSCRIPTION_REMOVED","ServerStreaming2$1","repository","streamingMethod","streamId","publishMessage","postMessage","dropSubscriptionMessage","subscriptionsMap","subscriptionsToClose","drop","subscriptions","allSubscriptions","handlerFunc","subscriptionId","needleBranch","ServerProtocol$1","clientRepository","ServerStreaming","isStreaming","flags","registerMsg","UserSubscription$1","subscriptionData","dataCallback","dataItem","closedCallback","newSub","TimedCache$1","timeoutId","elementIdx","elements","STATUS_AWAITING_ACCEPT","STATUS_SUBSCRIBED","ERR_MSG_SUB_FAILED","ERR_MSG_SUB_REJECTED","ON_CLOSE_MSG_SERVER_INIT","ON_CLOSE_MSG_CLIENT_INIT","ClientStreaming$1","TimedCache","errorResponse","subLocalKey","pendingSub","callArgs","acceptingServer","isFirstResponse","UserSubscription","trackedServersFound","isPrivateData","sendingServerId","receivedStreamData","onDataHandlers","queuedData","expectedNewLength","params","subsInfo","closersCount","closingServerId","closingServer","ClientProtocol$1","ClientStreaming","newPeerId","remoteId","isLocal","serverInfo","removedPeerId","methodIdList","gW3ProtocolFactory","libConfig","readyPromise","ServerProtocol","ClientProtocol","handleReconnect","reconnectionPromises","existingSubscriptions","registeredMethods","handleInitialJoin","Interop$1","ClientRepository","ServerRepository","protocolPromise","Client","Server","MessageBus$1","topic","routingKey","subscription_id","cleaned","obj1","obj2","keysObj1","allMatch","IOConnectCoreFactory","iodesktop","preloadPromise","glueInitTimer","internalConfig","_connection","_interop","_logger","_contexts","_bus","_allowTrace","libs","registerLib","inner","done","setupConnection","initTimer","Connection","authPromise","authConfig","setupLogger","setupMetrics","metricsPublishingEnabledFunc","canUpdateMetric","disableAutoAppSystem","setupInterop","agmConfig","Interop","setupContexts","hasActivities","ContextsModule","replayer","setupBus","MessageBus","setupExternalLibs","externalLibs","setupExternalLib","createCallback","waitForLibs","libsReadyPromises","constructGlueObject","feedbackFunc","feedbackInfo","all","deprecatedDecorator","fn","wrong","proper","agmAny","registerInstanceIfNeeded","RegisterInstanceMethodName","typedError","iOConnectBrowserFactory","windowAny","legacyGlobal","ioGlobal","Utils$1","Logger$1","prepareConfig$1","GW3Bridge$1","promisify$2","ActivityEntity","isNumber","isString","isUndefined","isUndefinedOrNull","isNullOrWhiteSpace","str","isBoolean","some","predicate","ifNotUndefined","doWithIt","promisify$1","ActivityType","ownerWindow","helperWindows","hw","windowType","WindowType","appByWindowTypeGetter","activity","EntityEvent","entitiy","EntityEventContext","eventType","ActivityStatusChangeEventContext","newStatus","oldStatus","EntityEventType","ActivityContextChangedEventContext","ActivityState","ActivityAGM","methodNames","currentWindowMethod","activityServers","potentialTargets","firstElem","win","subscriptionAddedHandler","subscriptionRemovedHandler","parameters","AttachedActivityDescriptor","manager","ownerActivityId","descriptor","nextTick","nodeify","resp","Activity","actType","ownerId","windowTypes","ns","os","act","newActId","oldActId","newAct","originalActivity","allStates","color","callbacksToWait","LogLevel","owner","ActivityWindow","isIndependent","windowGetter","hcWindowId","isVisible","focus","ActivityStatus","gwMmessageError","gwMessageAddActivityTypes","gwMmessageActivityTypesAdded","gwMessageRemoveActivityTypes","gwMessageActivityTypesRemoved","gwMessageActivityCreated","gwMessageActivityDestroyed","gwMessageActivityInitiated","gwMmessageJoinActivity","gwMessageJoinedActivity","gwMessageActivityJoined","gwMessageLeaveActivity","gwMessageActivityLeft","gwNmessageMergeActivities","gwMessageSplitActivities","gwMessageOwnerChanged","gwMessageAddPeerFactories","gwMessagePeerFactoriesAdded","gwMessageRemovePeerFactories","gwMessagePeerFactoriesRemoved","gwMessageCreateActivity","gwMessageCreatePeer","gwMessagePeerRequested","gwMessageReady","gwMessagePeerCreated","gwMessageDestroyActivity","gwMessageDisposePeer","gwMessageDestroyPeer","entity","nameToWindowType","windowName","activityTypeName","toActivityPeerConfig","windowDefinition","activityType","initiateMsg","initMsg","fullReplace","removedKeys","activityWindowId","independent","shouldSendReady","joinPeer","activityWindowType","activityWindowIndependent","activityWindowName","searchParams","maybeName","windowDefinitions","visible","cloneOptions","newActivityInfo","addedMessageType","removedMessageType","mapper","getGetEntityEvent","isAdded","sub1","sub2","getEntityEvent","ent","initiatedMessageType","initiatedMessageFilter","createdMessageFilter","cancelledMessageType","cancelledMessageFilter","createdMessageToPromiseResolution","listenForRecreates","reqId","resolveCreatedPromise","rejectCreatedPromise","createdPromise","initiatedMessageAck","initiatedSubscription","createdSubscription","cancelledSubscription","errorSubscription","dropSubscriptions","msg4","recreated","msg1","msg2","msg3","toReturn","factoryId","peerType","unsubscribeContext","activityCreatedMessage","createdMessage","joinedMessage","joinedId","joinedType","joinedName","ActivityMy","am","announcedWindows","myWin","myActivity","callbackStore","detached","oldAct","ReadyMarker","signalsToWait","EntityObservableCollection","processNew","items","internalEntity","entityAddedHandler","listener","entityAsAny","isActivityDestroy","isWindowClose","oldEntity","ActivityManager","autoAnnounce","dataErr","errCatch","aw","ownerWindowType","helperWindowTypes","ownerDefinition","helperDefinitions","actId","factoryMethod","types","announcementInfo","windowEventHandler","wt","wrappingHandler","found","windowTypeOrConfiguration","invalidKeys","filteredWindowTypeOrConfiguration","relativeToWindow","wid","relativeWindowTypes","tasks","removedKey","updateContext","stateWrapped","descriptors","descriptorAsObjectFromAPI","ActivityManagementAPI","my","ActivityAPI","ActivityModule","activityManager","ShutdownMethodName","OnGDShutdownMethodName","RestartMethodName","GetConfigurationRegionMethodName","SetConfigurationRegionMethodName","GetUserMethodName","GetBranchesMethodName","GetCurrentBranchMethodName","SetCurrentBranchMethodName","GetFunctionalEntitlementMethodName","CanIMethodName","StartApplicationMethodName","StopApplicationMethodName","ActivateApplicationMethodName","ACSExecute","OnEventMethodName","GetApplicationsMethodName","objectValues","objectClone","validate","ApplicationImpl","_appManager","_agm","_configuration","styleAttributes","searchFor","modeIndex","startModeIndex","stopModeIndex","style","waitForAGMInstance","startTimeout","waitForApplicationInstance","waitFunc","acsResult","InstanceImpl","_appName","_activities","_windows","startFailed","activityInstance","agmInstances","idToResolve","AppManagerImpl","_gdMajorVersion","apps","newApps","currentApps","newInstances","currentInstances","EntitlementsImpl","funct","transformFunction","errHandler","snapshot","appManager","OnBranchChangedEvent","OnBranchesModifiedEvent","OnApplicationAddedEvent","OnApplicationRemovedEvent","OnApplicationChangedEvent","OnApplicationReadyEvent","OnApplicationStartedEvent","OnApplicationAgmServerReadyEvent","OnApplicationUpdatedEvent","OnApplicationStoppedEvent","OnApplicationStartFailedEvent","createDataSubscription","entitlements","skipIcons","initiated","resolveFunc","rejectFunc","resultPromise","streamData","events","onApplicationAddedEventArgs","onApplicationStartedEventArgs","hasMyAppInSnapShot","hasMyInstanceInSnapShot","InMemoryStoreCommandMethodName","InMemoryStore","AppManagerFactory","START_ONLY","SKIP_ICONS","FULL","activities","ver","fail","displays","overlap","currentDisplay","primaryDisplay","physicalWidth","physicalHeight","physicalDisplayLeft","physicalDisplayTop","physicalDisplayWidth","physicalDisplayHeight","physicalHOffset","physicalVOffset","centeredPhysicalLeft","centeredPhysicalTop","r1","r2","r1x","r1y","r1xMax","r1yMax","r2x","r2y","r2xMax","r2yMax","xOverlap","yOverlap","T42JumpListAction","JumpListManager","enabled","actions","categoryTitle","catgoryTitle","currentCategory","category","actionCallback","updateAction","groupCallbacksKey","categoryActionCallbacks","accCal","callbackId","callbackAction","cal","jumpListManager","WindowStore","remote","targetWindowState","windowAvailableOnURLChanged","unReady","unRemoved","cleanup","windowStore","JumpListActions","JumpListCategories","cat","JumpList","windowFactory","appManagerGetter","displayAPIGetter","channelsAPIGetter","_registry","getChannels","_mode","_bounds","_url","_title","_context","_frameColor","_focus","_neighbours","_groupId","_isGroupHeaderVisible","_isTabHeaderVisible","_isGroupHibernated","_isGroupVisible","_isTabSelected","_settings","_applicationName","_isVisible","_isSticky","_isCollapsed","_windowState","_tabGroupId","_tabIndex","_frameId","_isLocked","_allowWorkspaceDrop","_group","_frameButtons","_zoomFactor","_placementSettings","_jumpList","close","cbOrOptions","resultWindow","navigate","newUrl","optionsOrCallback","setStyle","styleAsAny","resetButtons","buttons","getButtons","setOnTop","onTop","setSizeConstraints","constraints","getSizeConstraints","setTitle","newTitle","setSticky","isSticky","setAllowWorkspaceDrop","allowWorkspaceDrop","moveResize","addFrameButton","buttonInfo","removeFrameButton","buttonId","activate","maximizeRestore","maximize","restore","minimize","collapse","expand","toggleCollapse","snap","direction","attachTab","tab","opt","errMsg","sourceWindow","attachOptions","detachTab","argsForSend","isDetachRelative","o","setVisible","toBeVisible","center","display","validateCenterArguments","showLoader","loader","hideLoader","lock","unlock","getIcon","setIcon","base64Image","setFrameColor","frameColor","setTabHeaderVisible","toBeTabHeaderVisible","setTabTooltip","tooltip","getTabTooltip","showPopup","createFlydown","setModalState","isModal","zoomIn","zoomOut","setZoomFactor","zoomFactor","showDevTools","capture","captureOptions","flash","suppliedOptions","flashOptions","flashTab","print","printOptions","printToPDF","printToPDFOptions","ungroup","ungroupOptions","unGroupChanged","onGroupChanged","newGroup","oldGroup","place","placementSettings","refresh","ignoreCache","download","opts","configure","getConfiguration","getDockingPlacement","dock","onTitleChanged","onEventCore","onClose","onUrlChanged","onFrameButtonAdded","onFrameButtonRemoved","onFrameButtonClicked","onCollapsed","onExpanded","onMaximized","onMinimized","onNormal","onAttached","onDetached","onVisibilityChanged","onContextUpdated","onLockingChanged","onBoundsChanged","onFocusChanged","onStickyChanged","onFrameColorChanged","onTabHeaderVisibilityChanged","onWindowAttached","onWindowDetached","onTabSelectionChanged","onClosing","callbackWrap","prevent","onRefreshing","onNavigating","onZoomFactorChanged","onPlacementSettingsChanged","onNeighboursChanged","onDockingChanged","replayArguments","goBack","goForward","startDrag","option","showDialog","dialogOptions","handleUpdate","handleTitleChanged","handleUrlChanged","handleVisibilityChanged","handleWindowSettingsChanged","handleContextUpdated","handleWindowClose","handleFrameButtonAdded","frameButton","buttonObj","btn","handleFrameButtonRemoved","frameButtonId","button","handleFrameButtonClicked","handleWindowChangeState","handleFrameIsLockedChanged","isLocked","handleBoundsChanged","handleFocusChanged","isFocused","handleIsStickyChanged","handleFrameColorChanged","handleFrameAttached","tabGroupId","frameId","isTabHeaderVisible","handleCompositionChanged","handleAllowWorkspaceDropChanged","handleGroupHeaderVisibilityChanged","isGroupHeaderVisible","handleTabHeaderVisibilityChanged","handleFrameSelectionChanged","newWindow","prevWindow","selectedWindow","previousWindow","handleAttached","newTabGroupId","newFrameId","tabHeaderVisible","winsToBeNotified","handleWindowAttached","handleDetached","handleWindowDetached","handleZoomFactorChanged","handlePlacementSettingsChanged","copy","displayAPI","handleDockingChanged","handleGroupChanged","getAllTabs","allWindows","w1","w2","mapWindowIdsToWindowObjects","windowIdArr","winId","getNeighboursByDirection","getApplicationName","getWindowInfo","b1","b2","myParentId","getWindowsByTabGroupId","isEmpty","GDExecutor","finishedResolve","urlLoadOptions","stylePromises","wait","toolTip","tabTooltip","buttonsConfig","resolveImmediately","isDone","unsubscribeBoundsChanged","resolveTimeout","unFocusChanged","unClosed","targetWindow","eventKeys","replace","contextWithoutUndefinedValues","reformatedOptions","optionsCopy","fullOptions","zoneIds","cancel","displayId","targetId","cancelCallback","callbackData","responses","defaultResponse","prevented","preventArgs","pArgs","gdWindow","group","isGroup","assignGeneralIfUnassigned","zone","valueFromOptions","zones","areaIds","uns","executed","requested","areHeightsEqual","areWidthsEqual","areLeftsEqual","areTopsEqual","GDEnvironment","wndId","groupId","streamResolve","streamReject","copyOptions","windowInfo","readyResolve","extendedStreamEvent","existingWindow","windowInfoCreatedEvent","windowObjectAndEvents","theWindow","theWindowEvents","windowInfoBoundsChangedEvent","windowInfoUrlChangedEvent","windowInfoTitleChanged","windowInfoIsStickyChangedChanged","windowInfoCompositionChanged","windowInfoFocusChanged","oldTabGroupId","windowObjAndEvents","streamEvent","envDetector","gdMajorVersion","groupFactory","_windowsId","_isHibernatedFlag","addWindow","groupObject","removeWindow","find","_mapToWindowObject","_mapToWindowObjects","handleGroupVisibilityChanged","visibile","handleGroupHibernateChanged","isHibernatedFlag","winObjects","windowObject","_getGroupHeaderVisibility","isHibernated","onHeaderVisibilityChanged","onWindowAdded","onWindowRemoved","groupsFactory","_groups","heardForWindowsCounter","findGroupWrapperByWindow","findGroupByWindow","groupEvents","groupWrapper","create","groupIds","groups","waitForGroup","idOrGroup","list","groupObj","onGroupAdded","getMyGroup","resume","hibernate","onGroupRemoved","onWindowMoved","onHibernated","onResumed","createOrGet","createdGroupWrapper","deleteIfEmpty","currentGroup","moveWindow","fromGroup","toGroup","WindowsFactory","channelsGetter","isReady","env","optionsAsAny","errMessage","windowsForListing","findById","autoArrange","windowAdded","windowRemoved","tabAttached","unsubscribed","tabDetached","onWindowFrameColorChanged","onWindowGotFocus","onWindowLostFocus","onArrangementChanged","onEvent","handleWindowAdded","handleWindowRemoved","LayoutStore","condition","store","SaveContextMethodName","ContextProvider","activitiesGetter","usersCbs","requestResult","autoSaveWindowContext","transformACSLayout","something","initial","convertedValue","LayoutImpl","LayoutsCommandMethod","LayoutsAPIImpl","layoutObject","restoreOptions","layoutType","handleResult","restoredLayouts","skipStreamEvent","streamEventReceived","agmResult","responseHandler","ACSStream","noRetry","subs","layoutsData","isSnapshot","createAndNotifyLayout","layoutData","existingLayout","removedLayouts","removedLayout","changedLayouts","changedLayout","renamedLayouts","renamedLayout","layout1","layout2","restoredLayout","LayoutsFactory","acsStream","T42DisplayCommand","T42DisplayOnEvent","DisplayManager","DisplayCommand","original","decoratedDisplay","workAreaAsAny","T42_ANNOUNCE_METHOD_NAME","interopLib","targetWindowId","switchChannel","setRestrictions","getRestrictionsByWindow","setRestrictionsForAllChannels","getWindowsWithChannels","addOrRemoveChannel","CONTEXT_PREFIX","LATEST_FDC3_TYPE","SharedContextSubscriber","contexts","ChannelsImpl","shared","getWindows","lastUpdate","er","changeSelector","doesChannelExist","intervalId","currentChannelName","restrictionByChannel","factory$4","sharedContexts","setupInteropPromise","CommandMethod","InvokeMethod","RegisterCommand","UnregisterCommand","UnregisterAllCommand","HotkeysImpl","hkToLower","hotkey","factory$3","hotkeys","getLibConfig","defaultMode","trueMode","getModeAsString","appDefaultMode","appDefaultTrueMode","activitiesDefaultMode","activitiesTrueMode","layoutsDefaultMode","layoutsTrueMode","exposeAPI","Glue42Notification","PanelAPI","onStreamEvent","STARTING_INDEX","Notifications","bunchOfPromises","g42notification","attribute","duration","dataAsString","validActions","glueAction","notifications","dataAttribute","gnsNotificationArgs","ThemesConfigurationMethodName","ThemesImpl","theme","factory$2","themes","INTENT_HANDLER_DEFAULT_PROPS","DEFAULT_METHOD_RESPONSE_TIMEOUT_MS","DEFAULT_RAISE_TIMEOUT_MS","DEFAULT_PICK_HANDLER_BY_TIMEOUT_MS","validateIntentHandlerAsResponse","compulsoryKeysExist","validateIntentRequestTarget","validateIntentRequestContext","validateIntentRequestHandler","validateIntentRequestTimeout","validateWaitUserResponseIndefinitely","waitUserResponseIndefinitely","validateHandlerFilter","openResolver","validateResolverResponse","responseObj","isValid","validateIntentRequest","validateIntentHandler","clearNullUndefined","Intents","prefsController","intents","ctToLower","ct","resultTypeToLower","coreRaiseIntentFn","appsWithIntents","intentDef","serverWindowIds","serverWindowId","T42WndGetInfo","isT42WndGetInfoMethodRegistered","windowsInfos","appWithIntents","appIntent","appDefIntent","filteredHandlers","intentsWithInfo","contextType","resolverHandler","registeredIntent","firstFoundAppHandler","firstFoundInstanceHandler","invokeOptions","windowsInfo","subMessage","validResponse","myAppTitle","baseStartContext","gdWin","checkOpen","validIntentsWithInfo","currentHandler","intentWithInfo","prevPrefs","prevIntentsPrefs","prefsToUpdate","FactoryCallInfo","Prefs","unsubscribeFn","Cookies","cookie","factory$1","cookies","callInfo","firstRun","factoryCore","T42GDExecuteMethod","glueConfig","_activity","_displays","_channels","_prefs","_browserEventsDispatcher","createWindows","core","windowsLogger","getLibLogger","debugLog","createActivities","activityLogger","createAppManager","createLayouts","layoutsConfig","lay","createChannels","createHotkeys","hotkeysAPI","createIntents","intentsAPI","createNotifications","notificationsAPI","createDisplaysApi","displaysLogger","createThemes","themesAPI","createPrefs","createCookies","newLogger","loggerConfig","currentLog","glueApi","whatToExpose","shouldSetToWindow","whatToExpose$1","ENTERPRISE_NO_APP_NAME","glueCompulsoryProps","appManagerCompulsoryProps","IntentHandlerDecoder","StartContextIntentDecoder","handlerFilterDecoder","initialCallerDecoder","StartContextDecoder","ResolverIntentHandlerDecoder","validateGlue","glueAPIs","missingAPIs","appManagerProps","missingAppManagerProps","extractDecoderError","decoderError","GlueController","extendedHandler","methodIsRegistered","argsObj","builtInstance","builtIntentInfo","isIntentHandler","builtHandler","invocationRes","globalBrowserNamespace","globalDesktopNamespace","appIntents","intentInfo","handlersForApp","handlersForCurrentIntent","foundApp","serverInstance","winDef","serverInstanceInfo","userHandler","searchedIntent","allIntentHandlers","filterObject","decoderRes","baseErrorMsg","MainController","glueController","unsubFromAppAdded","unsubFromServerMethodAdded","unsubFromAppRemoved","unsubFromServerMethodRemoved","factoryFunction","validateIO","appendIOResolverToWindow","getTitleWithIntent","callerName","getTitleWithHandlerFilter","contextTypesString","jsxRuntime","hasRequiredReactJsxRuntime_production_min","requireReactJsxRuntime_production_min","jsxRuntimeExports","useCallback","useContext","$","useMemo","useRef","forwardRef","mt","et","tt","nt","it","ot","st","rt","lt","dt","ut","ht","pt","yt","kt","St","Ot","Nt","Ct","Bt","At","xt","$t","It","zt","Pt","Ft","Tt","Lt","_t","Dt","Et","Ht","Mt","Jt","Qt","Yt","Kt","Wt","Xt","Zt","en","tn","nn","on","an","sn","rn","cn","ln","dn","hn","mn","gn","pn","bn","vn","wn","yn","kn","Sn","Nn","Cn","Bn","An","xn","$n","In","zn","Pn","Fn","Tn","Ln","_n","Dn","En","Hn","Mn","On","_l","_k","_m","_p","_o","jn","Vn","Rn","Jn","Un","qn","Gn","Qn","Yn","Kn","Wn","Xn","Zn","Search","searchQuery","setSearchQuery","handleSearchQueryChange","InstancesList","chosenIntentHandler","handleSelectHandlerClick","handleListItemClick","groupInstances","groupedInstances","handleHover","AppsList","CustomIOContext","useCustomIOContext","CustomIOContextProvider","HandlersView","setShowIntentList","setFilteredHandlers","setChosenIntentHandler","saveHandler","setSaveHandler","newFilteredApps","newFilteredInstances","instanceHandlerId","sameInstanceAsChosenOne","handleActionClick","getListProps","getIntentName","getCheckboxLabel","useThemeSync","isUnsubscribed","themesApi","changeTheme","htmlElement","allThemes","IntentsView","chosenIntentName","handleSelectIntentClick","intentsForFilter","BrowserClientControlMethodName","DesktopClientControlMethodName","App","setDescription","setChosenIntentName","showIntentList","setCallerName","setHandlers","setIntentsForFilter","setTitleForHandlersFilter","callerNameToShow","unsubOnHandlerAdded","unsubOnHandlerRemoved","subscribeOnHandlerAdded","isInstance","isFirstOpenInstance","intentHandler","handlerWithId","updateValue","subscribeOnHandlerRemoved","removedHandler","currentIntentName","getIntentsViewProps","getHandlersViewProps","AppWithProps","AppWithOurIO","IOConnectIntentsResolver","IOBrowser","IODesktop","ReactDOM","jsx","IOConnectIntentsResolverUI"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}